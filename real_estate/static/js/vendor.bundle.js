(window.webpackJsonp_name_=window.webpackJsonp_name_||[]).push([[0],{0:function(un,cn,t){var hn;!function(t,e){"use strict";"object"==typeof un.exports?un.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(T,t){"use strict";function v(t){return null!=t&&t===t.window}var e=[],I=T.document,r=Object.getPrototypeOf,a=e.slice,y=e.concat,u=e.push,i=e.indexOf,n={},o=n.toString,g=n.hasOwnProperty,s=g.toString,c=s.call(Object),m={},_=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType},h={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var r,i,o=(n=n||I).createElement("script");if(o.text=t,e)for(r in h)(i=e[r]||e.getAttribute&&e.getAttribute(r))&&o.setAttribute(r,i);n.head.appendChild(o).parentNode.removeChild(o)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?n[o.call(t)]||"object":typeof t}var l="3.4.1",S=function(t,e){return new S.fn.init(t,e)},f=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;function p(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!_(t)&&!v(t)&&("array"===n||0===e||"number"==typeof e&&0<e&&e-1 in t)}S.fn=S.prototype={jquery:l,constructor:S,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=S.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return S.each(this,t)},map:function(n){return this.pushStack(S.map(this,function(t,e){return n.call(t,e,t)}))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(0<=n&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:u,sort:e.sort,splice:e.splice},S.extend=S.fn.extend=function(){var t,e,n,r,i,o,s=arguments[0]||{},a=1,u=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[a]||{},a++),"object"==typeof s||_(s)||(s={}),a===u&&(s=this,a--);a<u;a++)if(null!=(t=arguments[a]))for(e in t)r=t[e],"__proto__"!==e&&s!==r&&(c&&r&&(S.isPlainObject(r)||(i=Array.isArray(r)))?(n=s[e],o=i&&!Array.isArray(n)?[]:i||S.isPlainObject(n)?n:{},i=!1,s[e]=S.extend(c,o,r)):void 0!==r&&(s[e]=r));return s},S.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==o.call(t))&&(!(e=r(t))||"function"==typeof(n=g.call(e,"constructor")&&e.constructor)&&s.call(n)===c)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e){b(t,{nonce:e&&e.nonce})},each:function(t,e){var n,r=0;if(p(t))for(n=t.length;r<n&&!1!==e.call(t[r],r,t[r]);r++);else for(r in t)if(!1===e.call(t[r],r,t[r]))break;return t},trim:function(t){return null==t?"":(t+"").replace(f,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(p(Object(t))?S.merge(n,"string"==typeof t?[t]:t):u.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:i.call(e,t,n)},merge:function(t,e){for(var n=+e.length,r=0,i=t.length;r<n;r++)t[i++]=e[r];return t.length=i,t},grep:function(t,e,n){for(var r=[],i=0,o=t.length,s=!n;i<o;i++)!e(t[i],i)!=s&&r.push(t[i]);return r},map:function(t,e,n){var r,i,o=0,s=[];if(p(t))for(r=t.length;o<r;o++)null!=(i=e(t[o],o,n))&&s.push(i);else for(o in t)null!=(i=e(t[o],o,n))&&s.push(i);return y.apply([],s)},guid:1,support:m}),"function"==typeof Symbol&&(S.fn[Symbol.iterator]=e[Symbol.iterator]),S.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(t,e){n["[object "+e+"]"]=e.toLowerCase()});var d=function(n){function l(t,e,n){var r="0x"+e-65536;return r!=r||n?e:r<0?String.fromCharCode(65536+r):String.fromCharCode(r>>10|55296,1023&r|56320)}function i(){E()}var t,p,b,o,s,d,f,v,w,u,c,E,T,a,I,y,h,g,m,S="sizzle"+ +new Date,_=n.document,C=0,r=0,A=ut(),N=ut(),O=ut(),D=ut(),k=function(t,e){return t===e&&(c=!0),0},x={}.hasOwnProperty,e=[],R=e.pop,P=e.push,L=e.push,M=e.slice,F=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n;return-1},j="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",U="[\\x20\\t\\r\\n\\f]",q="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",V="\\["+U+"*("+q+")(?:"+U+"*([*^$|!~]?=)"+U+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+q+"))|)"+U+"*\\]",H=":("+q+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+V+")*)|.*)\\)|)",W=new RegExp(U+"+","g"),B=new RegExp("^"+U+"+|((?:^|[^\\\\])(?:\\\\.)*)"+U+"+$","g"),G=new RegExp("^"+U+"*,"+U+"*"),z=new RegExp("^"+U+"*([>+~]|"+U+")"+U+"*"),K=new RegExp(U+"|>"),Q=new RegExp(H),Y=new RegExp("^"+q+"$"),X={ID:new RegExp("^#("+q+")"),CLASS:new RegExp("^\\.("+q+")"),TAG:new RegExp("^("+q+"|[*])"),ATTR:new RegExp("^"+V),PSEUDO:new RegExp("^"+H),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+U+"*(even|odd|(([+-]|)(\\d*)n|)"+U+"*(?:([+-]|)"+U+"*(\\d+)|))"+U+"*\\)|)","i"),bool:new RegExp("^(?:"+j+")$","i"),needsContext:new RegExp("^"+U+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+U+"*((?:-\\d)?\\d*)"+U+"*\\)|)(?=[^-]|$)","i")},J=/HTML$/i,$=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,tt=/^[^{]+\{\s*\[native \w/,et=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,nt=/[+~]/,rt=new RegExp("\\\\([\\da-f]{1,6}"+U+"?|("+U+")|.)","ig"),it=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ot=function(t,e){return e?"\0"===t?"ï¿½":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t},st=bt(function(t){return!0===t.disabled&&"fieldset"===t.nodeName.toLowerCase()},{dir:"parentNode",next:"legend"});try{L.apply(e=M.call(_.childNodes),_.childNodes),e[_.childNodes.length].nodeType}catch(t){L={apply:e.length?function(t,e){P.apply(t,M.call(e))}:function(t,e){for(var n=t.length,r=0;t[n++]=e[r++];);t.length=n-1}}}function at(e,t,n,r){var i,o,s,a,u,c,h,l=t&&t.ownerDocument,f=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==f&&9!==f&&11!==f)return n;if(!r&&((t?t.ownerDocument||t:_)!==T&&E(t),t=t||T,I)){if(11!==f&&(u=et.exec(e)))if(i=u[1]){if(9===f){if(!(s=t.getElementById(i)))return n;if(s.id===i)return n.push(s),n}else if(l&&(s=l.getElementById(i))&&m(t,s)&&s.id===i)return n.push(s),n}else{if(u[2])return L.apply(n,t.getElementsByTagName(e)),n;if((i=u[3])&&p.getElementsByClassName&&t.getElementsByClassName)return L.apply(n,t.getElementsByClassName(i)),n}if(p.qsa&&!D[e+" "]&&(!y||!y.test(e))&&(1!==f||"object"!==t.nodeName.toLowerCase())){if(h=e,l=t,1===f&&K.test(e)){for((a=t.getAttribute("id"))?a=a.replace(it,ot):t.setAttribute("id",a=S),o=(c=d(e)).length;o--;)c[o]="#"+a+" "+_t(c[o]);h=c.join(","),l=nt.test(e)&&gt(t.parentNode)||t}try{return L.apply(n,l.querySelectorAll(h)),n}catch(t){D(e,!0)}finally{a===S&&t.removeAttribute("id")}}}return v(e.replace(B,"$1"),t,n,r)}function ut(){var r=[];return function t(e,n){return r.push(e+" ")>b.cacheLength&&delete t[r.shift()],t[e+" "]=n}}function ct(t){return t[S]=!0,t}function ht(t){var e=T.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function lt(t,e){for(var n=t.split("|"),r=n.length;r--;)b.attrHandle[n[r]]=e}function ft(t,e){var n=e&&t,r=n&&1===t.nodeType&&1===e.nodeType&&t.sourceIndex-e.sourceIndex;if(r)return r;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function pt(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function dt(n){return function(t){var e=t.nodeName.toLowerCase();return("input"===e||"button"===e)&&t.type===n}}function vt(e){return function(t){return"form"in t?t.parentNode&&!1===t.disabled?"label"in t?"label"in t.parentNode?t.parentNode.disabled===e:t.disabled===e:t.isDisabled===e||t.isDisabled!==!e&&st(t)===e:t.disabled===e:"label"in t&&t.disabled===e}}function yt(s){return ct(function(o){return o=+o,ct(function(t,e){for(var n,r=s([],t.length,o),i=r.length;i--;)t[n=r[i]]&&(t[n]=!(e[n]=t[n]))})})}function gt(t){return t&&void 0!==t.getElementsByTagName&&t}for(t in p=at.support={},s=at.isXML=function(t){var e=t.namespaceURI,n=(t.ownerDocument||t).documentElement;return!J.test(e||n&&n.nodeName||"HTML")},E=at.setDocument=function(t){var e,n,r=t?t.ownerDocument||t:_;return r!==T&&9===r.nodeType&&r.documentElement&&(a=(T=r).documentElement,I=!s(T),_!==T&&(n=T.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",i,!1):n.attachEvent&&n.attachEvent("onunload",i)),p.attributes=ht(function(t){return t.className="i",!t.getAttribute("className")}),p.getElementsByTagName=ht(function(t){return t.appendChild(T.createComment("")),!t.getElementsByTagName("*").length}),p.getElementsByClassName=tt.test(T.getElementsByClassName),p.getById=ht(function(t){return a.appendChild(t).id=S,!T.getElementsByName||!T.getElementsByName(S).length}),p.getById?(b.filter.ID=function(t){var e=t.replace(rt,l);return function(t){return t.getAttribute("id")===e}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&I){var n=e.getElementById(t);return n?[n]:[]}}):(b.filter.ID=function(t){var n=t.replace(rt,l);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===n}},b.find.ID=function(t,e){if(void 0!==e.getElementById&&I){var n,r,i,o=e.getElementById(t);if(o){if((n=o.getAttributeNode("id"))&&n.value===t)return[o];for(i=e.getElementsByName(t),r=0;o=i[r++];)if((n=o.getAttributeNode("id"))&&n.value===t)return[o]}return[]}}),b.find.TAG=p.getElementsByTagName?function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):p.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,r=[],i=0,o=e.getElementsByTagName(t);if("*"!==t)return o;for(;n=o[i++];)1===n.nodeType&&r.push(n);return r},b.find.CLASS=p.getElementsByClassName&&function(t,e){if(void 0!==e.getElementsByClassName&&I)return e.getElementsByClassName(t)},h=[],y=[],(p.qsa=tt.test(T.querySelectorAll))&&(ht(function(t){a.appendChild(t).innerHTML="<a id='"+S+"'></a><select id='"+S+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&y.push("[*^$]="+U+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||y.push("\\["+U+"*(?:value|"+j+")"),t.querySelectorAll("[id~="+S+"-]").length||y.push("~="),t.querySelectorAll(":checked").length||y.push(":checked"),t.querySelectorAll("a#"+S+"+*").length||y.push(".#.+[+~]")}),ht(function(t){t.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=T.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&y.push("name"+U+"*[*^$|!~]?="),2!==t.querySelectorAll(":enabled").length&&y.push(":enabled",":disabled"),a.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&y.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),y.push(",.*:")})),(p.matchesSelector=tt.test(g=a.matches||a.webkitMatchesSelector||a.mozMatchesSelector||a.oMatchesSelector||a.msMatchesSelector))&&ht(function(t){p.disconnectedMatch=g.call(t,"*"),g.call(t,"[s!='']:x"),h.push("!=",H)}),y=y.length&&new RegExp(y.join("|")),h=h.length&&new RegExp(h.join("|")),e=tt.test(a.compareDocumentPosition),m=e||tt.test(a.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,r=e&&e.parentNode;return t===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):t.compareDocumentPosition&&16&t.compareDocumentPosition(r)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},k=e?function(t,e){if(t===e)return c=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!p.sortDetached&&e.compareDocumentPosition(t)===n?t===T||t.ownerDocument===_&&m(_,t)?-1:e===T||e.ownerDocument===_&&m(_,e)?1:u?F(u,t)-F(u,e):0:4&n?-1:1)}:function(t,e){if(t===e)return c=!0,0;var n,r=0,i=t.parentNode,o=e.parentNode,s=[t],a=[e];if(!i||!o)return t===T?-1:e===T?1:i?-1:o?1:u?F(u,t)-F(u,e):0;if(i===o)return ft(t,e);for(n=t;n=n.parentNode;)s.unshift(n);for(n=e;n=n.parentNode;)a.unshift(n);for(;s[r]===a[r];)r++;return r?ft(s[r],a[r]):s[r]===_?-1:a[r]===_?1:0}),T},at.matches=function(t,e){return at(t,null,null,e)},at.matchesSelector=function(t,e){if((t.ownerDocument||t)!==T&&E(t),p.matchesSelector&&I&&!D[e+" "]&&(!h||!h.test(e))&&(!y||!y.test(e)))try{var n=g.call(t,e);if(n||p.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){D(e,!0)}return 0<at(e,T,null,[t]).length},at.contains=function(t,e){return(t.ownerDocument||t)!==T&&E(t),m(t,e)},at.attr=function(t,e){(t.ownerDocument||t)!==T&&E(t);var n=b.attrHandle[e.toLowerCase()],r=n&&x.call(b.attrHandle,e.toLowerCase())?n(t,e,!I):void 0;return void 0!==r?r:p.attributes||!I?t.getAttribute(e):(r=t.getAttributeNode(e))&&r.specified?r.value:null},at.escape=function(t){return(t+"").replace(it,ot)},at.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},at.uniqueSort=function(t){var e,n=[],r=0,i=0;if(c=!p.detectDuplicates,u=!p.sortStable&&t.slice(0),t.sort(k),c){for(;e=t[i++];)e===t[i]&&(r=n.push(i));for(;r--;)t.splice(n[r],1)}return u=null,t},o=at.getText=function(t){var e,n="",r=0,i=t.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=o(t)}else if(3===i||4===i)return t.nodeValue}else for(;e=t[r++];)n+=o(e);return n},(b=at.selectors={cacheLength:50,createPseudo:ct,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(rt,l),t[3]=(t[3]||t[4]||t[5]||"").replace(rt,l),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||at.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&at.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return X.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&Q.test(n)&&(e=d(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(rt,l).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=A[t+" "];return e||(e=new RegExp("(^|"+U+")"+t+"("+U+"|$)"))&&A(t,function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(n,r,i){return function(t){var e=at.attr(t,n);return null==e?"!="===r:!r||(e+="","="===r?e===i:"!="===r?e!==i:"^="===r?i&&0===e.indexOf(i):"*="===r?i&&-1<e.indexOf(i):"$="===r?i&&e.slice(-i.length)===i:"~="===r?-1<(" "+e.replace(W," ")+" ").indexOf(i):"|="===r&&(e===i||e.slice(0,i.length+1)===i+"-"))}},CHILD:function(d,t,e,v,y){var g="nth"!==d.slice(0,3),m="last"!==d.slice(-4),_="of-type"===t;return 1===v&&0===y?function(t){return!!t.parentNode}:function(t,e,n){var r,i,o,s,a,u,c=g!=m?"nextSibling":"previousSibling",h=t.parentNode,l=_&&t.nodeName.toLowerCase(),f=!n&&!_,p=!1;if(h){if(g){for(;c;){for(s=t;s=s[c];)if(_?s.nodeName.toLowerCase()===l:1===s.nodeType)return!1;u=c="only"===d&&!u&&"nextSibling"}return!0}if(u=[m?h.firstChild:h.lastChild],m&&f){for(p=(a=(r=(i=(o=(s=h)[S]||(s[S]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===C&&r[1])&&r[2],s=a&&h.childNodes[a];s=++a&&s&&s[c]||(p=a=0)||u.pop();)if(1===s.nodeType&&++p&&s===t){i[d]=[C,a,p];break}}else if(f&&(p=a=(r=(i=(o=(s=t)[S]||(s[S]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]||[])[0]===C&&r[1]),!1===p)for(;(s=++a&&s&&s[c]||(p=a=0)||u.pop())&&((_?s.nodeName.toLowerCase()!==l:1!==s.nodeType)||!++p||(f&&((i=(o=s[S]||(s[S]={}))[s.uniqueID]||(o[s.uniqueID]={}))[d]=[C,p]),s!==t)););return(p-=y)===v||p%v==0&&0<=p/v}}},PSEUDO:function(t,o){var e,s=b.pseudos[t]||b.setFilters[t.toLowerCase()]||at.error("unsupported pseudo: "+t);return s[S]?s(o):1<s.length?(e=[t,t,"",o],b.setFilters.hasOwnProperty(t.toLowerCase())?ct(function(t,e){for(var n,r=s(t,o),i=r.length;i--;)t[n=F(t,r[i])]=!(e[n]=r[i])}):function(t){return s(t,0,e)}):s}},pseudos:{not:ct(function(t){var r=[],i=[],a=f(t.replace(B,"$1"));return a[S]?ct(function(t,e,n,r){for(var i,o=a(t,null,r,[]),s=t.length;s--;)(i=o[s])&&(t[s]=!(e[s]=i))}):function(t,e,n){return r[0]=t,a(r,null,n,i),r[0]=null,!i.pop()}}),has:ct(function(e){return function(t){return 0<at(e,t).length}}),contains:ct(function(e){return e=e.replace(rt,l),function(t){return-1<(t.textContent||o(t)).indexOf(e)}}),lang:ct(function(n){return Y.test(n||"")||at.error("unsupported lang: "+n),n=n.replace(rt,l).toLowerCase(),function(t){var e;do{if(e=I?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(e=e.toLowerCase())===n||0===e.indexOf(n+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var e=n.location&&n.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===a},focus:function(t){return t===T.activeElement&&(!T.hasFocus||T.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:vt(!1),disabled:vt(!0),checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!b.pseudos.empty(t)},header:function(t){return Z.test(t.nodeName)},input:function(t){return $.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:yt(function(){return[0]}),last:yt(function(t,e){return[e-1]}),eq:yt(function(t,e,n){return[n<0?n+e:n]}),even:yt(function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t}),odd:yt(function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t}),lt:yt(function(t,e,n){for(var r=n<0?n+e:e<n?e:n;0<=--r;)t.push(r);return t}),gt:yt(function(t,e,n){for(var r=n<0?n+e:n;++r<e;)t.push(r);return t})}}).pseudos.nth=b.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})b.pseudos[t]=pt(t);for(t in{submit:!0,reset:!0})b.pseudos[t]=dt(t);function mt(){}function _t(t){for(var e=0,n=t.length,r="";e<n;e++)r+=t[e].value;return r}function bt(a,t,e){var u=t.dir,c=t.next,h=c||u,l=e&&"parentNode"===h,f=r++;return t.first?function(t,e,n){for(;t=t[u];)if(1===t.nodeType||l)return a(t,e,n);return!1}:function(t,e,n){var r,i,o,s=[C,f];if(n){for(;t=t[u];)if((1===t.nodeType||l)&&a(t,e,n))return!0}else for(;t=t[u];)if(1===t.nodeType||l)if(i=(o=t[S]||(t[S]={}))[t.uniqueID]||(o[t.uniqueID]={}),c&&c===t.nodeName.toLowerCase())t=t[u]||t;else{if((r=i[h])&&r[0]===C&&r[1]===f)return s[2]=r[2];if((i[h]=s)[2]=a(t,e,n))return!0}return!1}}function wt(i){return 1<i.length?function(t,e,n){for(var r=i.length;r--;)if(!i[r](t,e,n))return!1;return!0}:i[0]}function Et(t,e,n,r,i){for(var o,s=[],a=0,u=t.length,c=null!=e;a<u;a++)(o=t[a])&&(n&&!n(o,r,i)||(s.push(o),c&&e.push(a)));return s}function Tt(p,d,v,y,g,t){return y&&!y[S]&&(y=Tt(y)),g&&!g[S]&&(g=Tt(g,t)),ct(function(t,e,n,r){var i,o,s,a=[],u=[],c=e.length,h=t||function(t,e,n){for(var r=0,i=e.length;r<i;r++)at(t,e[r],n);return n}(d||"*",n.nodeType?[n]:n,[]),l=!p||!t&&d?h:Et(h,a,p,n,r),f=v?g||(t?p:c||y)?[]:e:l;if(v&&v(l,f,n,r),y)for(i=Et(f,u),y(i,[],n,r),o=i.length;o--;)(s=i[o])&&(f[u[o]]=!(l[u[o]]=s));if(t){if(g||p){if(g){for(i=[],o=f.length;o--;)(s=f[o])&&i.push(l[o]=s);g(null,f=[],i,r)}for(o=f.length;o--;)(s=f[o])&&-1<(i=g?F(t,s):a[o])&&(t[i]=!(e[i]=s))}}else f=Et(f===e?f.splice(c,f.length):f),g?g(null,e,f,r):L.apply(e,f)})}function It(t){for(var i,e,n,r=t.length,o=b.relative[t[0].type],s=o||b.relative[" "],a=o?1:0,u=bt(function(t){return t===i},s,!0),c=bt(function(t){return-1<F(i,t)},s,!0),h=[function(t,e,n){var r=!o&&(n||e!==w)||((i=e).nodeType?u:c)(t,e,n);return i=null,r}];a<r;a++)if(e=b.relative[t[a].type])h=[bt(wt(h),e)];else{if((e=b.filter[t[a].type].apply(null,t[a].matches))[S]){for(n=++a;n<r&&!b.relative[t[n].type];n++);return Tt(1<a&&wt(h),1<a&&_t(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(B,"$1"),e,a<n&&It(t.slice(a,n)),n<r&&It(t=t.slice(n)),n<r&&_t(t))}h.push(e)}return wt(h)}function St(y,g){function t(t,e,n,r,i){var o,s,a,u=0,c="0",h=t&&[],l=[],f=w,p=t||_&&b.find.TAG("*",i),d=C+=null==f?1:Math.random()||.1,v=p.length;for(i&&(w=e===T||e||i);c!==v&&null!=(o=p[c]);c++){if(_&&o){for(s=0,e||o.ownerDocument===T||(E(o),n=!I);a=y[s++];)if(a(o,e||T,n)){r.push(o);break}i&&(C=d)}m&&((o=!a&&o)&&u--,t&&h.push(o))}if(u+=c,m&&c!==u){for(s=0;a=g[s++];)a(h,l,e,n);if(t){if(0<u)for(;c--;)h[c]||l[c]||(l[c]=R.call(r));l=Et(l)}L.apply(r,l),i&&!t&&0<l.length&&1<u+g.length&&at.uniqueSort(r)}return i&&(C=d,w=f),h}var m=0<g.length,_=0<y.length;return m?ct(t):t}return mt.prototype=b.filters=b.pseudos,b.setFilters=new mt,d=at.tokenize=function(t,e){var n,r,i,o,s,a,u,c=N[t+" "];if(c)return e?0:c.slice(0);for(s=t,a=[],u=b.preFilter;s;){for(o in n&&!(r=G.exec(s))||(r&&(s=s.slice(r[0].length)||s),a.push(i=[])),n=!1,(r=z.exec(s))&&(n=r.shift(),i.push({value:n,type:r[0].replace(B," ")}),s=s.slice(n.length)),b.filter)!(r=X[o].exec(s))||u[o]&&!(r=u[o](r))||(n=r.shift(),i.push({value:n,type:o,matches:r}),s=s.slice(n.length));if(!n)break}return e?s.length:s?at.error(t):N(t,a).slice(0)},f=at.compile=function(t,e){var n,r=[],i=[],o=O[t+" "];if(!o){for(n=(e=e||d(t)).length;n--;)(o=It(e[n]))[S]?r.push(o):i.push(o);(o=O(t,St(i,r))).selector=t}return o},v=at.select=function(t,e,n,r){var i,o,s,a,u,c="function"==typeof t&&t,h=!r&&d(t=c.selector||t);if(n=n||[],1===h.length){if(2<(o=h[0]=h[0].slice(0)).length&&"ID"===(s=o[0]).type&&9===e.nodeType&&I&&b.relative[o[1].type]){if(!(e=(b.find.ID(s.matches[0].replace(rt,l),e)||[])[0]))return n;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(i=X.needsContext.test(t)?0:o.length;i--&&(s=o[i],!b.relative[a=s.type]);)if((u=b.find[a])&&(r=u(s.matches[0].replace(rt,l),nt.test(o[0].type)&&gt(e.parentNode)||e))){if(o.splice(i,1),!(t=r.length&&_t(o)))return L.apply(n,r),n;break}}return(c||f(t,h))(r,e,!I,n,!e||nt.test(t)&&gt(e.parentNode)||e),n},p.sortStable=S.split("").sort(k).join("")===S,p.detectDuplicates=!!c,E(),p.sortDetached=ht(function(t){return 1&t.compareDocumentPosition(T.createElement("fieldset"))}),ht(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||lt("type|href|height|width",function(t,e,n){if(!n)return t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),p.attributes&&ht(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||lt("value",function(t,e,n){if(!n&&"input"===t.nodeName.toLowerCase())return t.defaultValue}),ht(function(t){return null==t.getAttribute("disabled")})||lt(j,function(t,e,n){var r;if(!n)return!0===t[e]?e.toLowerCase():(r=t.getAttributeNode(e))&&r.specified?r.value:null}),at}(T);S.find=d,S.expr=d.selectors,S.expr[":"]=S.expr.pseudos,S.uniqueSort=S.unique=d.uniqueSort,S.text=d.getText,S.isXMLDoc=d.isXML,S.contains=d.contains,S.escapeSelector=d.escape;function E(t,e,n){for(var r=[],i=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(i&&S(t).is(n))break;r.push(t)}return r}function C(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}var A=S.expr.match.needsContext;function N(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}var O=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function D(t,n,r){return _(n)?S.grep(t,function(t,e){return!!n.call(t,e,t)!==r}):n.nodeType?S.grep(t,function(t){return t===n!==r}):"string"!=typeof n?S.grep(t,function(t){return-1<i.call(n,t)!==r}):S.filter(n,t,r)}S.filter=function(t,e,n){var r=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===r.nodeType?S.find.matchesSelector(r,t)?[r]:[]:S.find.matches(t,S.grep(e,function(t){return 1===t.nodeType}))},S.fn.extend({find:function(t){var e,n,r=this.length,i=this;if("string"!=typeof t)return this.pushStack(S(t).filter(function(){for(e=0;e<r;e++)if(S.contains(i[e],this))return!0}));for(n=this.pushStack([]),e=0;e<r;e++)S.find(t,i[e],n);return 1<r?S.uniqueSort(n):n},filter:function(t){return this.pushStack(D(this,t||[],!1))},not:function(t){return this.pushStack(D(this,t||[],!0))},is:function(t){return!!D(this,"string"==typeof t&&A.test(t)?S(t):t||[],!1).length}});var k,x=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(S.fn.init=function(t,e,n){var r,i;if(!t)return this;if(n=n||k,"string"!=typeof t)return t.nodeType?(this[0]=t,this.length=1,this):_(t)?void 0!==n.ready?n.ready(t):t(S):S.makeArray(t,this);if(!(r="<"===t[0]&&">"===t[t.length-1]&&3<=t.length?[null,t,null]:x.exec(t))||!r[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(r[1]){if(e=e instanceof S?e[0]:e,S.merge(this,S.parseHTML(r[1],e&&e.nodeType?e.ownerDocument||e:I,!0)),O.test(r[1])&&S.isPlainObject(e))for(r in e)_(this[r])?this[r](e[r]):this.attr(r,e[r]);return this}return(i=I.getElementById(r[2]))&&(this[0]=i,this.length=1),this}).prototype=S.fn,k=S(I);var R=/^(?:parents|prev(?:Until|All))/,P={children:!0,contents:!0,next:!0,prev:!0};function L(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}S.fn.extend({has:function(t){var e=S(t,this),n=e.length;return this.filter(function(){for(var t=0;t<n;t++)if(S.contains(this,e[t]))return!0})},closest:function(t,e){var n,r=0,i=this.length,o=[],s="string"!=typeof t&&S(t);if(!A.test(t))for(;r<i;r++)for(n=this[r];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(s?-1<s.index(n):1===n.nodeType&&S.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(1<o.length?S.uniqueSort(o):o)},index:function(t){return t?"string"==typeof t?i.call(S(t),this[0]):i.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(S.uniqueSort(S.merge(this.get(),S(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),S.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return E(t,"parentNode")},parentsUntil:function(t,e,n){return E(t,"parentNode",n)},next:function(t){return L(t,"nextSibling")},prev:function(t){return L(t,"previousSibling")},nextAll:function(t){return E(t,"nextSibling")},prevAll:function(t){return E(t,"previousSibling")},nextUntil:function(t,e,n){return E(t,"nextSibling",n)},prevUntil:function(t,e,n){return E(t,"previousSibling",n)},siblings:function(t){return C((t.parentNode||{}).firstChild,t)},children:function(t){return C(t.firstChild)},contents:function(t){return void 0!==t.contentDocument?t.contentDocument:(N(t,"template")&&(t=t.content||t),S.merge([],t.childNodes))}},function(r,i){S.fn[r]=function(t,e){var n=S.map(this,i,t);return"Until"!==r.slice(-5)&&(e=t),e&&"string"==typeof e&&(n=S.filter(e,n)),1<this.length&&(P[r]||S.uniqueSort(n),R.test(r)&&n.reverse()),this.pushStack(n)}});var M=/[^\x20\t\r\n\f]+/g;function F(t){return t}function j(t){throw t}function U(t,e,n,r){var i;try{t&&_(i=t.promise)?i.call(t).done(e).fail(n):t&&_(i=t.then)?i.call(t,e,n):e.apply(void 0,[t].slice(r))}catch(t){n.apply(void 0,[t])}}S.Callbacks=function(r){var t,n;r="string"==typeof r?(t=r,n={},S.each(t.match(M)||[],function(t,e){n[e]=!0}),n):S.extend({},r);function i(){for(a=a||r.once,s=o=!0;c.length;h=-1)for(e=c.shift();++h<u.length;)!1===u[h].apply(e[0],e[1])&&r.stopOnFalse&&(h=u.length,e=!1);r.memory||(e=!1),o=!1,a&&(u=e?[]:"")}var o,e,s,a,u=[],c=[],h=-1,l={add:function(){return u&&(e&&!o&&(h=u.length-1,c.push(e)),function n(t){S.each(t,function(t,e){_(e)?r.unique&&l.has(e)||u.push(e):e&&e.length&&"string"!==w(e)&&n(e)})}(arguments),e&&!o&&i()),this},remove:function(){return S.each(arguments,function(t,e){for(var n;-1<(n=S.inArray(e,u,n));)u.splice(n,1),n<=h&&h--}),this},has:function(t){return t?-1<S.inArray(t,u):0<u.length},empty:function(){return u=u&&[],this},disable:function(){return a=c=[],u=e="",this},disabled:function(){return!u},lock:function(){return a=c=[],e||o||(u=e=""),this},locked:function(){return!!a},fireWith:function(t,e){return a||(e=[t,(e=e||[]).slice?e.slice():e],c.push(e),o||i()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!s}};return l},S.extend({Deferred:function(t){var o=[["notify","progress",S.Callbacks("memory"),S.Callbacks("memory"),2],["resolve","done",S.Callbacks("once memory"),S.Callbacks("once memory"),0,"resolved"],["reject","fail",S.Callbacks("once memory"),S.Callbacks("once memory"),1,"rejected"]],i="pending",s={state:function(){return i},always:function(){return a.done(arguments).fail(arguments),this},catch:function(t){return s.then(null,t)},pipe:function(){var i=arguments;return S.Deferred(function(r){S.each(o,function(t,e){var n=_(i[e[4]])&&i[e[4]];a[e[1]](function(){var t=n&&n.apply(this,arguments);t&&_(t.promise)?t.promise().progress(r.notify).done(r.resolve).fail(r.reject):r[e[0]+"With"](this,n?[t]:arguments)})}),i=null}).promise()},then:function(e,n,r){var u=0;function c(i,o,s,a){return function(){function t(){var t,e;if(!(i<u)){if((t=s.apply(n,r))===o.promise())throw new TypeError("Thenable self-resolution");e=t&&("object"==typeof t||"function"==typeof t)&&t.then,_(e)?a?e.call(t,c(u,o,F,a),c(u,o,j,a)):(u++,e.call(t,c(u,o,F,a),c(u,o,j,a),c(u,o,F,o.notifyWith))):(s!==F&&(n=void 0,r=[t]),(a||o.resolveWith)(n,r))}}var n=this,r=arguments,e=a?t:function(){try{t()}catch(t){S.Deferred.exceptionHook&&S.Deferred.exceptionHook(t,e.stackTrace),u<=i+1&&(s!==j&&(n=void 0,r=[t]),o.rejectWith(n,r))}};i?e():(S.Deferred.getStackHook&&(e.stackTrace=S.Deferred.getStackHook()),T.setTimeout(e))}}return S.Deferred(function(t){o[0][3].add(c(0,t,_(r)?r:F,t.notifyWith)),o[1][3].add(c(0,t,_(e)?e:F)),o[2][3].add(c(0,t,_(n)?n:j))}).promise()},promise:function(t){return null!=t?S.extend(t,s):s}},a={};return S.each(o,function(t,e){var n=e[2],r=e[5];s[e[1]]=n.add,r&&n.add(function(){i=r},o[3-t][2].disable,o[3-t][3].disable,o[0][2].lock,o[0][3].lock),n.add(e[3].fire),a[e[0]]=function(){return a[e[0]+"With"](this===a?void 0:this,arguments),this},a[e[0]+"With"]=n.fireWith}),s.promise(a),t&&t.call(a,a),a},when:function(t){function e(e){return function(t){i[e]=this,o[e]=1<arguments.length?a.call(arguments):t,--n||s.resolveWith(i,o)}}var n=arguments.length,r=n,i=Array(r),o=a.call(arguments),s=S.Deferred();if(n<=1&&(U(t,s.done(e(r)).resolve,s.reject,!n),"pending"===s.state()||_(o[r]&&o[r].then)))return s.then();for(;r--;)U(o[r],e(r),s.reject);return s.promise()}});var q=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;S.Deferred.exceptionHook=function(t,e){T.console&&T.console.warn&&t&&q.test(t.name)&&T.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},S.readyException=function(t){T.setTimeout(function(){throw t})};var V=S.Deferred();function H(){I.removeEventListener("DOMContentLoaded",H),T.removeEventListener("load",H),S.ready()}S.fn.ready=function(t){return V.then(t).catch(function(t){S.readyException(t)}),this},S.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--S.readyWait:S.isReady)||(S.isReady=!0)!==t&&0<--S.readyWait||V.resolveWith(I,[S])}}),S.ready.then=V.then,"complete"===I.readyState||"loading"!==I.readyState&&!I.documentElement.doScroll?T.setTimeout(S.ready):(I.addEventListener("DOMContentLoaded",H),T.addEventListener("load",H));var W=function(t,e,n,r,i,o,s){var a=0,u=t.length,c=null==n;if("object"===w(n))for(a in i=!0,n)W(t,e,a,n[a],!0,o,s);else if(void 0!==r&&(i=!0,_(r)||(s=!0),c&&(e=s?(e.call(t,r),null):(c=e,function(t,e,n){return c.call(S(t),n)})),e))for(;a<u;a++)e(t[a],n,s?r:r.call(t[a],a,e(t[a],n)));return i?t:c?e.call(t):u?e(t[0],n):o},B=/^-ms-/,G=/-([a-z])/g;function z(t,e){return e.toUpperCase()}function K(t){return t.replace(B,"ms-").replace(G,z)}function Q(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType}function Y(){this.expando=S.expando+Y.uid++}Y.uid=1,Y.prototype={cache:function(t){var e=t[this.expando];return e||(e={},Q(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var r,i=this.cache(t);if("string"==typeof e)i[K(e)]=n;else for(r in e)i[K(r)]=e[r];return i},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][K(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,r=t[this.expando];if(void 0!==r){if(void 0!==e){n=(e=Array.isArray(e)?e.map(K):(e=K(e))in r?[e]:e.match(M)||[]).length;for(;n--;)delete r[e[n]]}void 0!==e&&!S.isEmptyObject(r)||(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!S.isEmptyObject(e)}};var X=new Y,J=new Y,$=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Z=/[A-Z]/g;function tt(t,e,n){var r,i;if(void 0===n&&1===t.nodeType)if(r="data-"+e.replace(Z,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(r))){try{n="true"===(i=n)||"false"!==i&&("null"===i?null:i===+i+""?+i:$.test(i)?JSON.parse(i):i)}catch(t){}J.set(t,e,n)}else n=void 0;return n}S.extend({hasData:function(t){return J.hasData(t)||X.hasData(t)},data:function(t,e,n){return J.access(t,e,n)},removeData:function(t,e){J.remove(t,e)},_data:function(t,e,n){return X.access(t,e,n)},_removeData:function(t,e){X.remove(t,e)}}),S.fn.extend({data:function(n,t){var e,r,i,o=this[0],s=o&&o.attributes;if(void 0!==n)return"object"==typeof n?this.each(function(){J.set(this,n)}):W(this,function(t){var e;if(o&&void 0===t)return void 0!==(e=J.get(o,n))||void 0!==(e=tt(o,n))?e:void 0;this.each(function(){J.set(this,n,t)})},null,t,1<arguments.length,null,!0);if(this.length&&(i=J.get(o),1===o.nodeType&&!X.get(o,"hasDataAttrs"))){for(e=s.length;e--;)s[e]&&0===(r=s[e].name).indexOf("data-")&&(r=K(r.slice(5)),tt(o,r,i[r]));X.set(o,"hasDataAttrs",!0)}return i},removeData:function(t){return this.each(function(){J.remove(this,t)})}}),S.extend({queue:function(t,e,n){var r;if(t)return e=(e||"fx")+"queue",r=X.get(t,e),n&&(!r||Array.isArray(n)?r=X.access(t,e,S.makeArray(n)):r.push(n)),r||[]},dequeue:function(t,e){e=e||"fx";var n=S.queue(t,e),r=n.length,i=n.shift(),o=S._queueHooks(t,e);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===e&&n.unshift("inprogress"),delete o.stop,i.call(t,function(){S.dequeue(t,e)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return X.get(t,n)||X.access(t,n,{empty:S.Callbacks("once memory").add(function(){X.remove(t,[e+"queue",n])})})}}),S.fn.extend({queue:function(e,n){var t=2;return"string"!=typeof e&&(n=e,e="fx",t--),arguments.length<t?S.queue(this[0],e):void 0===n?this:this.each(function(){var t=S.queue(this,e,n);S._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&S.dequeue(this,e)})},dequeue:function(t){return this.each(function(){S.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){function n(){--i||o.resolveWith(s,[s])}var r,i=1,o=S.Deferred(),s=this,a=this.length;for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)(r=X.get(s[a],t+"queueHooks"))&&r.empty&&(i++,r.empty.add(n));return n(),o.promise(e)}});var et=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,nt=new RegExp("^(?:([+-])=|)("+et+")([a-z%]*)$","i"),rt=["Top","Right","Bottom","Left"],it=I.documentElement,ot=function(t){return S.contains(t.ownerDocument,t)},st={composed:!0};it.getRootNode&&(ot=function(t){return S.contains(t.ownerDocument,t)||t.getRootNode(st)===t.ownerDocument});function at(t,e,n,r){var i,o,s={};for(o in e)s[o]=t.style[o],t.style[o]=e[o];for(o in i=n.apply(t,r||[]),e)t.style[o]=s[o];return i}var ut=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&ot(t)&&"none"===S.css(t,"display")};function ct(t,e,n,r){var i,o,s=20,a=r?function(){return r.cur()}:function(){return S.css(t,e,"")},u=a(),c=n&&n[3]||(S.cssNumber[e]?"":"px"),h=t.nodeType&&(S.cssNumber[e]||"px"!==c&&+u)&&nt.exec(S.css(t,e));if(h&&h[3]!==c){for(u/=2,c=c||h[3],h=+u||1;s--;)S.style(t,e,h+c),(1-o)*(1-(o=a()/u||.5))<=0&&(s=0),h/=o;h*=2,S.style(t,e,h+c),n=n||[]}return n&&(h=+h||+u||0,i=n[1]?h+(n[1]+1)*n[2]:+n[2],r&&(r.unit=c,r.start=h,r.end=i)),i}var ht={};function lt(t,e){for(var n,r,i,o,s,a,u,c=[],h=0,l=t.length;h<l;h++)(r=t[h]).style&&(n=r.style.display,e?("none"===n&&(c[h]=X.get(r,"display")||null,c[h]||(r.style.display="")),""===r.style.display&&ut(r)&&(c[h]=(u=s=o=void 0,s=(i=r).ownerDocument,a=i.nodeName,(u=ht[a])||(o=s.body.appendChild(s.createElement(a)),u=S.css(o,"display"),o.parentNode.removeChild(o),"none"===u&&(u="block"),ht[a]=u)))):"none"!==n&&(c[h]="none",X.set(r,"display",n)));for(h=0;h<l;h++)null!=c[h]&&(t[h].style.display=c[h]);return t}S.fn.extend({show:function(){return lt(this,!0)},hide:function(){return lt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){ut(this)?S(this).show():S(this).hide()})}});var ft=/^(?:checkbox|radio)$/i,pt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,dt=/^$|^module$|\/(?:java|ecma)script/i,vt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function yt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&N(t,e)?S.merge([t],n):n}function gt(t,e){for(var n=0,r=t.length;n<r;n++)X.set(t[n],"globalEval",!e||X.get(e[n],"globalEval"))}vt.optgroup=vt.option,vt.tbody=vt.tfoot=vt.colgroup=vt.caption=vt.thead,vt.th=vt.td;var mt,_t,bt=/<|&#?\w+;/;function wt(t,e,n,r,i){for(var o,s,a,u,c,h,l=e.createDocumentFragment(),f=[],p=0,d=t.length;p<d;p++)if((o=t[p])||0===o)if("object"===w(o))S.merge(f,o.nodeType?[o]:o);else if(bt.test(o)){for(s=s||l.appendChild(e.createElement("div")),a=(pt.exec(o)||["",""])[1].toLowerCase(),u=vt[a]||vt._default,s.innerHTML=u[1]+S.htmlPrefilter(o)+u[2],h=u[0];h--;)s=s.lastChild;S.merge(f,s.childNodes),(s=l.firstChild).textContent=""}else f.push(e.createTextNode(o));for(l.textContent="",p=0;o=f[p++];)if(r&&-1<S.inArray(o,r))i&&i.push(o);else if(c=ot(o),s=yt(l.appendChild(o),"script"),c&&gt(s),n)for(h=0;o=s[h++];)dt.test(o.type||"")&&n.push(o);return l}mt=I.createDocumentFragment().appendChild(I.createElement("div")),(_t=I.createElement("input")).setAttribute("type","radio"),_t.setAttribute("checked","checked"),_t.setAttribute("name","t"),mt.appendChild(_t),m.checkClone=mt.cloneNode(!0).cloneNode(!0).lastChild.checked,mt.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!mt.cloneNode(!0).lastChild.defaultValue;var Et=/^key/,Tt=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,It=/^([^.]*)(?:\.(.+)|)/;function St(){return!0}function Ct(){return!1}function At(t,e){return t===function(){try{return I.activeElement}catch(t){}}()==("focus"===e)}function Nt(t,e,n,r,i,o){var s,a;if("object"==typeof e){for(a in"string"!=typeof n&&(r=r||n,n=void 0),e)Nt(t,a,n,r,e[a],o);return t}if(null==r&&null==i?(i=n,r=n=void 0):null==i&&("string"==typeof n?(i=r,r=void 0):(i=r,r=n,n=void 0)),!1===i)i=Ct;else if(!i)return t;return 1===o&&(s=i,(i=function(t){return S().off(t),s.apply(this,arguments)}).guid=s.guid||(s.guid=S.guid++)),t.each(function(){S.event.add(this,e,i,r,n)})}function Ot(t,i,o){o?(X.set(t,i,!1),S.event.add(t,i,{namespace:!1,handler:function(t){var e,n,r=X.get(this,i);if(1&t.isTrigger&&this[i]){if(r.length)(S.event.special[i]||{}).delegateType&&t.stopPropagation();else if(r=a.call(arguments),X.set(this,i,r),e=o(this,i),this[i](),r!==(n=X.get(this,i))||e?X.set(this,i,!1):n={},r!==n)return t.stopImmediatePropagation(),t.preventDefault(),n.value}else r.length&&(X.set(this,i,{value:S.event.trigger(S.extend(r[0],S.Event.prototype),r.slice(1),this)}),t.stopImmediatePropagation())}})):void 0===X.get(t,i)&&S.event.add(t,i,St)}S.event={global:{},add:function(e,t,n,r,i){var o,s,a,u,c,h,l,f,p,d,v,y=X.get(e);if(y)for(n.handler&&(n=(o=n).handler,i=o.selector),i&&S.find.matchesSelector(it,i),n.guid||(n.guid=S.guid++),(u=y.events)||(u=y.events={}),(s=y.handle)||(s=y.handle=function(t){return void 0!==S&&S.event.triggered!==t.type?S.event.dispatch.apply(e,arguments):void 0}),c=(t=(t||"").match(M)||[""]).length;c--;)p=v=(a=It.exec(t[c])||[])[1],d=(a[2]||"").split(".").sort(),p&&(l=S.event.special[p]||{},p=(i?l.delegateType:l.bindType)||p,l=S.event.special[p]||{},h=S.extend({type:p,origType:v,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&S.expr.match.needsContext.test(i),namespace:d.join(".")},o),(f=u[p])||((f=u[p]=[]).delegateCount=0,l.setup&&!1!==l.setup.call(e,r,d,s)||e.addEventListener&&e.addEventListener(p,s)),l.add&&(l.add.call(e,h),h.handler.guid||(h.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,h):f.push(h),S.event.global[p]=!0)},remove:function(t,e,n,r,i){var o,s,a,u,c,h,l,f,p,d,v,y=X.hasData(t)&&X.get(t);if(y&&(u=y.events)){for(c=(e=(e||"").match(M)||[""]).length;c--;)if(p=v=(a=It.exec(e[c])||[])[1],d=(a[2]||"").split(".").sort(),p){for(l=S.event.special[p]||{},f=u[p=(r?l.delegateType:l.bindType)||p]||[],a=a[2]&&new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"),s=o=f.length;o--;)h=f[o],!i&&v!==h.origType||n&&n.guid!==h.guid||a&&!a.test(h.namespace)||r&&r!==h.selector&&("**"!==r||!h.selector)||(f.splice(o,1),h.selector&&f.delegateCount--,l.remove&&l.remove.call(t,h));s&&!f.length&&(l.teardown&&!1!==l.teardown.call(t,d,y.handle)||S.removeEvent(t,p,y.handle),delete u[p])}else for(p in u)S.event.remove(t,p+e[c],n,r,!0);S.isEmptyObject(u)&&X.remove(t,"handle events")}},dispatch:function(t){var e,n,r,i,o,s,a=S.event.fix(t),u=new Array(arguments.length),c=(X.get(this,"events")||{})[a.type]||[],h=S.event.special[a.type]||{};for(u[0]=a,e=1;e<arguments.length;e++)u[e]=arguments[e];if(a.delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,a)){for(s=S.event.handlers.call(this,a,c),e=0;(i=s[e++])&&!a.isPropagationStopped();)for(a.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!a.isImmediatePropagationStopped();)a.rnamespace&&!1!==o.namespace&&!a.rnamespace.test(o.namespace)||(a.handleObj=o,a.data=o.data,void 0!==(r=((S.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,u))&&!1===(a.result=r)&&(a.preventDefault(),a.stopPropagation()));return h.postDispatch&&h.postDispatch.call(this,a),a.result}},handlers:function(t,e){var n,r,i,o,s,a=[],u=e.delegateCount,c=t.target;if(u&&c.nodeType&&!("click"===t.type&&1<=t.button))for(;c!==this;c=c.parentNode||this)if(1===c.nodeType&&("click"!==t.type||!0!==c.disabled)){for(o=[],s={},n=0;n<u;n++)void 0===s[i=(r=e[n]).selector+" "]&&(s[i]=r.needsContext?-1<S(i,this).index(c):S.find(i,this,null,[c]).length),s[i]&&o.push(r);o.length&&a.push({elem:c,handlers:o})}return c=this,u<e.length&&a.push({elem:c,handlers:e.slice(u)}),a},addProp:function(e,t){Object.defineProperty(S.Event.prototype,e,{enumerable:!0,configurable:!0,get:_(t)?function(){if(this.originalEvent)return t(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[e]},set:function(t){Object.defineProperty(this,e,{enumerable:!0,configurable:!0,writable:!0,value:t})}})},fix:function(t){return t[S.expando]?t:new S.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return ft.test(e.type)&&e.click&&N(e,"input")&&Ot(e,"click",St),!1},trigger:function(t){var e=this||t;return ft.test(e.type)&&e.click&&N(e,"input")&&Ot(e,"click"),!0},_default:function(t){var e=t.target;return ft.test(e.type)&&e.click&&N(e,"input")&&X.get(e,"click")||N(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},S.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},S.Event=function(t,e){if(!(this instanceof S.Event))return new S.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?St:Ct,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&S.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[S.expando]=!0},S.Event.prototype={constructor:S.Event,isDefaultPrevented:Ct,isPropagationStopped:Ct,isImmediatePropagationStopped:Ct,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=St,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=St,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=St,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},S.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(t){var e=t.button;return null==t.which&&Et.test(t.type)?null!=t.charCode?t.charCode:t.keyCode:!t.which&&void 0!==e&&Tt.test(t.type)?1&e?1:2&e?3:4&e?2:0:t.which}},S.event.addProp),S.each({focus:"focusin",blur:"focusout"},function(t,e){S.event.special[t]={setup:function(){return Ot(this,t,At),!1},trigger:function(){return Ot(this,t),!0},delegateType:e}}),S.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,i){S.event.special[t]={delegateType:i,bindType:i,handle:function(t){var e,n=t.relatedTarget,r=t.handleObj;return n&&(n===this||S.contains(this,n))||(t.type=r.origType,e=r.handler.apply(this,arguments),t.type=i),e}}}),S.fn.extend({on:function(t,e,n,r){return Nt(this,t,e,n,r)},one:function(t,e,n,r){return Nt(this,t,e,n,r,1)},off:function(t,e,n){var r,i;if(t&&t.preventDefault&&t.handleObj)return r=t.handleObj,S(t.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof t)return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=Ct),this.each(function(){S.event.remove(this,t,n,e)});for(i in t)this.off(i,e,t[i]);return this}});var Dt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,kt=/<script|<style|<link/i,xt=/checked\s*(?:[^=]|=\s*.checked.)/i,Rt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;function Pt(t,e){return N(t,"table")&&N(11!==e.nodeType?e:e.firstChild,"tr")&&S(t).children("tbody")[0]||t}function Lt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Mt(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Ft(t,e){var n,r,i,o,s,a,u,c;if(1===e.nodeType){if(X.hasData(t)&&(o=X.access(t),s=X.set(e,o),c=o.events))for(i in delete s.handle,s.events={},c)for(n=0,r=c[i].length;n<r;n++)S.event.add(e,i,c[i][n]);J.hasData(t)&&(a=J.access(t),u=S.extend({},a),J.set(e,u))}}function jt(n,r,i,o){r=y.apply([],r);var t,e,s,a,u,c,h=0,l=n.length,f=l-1,p=r[0],d=_(p);if(d||1<l&&"string"==typeof p&&!m.checkClone&&xt.test(p))return n.each(function(t){var e=n.eq(t);d&&(r[0]=p.call(this,t,e.html())),jt(e,r,i,o)});if(l&&(e=(t=wt(r,n[0].ownerDocument,!1,n,o)).firstChild,1===t.childNodes.length&&(t=e),e||o)){for(a=(s=S.map(yt(t,"script"),Lt)).length;h<l;h++)u=t,h!==f&&(u=S.clone(u,!0,!0),a&&S.merge(s,yt(u,"script"))),i.call(n[h],u,h);if(a)for(c=s[s.length-1].ownerDocument,S.map(s,Mt),h=0;h<a;h++)u=s[h],dt.test(u.type||"")&&!X.access(u,"globalEval")&&S.contains(c,u)&&(u.src&&"module"!==(u.type||"").toLowerCase()?S._evalUrl&&!u.noModule&&S._evalUrl(u.src,{nonce:u.nonce||u.getAttribute("nonce")}):b(u.textContent.replace(Rt,""),u,c))}return n}function Ut(t,e,n){for(var r,i=e?S.filter(e,t):t,o=0;null!=(r=i[o]);o++)n||1!==r.nodeType||S.cleanData(yt(r)),r.parentNode&&(n&&ot(r)&&gt(yt(r,"script")),r.parentNode.removeChild(r));return t}S.extend({htmlPrefilter:function(t){return t.replace(Dt,"<$1></$2>")},clone:function(t,e,n){var r,i,o,s,a,u,c,h=t.cloneNode(!0),l=ot(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||S.isXMLDoc(t)))for(s=yt(h),r=0,i=(o=yt(t)).length;r<i;r++)a=o[r],u=s[r],"input"===(c=u.nodeName.toLowerCase())&&ft.test(a.type)?u.checked=a.checked:"input"!==c&&"textarea"!==c||(u.defaultValue=a.defaultValue);if(e)if(n)for(o=o||yt(t),s=s||yt(h),r=0,i=o.length;r<i;r++)Ft(o[r],s[r]);else Ft(t,h);return 0<(s=yt(h,"script")).length&&gt(s,!l&&yt(t,"script")),h},cleanData:function(t){for(var e,n,r,i=S.event.special,o=0;void 0!==(n=t[o]);o++)if(Q(n)){if(e=n[X.expando]){if(e.events)for(r in e.events)i[r]?S.event.remove(n,r):S.removeEvent(n,r,e.handle);n[X.expando]=void 0}n[J.expando]&&(n[J.expando]=void 0)}}}),S.fn.extend({detach:function(t){return Ut(this,t,!0)},remove:function(t){return Ut(this,t)},text:function(t){return W(this,function(t){return void 0===t?S.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return jt(this,arguments,function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||Pt(this,t).appendChild(t)})},prepend:function(){return jt(this,arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=Pt(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return jt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return jt(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(S.cleanData(yt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map(function(){return S.clone(this,t,e)})},html:function(t){return W(this,function(t){var e=this[0]||{},n=0,r=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!kt.test(t)&&!vt[(pt.exec(t)||["",""])[1].toLowerCase()]){t=S.htmlPrefilter(t);try{for(;n<r;n++)1===(e=this[n]||{}).nodeType&&(S.cleanData(yt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var n=[];return jt(this,arguments,function(t){var e=this.parentNode;S.inArray(this,n)<0&&(S.cleanData(yt(this)),e&&e.replaceChild(t,this))},n)}}),S.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,s){S.fn[t]=function(t){for(var e,n=[],r=S(t),i=r.length-1,o=0;o<=i;o++)e=o===i?this:this.clone(!0),S(r[o])[s](e),u.apply(n,e.get());return this.pushStack(n)}});var qt,Vt,Ht,Wt,Bt,Gt,zt,Kt=new RegExp("^("+et+")(?!px)[a-z%]+$","i"),Qt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=T),e.getComputedStyle(t)},Yt=new RegExp(rt.join("|"),"i");function Xt(){if(zt){Gt.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",zt.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",it.appendChild(Gt).appendChild(zt);var t=T.getComputedStyle(zt);qt="1%"!==t.top,Bt=12===Jt(t.marginLeft),zt.style.right="60%",Wt=36===Jt(t.right),Vt=36===Jt(t.width),zt.style.position="absolute",Ht=12===Jt(zt.offsetWidth/3),it.removeChild(Gt),zt=null}}function Jt(t){return Math.round(parseFloat(t))}function $t(t,e,n){var r,i,o,s,a=t.style;return(n=n||Qt(t))&&(""!==(s=n.getPropertyValue(e)||n[e])||ot(t)||(s=S.style(t,e)),!m.pixelBoxStyles()&&Kt.test(s)&&Yt.test(e)&&(r=a.width,i=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=s,s=n.width,a.width=r,a.minWidth=i,a.maxWidth=o)),void 0!==s?s+"":s}function Zt(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}Gt=I.createElement("div"),(zt=I.createElement("div")).style&&(zt.style.backgroundClip="content-box",zt.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===zt.style.backgroundClip,S.extend(m,{boxSizingReliable:function(){return Xt(),Vt},pixelBoxStyles:function(){return Xt(),Wt},pixelPosition:function(){return Xt(),qt},reliableMarginLeft:function(){return Xt(),Bt},scrollboxSize:function(){return Xt(),Ht}}));var te=["Webkit","Moz","ms"],ee=I.createElement("div").style,ne={};function re(t){var e=S.cssProps[t]||ne[t];return e||(t in ee?t:ne[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=te.length;n--;)if((t=te[n]+e)in ee)return t}(t)||t)}var ie=/^(none|table(?!-c[ea]).+)/,oe=/^--/,se={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function ue(t,e,n){var r=nt.exec(e);return r?Math.max(0,r[2]-(n||0))+(r[3]||"px"):e}function ce(t,e,n,r,i,o){var s="width"===e?1:0,a=0,u=0;if(n===(r?"border":"content"))return 0;for(;s<4;s+=2)"margin"===n&&(u+=S.css(t,n+rt[s],!0,i)),r?("content"===n&&(u-=S.css(t,"padding"+rt[s],!0,i)),"margin"!==n&&(u-=S.css(t,"border"+rt[s]+"Width",!0,i))):(u+=S.css(t,"padding"+rt[s],!0,i),"padding"!==n?u+=S.css(t,"border"+rt[s]+"Width",!0,i):a+=S.css(t,"border"+rt[s]+"Width",!0,i));return!r&&0<=o&&(u+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-o-u-a-.5))||0),u}function he(t,e,n){var r=Qt(t),i=(!m.boxSizingReliable()||n)&&"border-box"===S.css(t,"boxSizing",!1,r),o=i,s=$t(t,e,r),a="offset"+e[0].toUpperCase()+e.slice(1);if(Kt.test(s)){if(!n)return s;s="auto"}return(!m.boxSizingReliable()&&i||"auto"===s||!parseFloat(s)&&"inline"===S.css(t,"display",!1,r))&&t.getClientRects().length&&(i="border-box"===S.css(t,"boxSizing",!1,r),(o=a in t)&&(s=t[a])),(s=parseFloat(s)||0)+ce(t,e,n||(i?"border":"content"),o,r,s)+"px"}function le(t,e,n,r,i){return new le.prototype.init(t,e,n,r,i)}S.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=$t(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{},style:function(t,e,n,r){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var i,o,s,a=K(e),u=oe.test(e),c=t.style;if(u||(e=re(a)),s=S.cssHooks[e]||S.cssHooks[a],void 0===n)return s&&"get"in s&&void 0!==(i=s.get(t,!1,r))?i:c[e];"string"===(o=typeof n)&&(i=nt.exec(n))&&i[1]&&(n=ct(t,e,i),o="number"),null!=n&&n==n&&("number"!==o||u||(n+=i&&i[3]||(S.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==e.indexOf("background")||(c[e]="inherit"),s&&"set"in s&&void 0===(n=s.set(t,n,r))||(u?c.setProperty(e,n):c[e]=n))}},css:function(t,e,n,r){var i,o,s,a=K(e);return oe.test(e)||(e=re(a)),(s=S.cssHooks[e]||S.cssHooks[a])&&"get"in s&&(i=s.get(t,!0,n)),void 0===i&&(i=$t(t,e,r)),"normal"===i&&e in ae&&(i=ae[e]),""===n||n?(o=parseFloat(i),!0===n||isFinite(o)?o||0:i):i}}),S.each(["height","width"],function(t,u){S.cssHooks[u]={get:function(t,e,n){if(e)return!ie.test(S.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?he(t,u,n):at(t,se,function(){return he(t,u,n)})},set:function(t,e,n){var r,i=Qt(t),o=!m.scrollboxSize()&&"absolute"===i.position,s=(o||n)&&"border-box"===S.css(t,"boxSizing",!1,i),a=n?ce(t,u,n,s,i):0;return s&&o&&(a-=Math.ceil(t["offset"+u[0].toUpperCase()+u.slice(1)]-parseFloat(i[u])-ce(t,u,"border",!1,i)-.5)),a&&(r=nt.exec(e))&&"px"!==(r[3]||"px")&&(t.style[u]=e,e=S.css(t,u)),ue(0,e,a)}}}),S.cssHooks.marginLeft=Zt(m.reliableMarginLeft,function(t,e){if(e)return(parseFloat($t(t,"marginLeft"))||t.getBoundingClientRect().left-at(t,{marginLeft:0},function(){return t.getBoundingClientRect().left}))+"px"}),S.each({margin:"",padding:"",border:"Width"},function(i,o){S.cssHooks[i+o]={expand:function(t){for(var e=0,n={},r="string"==typeof t?t.split(" "):[t];e<4;e++)n[i+rt[e]+o]=r[e]||r[e-2]||r[0];return n}},"margin"!==i&&(S.cssHooks[i+o].set=ue)}),S.fn.extend({css:function(t,e){return W(this,function(t,e,n){var r,i,o={},s=0;if(Array.isArray(e)){for(r=Qt(t),i=e.length;s<i;s++)o[e[s]]=S.css(t,e[s],!1,r);return o}return void 0!==n?S.style(t,e,n):S.css(t,e)},t,e,1<arguments.length)}}),((S.Tween=le).prototype={constructor:le,init:function(t,e,n,r,i,o){this.elem=t,this.prop=n,this.easing=i||S.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=r,this.unit=o||(S.cssNumber[n]?"":"px")},cur:function(){var t=le.propHooks[this.prop];return t&&t.get?t.get(this):le.propHooks._default.get(this)},run:function(t){var e,n=le.propHooks[this.prop];return this.options.duration?this.pos=e=S.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):le.propHooks._default.set(this),this}}).init.prototype=le.prototype,(le.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=S.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){S.fx.step[t.prop]?S.fx.step[t.prop](t):1!==t.elem.nodeType||!S.cssHooks[t.prop]&&null==t.elem.style[re(t.prop)]?t.elem[t.prop]=t.now:S.style(t.elem,t.prop,t.now+t.unit)}}}).scrollTop=le.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},S.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},S.fx=le.prototype.init,S.fx.step={};var fe,pe,de,ve,ye=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;function me(){pe&&(!1===I.hidden&&T.requestAnimationFrame?T.requestAnimationFrame(me):T.setTimeout(me,S.fx.interval),S.fx.tick())}function _e(){return T.setTimeout(function(){fe=void 0}),fe=Date.now()}function be(t,e){var n,r=0,i={height:t};for(e=e?1:0;r<4;r+=2-e)i["margin"+(n=rt[r])]=i["padding"+n]=t;return e&&(i.opacity=i.width=t),i}function we(t,e,n){for(var r,i=(Ee.tweeners[e]||[]).concat(Ee.tweeners["*"]),o=0,s=i.length;o<s;o++)if(r=i[o].call(n,e,t))return r}function Ee(o,t,e){var n,s,r=0,i=Ee.prefilters.length,a=S.Deferred().always(function(){delete u.elem}),u=function(){if(s)return!1;for(var t=fe||_e(),e=Math.max(0,c.startTime+c.duration-t),n=1-(e/c.duration||0),r=0,i=c.tweens.length;r<i;r++)c.tweens[r].run(n);return a.notifyWith(o,[c,n,e]),n<1&&i?e:(i||a.notifyWith(o,[c,1,0]),a.resolveWith(o,[c]),!1)},c=a.promise({elem:o,props:S.extend({},t),opts:S.extend(!0,{specialEasing:{},easing:S.easing._default},e),originalProperties:t,originalOptions:e,startTime:fe||_e(),duration:e.duration,tweens:[],createTween:function(t,e){var n=S.Tween(o,c.opts,t,e,c.opts.specialEasing[t]||c.opts.easing);return c.tweens.push(n),n},stop:function(t){var e=0,n=t?c.tweens.length:0;if(s)return this;for(s=!0;e<n;e++)c.tweens[e].run(1);return t?(a.notifyWith(o,[c,1,0]),a.resolveWith(o,[c,t])):a.rejectWith(o,[c,t]),this}}),h=c.props;for(!function(t,e){var n,r,i,o,s;for(n in t)if(i=e[r=K(n)],o=t[n],Array.isArray(o)&&(i=o[1],o=t[n]=o[0]),n!==r&&(t[r]=o,delete t[n]),(s=S.cssHooks[r])&&"expand"in s)for(n in o=s.expand(o),delete t[r],o)n in t||(t[n]=o[n],e[n]=i);else e[r]=i}(h,c.opts.specialEasing);r<i;r++)if(n=Ee.prefilters[r].call(c,o,h,c.opts))return _(n.stop)&&(S._queueHooks(c.elem,c.opts.queue).stop=n.stop.bind(n)),n;return S.map(h,we,c),_(c.opts.start)&&c.opts.start.call(o,c),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always),S.fx.timer(S.extend(u,{elem:o,anim:c,queue:c.opts.queue})),c}S.Animation=S.extend(Ee,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return ct(n.elem,t,nt.exec(e),n),n}]},tweener:function(t,e){for(var n,r=0,i=(t=_(t)?(e=t,["*"]):t.match(M)).length;r<i;r++)n=t[r],Ee.tweeners[n]=Ee.tweeners[n]||[],Ee.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var r,i,o,s,a,u,c,h,l="width"in e||"height"in e,f=this,p={},d=t.style,v=t.nodeType&&ut(t),y=X.get(t,"fxshow");for(r in n.queue||(null==(s=S._queueHooks(t,"fx")).unqueued&&(s.unqueued=0,a=s.empty.fire,s.empty.fire=function(){s.unqueued||a()}),s.unqueued++,f.always(function(){f.always(function(){s.unqueued--,S.queue(t,"fx").length||s.empty.fire()})})),e)if(i=e[r],ye.test(i)){if(delete e[r],o=o||"toggle"===i,i===(v?"hide":"show")){if("show"!==i||!y||void 0===y[r])continue;v=!0}p[r]=y&&y[r]||S.style(t,r)}if((u=!S.isEmptyObject(e))||!S.isEmptyObject(p))for(r in l&&1===t.nodeType&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],null==(c=y&&y.display)&&(c=X.get(t,"display")),"none"===(h=S.css(t,"display"))&&(c?h=c:(lt([t],!0),c=t.style.display||c,h=S.css(t,"display"),lt([t]))),("inline"===h||"inline-block"===h&&null!=c)&&"none"===S.css(t,"float")&&(u||(f.done(function(){d.display=c}),null==c&&(h=d.display,c="none"===h?"":h)),d.display="inline-block")),n.overflow&&(d.overflow="hidden",f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),u=!1,p)u||(y?"hidden"in y&&(v=y.hidden):y=X.access(t,"fxshow",{display:c}),o&&(y.hidden=!v),v&&lt([t],!0),f.done(function(){for(r in v||lt([t]),X.remove(t,"fxshow"),p)S.style(t,r,p[r])})),u=we(v?y[r]:0,r,f),r in y||(y[r]=u.start,v&&(u.end=u.start,u.start=0))}],prefilter:function(t,e){e?Ee.prefilters.unshift(t):Ee.prefilters.push(t)}}),S.speed=function(t,e,n){var r=t&&"object"==typeof t?S.extend({},t):{complete:n||!n&&e||_(t)&&t,duration:t,easing:n&&e||e&&!_(e)&&e};return S.fx.off?r.duration=0:"number"!=typeof r.duration&&(r.duration in S.fx.speeds?r.duration=S.fx.speeds[r.duration]:r.duration=S.fx.speeds._default),null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){_(r.old)&&r.old.call(this),r.queue&&S.dequeue(this,r.queue)},r},S.fn.extend({fadeTo:function(t,e,n,r){return this.filter(ut).css("opacity",0).show().end().animate({opacity:e},t,n,r)},animate:function(e,t,n,r){function i(){var t=Ee(this,S.extend({},e),s);(o||X.get(this,"finish"))&&t.stop(!0)}var o=S.isEmptyObject(e),s=S.speed(t,n,r);return i.finish=i,o||!1===s.queue?this.each(i):this.queue(s.queue,i)},stop:function(i,t,o){function s(t){var e=t.stop;delete t.stop,e(o)}return"string"!=typeof i&&(o=t,t=i,i=void 0),t&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var t=!0,e=null!=i&&i+"queueHooks",n=S.timers,r=X.get(this);if(e)r[e]&&r[e].stop&&s(r[e]);else for(e in r)r[e]&&r[e].stop&&ge.test(e)&&s(r[e]);for(e=n.length;e--;)n[e].elem!==this||null!=i&&n[e].queue!==i||(n[e].anim.stop(o),t=!1,n.splice(e,1));!t&&o||S.dequeue(this,i)})},finish:function(s){return!1!==s&&(s=s||"fx"),this.each(function(){var t,e=X.get(this),n=e[s+"queue"],r=e[s+"queueHooks"],i=S.timers,o=n?n.length:0;for(e.finish=!0,S.queue(this,s,[]),r&&r.stop&&r.stop.call(this,!0),t=i.length;t--;)i[t].elem===this&&i[t].queue===s&&(i[t].anim.stop(!0),i.splice(t,1));for(t=0;t<o;t++)n[t]&&n[t].finish&&n[t].finish.call(this);delete e.finish})}}),S.each(["toggle","show","hide"],function(t,r){var i=S.fn[r];S.fn[r]=function(t,e,n){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(be(r,!0),t,e,n)}}),S.each({slideDown:be("show"),slideUp:be("hide"),slideToggle:be("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,r){S.fn[t]=function(t,e,n){return this.animate(r,t,e,n)}}),S.timers=[],S.fx.tick=function(){var t,e=0,n=S.timers;for(fe=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||S.fx.stop(),fe=void 0},S.fx.timer=function(t){S.timers.push(t),S.fx.start()},S.fx.interval=13,S.fx.start=function(){pe||(pe=!0,me())},S.fx.stop=function(){pe=null},S.fx.speeds={slow:600,fast:200,_default:400},S.fn.delay=function(r,t){return r=S.fx&&S.fx.speeds[r]||r,t=t||"fx",this.queue(t,function(t,e){var n=T.setTimeout(t,r);e.stop=function(){T.clearTimeout(n)}})},de=I.createElement("input"),ve=I.createElement("select").appendChild(I.createElement("option")),de.type="checkbox",m.checkOn=""!==de.value,m.optSelected=ve.selected,(de=I.createElement("input")).value="t",de.type="radio",m.radioValue="t"===de.value;var Te,Ie=S.expr.attrHandle;S.fn.extend({attr:function(t,e){return W(this,S.attr,t,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){S.removeAttr(this,t)})}}),S.extend({attr:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return void 0===t.getAttribute?S.prop(t,e,n):(1===o&&S.isXMLDoc(t)||(i=S.attrHooks[e.toLowerCase()]||(S.expr.match.bool.test(e)?Te:void 0)),void 0!==n?null===n?void S.removeAttr(t,e):i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):i&&"get"in i&&null!==(r=i.get(t,e))?r:null==(r=S.find.attr(t,e))?void 0:r)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&N(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,r=0,i=e&&e.match(M);if(i&&1===t.nodeType)for(;n=i[r++];)t.removeAttribute(n)}}),Te={set:function(t,e,n){return!1===e?S.removeAttr(t,n):t.setAttribute(n,n),n}},S.each(S.expr.match.bool.source.match(/\w+/g),function(t,e){var s=Ie[e]||S.find.attr;Ie[e]=function(t,e,n){var r,i,o=e.toLowerCase();return n||(i=Ie[o],Ie[o]=r,r=null!=s(t,e,n)?o:null,Ie[o]=i),r}});var Se=/^(?:input|select|textarea|button)$/i,Ce=/^(?:a|area)$/i;function Ae(t){return(t.match(M)||[]).join(" ")}function Ne(t){return t.getAttribute&&t.getAttribute("class")||""}function Oe(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(M)||[]}S.fn.extend({prop:function(t,e){return W(this,S.prop,t,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[S.propFix[t]||t]})}}),S.extend({prop:function(t,e,n){var r,i,o=t.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&S.isXMLDoc(t)||(e=S.propFix[e]||e,i=S.propHooks[e]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:t[e]=n:i&&"get"in i&&null!==(r=i.get(t,e))?r:t[e]},propHooks:{tabIndex:{get:function(t){var e=S.find.attr(t,"tabindex");return e?parseInt(e,10):Se.test(t.nodeName)||Ce.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(S.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),S.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){S.propFix[this.toLowerCase()]=this}),S.fn.extend({addClass:function(e){var t,n,r,i,o,s,a,u=0;if(_(e))return this.each(function(t){S(this).addClass(e.call(this,t,Ne(this)))});if((t=Oe(e)).length)for(;n=this[u++];)if(i=Ne(n),r=1===n.nodeType&&" "+Ae(i)+" "){for(s=0;o=t[s++];)r.indexOf(" "+o+" ")<0&&(r+=o+" ");i!==(a=Ae(r))&&n.setAttribute("class",a)}return this},removeClass:function(e){var t,n,r,i,o,s,a,u=0;if(_(e))return this.each(function(t){S(this).removeClass(e.call(this,t,Ne(this)))});if(!arguments.length)return this.attr("class","");if((t=Oe(e)).length)for(;n=this[u++];)if(i=Ne(n),r=1===n.nodeType&&" "+Ae(i)+" "){for(s=0;o=t[s++];)for(;-1<r.indexOf(" "+o+" ");)r=r.replace(" "+o+" "," ");i!==(a=Ae(r))&&n.setAttribute("class",a)}return this},toggleClass:function(i,e){var o=typeof i,s="string"==o||Array.isArray(i);return"boolean"==typeof e&&s?e?this.addClass(i):this.removeClass(i):_(i)?this.each(function(t){S(this).toggleClass(i.call(this,t,Ne(this),e),e)}):this.each(function(){var t,e,n,r;if(s)for(e=0,n=S(this),r=Oe(i);t=r[e++];)n.hasClass(t)?n.removeClass(t):n.addClass(t);else void 0!==i&&"boolean"!=o||((t=Ne(this))&&X.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||!1===i?"":X.get(this,"__className__")||""))})},hasClass:function(t){var e,n,r=0;for(e=" "+t+" ";n=this[r++];)if(1===n.nodeType&&-1<(" "+Ae(Ne(n))+" ").indexOf(e))return!0;return!1}});var De=/\r/g;S.fn.extend({val:function(n){var r,t,i,e=this[0];return arguments.length?(i=_(n),this.each(function(t){var e;1===this.nodeType&&(null==(e=i?n.call(this,t,S(this).val()):n)?e="":"number"==typeof e?e+="":Array.isArray(e)&&(e=S.map(e,function(t){return null==t?"":t+""})),(r=S.valHooks[this.type]||S.valHooks[this.nodeName.toLowerCase()])&&"set"in r&&void 0!==r.set(this,e,"value")||(this.value=e))})):e?(r=S.valHooks[e.type]||S.valHooks[e.nodeName.toLowerCase()])&&"get"in r&&void 0!==(t=r.get(e,"value"))?t:"string"==typeof(t=e.value)?t.replace(De,""):null==t?"":t:void 0}}),S.extend({valHooks:{option:{get:function(t){var e=S.find.attr(t,"value");return null!=e?e:Ae(S.text(t))}},select:{get:function(t){var e,n,r,i=t.options,o=t.selectedIndex,s="select-one"===t.type,a=s?null:[],u=s?o+1:i.length;for(r=o<0?u:s?o:0;r<u;r++)if(((n=i[r]).selected||r===o)&&!n.disabled&&(!n.parentNode.disabled||!N(n.parentNode,"optgroup"))){if(e=S(n).val(),s)return e;a.push(e)}return a},set:function(t,e){for(var n,r,i=t.options,o=S.makeArray(e),s=i.length;s--;)((r=i[s]).selected=-1<S.inArray(S.valHooks.option.get(r),o))&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),S.each(["radio","checkbox"],function(){S.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=-1<S.inArray(S(t).val(),e)}},m.checkOn||(S.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),m.focusin="onfocusin"in T;function ke(t){t.stopPropagation()}var xe=/^(?:focusinfocus|focusoutblur)$/;S.extend(S.event,{trigger:function(t,e,n,r){var i,o,s,a,u,c,h,l,f=[n||I],p=g.call(t,"type")?t.type:t,d=g.call(t,"namespace")?t.namespace.split("."):[];if(o=l=s=n=n||I,3!==n.nodeType&&8!==n.nodeType&&!xe.test(p+S.event.triggered)&&(-1<p.indexOf(".")&&(p=(d=p.split(".")).shift(),d.sort()),u=p.indexOf(":")<0&&"on"+p,(t=t[S.expando]?t:new S.Event(p,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=d.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+d.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:S.makeArray(e,[t]),h=S.event.special[p]||{},r||!h.trigger||!1!==h.trigger.apply(n,e))){if(!r&&!h.noBubble&&!v(n)){for(a=h.delegateType||p,xe.test(a+p)||(o=o.parentNode);o;o=o.parentNode)f.push(o),s=o;s===(n.ownerDocument||I)&&f.push(s.defaultView||s.parentWindow||T)}for(i=0;(o=f[i++])&&!t.isPropagationStopped();)l=o,t.type=1<i?a:h.bindType||p,(c=(X.get(o,"events")||{})[t.type]&&X.get(o,"handle"))&&c.apply(o,e),(c=u&&o[u])&&c.apply&&Q(o)&&(t.result=c.apply(o,e),!1===t.result&&t.preventDefault());return t.type=p,r||t.isDefaultPrevented()||h._default&&!1!==h._default.apply(f.pop(),e)||!Q(n)||u&&_(n[p])&&!v(n)&&((s=n[u])&&(n[u]=null),S.event.triggered=p,t.isPropagationStopped()&&l.addEventListener(p,ke),n[p](),t.isPropagationStopped()&&l.removeEventListener(p,ke),S.event.triggered=void 0,s&&(n[u]=s)),t.result}},simulate:function(t,e,n){var r=S.extend(new S.Event,n,{type:t,isSimulated:!0});S.event.trigger(r,null,e)}}),S.fn.extend({trigger:function(t,e){return this.each(function(){S.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];if(n)return S.event.trigger(t,e,n,!0)}}),m.focusin||S.each({focus:"focusin",blur:"focusout"},function(n,r){function i(t){S.event.simulate(r,t.target,S.event.fix(t))}S.event.special[r]={setup:function(){var t=this.ownerDocument||this,e=X.access(t,r);e||t.addEventListener(n,i,!0),X.access(t,r,(e||0)+1)},teardown:function(){var t=this.ownerDocument||this,e=X.access(t,r)-1;e?X.access(t,r,e):(t.removeEventListener(n,i,!0),X.remove(t,r))}}});var Re=T.location,Pe=Date.now(),Le=/\?/;S.parseXML=function(t){var e;if(!t||"string"!=typeof t)return null;try{e=(new T.DOMParser).parseFromString(t,"text/xml")}catch(t){e=void 0}return e&&!e.getElementsByTagName("parsererror").length||S.error("Invalid XML: "+t),e};var Me=/\[\]$/,Fe=/\r?\n/g,je=/^(?:submit|button|image|reset|file)$/i,Ue=/^(?:input|select|textarea|keygen)/i;function qe(n,t,r,i){var e;if(Array.isArray(t))S.each(t,function(t,e){r||Me.test(n)?i(n,e):qe(n+"["+("object"==typeof e&&null!=e?t:"")+"]",e,r,i)});else if(r||"object"!==w(t))i(n,t);else for(e in t)qe(n+"["+e+"]",t[e],r,i)}S.param=function(t,e){function n(t,e){var n=_(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)}var r,i=[];if(null==t)return"";if(Array.isArray(t)||t.jquery&&!S.isPlainObject(t))S.each(t,function(){n(this.name,this.value)});else for(r in t)qe(r,t[r],e,n);return i.join("&")},S.fn.extend({serialize:function(){return S.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=S.prop(this,"elements");return t?S.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!S(this).is(":disabled")&&Ue.test(this.nodeName)&&!je.test(t)&&(this.checked||!ft.test(t))}).map(function(t,e){var n=S(this).val();return null==n?null:Array.isArray(n)?S.map(n,function(t){return{name:e.name,value:t.replace(Fe,"\r\n")}}):{name:e.name,value:n.replace(Fe,"\r\n")}}).get()}});var Ve=/%20/g,He=/#.*$/,We=/([?&])_=[^&]*/,Be=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ge=/^(?:GET|HEAD)$/,ze=/^\/\//,Ke={},Qe={},Ye="*/".concat("*"),Xe=I.createElement("a");function Je(o){return function(t,e){"string"!=typeof t&&(e=t,t="*");var n,r=0,i=t.toLowerCase().match(M)||[];if(_(e))for(;n=i[r++];)"+"===n[0]?(n=n.slice(1)||"*",(o[n]=o[n]||[]).unshift(e)):(o[n]=o[n]||[]).push(e)}}function $e(e,i,o,s){var a={},u=e===Qe;function c(t){var r;return a[t]=!0,S.each(e[t]||[],function(t,e){var n=e(i,o,s);return"string"!=typeof n||u||a[n]?u?!(r=n):void 0:(i.dataTypes.unshift(n),c(n),!1)}),r}return c(i.dataTypes[0])||!a["*"]&&c("*")}function Ze(t,e){var n,r,i=S.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((i[n]?t:r=r||{})[n]=e[n]);return r&&S.extend(!0,t,r),t}Xe.href=Re.href,S.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Re.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Re.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Ye,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":S.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ze(Ze(t,S.ajaxSettings),e):Ze(S.ajaxSettings,t)},ajaxPrefilter:Je(Ke),ajaxTransport:Je(Qe),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var h,l,f,n,p,r,d,v,i,o,y=S.ajaxSetup({},e),g=y.context||y,m=y.context&&(g.nodeType||g.jquery)?S(g):S.event,_=S.Deferred(),b=S.Callbacks("once memory"),w=y.statusCode||{},s={},a={},u="canceled",E={readyState:0,getResponseHeader:function(t){var e;if(d){if(!n)for(n={};e=Be.exec(f);)n[e[1].toLowerCase()+" "]=(n[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=n[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return d?f:null},setRequestHeader:function(t,e){return null==d&&(t=a[t.toLowerCase()]=a[t.toLowerCase()]||t,s[t]=e),this},overrideMimeType:function(t){return null==d&&(y.mimeType=t),this},statusCode:function(t){var e;if(t)if(d)E.always(t[E.status]);else for(e in t)w[e]=[w[e],t[e]];return this},abort:function(t){var e=t||u;return h&&h.abort(e),c(0,e),this}};if(_.promise(E),y.url=((t||y.url||Re.href)+"").replace(ze,Re.protocol+"//"),y.type=e.method||e.type||y.method||y.type,y.dataTypes=(y.dataType||"*").toLowerCase().match(M)||[""],null==y.crossDomain){r=I.createElement("a");try{r.href=y.url,r.href=r.href,y.crossDomain=Xe.protocol+"//"+Xe.host!=r.protocol+"//"+r.host}catch(t){y.crossDomain=!0}}if(y.data&&y.processData&&"string"!=typeof y.data&&(y.data=S.param(y.data,y.traditional)),$e(Ke,y,e,E),d)return E;for(i in(v=S.event&&y.global)&&0==S.active++&&S.event.trigger("ajaxStart"),y.type=y.type.toUpperCase(),y.hasContent=!Ge.test(y.type),l=y.url.replace(He,""),y.hasContent?y.data&&y.processData&&0===(y.contentType||"").indexOf("application/x-www-form-urlencoded")&&(y.data=y.data.replace(Ve,"+")):(o=y.url.slice(l.length),y.data&&(y.processData||"string"==typeof y.data)&&(l+=(Le.test(l)?"&":"?")+y.data,delete y.data),!1===y.cache&&(l=l.replace(We,"$1"),o=(Le.test(l)?"&":"?")+"_="+Pe+++o),y.url=l+o),y.ifModified&&(S.lastModified[l]&&E.setRequestHeader("If-Modified-Since",S.lastModified[l]),S.etag[l]&&E.setRequestHeader("If-None-Match",S.etag[l])),(y.data&&y.hasContent&&!1!==y.contentType||e.contentType)&&E.setRequestHeader("Content-Type",y.contentType),E.setRequestHeader("Accept",y.dataTypes[0]&&y.accepts[y.dataTypes[0]]?y.accepts[y.dataTypes[0]]+("*"!==y.dataTypes[0]?", "+Ye+"; q=0.01":""):y.accepts["*"]),y.headers)E.setRequestHeader(i,y.headers[i]);if(y.beforeSend&&(!1===y.beforeSend.call(g,E,y)||d))return E.abort();if(u="abort",b.add(y.complete),E.done(y.success),E.fail(y.error),h=$e(Qe,y,e,E)){if(E.readyState=1,v&&m.trigger("ajaxSend",[E,y]),d)return E;y.async&&0<y.timeout&&(p=T.setTimeout(function(){E.abort("timeout")},y.timeout));try{d=!1,h.send(s,c)}catch(t){if(d)throw t;c(-1,t)}}else c(-1,"No Transport");function c(t,e,n,r){var i,o,s,a,u,c=e;d||(d=!0,p&&T.clearTimeout(p),h=void 0,f=r||"",E.readyState=0<t?4:0,i=200<=t&&t<300||304===t,n&&(a=function(t,e,n){for(var r,i,o,s,a=t.contents,u=t.dataTypes;"*"===u[0];)u.shift(),void 0===r&&(r=t.mimeType||e.getResponseHeader("Content-Type"));if(r)for(i in a)if(a[i]&&a[i].test(r)){u.unshift(i);break}if(u[0]in n)o=u[0];else{for(i in n){if(!u[0]||t.converters[i+" "+u[0]]){o=i;break}s=s||i}o=o||s}if(o)return o!==u[0]&&u.unshift(o),n[o]}(y,E,n)),a=function(t,e,n,r){var i,o,s,a,u,c={},h=t.dataTypes.slice();if(h[1])for(s in t.converters)c[s.toLowerCase()]=t.converters[s];for(o=h.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!u&&r&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),u=o,o=h.shift())if("*"===o)o=u;else if("*"!==u&&u!==o){if(!(s=c[u+" "+o]||c["* "+o]))for(i in c)if((a=i.split(" "))[1]===o&&(s=c[u+" "+a[0]]||c["* "+a[0]])){!0===s?s=c[i]:!0!==c[i]&&(o=a[0],h.unshift(a[1]));break}if(!0!==s)if(s&&t.throws)e=s(e);else try{e=s(e)}catch(t){return{state:"parsererror",error:s?t:"No conversion from "+u+" to "+o}}}return{state:"success",data:e}}(y,a,E,i),i?(y.ifModified&&((u=E.getResponseHeader("Last-Modified"))&&(S.lastModified[l]=u),(u=E.getResponseHeader("etag"))&&(S.etag[l]=u)),204===t||"HEAD"===y.type?c="nocontent":304===t?c="notmodified":(c=a.state,o=a.data,i=!(s=a.error))):(s=c,!t&&c||(c="error",t<0&&(t=0))),E.status=t,E.statusText=(e||c)+"",i?_.resolveWith(g,[o,c,E]):_.rejectWith(g,[E,c,s]),E.statusCode(w),w=void 0,v&&m.trigger(i?"ajaxSuccess":"ajaxError",[E,y,i?o:s]),b.fireWith(g,[E,c]),v&&(m.trigger("ajaxComplete",[E,y]),--S.active||S.event.trigger("ajaxStop")))}return E},getJSON:function(t,e,n){return S.get(t,e,n,"json")},getScript:function(t,e){return S.get(t,void 0,e,"script")}}),S.each(["get","post"],function(t,i){S[i]=function(t,e,n,r){return _(e)&&(r=r||n,n=e,e=void 0),S.ajax(S.extend({url:t,type:i,dataType:r,data:e,success:n},S.isPlainObject(t)&&t))}}),S._evalUrl=function(t,e){return S.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){S.globalEval(t,e)}})},S.fn.extend({wrapAll:function(t){var e;return this[0]&&(_(t)&&(t=t.call(this[0])),e=S(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(n){return _(n)?this.each(function(t){S(this).wrapInner(n.call(this,t))}):this.each(function(){var t=S(this),e=t.contents();e.length?e.wrapAll(n):t.append(n)})},wrap:function(e){var n=_(e);return this.each(function(t){S(this).wrapAll(n?e.call(this,t):e)})},unwrap:function(t){return this.parent(t).not("body").each(function(){S(this).replaceWith(this.childNodes)}),this}}),S.expr.pseudos.hidden=function(t){return!S.expr.pseudos.visible(t)},S.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},S.ajaxSettings.xhr=function(){try{return new T.XMLHttpRequest}catch(t){}};var tn={0:200,1223:204},en=S.ajaxSettings.xhr();m.cors=!!en&&"withCredentials"in en,m.ajax=en=!!en,S.ajaxTransport(function(i){var o,s;if(m.cors||en&&!i.crossDomain)return{send:function(t,e){var n,r=i.xhr();if(r.open(i.type,i.url,i.async,i.username,i.password),i.xhrFields)for(n in i.xhrFields)r[n]=i.xhrFields[n];for(n in i.mimeType&&r.overrideMimeType&&r.overrideMimeType(i.mimeType),i.crossDomain||t["X-Requested-With"]||(t["X-Requested-With"]="XMLHttpRequest"),t)r.setRequestHeader(n,t[n]);o=function(t){return function(){o&&(o=s=r.onload=r.onerror=r.onabort=r.ontimeout=r.onreadystatechange=null,"abort"===t?r.abort():"error"===t?"number"!=typeof r.status?e(0,"error"):e(r.status,r.statusText):e(tn[r.status]||r.status,r.statusText,"text"!==(r.responseType||"text")||"string"!=typeof r.responseText?{binary:r.response}:{text:r.responseText},r.getAllResponseHeaders()))}},r.onload=o(),s=r.onerror=r.ontimeout=o("error"),void 0!==r.onabort?r.onabort=s:r.onreadystatechange=function(){4===r.readyState&&T.setTimeout(function(){o&&s()})},o=o("abort");try{r.send(i.hasContent&&i.data||null)}catch(t){if(o)throw t}},abort:function(){o&&o()}}}),S.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),S.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return S.globalEval(t),t}}}),S.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),S.ajaxTransport("script",function(n){var r,i;if(n.crossDomain||n.scriptAttrs)return{send:function(t,e){r=S("<script>").attr(n.scriptAttrs||{}).prop({charset:n.scriptCharset,src:n.url}).on("load error",i=function(t){r.remove(),i=null,t&&e("error"===t.type?404:200,t.type)}),I.head.appendChild(r[0])},abort:function(){i&&i()}}});var nn,rn=[],on=/(=)\?(?=&|$)|\?\?/;S.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=rn.pop()||S.expando+"_"+Pe++;return this[t]=!0,t}}),S.ajaxPrefilter("json jsonp",function(t,e,n){var r,i,o,s=!1!==t.jsonp&&(on.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&on.test(t.data)&&"data");if(s||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=_(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(on,"$1"+r):!1!==t.jsonp&&(t.url+=(Le.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||S.error(r+" was not called"),o[0]},t.dataTypes[0]="json",i=T[r],T[r]=function(){o=arguments},n.always(function(){void 0===i?S(T).removeProp(r):T[r]=i,t[r]&&(t.jsonpCallback=e.jsonpCallback,rn.push(r)),o&&_(i)&&i(o[0]),o=i=void 0}),"script"}),m.createHTMLDocument=((nn=I.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===nn.childNodes.length),S.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(m.createHTMLDocument?((r=(e=I.implementation.createHTMLDocument("")).createElement("base")).href=I.location.href,e.head.appendChild(r)):e=I),o=!n&&[],(i=O.exec(t))?[e.createElement(i[1])]:(i=wt([t],e,o),o&&o.length&&S(o).remove(),S.merge([],i.childNodes)));var r,i,o},S.fn.load=function(t,e,n){var r,i,o,s=this,a=t.indexOf(" ");return-1<a&&(r=Ae(t.slice(a)),t=t.slice(0,a)),_(e)?(n=e,e=void 0):e&&"object"==typeof e&&(i="POST"),0<s.length&&S.ajax({url:t,type:i||"GET",dataType:"html",data:e}).done(function(t){o=arguments,s.html(r?S("<div>").append(S.parseHTML(t)).find(r):t)}).always(n&&function(t,e){s.each(function(){n.apply(this,o||[t.responseText,e,t])})}),this},S.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){S.fn[e]=function(t){return this.on(e,t)}}),S.expr.pseudos.animated=function(e){return S.grep(S.timers,function(t){return e===t.elem}).length},S.offset={setOffset:function(t,e,n){var r,i,o,s,a,u,c=S.css(t,"position"),h=S(t),l={};"static"===c&&(t.style.position="relative"),a=h.offset(),o=S.css(t,"top"),u=S.css(t,"left"),i=("absolute"===c||"fixed"===c)&&-1<(o+u).indexOf("auto")?(s=(r=h.position()).top,r.left):(s=parseFloat(o)||0,parseFloat(u)||0),_(e)&&(e=e.call(t,n,S.extend({},a))),null!=e.top&&(l.top=e.top-a.top+s),null!=e.left&&(l.left=e.left-a.left+i),"using"in e?e.using.call(t,l):h.css(l)}},S.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){S.offset.setOffset(this,e,t)});var t,n,r=this[0];return r?r.getClientRects().length?(t=r.getBoundingClientRect(),n=r.ownerDocument.defaultView,{top:t.top+n.pageYOffset,left:t.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,r=this[0],i={top:0,left:0};if("fixed"===S.css(r,"position"))e=r.getBoundingClientRect();else{for(e=this.offset(),n=r.ownerDocument,t=r.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===S.css(t,"position");)t=t.parentNode;t&&t!==r&&1===t.nodeType&&((i=S(t).offset()).top+=S.css(t,"borderTopWidth",!0),i.left+=S.css(t,"borderLeftWidth",!0))}return{top:e.top-i.top-S.css(r,"marginTop",!0),left:e.left-i.left-S.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===S.css(t,"position");)t=t.offsetParent;return t||it})}}),S.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var o="pageYOffset"===i;S.fn[e]=function(t){return W(this,function(t,e,n){var r;if(v(t)?r=t:9===t.nodeType&&(r=t.defaultView),void 0===n)return r?r[i]:t[e];r?r.scrollTo(o?r.pageXOffset:n,o?n:r.pageYOffset):t[e]=n},e,t,arguments.length)}}),S.each(["top","left"],function(t,n){S.cssHooks[n]=Zt(m.pixelPosition,function(t,e){if(e)return e=$t(t,n),Kt.test(e)?S(t).position()[n]+"px":e})}),S.each({Height:"height",Width:"width"},function(s,a){S.each({padding:"inner"+s,content:a,"":"outer"+s},function(r,o){S.fn[o]=function(t,e){var n=arguments.length&&(r||"boolean"!=typeof t),i=r||(!0===t||!0===e?"margin":"border");return W(this,function(t,e,n){var r;return v(t)?0===o.indexOf("outer")?t["inner"+s]:t.document.documentElement["client"+s]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+s],r["scroll"+s],t.body["offset"+s],r["offset"+s],r["client"+s])):void 0===n?S.css(t,e,i):S.style(t,e,n,i)},a,n?t:void 0,n)}})}),S.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(t,n){S.fn[n]=function(t,e){return 0<arguments.length?this.on(n,null,t,e):this.trigger(n)}}),S.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)}}),S.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,r){return this.on(e,t,n,r)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}}),S.proxy=function(t,e){var n,r,i;if("string"==typeof e&&(n=t[e],e=t,t=n),_(t))return r=a.call(arguments,2),(i=function(){return t.apply(e||this,r.concat(a.call(arguments)))}).guid=t.guid=t.guid||S.guid++,i},S.holdReady=function(t){t?S.readyWait++:S.ready(!0)},S.isArray=Array.isArray,S.parseJSON=JSON.parse,S.nodeName=N,S.isFunction=_,S.isWindow=v,S.camelCase=K,S.type=w,S.now=Date.now,S.isNumeric=function(t){var e=S.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},void 0===(hn=function(){return S}.apply(cn,[]))||(un.exports=hn);var sn=T.jQuery,an=T.$;return S.noConflict=function(t){return T.$===S&&(T.$=an),t&&T.jQuery===S&&(T.jQuery=sn),S},t||(T.jQuery=T.$=S),S})},125:function(t,e,n){!function(t){"use strict";function o(t){return Array.prototype.slice.call(t)}function s(n){return new Promise(function(t,e){n.onsuccess=function(){t(n.result)};n.onerror=function(){e(n.error)}})}function a(n,r,i){var o;var t=new Promise(function(t,e){o=n[r].apply(n,i);s(o).then(t,e)});t.request=o;return t}function i(t,e,n){var r=a(t,e,n);return r.then(function(t){if(!t)return;return new h(t,r.request)})}function e(t,n,e){e.forEach(function(e){Object.defineProperty(t.prototype,e,{get:function(){return this[n][e]},set:function(t){this[n][e]=t}})})}function n(e,n,r,t){t.forEach(function(t){if(!(t in r.prototype))return;e.prototype[t]=function(){return a(this[n],t,arguments)}})}function r(e,n,r,t){t.forEach(function(t){if(!(t in r.prototype))return;e.prototype[t]=function(){return this[n][t].apply(this[n],arguments)}})}function u(e,n,r,t){t.forEach(function(t){if(!(t in r.prototype))return;e.prototype[t]=function(){return i(this[n],t,arguments)}})}function c(t){this._index=t}function h(t,e){this._cursor=t;this._request=e}function l(t){this._store=t}function f(n){this._tx=n;this.complete=new Promise(function(t,e){n.oncomplete=function(){t()};n.onerror=function(){e(n.error)};n.onabort=function(){e(n.error)}})}function p(t,e,n){this._db=t;this.oldVersion=e;this.transaction=new f(n)}function d(t){this._db=t}function v(t,e,n){var r=a(indexedDB,"open",[t,e]);var i=r.request;if(i){i.onupgradeneeded=function(t){if(n){n(new p(i.result,t.oldVersion,i.transaction))}}}return r.then(function(t){return new d(t)})}function y(t){return a(indexedDB,"deleteDatabase",[t])}e(c,"_index",["name","keyPath","multiEntry","unique"]),n(c,"_index",IDBIndex,["get","getKey","getAll","getAllKeys","count"]),u(c,"_index",IDBIndex,["openCursor","openKeyCursor"]),e(h,"_cursor",["direction","key","primaryKey","value"]),n(h,"_cursor",IDBCursor,["update","delete"]),["advance","continue","continuePrimaryKey"].forEach(function(n){if(!(n in IDBCursor.prototype))return;h.prototype[n]=function(){var e=this;var t=arguments;return Promise.resolve().then(function(){e._cursor[n].apply(e._cursor,t);return s(e._request).then(function(t){if(!t)return;return new h(t,e._request)})})}}),l.prototype.createIndex=function(){return new c(this._store.createIndex.apply(this._store,arguments))},l.prototype.index=function(){return new c(this._store.index.apply(this._store,arguments))},e(l,"_store",["name","keyPath","indexNames","autoIncrement"]),n(l,"_store",IDBObjectStore,["put","add","delete","clear","get","getAll","getKey","getAllKeys","count"]),u(l,"_store",IDBObjectStore,["openCursor","openKeyCursor"]),r(l,"_store",IDBObjectStore,["deleteIndex"]),f.prototype.objectStore=function(){return new l(this._tx.objectStore.apply(this._tx,arguments))},e(f,"_tx",["objectStoreNames","mode"]),r(f,"_tx",IDBTransaction,["abort"]),p.prototype.createObjectStore=function(){return new l(this._db.createObjectStore.apply(this._db,arguments))},e(p,"_db",["name","version","objectStoreNames"]),r(p,"_db",IDBDatabase,["deleteObjectStore","close"]),d.prototype.transaction=function(){return new f(this._db.transaction.apply(this._db,arguments))},e(d,"_db",["name","version","objectStoreNames"]),r(d,"_db",IDBDatabase,["close"]),["openCursor","openKeyCursor"].forEach(function(i){[l,c].forEach(function(t){if(!(i in t.prototype))return;t.prototype[i.replace("open","iterate")]=function(){var t=o(arguments);var e=t[t.length-1];var n=this._store||this._index;var r=n[i].apply(n,t.slice(0,-1));r.onsuccess=function(){e(r.result)}}})}),[c,l].forEach(function(t){if(t.prototype.getAll)return;t.prototype.getAll=function(t,n){var r=this;var i=[];return new Promise(function(e){r.iterateCursor(t,function(t){if(!t){e(i);return}i.push(t.value);if(n!==undefined&&i.length==n){e(i);return}t.continue()})})}}),t.openDb=v,t.deleteDb=y,Object.defineProperty(t,"__esModule",{value:true})}(e)},152:function(t,e,n){"use strict";function s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var r;n.r(e),n.d(e,"LogLevel",function(){return a}),n.d(e,"Logger",function(){return f}),n.d(e,"setLogLevel",function(){return d}),n.d(e,"setUserLogHandler",function(){return v});var a,i,o=[];(i=a=a||{})[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT";function u(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=l[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,s(["["+i+"]  "+t.name+":"],n))}}var c={debug:a.DEBUG,verbose:a.VERBOSE,info:a.INFO,warn:a.WARN,error:a.ERROR,silent:a.SILENT},h=a.INFO,l=((r={})[a.DEBUG]="log",r[a.VERBOSE]="log",r[a.INFO]="info",r[a.WARN]="warn",r[a.ERROR]="error",r),f=(Object.defineProperty(p.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in a))throw new TypeError("Invalid value assigned to `logLevel`");this._logLevel=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!0,configurable:!0}),Object.defineProperty(p.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!0,configurable:!0}),p.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.DEBUG],t)),this._logHandler.apply(this,s([this,a.DEBUG],t))},p.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.VERBOSE],t)),this._logHandler.apply(this,s([this,a.VERBOSE],t))},p.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.INFO],t)),this._logHandler.apply(this,s([this,a.INFO],t))},p.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.WARN],t)),this._logHandler.apply(this,s([this,a.WARN],t))},p.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,s([this,a.ERROR],t)),this._logHandler.apply(this,s([this,a.ERROR],t))},p);function p(t){this.name=t,this._logLevel=h,this._logHandler=u,this._userLogHandler=null,o.push(this)}function d(t){var e="string"==typeof t?c[t]:t;o.forEach(function(t){t.logLevel=e})}function v(s,e){for(var t=function(t){var o=null;e&&e.level&&(o=c[e.level]),t.userLogHandler=null===s?null:function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];var i=n.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}}).filter(function(t){return t}).join(" ");e>=(null!=o?o:t.logLevel)&&s({level:a[e].toLowerCase(),message:i,args:n,type:t.name})}},n=0,r=o;n<r.length;n++){t(r[n])}}},16:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i,d=n(426),v=n(86),y=n(74),o=n(152),s=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),g=new v.ErrorFactory("app","Firebase",s),a="@firebase/app",m="[DEFAULT]",_=((i={})[a]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),b=new o.Logger("@firebase/app"),u=(Object.defineProperty(c.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(c.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!0,configurable:!0}),c.prototype.delete=function(){var e=this;return new Promise(function(t){e.checkDestroyed_(),t()}).then(function(){return e.firebase_.INTERNAL.removeApp(e.name_),Promise.all(e.container.getProviders().map(function(t){return t.delete()}))}).then(function(){e.isDeleted_=!0})},c.prototype._getService=function(t,e){return void 0===e&&(e=m),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},c.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=m),this.container.getProvider(t).clearInstance(e)},c.prototype._addComponent=function(e){try{this.container.addComponent(e)}catch(t){b.debug("Component "+e.name+" failed to register with FirebaseApp "+this.name,t)}},c.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},c.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw g.create("app-deleted",{appName:this.name_})},c);function c(t,e,n){var r,i,o=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=v.deepCopy(t),this.container=new y.ComponentContainer(e.name),this._addComponent(new y.Component("app",function(){return o},"PUBLIC"));try{for(var s=d.__values(this.firebase_.INTERNAL.components.values()),a=s.next();!a.done;a=s.next()){var u=a.value;this._addComponent(u)}}catch(t){r={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}}u.prototype.name&&u.prototype.options||u.prototype.delete||console.log("dc");var w="7.12.0";function h(u){var c={},h=new Map,l={__esModule:!0,initializeApp:function(t,e){void 0===e&&(e={});if("object"!=typeof e||null===e){e={name:e}}var n=e;void 0===n.name&&(n.name=m);var r=n.name;if("string"!=typeof r||!r)throw g.create("bad-app-name",{appName:String(r)});if(v.contains(c,r))throw g.create("duplicate-app",{appName:r});var i=new u(t,n,l);return c[r]=i},app:f,registerVersion:function(t,e,n){var r,i=null!==(r=_[t])&&void 0!==r?r:t;n&&(i+="-"+n);var o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){var a=['Unable to register library "'+i+'" with version "'+e+'":'];return o&&a.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),o&&s&&a.push("and"),s&&a.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void b.warn(a.join(" "))}p(new y.Component(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:o.setLogLevel,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw g.create("invalid-log-argument",{appName:name});o.setUserLogHandler(t,e)},apps:null,SDK_VERSION:w,INTERNAL:{registerComponent:p,removeApp:function(t){delete c[t]},components:h,useAsService:function(t,e){return"serverAuth"!==e?e:null}}};function f(t){if(t=t||m,!v.contains(c,t))throw g.create("no-app",{appName:t});return c[t]}function p(n){var e,t,r=n.name;if(h.has(r))return b.debug("There were multiple attempts to register component "+r+"."),"PUBLIC"===n.type?l[r]:null;if(h.set(r,n),"PUBLIC"===n.type){var i=function(t){if(void 0===t&&(t=f()),"function"!=typeof t[r])throw g.create("invalid-app-argument",{appName:r});return t[r]()};void 0!==n.serviceProps&&v.deepExtend(i,n.serviceProps),l[r]=i,u.prototype[r]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,r).apply(this,n.multipleInstances?t:[])}}try{for(var o=d.__values(Object.keys(c)),s=o.next();!s.done;s=o.next()){var a=s.value;c[a]._addComponent(n)}}catch(t){e={error:t}}finally{try{s&&!s.done&&(t=o.return)&&t.call(o)}finally{if(e)throw e.error}}return"PUBLIC"===n.type?l[r]:null}return l.default=l,Object.defineProperty(l,"apps",{get:function(){return Object.keys(c).map(function(t){return c[t]})}}),f.App=u,l}var l=function t(){var e=h(u);return e.INTERNAL=d.__assign(d.__assign({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){v.deepExtend(e,t)},createSubscribe:v.createSubscribe,ErrorFactory:v.ErrorFactory,deepExtend:v.deepExtend}),e}(),f=(p.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if("VERSION"!==(null==(e=t.getComponent())?void 0:e.type))return null;var e,n=t.getImmediate();return n.library+"/"+n.version}).filter(function(t){return t}).join(" ")},p);function p(t){this.container=t}if(v.isBrowser()&&void 0!==self.firebase){b.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var E=self.firebase.SDK_VERSION;E&&0<=E.indexOf("LITE")&&b.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var T=l.initializeApp;l.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return v.isNode()&&b.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the rollup-plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/rollup-plugin-node-resolve\n      '),T.apply(void 0,t)};var I,S,C=l;(I=C).INTERNAL.registerComponent(new y.Component("platform-logger",function(t){return new f(t)},"PRIVATE")),I.registerVersion(a,"0.6.0",S),I.registerVersion("fire-js",""),e.default=C,e.firebase=C},229:function(t,e,n){"use strict";n.r(e);var r=n(16),i=n.n(r),o=n(74);var c=function(){return(c=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function p(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function d(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function a(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var u=n(86),h=n(125);n.d(e,"registerInstallations",function(){return at});var l,f="@firebase/installations",v="0.4.6",y=1e4,g="w:"+v,m="FIS_v2",_="https://firebaseinstallations.googleapis.com/v1",b=36e5,w=((l={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',l["not-registered"]="Firebase Installation is not registered.",l["installation-not-found"]="Firebase Installation not found.",l["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',l["app-offline"]="Could not process request. Application offline.",l["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",l),E=new u.ErrorFactory("installations","Installations",w);function T(t){return t instanceof u.FirebaseError&&t.code.includes("request-failed")}function I(t){var e=t.projectId;return _+"/projects/"+e+"/installations"}function S(t){return{token:t.token,requestStatus:2,expiresIn:(e=t.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()};var e}function C(r,i){return p(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return[4,i.json()];case 1:return e=t.sent(),n=e.error,[2,E.create("request-failed",{requestName:r,serverCode:n.code,serverMessage:n.message,serverStatus:n.status})]}})})}function A(t){var e=t.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function N(t,e){var n=e.refreshToken,r=A(t);return r.append("Authorization",m+" "+n),r}function O(n){return p(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return[4,n()];case 1:return 500<=(e=t.sent()).status&&e.status<600?[2,n()]:[2,e]}})})}function D(e){return new Promise(function(t){setTimeout(t,e)})}function k(t){return btoa(String.fromCharCode.apply(String,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}(t))).replace(/\+/g,"-").replace(/\//g,"_")}var x=/^[cdef][\w-]{21}$/,R="";function P(){try{var t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;var e=k(t).substr(0,22);return x.test(e)?e:R}catch(t){return R}}function L(t){return t.appName+"!"+t.appId}var M=new Map;function F(t,e){var n=L(t);j(n,e),function(t,e){var n=q();n&&n.postMessage({key:t,fid:e});V()}(n,e)}function j(t,e){var n,r,i=M.get(t);if(i)try{for(var o=a(i),s=o.next();!s.done;s=o.next()){(0,s.value)(e)}}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}var U=null;function q(){return!U&&"BroadcastChannel"in self&&((U=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(t){j(t.data.key,t.data.fid)}),U}function V(){0===M.size&&U&&(U.close(),U=null)}var H="firebase-installations-database",W=1,B="firebase-installations-store",G=null;function z(){return G=G||Object(h.openDb)(H,W,function(t){switch(t.oldVersion){case 0:t.createObjectStore(B)}})}function K(s,a){return p(this,void 0,void 0,function(){var e,n,r,i,o;return d(this,function(t){switch(t.label){case 0:return e=L(s),[4,z()];case 1:return n=t.sent(),r=n.transaction(B,"readwrite"),[4,(i=r.objectStore(B)).get(e)];case 2:return o=t.sent(),[4,i.put(a,e)];case 3:return t.sent(),[4,r.complete];case 4:return t.sent(),o&&o.fid===a.fid||F(s,a.fid),[2,a]}})})}function Q(i){return p(this,void 0,void 0,function(){var e,n,r;return d(this,function(t){switch(t.label){case 0:return e=L(i),[4,z()];case 1:return n=t.sent(),[4,(r=n.transaction(B,"readwrite")).objectStore(B).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}function Y(a,u){return p(this,void 0,void 0,function(){var e,n,r,i,o,s;return d(this,function(t){switch(t.label){case 0:return e=L(a),[4,z()];case 1:return n=t.sent(),r=n.transaction(B,"readwrite"),[4,(i=r.objectStore(B)).get(e)];case 2:return o=t.sent(),void 0!==(s=u(o))?[3,4]:[4,i.delete(e)];case 3:return t.sent(),[3,6];case 4:return[4,i.put(s,e)];case 5:t.sent(),t.label=6;case 6:return[4,r.complete];case 7:return t.sent(),!s||o&&o.fid===s.fid||F(a,s.fid),[2,s]}})})}function X(i){return p(this,void 0,void 0,function(){var r,e,n;return d(this,function(t){switch(t.label){case 0:return[4,Y(i,function(t){var e=$(t||{fid:P(),registrationStatus:0}),n=function(t,e){{if(0!==e.registrationStatus)return 1===e.registrationStatus?{installationEntry:e,registrationPromise:function(o){return p(this,void 0,void 0,function(){var e,n,r,i;return d(this,function(t){switch(t.label){case 0:return[4,J(o)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.registrationStatus?[3,5]:[4,D(100)];case 3:return t.sent(),[4,J(o)];case 4:return e=t.sent(),[3,2];case 5:return 0!==e.registrationStatus?[3,7]:[4,X(o)];case 6:return n=t.sent(),r=n.installationEntry,(i=n.registrationPromise)?[2,i]:[2,r];case 7:return[2,e]}})})}(t)}:{installationEntry:e};if(!navigator.onLine){var n=Promise.reject(E.create("app-offline"));return{installationEntry:e,registrationPromise:n}}var r={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},i=function(r,i){return p(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,7]),[4,function(a,t){var u=t.fid;return p(this,void 0,void 0,function(){var e,n,r,i,o,s;return d(this,function(t){switch(t.label){case 0:return e=I(a),n=A(a),r={fid:u,authVersion:m,appId:a.appId,sdkVersion:g},i={method:"POST",headers:n,body:JSON.stringify(r)},[4,O(function(){return fetch(e,i)})];case 1:return(o=t.sent()).ok?[4,o.json()]:[3,3];case 2:return s=t.sent(),[2,{fid:s.fid||u,registrationStatus:2,refreshToken:s.refreshToken,authToken:S(s.authToken)}];case 3:return[4,C("Create Installation",o)];case 4:throw t.sent()}})})}(r,i)];case 1:return e=t.sent(),[2,K(r,e)];case 2:return T(n=t.sent())&&409===n.serverCode?[4,Q(r)]:[3,4];case 3:return t.sent(),[3,6];case 4:return[4,K(r,{fid:i.fid,registrationStatus:0})];case 5:t.sent(),t.label=6;case 6:throw n;case 7:return[2]}})})}(t,r);return{installationEntry:r,registrationPromise:i}}}(i,e);return r=n.registrationPromise,n.installationEntry})];case 1:return(e=t.sent()).fid!==R?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=t.sent(),n)];case 3:return[2,{installationEntry:e,registrationPromise:r}]}})})}function J(t){return Y(t,function(t){if(!t)throw E.create("installation-not-found");return $(t)})}function $(t){return 1===(e=t).registrationStatus&&e.registrationTime+y<Date.now()?{fid:t.fid,registrationStatus:0}:t;var e}function Z(t,h){var l=t.appConfig,f=t.platformLoggerProvider;return p(this,void 0,void 0,function(){var r,i,o,s,a,u,c;return d(this,function(t){switch(t.label){case 0:return e=l,n=h.fid,r=I(e)+"/"+n+"/authTokens:generate",i=N(l,h),(o=f.getImmediate({optional:!0}))&&i.append("x-firebase-client",o.getPlatformInfoString()),s={installation:{sdkVersion:g}},a={method:"POST",headers:i,body:JSON.stringify(s)},[4,O(function(){return fetch(r,a)})];case 1:return(u=t.sent()).ok?[4,u.json()]:[3,3];case 2:return c=t.sent(),[2,S(c)];case 3:return[4,C("Generate Auth Token",u)];case 4:throw t.sent()}var e,n})})}function tt(a,u){return void 0===u&&(u=!1),p(this,void 0,void 0,function(){var s,e,n;return d(this,function(t){switch(t.label){case 0:return[4,Y(a.appConfig,function(t){if(!nt(t))throw E.create("not-registered");var e,n,r,i=t.authToken;if(u||2!==(r=i).requestStatus||function(t){var e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+b}(r)){if(1===i.requestStatus)return s=function(r,i){return p(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return[4,et(r.appConfig)];case 1:e=t.sent(),t.label=2;case 2:return 1!==e.authToken.requestStatus?[3,5]:[4,D(100)];case 3:return t.sent(),[4,et(r.appConfig)];case 4:return e=t.sent(),[3,2];case 5:return 0===(n=e.authToken).requestStatus?[2,tt(r,i)]:[2,n]}})})}(a,u),t;if(!navigator.onLine)throw E.create("app-offline");var o=(e=t,n={requestStatus:1,requestTime:Date.now()},c(c({},e),{authToken:n}));return s=function(i,o){return p(this,void 0,void 0,function(){var e,n,r;return d(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,8]),[4,Z(i,o)];case 1:return e=t.sent(),r=c(c({},o),{authToken:e}),[4,K(i.appConfig,r)];case 2:return t.sent(),[2,e];case 3:return!T(n=t.sent())||401!==n.serverCode&&404!==n.serverCode?[3,5]:[4,Q(i.appConfig)];case 4:return t.sent(),[3,7];case 5:return r=c(c({},o),{authToken:{requestStatus:0}}),[4,K(i.appConfig,r)];case 6:t.sent(),t.label=7;case 7:throw n;case 8:return[2]}})})}(a,o),o}return t})];case 1:return e=t.sent(),s?[4,s]:[3,3];case 2:return n=t.sent(),[3,4];case 3:n=e.authToken,t.label=4;case 4:return[2,n]}})})}function et(t){return Y(t,function(t){if(!nt(t))throw E.create("not-registered");var e,n=t.authToken;return 1===(e=n).requestStatus&&e.requestTime+y<Date.now()?c(c({},t),{authToken:{requestStatus:0}}):t})}function nt(t){return void 0!==t&&2===t.registrationStatus}function rt(e,n){return void 0===n&&(n=!1),p(this,void 0,void 0,function(){return d(this,function(t){switch(t.label){case 0:return[4,function(n){return p(this,void 0,void 0,function(){var e;return d(this,function(t){switch(t.label){case 0:return[4,X(n)];case 1:return(e=t.sent().registrationPromise)?[4,e]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e.appConfig)];case 1:return t.sent(),[4,tt(e,n)];case 2:return[2,t.sent().token]}})})}function it(a,u){return p(this,void 0,void 0,function(){var r,i,o,s;return d(this,function(t){switch(t.label){case 0:return e=a,n=u.fid,r=I(e)+"/"+n,i=N(a,u),o={method:"DELETE",headers:i},[4,O(function(){return fetch(r,o)})];case 1:return(s=t.sent()).ok?[3,3]:[4,C("Delete Installation",s)];case 2:throw t.sent();case 3:return[2]}var e,n})})}function ot(t,r){var i=t.appConfig;return function(t,e){q();var n=L(t),r=M.get(n);r||(r=new Set,M.set(n,r)),r.add(e)}(i,r),function(){var t,e,n;t=r,e=L(i),(n=M.get(e))&&(n.delete(t),0===n.size&&M.delete(e),V())}}function st(t){return E.create("missing-app-config-values",{valueName:t})}function at(t){t.INTERNAL.registerComponent(new o.Component("installations",function(t){var e=t.getProvider("app").getImmediate(),n={appConfig:function(t){var e,n;if(!t||!t.options)throw st("App Configuration");if(!t.name)throw st("App Name");try{for(var r=a(["projectId","apiKey","appId"]),i=r.next();!i.done;i=r.next()){var o=i.value;if(!t.options[o])throw st(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}(e),platformLoggerProvider:t.getProvider("platform-logger")};return{app:e,getId:function(){return function(i){return p(this,void 0,void 0,function(){var e,n,r;return d(this,function(t){switch(t.label){case 0:return[4,X(i.appConfig)];case 1:return e=t.sent(),n=e.installationEntry,(r=e.registrationPromise)?r.catch(console.error):tt(i).catch(console.error),[2,n.fid]}})})}(n)},getToken:function(t){return rt(n,t)},delete:function(){return function(r){return p(this,void 0,void 0,function(){var e,n;return d(this,function(t){switch(t.label){case 0:return[4,Y(e=r.appConfig,function(t){if(!t||0!==t.registrationStatus)return t})];case 1:if(!(n=t.sent()))return[3,6];if(1!==n.registrationStatus)return[3,2];throw E.create("delete-pending-registration");case 2:if(2!==n.registrationStatus)return[3,6];if(navigator.onLine)return[3,3];throw E.create("app-offline");case 3:return[4,it(e,n)];case 4:return t.sent(),[4,Q(e)];case 5:t.sent(),t.label=6;case 6:return[2]}})})}(n)},onIdChange:function(t){return ot(n,t)}}},"PUBLIC")),t.registerVersion(f,v)}at(i.a)},38:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},387:function(t,e,n){!function(t,y,f){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||false;r.configurable=true;if("value"in r)r.writable=true;Object.defineProperty(t,r.key,r)}}function o(t,e,n){if(e)r(t.prototype,e);if(n)r(t,n);return t}function i(t,e,n){if(e in t){Object.defineProperty(t,e,{value:n,enumerable:true,configurable:true,writable:true})}else{t[e]=n}return t}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);if(t)r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable});n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};if(t%2){s(Object(n),true).forEach(function(t){i(e,t,n[t])})}else if(Object.getOwnPropertyDescriptors){Object.defineProperties(e,Object.getOwnPropertyDescriptors(n))}else{s(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}}return e}function n(t,e){t.prototype=Object.create(e.prototype);t.prototype.constructor=t;t.__proto__=e}y=y&&y.hasOwnProperty("default")?y["default"]:y,f=f&&f.hasOwnProperty("default")?f["default"]:f;var u="transitionend",c=1e6,h=1e3;function l(t){return{}.toString.call(t).match(/\s([a-z]+)/i)[1].toLowerCase()}function e(){return{bindType:u,delegateType:u,handle:function t(e){if(y(e.target).is(this)){return e.handleObj.handler.apply(this,arguments)}return undefined}}}function p(t){var e=this;var n=false;y(this).one(g.TRANSITION_END,function(){n=true});setTimeout(function(){if(!n){g.triggerTransitionEnd(e)}},t);return this}function d(){y.fn.emulateTransitionEnd=p;y.event.special[g.TRANSITION_END]=e()}var g={TRANSITION_END:"bsTransitionEnd",getUID:function t(e){do{e+=~~(Math.random()*c)}while(document.getElementById(e));return e},getSelectorFromElement:function t(e){var n=e.getAttribute("data-target");if(!n||n==="#"){var r=e.getAttribute("href");n=r&&r!=="#"?r.trim():""}try{return document.querySelector(n)?n:null}catch(t){return null}},getTransitionDurationFromElement:function t(e){if(!e){return 0}var n=y(e).css("transition-duration");var r=y(e).css("transition-delay");var i=parseFloat(n);var o=parseFloat(r);if(!i&&!o){return 0}n=n.split(",")[0];r=r.split(",")[0];return(parseFloat(n)+parseFloat(r))*h},reflow:function t(e){return e.offsetHeight},triggerTransitionEnd:function t(e){y(e).trigger(u)},supportsTransitionEnd:function t(){return Boolean(u)},isElement:function t(e){return(e[0]||e).nodeType},typeCheckConfig:function t(e,n,r){for(var i in r){if(Object.prototype.hasOwnProperty.call(r,i)){var o=r[i];var s=n[i];var a=s&&g.isElement(s)?"element":l(s);if(!new RegExp(o).test(a)){throw new Error(e.toUpperCase()+": "+('Option "'+i+'" provided type "'+a+'" ')+('but expected type "'+o+'".'))}}}},findShadowRoot:function t(e){if(!document.documentElement.attachShadow){return null}if(typeof e.getRootNode==="function"){var n=e.getRootNode();return n instanceof ShadowRoot?n:null}if(e instanceof ShadowRoot){return e}if(!e.parentNode){return null}return g.findShadowRoot(e.parentNode)},jQueryDetection:function t(){if(typeof y==="undefined"){throw new TypeError("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.")}var e=y.fn.jquery.split(" ")[0].split(".");var n=1;var r=2;var i=9;var o=1;var s=4;if(e[0]<r&&e[1]<i||e[0]===n&&e[1]===i&&e[2]<o||e[0]>=s){throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}}};g.jQueryDetection(),d();var v="alert",m="4.4.1",_="bs.alert",b="."+_,w=".data-api",E=y.fn[v],T={DISMISS:'[data-dismiss="alert"]'},I={CLOSE:"close"+b,CLOSED:"closed"+b,CLICK_DATA_API:"click"+b+w},S={ALERT:"alert",FADE:"fade",SHOW:"show"},C=function(){function r(t){this._element=t}var t=r.prototype;t.close=function t(e){var n=this._element;if(e){n=this._getRootElement(e)}var r=this._triggerCloseEvent(n);if(r.isDefaultPrevented()){return}this._removeElement(n)};t.dispose=function t(){y.removeData(this._element,_);this._element=null};t._getRootElement=function t(e){var n=g.getSelectorFromElement(e);var r=false;if(n){r=document.querySelector(n)}if(!r){r=y(e).closest("."+S.ALERT)[0]}return r};t._triggerCloseEvent=function t(e){var n=y.Event(I.CLOSE);y(e).trigger(n);return n};t._removeElement=function t(e){var n=this;y(e).removeClass(S.SHOW);if(!y(e).hasClass(S.FADE)){this._destroyElement(e);return}var r=g.getTransitionDurationFromElement(e);y(e).one(g.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(r)};t._destroyElement=function t(e){y(e).detach().trigger(I.CLOSED).remove()};r._jQueryInterface=function t(n){return this.each(function(){var t=y(this);var e=t.data(_);if(!e){e=new r(this);t.data(_,e)}if(n==="close"){e[n](this)}})};r._handleDismiss=function t(e){return function(t){if(t){t.preventDefault()}e.close(this)}};o(r,null,[{key:"VERSION",get:function t(){return m}}]);return r}();y(document).on(I.CLICK_DATA_API,T.DISMISS,C._handleDismiss(new C)),y.fn[v]=C._jQueryInterface,y.fn[v].Constructor=C,y.fn[v].noConflict=function(){y.fn[v]=E;return C._jQueryInterface};var A="button",N="4.4.1",O="bs.button",D="."+O,k=".data-api",x=y.fn[A],R={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},P={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLES:'[data-toggle="buttons"]',DATA_TOGGLE:'[data-toggle="button"]',DATA_TOGGLES_BUTTONS:'[data-toggle="buttons"] .btn',INPUT:'input:not([type="hidden"])',ACTIVE:".active",BUTTON:".btn"},L={CLICK_DATA_API:"click"+D+k,FOCUS_BLUR_DATA_API:"focus"+D+k+" "+("blur"+D+k),LOAD_DATA_API:"load"+D+k},M=function(){function n(t){this._element=t}var t=n.prototype;t.toggle=function t(){var e=true;var n=true;var r=y(this._element).closest(P.DATA_TOGGLES)[0];if(r){var i=this._element.querySelector(P.INPUT);if(i){if(i.type==="radio"){if(i.checked&&this._element.classList.contains(R.ACTIVE)){e=false}else{var o=r.querySelector(P.ACTIVE);if(o){y(o).removeClass(R.ACTIVE)}}}else if(i.type==="checkbox"){if(this._element.tagName==="LABEL"&&i.checked===this._element.classList.contains(R.ACTIVE)){e=false}}else{e=false}if(e){i.checked=!this._element.classList.contains(R.ACTIVE);y(i).trigger("change")}i.focus();n=false}}if(!(this._element.hasAttribute("disabled")||this._element.classList.contains("disabled"))){if(n){this._element.setAttribute("aria-pressed",!this._element.classList.contains(R.ACTIVE))}if(e){y(this._element).toggleClass(R.ACTIVE)}}};t.dispose=function t(){y.removeData(this._element,O);this._element=null};n._jQueryInterface=function t(e){return this.each(function(){var t=y(this).data(O);if(!t){t=new n(this);y(this).data(O,t)}if(e==="toggle"){t[e]()}})};o(n,null,[{key:"VERSION",get:function t(){return N}}]);return n}();y(document).on(L.CLICK_DATA_API,P.DATA_TOGGLE_CARROT,function(t){var e=t.target;if(!y(e).hasClass(R.BUTTON)){e=y(e).closest(P.BUTTON)[0]}if(!e||e.hasAttribute("disabled")||e.classList.contains("disabled")){t.preventDefault()}else{var n=e.querySelector(P.INPUT);if(n&&(n.hasAttribute("disabled")||n.classList.contains("disabled"))){t.preventDefault();return}M._jQueryInterface.call(y(e),"toggle")}}).on(L.FOCUS_BLUR_DATA_API,P.DATA_TOGGLE_CARROT,function(t){var e=y(t.target).closest(P.BUTTON)[0];y(e).toggleClass(R.FOCUS,/^focus(in)?$/.test(t.type))}),y(window).on(L.LOAD_DATA_API,function(){var t=[].slice.call(document.querySelectorAll(P.DATA_TOGGLES_BUTTONS));for(var e=0,n=t.length;e<n;e++){var r=t[e];var i=r.querySelector(P.INPUT);if(i.checked||i.hasAttribute("checked")){r.classList.add(R.ACTIVE)}else{r.classList.remove(R.ACTIVE)}}t=[].slice.call(document.querySelectorAll(P.DATA_TOGGLE));for(var o=0,s=t.length;o<s;o++){var a=t[o];if(a.getAttribute("aria-pressed")==="true"){a.classList.add(R.ACTIVE)}else{a.classList.remove(R.ACTIVE)}}}),y.fn[A]=M._jQueryInterface,y.fn[A].Constructor=M,y.fn[A].noConflict=function(){y.fn[A]=x;return M._jQueryInterface};var F="carousel",j="4.4.1",U="bs.carousel",q="."+U,V=".data-api",H=y.fn[F],W=37,B=39,G=500,z=40,K={interval:5e3,keyboard:true,slide:false,pause:"hover",wrap:true,touch:true},Q={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},Y={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},X={SLIDE:"slide"+q,SLID:"slid"+q,KEYDOWN:"keydown"+q,MOUSEENTER:"mouseenter"+q,MOUSELEAVE:"mouseleave"+q,TOUCHSTART:"touchstart"+q,TOUCHMOVE:"touchmove"+q,TOUCHEND:"touchend"+q,POINTERDOWN:"pointerdown"+q,POINTERUP:"pointerup"+q,DRAG_START:"dragstart"+q,LOAD_DATA_API:"load"+q+V,CLICK_DATA_API:"click"+q+V},J={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item",POINTER_EVENT:"pointer-event"},$={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",ITEM_IMG:".carousel-item img",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},Z={TOUCH:"touch",PEN:"pen"},tt=function(){function s(t,e){this._items=null;this._interval=null;this._activeElement=null;this._isPaused=false;this._isSliding=false;this.touchTimeout=null;this.touchStartX=0;this.touchDeltaX=0;this._config=this._getConfig(e);this._element=t;this._indicatorsElement=this._element.querySelector($.INDICATORS);this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0;this._pointerEvent=Boolean(window.PointerEvent||window.MSPointerEvent);this._addEventListeners()}var t=s.prototype;t.next=function t(){if(!this._isSliding){this._slide(Y.NEXT)}};t.nextWhenVisible=function t(){if(!document.hidden&&y(this._element).is(":visible")&&y(this._element).css("visibility")!=="hidden"){this.next()}};t.prev=function t(){if(!this._isSliding){this._slide(Y.PREV)}};t.pause=function t(e){if(!e){this._isPaused=true}if(this._element.querySelector($.NEXT_PREV)){g.triggerTransitionEnd(this._element);this.cycle(true)}clearInterval(this._interval);this._interval=null};t.cycle=function t(e){if(!e){this._isPaused=false}if(this._interval){clearInterval(this._interval);this._interval=null}if(this._config.interval&&!this._isPaused){this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval)}};t.to=function t(e){var n=this;this._activeElement=this._element.querySelector($.ACTIVE_ITEM);var r=this._getItemIndex(this._activeElement);if(e>this._items.length-1||e<0){return}if(this._isSliding){y(this._element).one(X.SLID,function(){return n.to(e)});return}if(r===e){this.pause();this.cycle();return}var i=e>r?Y.NEXT:Y.PREV;this._slide(i,this._items[e])};t.dispose=function t(){y(this._element).off(q);y.removeData(this._element,U);this._items=null;this._config=null;this._element=null;this._interval=null;this._isPaused=null;this._isSliding=null;this._activeElement=null;this._indicatorsElement=null};t._getConfig=function t(e){e=a({},K,{},e);g.typeCheckConfig(F,e,Q);return e};t._handleSwipe=function t(){var e=Math.abs(this.touchDeltaX);if(e<=z){return}var n=e/this.touchDeltaX;this.touchDeltaX=0;if(n>0){this.prev()}if(n<0){this.next()}};t._addEventListeners=function t(){var e=this;if(this._config.keyboard){y(this._element).on(X.KEYDOWN,function(t){return e._keydown(t)})}if(this._config.pause==="hover"){y(this._element).on(X.MOUSEENTER,function(t){return e.pause(t)}).on(X.MOUSELEAVE,function(t){return e.cycle(t)})}if(this._config.touch){this._addTouchEventListeners()}};t._addTouchEventListeners=function t(){var n=this;if(!this._touchSupported){return}var e=function t(e){if(n._pointerEvent&&Z[e.originalEvent.pointerType.toUpperCase()]){n.touchStartX=e.originalEvent.clientX}else if(!n._pointerEvent){n.touchStartX=e.originalEvent.touches[0].clientX}};var r=function t(e){if(e.originalEvent.touches&&e.originalEvent.touches.length>1){n.touchDeltaX=0}else{n.touchDeltaX=e.originalEvent.touches[0].clientX-n.touchStartX}};var i=function t(e){if(n._pointerEvent&&Z[e.originalEvent.pointerType.toUpperCase()]){n.touchDeltaX=e.originalEvent.clientX-n.touchStartX}n._handleSwipe();if(n._config.pause==="hover"){n.pause();if(n.touchTimeout){clearTimeout(n.touchTimeout)}n.touchTimeout=setTimeout(function(t){return n.cycle(t)},G+n._config.interval)}};y(this._element.querySelectorAll($.ITEM_IMG)).on(X.DRAG_START,function(t){return t.preventDefault()});if(this._pointerEvent){y(this._element).on(X.POINTERDOWN,function(t){return e(t)});y(this._element).on(X.POINTERUP,function(t){return i(t)});this._element.classList.add(J.POINTER_EVENT)}else{y(this._element).on(X.TOUCHSTART,function(t){return e(t)});y(this._element).on(X.TOUCHMOVE,function(t){return r(t)});y(this._element).on(X.TOUCHEND,function(t){return i(t)})}};t._keydown=function t(e){if(/input|textarea/i.test(e.target.tagName)){return}switch(e.which){case W:e.preventDefault();this.prev();break;case B:e.preventDefault();this.next();break}};t._getItemIndex=function t(e){this._items=e&&e.parentNode?[].slice.call(e.parentNode.querySelectorAll($.ITEM)):[];return this._items.indexOf(e)};t._getItemByDirection=function t(e,n){var r=e===Y.NEXT;var i=e===Y.PREV;var o=this._getItemIndex(n);var s=this._items.length-1;var a=i&&o===0||r&&o===s;if(a&&!this._config.wrap){return n}var u=e===Y.PREV?-1:1;var c=(o+u)%this._items.length;return c===-1?this._items[this._items.length-1]:this._items[c]};t._triggerSlideEvent=function t(e,n){var r=this._getItemIndex(e);var i=this._getItemIndex(this._element.querySelector($.ACTIVE_ITEM));var o=y.Event(X.SLIDE,{relatedTarget:e,direction:n,from:i,to:r});y(this._element).trigger(o);return o};t._setActiveIndicatorElement=function t(e){if(this._indicatorsElement){var n=[].slice.call(this._indicatorsElement.querySelectorAll($.ACTIVE));y(n).removeClass(J.ACTIVE);var r=this._indicatorsElement.children[this._getItemIndex(e)];if(r){y(r).addClass(J.ACTIVE)}}};t._slide=function t(e,n){var r=this;var i=this._element.querySelector($.ACTIVE_ITEM);var o=this._getItemIndex(i);var s=n||i&&this._getItemByDirection(e,i);var a=this._getItemIndex(s);var u=Boolean(this._interval);var c;var h;var l;if(e===Y.NEXT){c=J.LEFT;h=J.NEXT;l=Y.LEFT}else{c=J.RIGHT;h=J.PREV;l=Y.RIGHT}if(s&&y(s).hasClass(J.ACTIVE)){this._isSliding=false;return}var f=this._triggerSlideEvent(s,l);if(f.isDefaultPrevented()){return}if(!i||!s){return}this._isSliding=true;if(u){this.pause()}this._setActiveIndicatorElement(s);var p=y.Event(X.SLID,{relatedTarget:s,direction:l,from:o,to:a});if(y(this._element).hasClass(J.SLIDE)){y(s).addClass(h);g.reflow(s);y(i).addClass(c);y(s).addClass(c);var d=parseInt(s.getAttribute("data-interval"),10);if(d){this._config.defaultInterval=this._config.defaultInterval||this._config.interval;this._config.interval=d}else{this._config.interval=this._config.defaultInterval||this._config.interval}var v=g.getTransitionDurationFromElement(i);y(i).one(g.TRANSITION_END,function(){y(s).removeClass(c+" "+h).addClass(J.ACTIVE);y(i).removeClass(J.ACTIVE+" "+h+" "+c);r._isSliding=false;setTimeout(function(){return y(r._element).trigger(p)},0)}).emulateTransitionEnd(v)}else{y(i).removeClass(J.ACTIVE);y(s).addClass(J.ACTIVE);this._isSliding=false;y(this._element).trigger(p)}if(u){this.cycle()}};s._jQueryInterface=function t(r){return this.each(function(){var t=y(this).data(U);var e=a({},K,{},y(this).data());if(typeof r==="object"){e=a({},e,{},r)}var n=typeof r==="string"?r:e.slide;if(!t){t=new s(this,e);y(this).data(U,t)}if(typeof r==="number"){t.to(r)}else if(typeof n==="string"){if(typeof t[n]==="undefined"){throw new TypeError('No method named "'+n+'"')}t[n]()}else if(e.interval&&e.ride){t.pause();t.cycle()}})};s._dataApiClickHandler=function t(e){var n=g.getSelectorFromElement(this);if(!n){return}var r=y(n)[0];if(!r||!y(r).hasClass(J.CAROUSEL)){return}var i=a({},y(r).data(),{},y(this).data());var o=this.getAttribute("data-slide-to");if(o){i.interval=false}s._jQueryInterface.call(y(r),i);if(o){y(r).data(U).to(o)}e.preventDefault()};o(s,null,[{key:"VERSION",get:function t(){return j}},{key:"Default",get:function t(){return K}}]);return s}();y(document).on(X.CLICK_DATA_API,$.DATA_SLIDE,tt._dataApiClickHandler),y(window).on(X.LOAD_DATA_API,function(){var t=[].slice.call(document.querySelectorAll($.DATA_RIDE));for(var e=0,n=t.length;e<n;e++){var r=y(t[e]);tt._jQueryInterface.call(r,r.data())}}),y.fn[F]=tt._jQueryInterface,y.fn[F].Constructor=tt,y.fn[F].noConflict=function(){y.fn[F]=H;return tt._jQueryInterface};var et="collapse",nt="4.4.1",rt="bs.collapse",it="."+rt,ot=".data-api",st=y.fn[et],at={toggle:true,parent:""},ut={toggle:"boolean",parent:"(string|element)"},ct={SHOW:"show"+it,SHOWN:"shown"+it,HIDE:"hide"+it,HIDDEN:"hidden"+it,CLICK_DATA_API:"click"+it+ot},ht={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},lt={WIDTH:"width",HEIGHT:"height"},ft={ACTIVES:".show, .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},pt=function(){function h(e,t){this._isTransitioning=false;this._element=e;this._config=this._getConfig(t);this._triggerArray=[].slice.call(document.querySelectorAll('[data-toggle="collapse"][href="#'+e.id+'"],'+('[data-toggle="collapse"][data-target="#'+e.id+'"]')));var n=[].slice.call(document.querySelectorAll(ft.DATA_TOGGLE));for(var r=0,i=n.length;r<i;r++){var o=n[r];var s=g.getSelectorFromElement(o);var a=[].slice.call(document.querySelectorAll(s)).filter(function(t){return t===e});if(s!==null&&a.length>0){this._selector=s;this._triggerArray.push(o)}}this._parent=this._config.parent?this._getParent():null;if(!this._config.parent){this._addAriaAndCollapsedClass(this._element,this._triggerArray)}if(this._config.toggle){this.toggle()}}var t=h.prototype;t.toggle=function t(){if(y(this._element).hasClass(ht.SHOW)){this.hide()}else{this.show()}};t.show=function t(){var e=this;if(this._isTransitioning||y(this._element).hasClass(ht.SHOW)){return}var n;var r;if(this._parent){n=[].slice.call(this._parent.querySelectorAll(ft.ACTIVES)).filter(function(t){if(typeof e._config.parent==="string"){return t.getAttribute("data-parent")===e._config.parent}return t.classList.contains(ht.COLLAPSE)});if(n.length===0){n=null}}if(n){r=y(n).not(this._selector).data(rt);if(r&&r._isTransitioning){return}}var i=y.Event(ct.SHOW);y(this._element).trigger(i);if(i.isDefaultPrevented()){return}if(n){h._jQueryInterface.call(y(n).not(this._selector),"hide");if(!r){y(n).data(rt,null)}}var o=this._getDimension();y(this._element).removeClass(ht.COLLAPSE).addClass(ht.COLLAPSING);this._element.style[o]=0;if(this._triggerArray.length){y(this._triggerArray).removeClass(ht.COLLAPSED).attr("aria-expanded",true)}this.setTransitioning(true);var s=function t(){y(e._element).removeClass(ht.COLLAPSING).addClass(ht.COLLAPSE).addClass(ht.SHOW);e._element.style[o]="";e.setTransitioning(false);y(e._element).trigger(ct.SHOWN)};var a=o[0].toUpperCase()+o.slice(1);var u="scroll"+a;var c=g.getTransitionDurationFromElement(this._element);y(this._element).one(g.TRANSITION_END,s).emulateTransitionEnd(c);this._element.style[o]=this._element[u]+"px"};t.hide=function t(){var e=this;if(this._isTransitioning||!y(this._element).hasClass(ht.SHOW)){return}var n=y.Event(ct.HIDE);y(this._element).trigger(n);if(n.isDefaultPrevented()){return}var r=this._getDimension();this._element.style[r]=this._element.getBoundingClientRect()[r]+"px";g.reflow(this._element);y(this._element).addClass(ht.COLLAPSING).removeClass(ht.COLLAPSE).removeClass(ht.SHOW);var i=this._triggerArray.length;if(i>0){for(var o=0;o<i;o++){var s=this._triggerArray[o];var a=g.getSelectorFromElement(s);if(a!==null){var u=y([].slice.call(document.querySelectorAll(a)));if(!u.hasClass(ht.SHOW)){y(s).addClass(ht.COLLAPSED).attr("aria-expanded",false)}}}}this.setTransitioning(true);var c=function t(){e.setTransitioning(false);y(e._element).removeClass(ht.COLLAPSING).addClass(ht.COLLAPSE).trigger(ct.HIDDEN)};this._element.style[r]="";var h=g.getTransitionDurationFromElement(this._element);y(this._element).one(g.TRANSITION_END,c).emulateTransitionEnd(h)};t.setTransitioning=function t(e){this._isTransitioning=e};t.dispose=function t(){y.removeData(this._element,rt);this._config=null;this._parent=null;this._element=null;this._triggerArray=null;this._isTransitioning=null};t._getConfig=function t(e){e=a({},at,{},e);e.toggle=Boolean(e.toggle);g.typeCheckConfig(et,e,ut);return e};t._getDimension=function t(){var e=y(this._element).hasClass(lt.WIDTH);return e?lt.WIDTH:lt.HEIGHT};t._getParent=function t(){var n=this;var e;if(g.isElement(this._config.parent)){e=this._config.parent;if(typeof this._config.parent.jquery!=="undefined"){e=this._config.parent[0]}}else{e=document.querySelector(this._config.parent)}var r='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';var i=[].slice.call(e.querySelectorAll(r));y(i).each(function(t,e){n._addAriaAndCollapsedClass(h._getTargetFromElement(e),[e])});return e};t._addAriaAndCollapsedClass=function t(e,n){var r=y(e).hasClass(ht.SHOW);if(n.length){y(n).toggleClass(ht.COLLAPSED,!r).attr("aria-expanded",r)}};h._getTargetFromElement=function t(e){var n=g.getSelectorFromElement(e);return n?document.querySelector(n):null};h._jQueryInterface=function t(r){return this.each(function(){var t=y(this);var e=t.data(rt);var n=a({},at,{},t.data(),{},typeof r==="object"&&r?r:{});if(!e&&n.toggle&&/show|hide/.test(r)){n.toggle=false}if(!e){e=new h(this,n);t.data(rt,e)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}e[r]()}})};o(h,null,[{key:"VERSION",get:function t(){return nt}},{key:"Default",get:function t(){return at}}]);return h}();y(document).on(ct.CLICK_DATA_API,ft.DATA_TOGGLE,function(t){if(t.currentTarget.tagName==="A"){t.preventDefault()}var r=y(this);var e=g.getSelectorFromElement(this);var n=[].slice.call(document.querySelectorAll(e));y(n).each(function(){var t=y(this);var e=t.data(rt);var n=e?"toggle":r.data();pt._jQueryInterface.call(t,n)})}),y.fn[et]=pt._jQueryInterface,y.fn[et].Constructor=pt,y.fn[et].noConflict=function(){y.fn[et]=st;return pt._jQueryInterface};var dt="dropdown",vt="4.4.1",yt="bs.dropdown",gt="."+yt,mt=".data-api",_t=y.fn[dt],bt=27,wt=32,Et=9,Tt=38,It=40,St=3,Ct=new RegExp(Tt+"|"+It+"|"+bt),At={HIDE:"hide"+gt,HIDDEN:"hidden"+gt,SHOW:"show"+gt,SHOWN:"shown"+gt,CLICK:"click"+gt,CLICK_DATA_API:"click"+gt+mt,KEYDOWN_DATA_API:"keydown"+gt+mt,KEYUP_DATA_API:"keyup"+gt+mt},Nt={DISABLED:"disabled",SHOW:"show",DROPUP:"dropup",DROPRIGHT:"dropright",DROPLEFT:"dropleft",MENURIGHT:"dropdown-menu-right",MENULEFT:"dropdown-menu-left",POSITION_STATIC:"position-static"},Ot={DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",MENU:".dropdown-menu",NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)"},Dt={TOP:"top-start",TOPEND:"top-end",BOTTOM:"bottom-start",BOTTOMEND:"bottom-end",RIGHT:"right-start",RIGHTEND:"right-end",LEFT:"left-start",LEFTEND:"left-end"},kt={offset:0,flip:true,boundary:"scrollParent",reference:"toggle",display:"dynamic",popperConfig:null},xt={offset:"(number|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element)",display:"string",popperConfig:"(null|object)"},Rt=function(){function h(t,e){this._element=t;this._popper=null;this._config=this._getConfig(e);this._menu=this._getMenuElement();this._inNavbar=this._detectNavbar();this._addEventListeners()}var t=h.prototype;t.toggle=function t(){if(this._element.disabled||y(this._element).hasClass(Nt.DISABLED)){return}var e=y(this._menu).hasClass(Nt.SHOW);h._clearMenus();if(e){return}this.show(true)};t.show=function t(e){if(e===void 0){e=false}if(this._element.disabled||y(this._element).hasClass(Nt.DISABLED)||y(this._menu).hasClass(Nt.SHOW)){return}var n={relatedTarget:this._element};var r=y.Event(At.SHOW,n);var i=h._getParentFromElement(this._element);y(i).trigger(r);if(r.isDefaultPrevented()){return}if(!this._inNavbar&&e){if(typeof f==="undefined"){throw new TypeError("Bootstrap's dropdowns require Popper.js (https://popper.js.org/)")}var o=this._element;if(this._config.reference==="parent"){o=i}else if(g.isElement(this._config.reference)){o=this._config.reference;if(typeof this._config.reference.jquery!=="undefined"){o=this._config.reference[0]}}if(this._config.boundary!=="scrollParent"){y(i).addClass(Nt.POSITION_STATIC)}this._popper=new f(o,this._menu,this._getPopperConfig())}if("ontouchstart"in document.documentElement&&y(i).closest(Ot.NAVBAR_NAV).length===0){y(document.body).children().on("mouseover",null,y.noop)}this._element.focus();this._element.setAttribute("aria-expanded",true);y(this._menu).toggleClass(Nt.SHOW);y(i).toggleClass(Nt.SHOW).trigger(y.Event(At.SHOWN,n))};t.hide=function t(){if(this._element.disabled||y(this._element).hasClass(Nt.DISABLED)||!y(this._menu).hasClass(Nt.SHOW)){return}var e={relatedTarget:this._element};var n=y.Event(At.HIDE,e);var r=h._getParentFromElement(this._element);y(r).trigger(n);if(n.isDefaultPrevented()){return}if(this._popper){this._popper.destroy()}y(this._menu).toggleClass(Nt.SHOW);y(r).toggleClass(Nt.SHOW).trigger(y.Event(At.HIDDEN,e))};t.dispose=function t(){y.removeData(this._element,yt);y(this._element).off(gt);this._element=null;this._menu=null;if(this._popper!==null){this._popper.destroy();this._popper=null}};t.update=function t(){this._inNavbar=this._detectNavbar();if(this._popper!==null){this._popper.scheduleUpdate()}};t._addEventListeners=function t(){var e=this;y(this._element).on(At.CLICK,function(t){t.preventDefault();t.stopPropagation();e.toggle()})};t._getConfig=function t(e){e=a({},this.constructor.Default,{},y(this._element).data(),{},e);g.typeCheckConfig(dt,e,this.constructor.DefaultType);return e};t._getMenuElement=function t(){if(!this._menu){var e=h._getParentFromElement(this._element);if(e){this._menu=e.querySelector(Ot.MENU)}}return this._menu};t._getPlacement=function t(){var e=y(this._element.parentNode);var n=Dt.BOTTOM;if(e.hasClass(Nt.DROPUP)){n=Dt.TOP;if(y(this._menu).hasClass(Nt.MENURIGHT)){n=Dt.TOPEND}}else if(e.hasClass(Nt.DROPRIGHT)){n=Dt.RIGHT}else if(e.hasClass(Nt.DROPLEFT)){n=Dt.LEFT}else if(y(this._menu).hasClass(Nt.MENURIGHT)){n=Dt.BOTTOMEND}return n};t._detectNavbar=function t(){return y(this._element).closest(".navbar").length>0};t._getOffset=function t(){var e=this;var n={};if(typeof this._config.offset==="function"){n.fn=function(t){t.offsets=a({},t.offsets,{},e._config.offset(t.offsets,e._element)||{});return t}}else{n.offset=this._config.offset}return n};t._getPopperConfig=function t(){var e={placement:this._getPlacement(),modifiers:{offset:this._getOffset(),flip:{enabled:this._config.flip},preventOverflow:{boundariesElement:this._config.boundary}}};if(this._config.display==="static"){e.modifiers.applyStyle={enabled:false}}return a({},e,{},this._config.popperConfig)};h._jQueryInterface=function t(n){return this.each(function(){var t=y(this).data(yt);var e=typeof n==="object"?n:null;if(!t){t=new h(this,e);y(this).data(yt,t)}if(typeof n==="string"){if(typeof t[n]==="undefined"){throw new TypeError('No method named "'+n+'"')}t[n]()}})};h._clearMenus=function t(e){if(e&&(e.which===St||e.type==="keyup"&&e.which!==Et)){return}var n=[].slice.call(document.querySelectorAll(Ot.DATA_TOGGLE));for(var r=0,i=n.length;r<i;r++){var o=h._getParentFromElement(n[r]);var s=y(n[r]).data(yt);var a={relatedTarget:n[r]};if(e&&e.type==="click"){a.clickEvent=e}if(!s){continue}var u=s._menu;if(!y(o).hasClass(Nt.SHOW)){continue}if(e&&(e.type==="click"&&/input|textarea/i.test(e.target.tagName)||e.type==="keyup"&&e.which===Et)&&y.contains(o,e.target)){continue}var c=y.Event(At.HIDE,a);y(o).trigger(c);if(c.isDefaultPrevented()){continue}if("ontouchstart"in document.documentElement){y(document.body).children().off("mouseover",null,y.noop)}n[r].setAttribute("aria-expanded","false");if(s._popper){s._popper.destroy()}y(u).removeClass(Nt.SHOW);y(o).removeClass(Nt.SHOW).trigger(y.Event(At.HIDDEN,a))}};h._getParentFromElement=function t(e){var n;var r=g.getSelectorFromElement(e);if(r){n=document.querySelector(r)}return n||e.parentNode};h._dataApiKeydownHandler=function t(e){if(/input|textarea/i.test(e.target.tagName)?e.which===wt||e.which!==bt&&(e.which!==It&&e.which!==Tt||y(e.target).closest(Ot.MENU).length):!Ct.test(e.which)){return}e.preventDefault();e.stopPropagation();if(this.disabled||y(this).hasClass(Nt.DISABLED)){return}var n=h._getParentFromElement(this);var r=y(n).hasClass(Nt.SHOW);if(!r&&e.which===bt){return}if(!r||r&&(e.which===bt||e.which===wt)){if(e.which===bt){var i=n.querySelector(Ot.DATA_TOGGLE);y(i).trigger("focus")}y(this).trigger("click");return}var o=[].slice.call(n.querySelectorAll(Ot.VISIBLE_ITEMS)).filter(function(t){return y(t).is(":visible")});if(o.length===0){return}var s=o.indexOf(e.target);if(e.which===Tt&&s>0){s--}if(e.which===It&&s<o.length-1){s++}if(s<0){s=0}o[s].focus()};o(h,null,[{key:"VERSION",get:function t(){return vt}},{key:"Default",get:function t(){return kt}},{key:"DefaultType",get:function t(){return xt}}]);return h}();y(document).on(At.KEYDOWN_DATA_API,Ot.DATA_TOGGLE,Rt._dataApiKeydownHandler).on(At.KEYDOWN_DATA_API,Ot.MENU,Rt._dataApiKeydownHandler).on(At.CLICK_DATA_API+" "+At.KEYUP_DATA_API,Rt._clearMenus).on(At.CLICK_DATA_API,Ot.DATA_TOGGLE,function(t){t.preventDefault();t.stopPropagation();Rt._jQueryInterface.call(y(this),"toggle")}).on(At.CLICK_DATA_API,Ot.FORM_CHILD,function(t){t.stopPropagation()}),y.fn[dt]=Rt._jQueryInterface,y.fn[dt].Constructor=Rt,y.fn[dt].noConflict=function(){y.fn[dt]=_t;return Rt._jQueryInterface};var Pt="modal",Lt="4.4.1",Mt="bs.modal",Ft="."+Mt,jt=".data-api",Ut=y.fn[Pt],qt=27,Vt={backdrop:true,keyboard:true,focus:true,show:true},Ht={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},Wt={HIDE:"hide"+Ft,HIDE_PREVENTED:"hidePrevented"+Ft,HIDDEN:"hidden"+Ft,SHOW:"show"+Ft,SHOWN:"shown"+Ft,FOCUSIN:"focusin"+Ft,RESIZE:"resize"+Ft,CLICK_DISMISS:"click.dismiss"+Ft,KEYDOWN_DISMISS:"keydown.dismiss"+Ft,MOUSEUP_DISMISS:"mouseup.dismiss"+Ft,MOUSEDOWN_DISMISS:"mousedown.dismiss"+Ft,CLICK_DATA_API:"click"+Ft+jt},Bt={SCROLLABLE:"modal-dialog-scrollable",SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show",STATIC:"modal-static"},Gt={DIALOG:".modal-dialog",MODAL_BODY:".modal-body",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top"},zt=function(){function i(t,e){this._config=this._getConfig(e);this._element=t;this._dialog=t.querySelector(Gt.DIALOG);this._backdrop=null;this._isShown=false;this._isBodyOverflowing=false;this._ignoreBackdropClick=false;this._isTransitioning=false;this._scrollbarWidth=0}var t=i.prototype;t.toggle=function t(e){return this._isShown?this.hide():this.show(e)};t.show=function t(e){var n=this;if(this._isShown||this._isTransitioning){return}if(y(this._element).hasClass(Bt.FADE)){this._isTransitioning=true}var r=y.Event(Wt.SHOW,{relatedTarget:e});y(this._element).trigger(r);if(this._isShown||r.isDefaultPrevented()){return}this._isShown=true;this._checkScrollbar();this._setScrollbar();this._adjustDialog();this._setEscapeEvent();this._setResizeEvent();y(this._element).on(Wt.CLICK_DISMISS,Gt.DATA_DISMISS,function(t){return n.hide(t)});y(this._dialog).on(Wt.MOUSEDOWN_DISMISS,function(){y(n._element).one(Wt.MOUSEUP_DISMISS,function(t){if(y(t.target).is(n._element)){n._ignoreBackdropClick=true}})});this._showBackdrop(function(){return n._showElement(e)})};t.hide=function t(e){var n=this;if(e){e.preventDefault()}if(!this._isShown||this._isTransitioning){return}var r=y.Event(Wt.HIDE);y(this._element).trigger(r);if(!this._isShown||r.isDefaultPrevented()){return}this._isShown=false;var i=y(this._element).hasClass(Bt.FADE);if(i){this._isTransitioning=true}this._setEscapeEvent();this._setResizeEvent();y(document).off(Wt.FOCUSIN);y(this._element).removeClass(Bt.SHOW);y(this._element).off(Wt.CLICK_DISMISS);y(this._dialog).off(Wt.MOUSEDOWN_DISMISS);if(i){var o=g.getTransitionDurationFromElement(this._element);y(this._element).one(g.TRANSITION_END,function(t){return n._hideModal(t)}).emulateTransitionEnd(o)}else{this._hideModal()}};t.dispose=function t(){[window,this._element,this._dialog].forEach(function(t){return y(t).off(Ft)});y(document).off(Wt.FOCUSIN);y.removeData(this._element,Mt);this._config=null;this._element=null;this._dialog=null;this._backdrop=null;this._isShown=null;this._isBodyOverflowing=null;this._ignoreBackdropClick=null;this._isTransitioning=null;this._scrollbarWidth=null};t.handleUpdate=function t(){this._adjustDialog()};t._getConfig=function t(e){e=a({},Vt,{},e);g.typeCheckConfig(Pt,e,Ht);return e};t._triggerBackdropTransition=function t(){var e=this;if(this._config.backdrop==="static"){var n=y.Event(Wt.HIDE_PREVENTED);y(this._element).trigger(n);if(n.defaultPrevented){return}this._element.classList.add(Bt.STATIC);var r=g.getTransitionDurationFromElement(this._element);y(this._element).one(g.TRANSITION_END,function(){e._element.classList.remove(Bt.STATIC)}).emulateTransitionEnd(r);this._element.focus()}else{this.hide()}};t._showElement=function t(e){var n=this;var r=y(this._element).hasClass(Bt.FADE);var i=this._dialog?this._dialog.querySelector(Gt.MODAL_BODY):null;if(!this._element.parentNode||this._element.parentNode.nodeType!==Node.ELEMENT_NODE){document.body.appendChild(this._element)}this._element.style.display="block";this._element.removeAttribute("aria-hidden");this._element.setAttribute("aria-modal",true);if(y(this._dialog).hasClass(Bt.SCROLLABLE)&&i){i.scrollTop=0}else{this._element.scrollTop=0}if(r){g.reflow(this._element)}y(this._element).addClass(Bt.SHOW);if(this._config.focus){this._enforceFocus()}var o=y.Event(Wt.SHOWN,{relatedTarget:e});var s=function t(){if(n._config.focus){n._element.focus()}n._isTransitioning=false;y(n._element).trigger(o)};if(r){var a=g.getTransitionDurationFromElement(this._dialog);y(this._dialog).one(g.TRANSITION_END,s).emulateTransitionEnd(a)}else{s()}};t._enforceFocus=function t(){var e=this;y(document).off(Wt.FOCUSIN).on(Wt.FOCUSIN,function(t){if(document!==t.target&&e._element!==t.target&&y(e._element).has(t.target).length===0){e._element.focus()}})};t._setEscapeEvent=function t(){var e=this;if(this._isShown&&this._config.keyboard){y(this._element).on(Wt.KEYDOWN_DISMISS,function(t){if(t.which===qt){e._triggerBackdropTransition()}})}else if(!this._isShown){y(this._element).off(Wt.KEYDOWN_DISMISS)}};t._setResizeEvent=function t(){var e=this;if(this._isShown){y(window).on(Wt.RESIZE,function(t){return e.handleUpdate(t)})}else{y(window).off(Wt.RESIZE)}};t._hideModal=function t(){var e=this;this._element.style.display="none";this._element.setAttribute("aria-hidden",true);this._element.removeAttribute("aria-modal");this._isTransitioning=false;this._showBackdrop(function(){y(document.body).removeClass(Bt.OPEN);e._resetAdjustments();e._resetScrollbar();y(e._element).trigger(Wt.HIDDEN)})};t._removeBackdrop=function t(){if(this._backdrop){y(this._backdrop).remove();this._backdrop=null}};t._showBackdrop=function t(e){var n=this;var r=y(this._element).hasClass(Bt.FADE)?Bt.FADE:"";if(this._isShown&&this._config.backdrop){this._backdrop=document.createElement("div");this._backdrop.className=Bt.BACKDROP;if(r){this._backdrop.classList.add(r)}y(this._backdrop).appendTo(document.body);y(this._element).on(Wt.CLICK_DISMISS,function(t){if(n._ignoreBackdropClick){n._ignoreBackdropClick=false;return}if(t.target!==t.currentTarget){return}n._triggerBackdropTransition()});if(r){g.reflow(this._backdrop)}y(this._backdrop).addClass(Bt.SHOW);if(!e){return}if(!r){e();return}var i=g.getTransitionDurationFromElement(this._backdrop);y(this._backdrop).one(g.TRANSITION_END,e).emulateTransitionEnd(i)}else if(!this._isShown&&this._backdrop){y(this._backdrop).removeClass(Bt.SHOW);var o=function t(){n._removeBackdrop();if(e){e()}};if(y(this._element).hasClass(Bt.FADE)){var s=g.getTransitionDurationFromElement(this._backdrop);y(this._backdrop).one(g.TRANSITION_END,o).emulateTransitionEnd(s)}else{o()}}else if(e){e()}};t._adjustDialog=function t(){var e=this._element.scrollHeight>document.documentElement.clientHeight;if(!this._isBodyOverflowing&&e){this._element.style.paddingLeft=this._scrollbarWidth+"px"}if(this._isBodyOverflowing&&!e){this._element.style.paddingRight=this._scrollbarWidth+"px"}};t._resetAdjustments=function t(){this._element.style.paddingLeft="";this._element.style.paddingRight=""};t._checkScrollbar=function t(){var e=document.body.getBoundingClientRect();this._isBodyOverflowing=e.left+e.right<window.innerWidth;this._scrollbarWidth=this._getScrollbarWidth()};t._setScrollbar=function t(){var i=this;if(this._isBodyOverflowing){var e=[].slice.call(document.querySelectorAll(Gt.FIXED_CONTENT));var n=[].slice.call(document.querySelectorAll(Gt.STICKY_CONTENT));y(e).each(function(t,e){var n=e.style.paddingRight;var r=y(e).css("padding-right");y(e).data("padding-right",n).css("padding-right",parseFloat(r)+i._scrollbarWidth+"px")});y(n).each(function(t,e){var n=e.style.marginRight;var r=y(e).css("margin-right");y(e).data("margin-right",n).css("margin-right",parseFloat(r)-i._scrollbarWidth+"px")});var r=document.body.style.paddingRight;var o=y(document.body).css("padding-right");y(document.body).data("padding-right",r).css("padding-right",parseFloat(o)+this._scrollbarWidth+"px")}y(document.body).addClass(Bt.OPEN)};t._resetScrollbar=function t(){var e=[].slice.call(document.querySelectorAll(Gt.FIXED_CONTENT));y(e).each(function(t,e){var n=y(e).data("padding-right");y(e).removeData("padding-right");e.style.paddingRight=n?n:""});var n=[].slice.call(document.querySelectorAll(""+Gt.STICKY_CONTENT));y(n).each(function(t,e){var n=y(e).data("margin-right");if(typeof n!=="undefined"){y(e).css("margin-right",n).removeData("margin-right")}});var r=y(document.body).data("padding-right");y(document.body).removeData("padding-right");document.body.style.paddingRight=r?r:""};t._getScrollbarWidth=function t(){var e=document.createElement("div");e.className=Bt.SCROLLBAR_MEASURER;document.body.appendChild(e);var n=e.getBoundingClientRect().width-e.clientWidth;document.body.removeChild(e);return n};i._jQueryInterface=function t(n,r){return this.each(function(){var t=y(this).data(Mt);var e=a({},Vt,{},y(this).data(),{},typeof n==="object"&&n?n:{});if(!t){t=new i(this,e);y(this).data(Mt,t)}if(typeof n==="string"){if(typeof t[n]==="undefined"){throw new TypeError('No method named "'+n+'"')}t[n](r)}else if(e.show){t.show(r)}})};o(i,null,[{key:"VERSION",get:function t(){return Lt}},{key:"Default",get:function t(){return Vt}}]);return i}();y(document).on(Wt.CLICK_DATA_API,Gt.DATA_TOGGLE,function(t){var e=this;var n;var r=g.getSelectorFromElement(this);if(r){n=document.querySelector(r)}var i=y(n).data(Mt)?"toggle":a({},y(n).data(),{},y(this).data());if(this.tagName==="A"||this.tagName==="AREA"){t.preventDefault()}var o=y(n).one(Wt.SHOW,function(t){if(t.isDefaultPrevented()){return}o.one(Wt.HIDDEN,function(){if(y(e).is(":visible")){e.focus()}})});zt._jQueryInterface.call(y(n),i,this)}),y.fn[Pt]=zt._jQueryInterface,y.fn[Pt].Constructor=zt,y.fn[Pt].noConflict=function(){y.fn[Pt]=Ut;return zt._jQueryInterface};var Kt=["background","cite","href","itemtype","longdesc","poster","src","xlink:href"],Qt,Yt={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],div:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Xt=/^(?:(?:https?|mailto|ftp|tel|file):|[^&:/?#]*(?:[/?#]|$))/gi,Jt=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+/]+=*$/i;function $t(t,e){var n=t.nodeName.toLowerCase();if(e.indexOf(n)!==-1){if(Kt.indexOf(n)!==-1){return Boolean(t.nodeValue.match(Xt)||t.nodeValue.match(Jt))}return true}var r=e.filter(function(t){return t instanceof RegExp});for(var i=0,o=r.length;i<o;i++){if(n.match(r[i])){return true}}return false}function Zt(t,a,e){if(t.length===0){return t}if(e&&typeof e==="function"){return e(t)}var n=new window.DOMParser;var r=n.parseFromString(t,"text/html");var u=Object.keys(a);var c=[].slice.call(r.body.querySelectorAll("*"));var i=function t(e,n){var r=c[e];var i=r.nodeName.toLowerCase();if(u.indexOf(r.nodeName.toLowerCase())===-1){r.parentNode.removeChild(r);return"continue"}var o=[].slice.call(r.attributes);var s=[].concat(a["*"]||[],a[i]||[]);o.forEach(function(t){if(!$t(t,s)){r.removeAttribute(t.nodeName)}})};for(var o=0,s=c.length;o<s;o++){var h=i(o);if(h==="continue")continue}return r.body.innerHTML}var te="tooltip",ee="4.4.1",ne="bs.tooltip",re="."+ne,ie=y.fn[te],oe="bs-tooltip",se=new RegExp("(^|\\s)"+oe+"\\S+","g"),ae=["sanitize","whiteList","sanitizeFn"],ue={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"(number|string|function)",container:"(string|element|boolean)",fallbackPlacement:"(string|array)",boundary:"(string|element)",sanitize:"boolean",sanitizeFn:"(null|function)",whiteList:"object",popperConfig:"(null|object)"},ce={AUTO:"auto",TOP:"top",RIGHT:"right",BOTTOM:"bottom",LEFT:"left"},he={animation:true,template:'<div class="tooltip" role="tooltip">'+'<div class="arrow"></div>'+'<div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,selector:false,placement:"top",offset:0,container:false,fallbackPlacement:"flip",boundary:"scrollParent",sanitize:true,sanitizeFn:null,whiteList:Yt,popperConfig:null},le={SHOW:"show",OUT:"out"},fe={HIDE:"hide"+re,HIDDEN:"hidden"+re,SHOW:"show"+re,SHOWN:"shown"+re,INSERTED:"inserted"+re,CLICK:"click"+re,FOCUSIN:"focusin"+re,FOCUSOUT:"focusout"+re,MOUSEENTER:"mouseenter"+re,MOUSELEAVE:"mouseleave"+re},pe={FADE:"fade",SHOW:"show"},de={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner",ARROW:".arrow"},ve={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},ye=function(){function r(t,e){if(typeof f==="undefined"){throw new TypeError("Bootstrap's tooltips require Popper.js (https://popper.js.org/)")}this._isEnabled=true;this._timeout=0;this._hoverState="";this._activeTrigger={};this._popper=null;this.element=t;this.config=this._getConfig(e);this.tip=null;this._setListeners()}var t=r.prototype;t.enable=function t(){this._isEnabled=true};t.disable=function t(){this._isEnabled=false};t.toggleEnabled=function t(){this._isEnabled=!this._isEnabled};t.toggle=function t(e){if(!this._isEnabled){return}if(e){var n=this.constructor.DATA_KEY;var r=y(e.currentTarget).data(n);if(!r){r=new this.constructor(e.currentTarget,this._getDelegateConfig());y(e.currentTarget).data(n,r)}r._activeTrigger.click=!r._activeTrigger.click;if(r._isWithActiveTrigger()){r._enter(null,r)}else{r._leave(null,r)}}else{if(y(this.getTipElement()).hasClass(pe.SHOW)){this._leave(null,this);return}this._enter(null,this)}};t.dispose=function t(){clearTimeout(this._timeout);y.removeData(this.element,this.constructor.DATA_KEY);y(this.element).off(this.constructor.EVENT_KEY);y(this.element).closest(".modal").off("hide.bs.modal",this._hideModalHandler);if(this.tip){y(this.tip).remove()}this._isEnabled=null;this._timeout=null;this._hoverState=null;this._activeTrigger=null;if(this._popper){this._popper.destroy()}this._popper=null;this.element=null;this.config=null;this.tip=null};t.show=function t(){var n=this;if(y(this.element).css("display")==="none"){throw new Error("Please use show on visible elements")}var e=y.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){y(this.element).trigger(e);var r=g.findShadowRoot(this.element);var i=y.contains(r!==null?r:this.element.ownerDocument.documentElement,this.element);if(e.isDefaultPrevented()||!i){return}var o=this.getTipElement();var s=g.getUID(this.constructor.NAME);o.setAttribute("id",s);this.element.setAttribute("aria-describedby",s);this.setContent();if(this.config.animation){y(o).addClass(pe.FADE)}var a=typeof this.config.placement==="function"?this.config.placement.call(this,o,this.element):this.config.placement;var u=this._getAttachment(a);this.addAttachmentClass(u);var c=this._getContainer();y(o).data(this.constructor.DATA_KEY,this);if(!y.contains(this.element.ownerDocument.documentElement,this.tip)){y(o).appendTo(c)}y(this.element).trigger(this.constructor.Event.INSERTED);this._popper=new f(this.element,o,this._getPopperConfig(u));y(o).addClass(pe.SHOW);if("ontouchstart"in document.documentElement){y(document.body).children().on("mouseover",null,y.noop)}var h=function t(){if(n.config.animation){n._fixTransition()}var e=n._hoverState;n._hoverState=null;y(n.element).trigger(n.constructor.Event.SHOWN);if(e===le.OUT){n._leave(null,n)}};if(y(this.tip).hasClass(pe.FADE)){var l=g.getTransitionDurationFromElement(this.tip);y(this.tip).one(g.TRANSITION_END,h).emulateTransitionEnd(l)}else{h()}}};t.hide=function t(e){var n=this;var r=this.getTipElement();var i=y.Event(this.constructor.Event.HIDE);var o=function t(){if(n._hoverState!==le.SHOW&&r.parentNode){r.parentNode.removeChild(r)}n._cleanTipClass();n.element.removeAttribute("aria-describedby");y(n.element).trigger(n.constructor.Event.HIDDEN);if(n._popper!==null){n._popper.destroy()}if(e){e()}};y(this.element).trigger(i);if(i.isDefaultPrevented()){return}y(r).removeClass(pe.SHOW);if("ontouchstart"in document.documentElement){y(document.body).children().off("mouseover",null,y.noop)}this._activeTrigger[ve.CLICK]=false;this._activeTrigger[ve.FOCUS]=false;this._activeTrigger[ve.HOVER]=false;if(y(this.tip).hasClass(pe.FADE)){var s=g.getTransitionDurationFromElement(r);y(r).one(g.TRANSITION_END,o).emulateTransitionEnd(s)}else{o()}this._hoverState=""};t.update=function t(){if(this._popper!==null){this._popper.scheduleUpdate()}};t.isWithContent=function t(){return Boolean(this.getTitle())};t.addAttachmentClass=function t(e){y(this.getTipElement()).addClass(oe+"-"+e)};t.getTipElement=function t(){this.tip=this.tip||y(this.config.template)[0];return this.tip};t.setContent=function t(){var e=this.getTipElement();this.setElementContent(y(e.querySelectorAll(de.TOOLTIP_INNER)),this.getTitle());y(e).removeClass(pe.FADE+" "+pe.SHOW)};t.setElementContent=function t(e,n){if(typeof n==="object"&&(n.nodeType||n.jquery)){if(this.config.html){if(!y(n).parent().is(e)){e.empty().append(n)}}else{e.text(y(n).text())}return}if(this.config.html){if(this.config.sanitize){n=Zt(n,this.config.whiteList,this.config.sanitizeFn)}e.html(n)}else{e.text(n)}};t.getTitle=function t(){var e=this.element.getAttribute("data-original-title");if(!e){e=typeof this.config.title==="function"?this.config.title.call(this.element):this.config.title}return e};t._getPopperConfig=function t(e){var n=this;var r={placement:e,modifiers:{offset:this._getOffset(),flip:{behavior:this.config.fallbackPlacement},arrow:{element:de.ARROW},preventOverflow:{boundariesElement:this.config.boundary}},onCreate:function t(e){if(e.originalPlacement!==e.placement){n._handlePopperPlacementChange(e)}},onUpdate:function t(e){return n._handlePopperPlacementChange(e)}};return a({},r,{},this.config.popperConfig)};t._getOffset=function t(){var e=this;var n={};if(typeof this.config.offset==="function"){n.fn=function(t){t.offsets=a({},t.offsets,{},e.config.offset(t.offsets,e.element)||{});return t}}else{n.offset=this.config.offset}return n};t._getContainer=function t(){if(this.config.container===false){return document.body}if(g.isElement(this.config.container)){return y(this.config.container)}return y(document).find(this.config.container)};t._getAttachment=function t(e){return ce[e.toUpperCase()]};t._setListeners=function t(){var r=this;var e=this.config.trigger.split(" ");e.forEach(function(t){if(t==="click"){y(r.element).on(r.constructor.Event.CLICK,r.config.selector,function(t){return r.toggle(t)})}else if(t!==ve.MANUAL){var e=t===ve.HOVER?r.constructor.Event.MOUSEENTER:r.constructor.Event.FOCUSIN;var n=t===ve.HOVER?r.constructor.Event.MOUSELEAVE:r.constructor.Event.FOCUSOUT;y(r.element).on(e,r.config.selector,function(t){return r._enter(t)}).on(n,r.config.selector,function(t){return r._leave(t)})}});this._hideModalHandler=function(){if(r.element){r.hide()}};y(this.element).closest(".modal").on("hide.bs.modal",this._hideModalHandler);if(this.config.selector){this.config=a({},this.config,{trigger:"manual",selector:""})}else{this._fixTitle()}};t._fixTitle=function t(){var e=typeof this.element.getAttribute("data-original-title");if(this.element.getAttribute("title")||e!=="string"){this.element.setAttribute("data-original-title",this.element.getAttribute("title")||"");this.element.setAttribute("title","")}};t._enter=function t(e,n){var r=this.constructor.DATA_KEY;n=n||y(e.currentTarget).data(r);if(!n){n=new this.constructor(e.currentTarget,this._getDelegateConfig());y(e.currentTarget).data(r,n)}if(e){n._activeTrigger[e.type==="focusin"?ve.FOCUS:ve.HOVER]=true}if(y(n.getTipElement()).hasClass(pe.SHOW)||n._hoverState===le.SHOW){n._hoverState=le.SHOW;return}clearTimeout(n._timeout);n._hoverState=le.SHOW;if(!n.config.delay||!n.config.delay.show){n.show();return}n._timeout=setTimeout(function(){if(n._hoverState===le.SHOW){n.show()}},n.config.delay.show)};t._leave=function t(e,n){var r=this.constructor.DATA_KEY;n=n||y(e.currentTarget).data(r);if(!n){n=new this.constructor(e.currentTarget,this._getDelegateConfig());y(e.currentTarget).data(r,n)}if(e){n._activeTrigger[e.type==="focusout"?ve.FOCUS:ve.HOVER]=false}if(n._isWithActiveTrigger()){return}clearTimeout(n._timeout);n._hoverState=le.OUT;if(!n.config.delay||!n.config.delay.hide){n.hide();return}n._timeout=setTimeout(function(){if(n._hoverState===le.OUT){n.hide()}},n.config.delay.hide)};t._isWithActiveTrigger=function t(){for(var e in this._activeTrigger){if(this._activeTrigger[e]){return true}}return false};t._getConfig=function t(e){var n=y(this.element).data();Object.keys(n).forEach(function(t){if(ae.indexOf(t)!==-1){delete n[t]}});e=a({},this.constructor.Default,{},n,{},typeof e==="object"&&e?e:{});if(typeof e.delay==="number"){e.delay={show:e.delay,hide:e.delay}}if(typeof e.title==="number"){e.title=e.title.toString()}if(typeof e.content==="number"){e.content=e.content.toString()}g.typeCheckConfig(te,e,this.constructor.DefaultType);if(e.sanitize){e.template=Zt(e.template,e.whiteList,e.sanitizeFn)}return e};t._getDelegateConfig=function t(){var e={};if(this.config){for(var n in this.config){if(this.constructor.Default[n]!==this.config[n]){e[n]=this.config[n]}}}return e};t._cleanTipClass=function t(){var e=y(this.getTipElement());var n=e.attr("class").match(se);if(n!==null&&n.length){e.removeClass(n.join(""))}};t._handlePopperPlacementChange=function t(e){var n=e.instance;this.tip=n.popper;this._cleanTipClass();this.addAttachmentClass(this._getAttachment(e.placement))};t._fixTransition=function t(){var e=this.getTipElement();var n=this.config.animation;if(e.getAttribute("x-placement")!==null){return}y(e).removeClass(pe.FADE);this.config.animation=false;this.hide();this.show();this.config.animation=n};r._jQueryInterface=function t(n){return this.each(function(){var t=y(this).data(ne);var e=typeof n==="object"&&n;if(!t&&/dispose|hide/.test(n)){return}if(!t){t=new r(this,e);y(this).data(ne,t)}if(typeof n==="string"){if(typeof t[n]==="undefined"){throw new TypeError('No method named "'+n+'"')}t[n]()}})};o(r,null,[{key:"VERSION",get:function t(){return ee}},{key:"Default",get:function t(){return he}},{key:"NAME",get:function t(){return te}},{key:"DATA_KEY",get:function t(){return ne}},{key:"Event",get:function t(){return fe}},{key:"EVENT_KEY",get:function t(){return re}},{key:"DefaultType",get:function t(){return ue}}]);return r}();y.fn[te]=ye._jQueryInterface,y.fn[te].Constructor=ye,y.fn[te].noConflict=function(){y.fn[te]=ie;return ye._jQueryInterface};var ge="popover",me="4.4.1",_e="bs.popover",be="."+_e,we=y.fn[ge],Ee="bs-popover",Te=new RegExp("(^|\\s)"+Ee+"\\S+","g"),Ie=a({},ye.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip">'+'<div class="arrow"></div>'+'<h3 class="popover-header"></h3>'+'<div class="popover-body"></div></div>'}),Se=a({},ye.DefaultType,{content:"(string|element|function)"}),Ce={FADE:"fade",SHOW:"show"},Ae={TITLE:".popover-header",CONTENT:".popover-body"},Ne={HIDE:"hide"+be,HIDDEN:"hidden"+be,SHOW:"show"+be,SHOWN:"shown"+be,INSERTED:"inserted"+be,CLICK:"click"+be,FOCUSIN:"focusin"+be,FOCUSOUT:"focusout"+be,MOUSEENTER:"mouseenter"+be,MOUSELEAVE:"mouseleave"+be},Oe=function(t){n(r,t);function r(){return t.apply(this,arguments)||this}var e=r.prototype;e.isWithContent=function t(){return this.getTitle()||this._getContent()};e.addAttachmentClass=function t(e){y(this.getTipElement()).addClass(Ee+"-"+e)};e.getTipElement=function t(){this.tip=this.tip||y(this.config.template)[0];return this.tip};e.setContent=function t(){var e=y(this.getTipElement());this.setElementContent(e.find(Ae.TITLE),this.getTitle());var n=this._getContent();if(typeof n==="function"){n=n.call(this.element)}this.setElementContent(e.find(Ae.CONTENT),n);e.removeClass(Ce.FADE+" "+Ce.SHOW)};e._getContent=function t(){return this.element.getAttribute("data-content")||this.config.content};e._cleanTipClass=function t(){var e=y(this.getTipElement());var n=e.attr("class").match(Te);if(n!==null&&n.length>0){e.removeClass(n.join(""))}};r._jQueryInterface=function t(n){return this.each(function(){var t=y(this).data(_e);var e=typeof n==="object"?n:null;if(!t&&/dispose|hide/.test(n)){return}if(!t){t=new r(this,e);y(this).data(_e,t)}if(typeof n==="string"){if(typeof t[n]==="undefined"){throw new TypeError('No method named "'+n+'"')}t[n]()}})};o(r,null,[{key:"VERSION",get:function t(){return me}},{key:"Default",get:function t(){return Ie}},{key:"NAME",get:function t(){return ge}},{key:"DATA_KEY",get:function t(){return _e}},{key:"Event",get:function t(){return Ne}},{key:"EVENT_KEY",get:function t(){return be}},{key:"DefaultType",get:function t(){return Se}}]);return r}(ye);y.fn[ge]=Oe._jQueryInterface,y.fn[ge].Constructor=Oe,y.fn[ge].noConflict=function(){y.fn[ge]=we;return Oe._jQueryInterface};var De="scrollspy",ke="4.4.1",xe="bs.scrollspy",Re="."+xe,Pe=".data-api",Le=y.fn[De],Me={offset:10,method:"auto",target:""},Fe={offset:"number",method:"string",target:"(string|element)"},je={ACTIVATE:"activate"+Re,SCROLL:"scroll"+Re,LOAD_DATA_API:"load"+Re+Pe},Ue={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active"},qe={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",NAV_LIST_GROUP:".nav, .list-group",NAV_LINKS:".nav-link",NAV_ITEMS:".nav-item",LIST_ITEMS:".list-group-item",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},Ve={OFFSET:"offset",POSITION:"position"},He=function(){function r(t,e){var n=this;this._element=t;this._scrollElement=t.tagName==="BODY"?window:t;this._config=this._getConfig(e);this._selector=this._config.target+" "+qe.NAV_LINKS+","+(this._config.target+" "+qe.LIST_ITEMS+",")+(this._config.target+" "+qe.DROPDOWN_ITEMS);this._offsets=[];this._targets=[];this._activeTarget=null;this._scrollHeight=0;y(this._scrollElement).on(je.SCROLL,function(t){return n._process(t)});this.refresh();this._process()}var t=r.prototype;t.refresh=function t(){var e=this;var n=this._scrollElement===this._scrollElement.window?Ve.OFFSET:Ve.POSITION;var i=this._config.method==="auto"?n:this._config.method;var o=i===Ve.POSITION?this._getScrollTop():0;this._offsets=[];this._targets=[];this._scrollHeight=this._getScrollHeight();var r=[].slice.call(document.querySelectorAll(this._selector));r.map(function(t){var e;var n=g.getSelectorFromElement(t);if(n){e=document.querySelector(n)}if(e){var r=e.getBoundingClientRect();if(r.width||r.height){return[y(e)[i]().top+o,n]}}return null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]);e._targets.push(t[1])})};t.dispose=function t(){y.removeData(this._element,xe);y(this._scrollElement).off(Re);this._element=null;this._scrollElement=null;this._config=null;this._selector=null;this._offsets=null;this._targets=null;this._activeTarget=null;this._scrollHeight=null};t._getConfig=function t(e){e=a({},Me,{},typeof e==="object"&&e?e:{});if(typeof e.target!=="string"){var n=y(e.target).attr("id");if(!n){n=g.getUID(De);y(e.target).attr("id",n)}e.target="#"+n}g.typeCheckConfig(De,e,Fe);return e};t._getScrollTop=function t(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop};t._getScrollHeight=function t(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)};t._getOffsetHeight=function t(){return this._scrollElement===window?window.innerHeight:this._scrollElement.getBoundingClientRect().height};t._process=function t(){var e=this._getScrollTop()+this._config.offset;var n=this._getScrollHeight();var r=this._config.offset+n-this._getOffsetHeight();if(this._scrollHeight!==n){this.refresh()}if(e>=r){var i=this._targets[this._targets.length-1];if(this._activeTarget!==i){this._activate(i)}return}if(this._activeTarget&&e<this._offsets[0]&&this._offsets[0]>0){this._activeTarget=null;this._clear();return}var o=this._offsets.length;for(var s=o;s--;){var a=this._activeTarget!==this._targets[s]&&e>=this._offsets[s]&&(typeof this._offsets[s+1]==="undefined"||e<this._offsets[s+1]);if(a){this._activate(this._targets[s])}}};t._activate=function t(e){this._activeTarget=e;this._clear();var n=this._selector.split(",").map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'});var r=y([].slice.call(document.querySelectorAll(n.join(","))));if(r.hasClass(Ue.DROPDOWN_ITEM)){r.closest(qe.DROPDOWN).find(qe.DROPDOWN_TOGGLE).addClass(Ue.ACTIVE);r.addClass(Ue.ACTIVE)}else{r.addClass(Ue.ACTIVE);r.parents(qe.NAV_LIST_GROUP).prev(qe.NAV_LINKS+", "+qe.LIST_ITEMS).addClass(Ue.ACTIVE);r.parents(qe.NAV_LIST_GROUP).prev(qe.NAV_ITEMS).children(qe.NAV_LINKS).addClass(Ue.ACTIVE)}y(this._scrollElement).trigger(je.ACTIVATE,{relatedTarget:e})};t._clear=function t(){[].slice.call(document.querySelectorAll(this._selector)).filter(function(t){return t.classList.contains(Ue.ACTIVE)}).forEach(function(t){return t.classList.remove(Ue.ACTIVE)})};r._jQueryInterface=function t(n){return this.each(function(){var t=y(this).data(xe);var e=typeof n==="object"&&n;if(!t){t=new r(this,e);y(this).data(xe,t)}if(typeof n==="string"){if(typeof t[n]==="undefined"){throw new TypeError('No method named "'+n+'"')}t[n]()}})};o(r,null,[{key:"VERSION",get:function t(){return ke}},{key:"Default",get:function t(){return Me}}]);return r}();y(window).on(je.LOAD_DATA_API,function(){var t=[].slice.call(document.querySelectorAll(qe.DATA_SPY));var e=t.length;for(var n=e;n--;){var r=y(t[n]);He._jQueryInterface.call(r,r.data())}}),y.fn[De]=He._jQueryInterface,y.fn[De].Constructor=He,y.fn[De].noConflict=function(){y.fn[De]=Le;return He._jQueryInterface};var We="tab",Be="4.4.1",Ge="bs.tab",ze="."+Ge,Ke=".data-api",Qe=y.fn[We],Ye={HIDE:"hide"+ze,HIDDEN:"hidden"+ze,SHOW:"show"+ze,SHOWN:"shown"+ze,CLICK_DATA_API:"click"+ze+Ke},Xe={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},Je={DROPDOWN:".dropdown",NAV_LIST_GROUP:".nav, .list-group",ACTIVE:".active",ACTIVE_UL:"> li > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"], [data-toggle="list"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},$e=function(){function r(t){this._element=t}var t=r.prototype;t.show=function t(){var r=this;if(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&y(this._element).hasClass(Xe.ACTIVE)||y(this._element).hasClass(Xe.DISABLED)){return}var e;var i;var n=y(this._element).closest(Je.NAV_LIST_GROUP)[0];var o=g.getSelectorFromElement(this._element);if(n){var s=n.nodeName==="UL"||n.nodeName==="OL"?Je.ACTIVE_UL:Je.ACTIVE;i=y.makeArray(y(n).find(s));i=i[i.length-1]}var a=y.Event(Ye.HIDE,{relatedTarget:this._element});var u=y.Event(Ye.SHOW,{relatedTarget:i});if(i){y(i).trigger(a)}y(this._element).trigger(u);if(u.isDefaultPrevented()||a.isDefaultPrevented()){return}if(o){e=document.querySelector(o)}this._activate(this._element,n);var c=function t(){var e=y.Event(Ye.HIDDEN,{relatedTarget:r._element});var n=y.Event(Ye.SHOWN,{relatedTarget:i});y(i).trigger(e);y(r._element).trigger(n)};if(e){this._activate(e,e.parentNode,c)}else{c()}};t.dispose=function t(){y.removeData(this._element,Ge);this._element=null};t._activate=function t(e,n,r){var i=this;var o=n&&(n.nodeName==="UL"||n.nodeName==="OL")?y(n).find(Je.ACTIVE_UL):y(n).children(Je.ACTIVE);var s=o[0];var a=r&&s&&y(s).hasClass(Xe.FADE);var u=function t(){return i._transitionComplete(e,s,r)};if(s&&a){var c=g.getTransitionDurationFromElement(s);y(s).removeClass(Xe.SHOW).one(g.TRANSITION_END,u).emulateTransitionEnd(c)}else{u()}};t._transitionComplete=function t(e,n,r){if(n){y(n).removeClass(Xe.ACTIVE);var i=y(n.parentNode).find(Je.DROPDOWN_ACTIVE_CHILD)[0];if(i){y(i).removeClass(Xe.ACTIVE)}if(n.getAttribute("role")==="tab"){n.setAttribute("aria-selected",false)}}y(e).addClass(Xe.ACTIVE);if(e.getAttribute("role")==="tab"){e.setAttribute("aria-selected",true)}g.reflow(e);if(e.classList.contains(Xe.FADE)){e.classList.add(Xe.SHOW)}if(e.parentNode&&y(e.parentNode).hasClass(Xe.DROPDOWN_MENU)){var o=y(e).closest(Je.DROPDOWN)[0];if(o){var s=[].slice.call(o.querySelectorAll(Je.DROPDOWN_TOGGLE));y(s).addClass(Xe.ACTIVE)}e.setAttribute("aria-expanded",true)}if(r){r()}};r._jQueryInterface=function t(n){return this.each(function(){var t=y(this);var e=t.data(Ge);if(!e){e=new r(this);t.data(Ge,e)}if(typeof n==="string"){if(typeof e[n]==="undefined"){throw new TypeError('No method named "'+n+'"')}e[n]()}})};o(r,null,[{key:"VERSION",get:function t(){return Be}}]);return r}();y(document).on(Ye.CLICK_DATA_API,Je.DATA_TOGGLE,function(t){t.preventDefault();$e._jQueryInterface.call(y(this),"show")}),y.fn[We]=$e._jQueryInterface,y.fn[We].Constructor=$e,y.fn[We].noConflict=function(){y.fn[We]=Qe;return $e._jQueryInterface};var Ze="toast",tn="4.4.1",en="bs.toast",nn="."+en,rn=y.fn[Ze],on={CLICK_DISMISS:"click.dismiss"+nn,HIDE:"hide"+nn,HIDDEN:"hidden"+nn,SHOW:"show"+nn,SHOWN:"shown"+nn},sn={FADE:"fade",HIDE:"hide",SHOW:"show",SHOWING:"showing"},an={animation:"boolean",autohide:"boolean",delay:"number"},un={animation:true,autohide:true,delay:500},cn={DATA_DISMISS:'[data-dismiss="toast"]'},hn=function(){function i(t,e){this._element=t;this._config=this._getConfig(e);this._timeout=null;this._setListeners()}var t=i.prototype;t.show=function t(){var e=this;var n=y.Event(on.SHOW);y(this._element).trigger(n);if(n.isDefaultPrevented()){return}if(this._config.animation){this._element.classList.add(sn.FADE)}var r=function t(){e._element.classList.remove(sn.SHOWING);e._element.classList.add(sn.SHOW);y(e._element).trigger(on.SHOWN);if(e._config.autohide){e._timeout=setTimeout(function(){e.hide()},e._config.delay)}};this._element.classList.remove(sn.HIDE);g.reflow(this._element);this._element.classList.add(sn.SHOWING);if(this._config.animation){var i=g.getTransitionDurationFromElement(this._element);y(this._element).one(g.TRANSITION_END,r).emulateTransitionEnd(i)}else{r()}};t.hide=function t(){if(!this._element.classList.contains(sn.SHOW)){return}var e=y.Event(on.HIDE);y(this._element).trigger(e);if(e.isDefaultPrevented()){return}this._close()};t.dispose=function t(){clearTimeout(this._timeout);this._timeout=null;if(this._element.classList.contains(sn.SHOW)){this._element.classList.remove(sn.SHOW)}y(this._element).off(on.CLICK_DISMISS);y.removeData(this._element,en);this._element=null;this._config=null};t._getConfig=function t(e){e=a({},un,{},y(this._element).data(),{},typeof e==="object"&&e?e:{});g.typeCheckConfig(Ze,e,this.constructor.DefaultType);return e};t._setListeners=function t(){var e=this;y(this._element).on(on.CLICK_DISMISS,cn.DATA_DISMISS,function(){return e.hide()})};t._close=function t(){var e=this;var n=function t(){e._element.classList.add(sn.HIDE);y(e._element).trigger(on.HIDDEN)};this._element.classList.remove(sn.SHOW);if(this._config.animation){var r=g.getTransitionDurationFromElement(this._element);y(this._element).one(g.TRANSITION_END,n).emulateTransitionEnd(r)}else{n()}};i._jQueryInterface=function t(r){return this.each(function(){var t=y(this);var e=t.data(en);var n=typeof r==="object"&&r;if(!e){e=new i(this,n);t.data(en,e)}if(typeof r==="string"){if(typeof e[r]==="undefined"){throw new TypeError('No method named "'+r+'"')}e[r](this)}})};o(i,null,[{key:"VERSION",get:function t(){return tn}},{key:"DefaultType",get:function t(){return an}},{key:"Default",get:function t(){return un}}]);return i}();y.fn[Ze]=hn._jQueryInterface,y.fn[Ze].Constructor=hn,y.fn[Ze].noConflict=function(){y.fn[Ze]=rn;return hn._jQueryInterface},t.Alert=C,t.Button=M,t.Carousel=tt,t.Collapse=pt,t.Dropdown=Rt,t.Modal=zt,t.Popover=Oe,t.Scrollspy=He,t.Tab=$e,t.Toast=hn,t.Tooltip=ye,t.Util=g,Object.defineProperty(t,"__esModule",{value:true})}(e,n(0),n(424))},391:function(t,e,n){"use strict";n.r(e);var r=n(16),i=n.n(r),o=(n(229),n(74));var d=function(){return(d=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function v(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function y(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function c(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function s(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}var a,u=n(86),h=n(125),l=((a={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',a["only-available-in-window"]="This method is available in a Window context.",a["only-available-in-sw"]="This method is available in a service worker context.",a["permission-default"]="The notification permission was not granted and dismissed instead.",a["permission-blocked"]="The notification permission was not granted and blocked instead.",a["unsupported-browser"]="This browser doesn't support the API's required to use the firebase SDK.",a["failed-service-worker-registration"]="We are unable to register the default service worker. {$browserErrorMessage}",a["token-subscribe-failed"]="A problem occured while subscribing the user to FCM: {$errorInfo}",a["token-subscribe-no-token"]="FCM returned no token when subscribing the user to push.",a["token-unsubscribe-failed"]="A problem occured while unsubscribing the user from FCM: {$errorInfo}",a["token-update-failed"]="A problem occured while updating the user from FCM: {$errorInfo}",a["token-update-no-token"]="FCM returned no token when updating the user to push.",a["use-sw-after-get-token"]="The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.",a["invalid-sw-registration"]="The input to useServiceWorker() must be a ServiceWorkerRegistration.",a["invalid-bg-handler"]="The input to setBackgroundMessageHandler() must be a function.",a["invalid-vapid-key"]="The public VAPID key must be a string.",a["use-vapid-key-after-get-token"]="The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used.",a),g=new u.ErrorFactory("messaging","Messaging",l);function f(t){return g.create("missing-app-config-values",{valueName:t})}function m(t){var e=new Uint8Array(t);return btoa(String.fromCharCode.apply(String,function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(s(arguments[e]));return t}(e))).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var p="fcm_token_details_db",_=5,b="fcm_token_object_Store";function w(a){return v(this,void 0,void 0,function(){var e,s,n=this;return y(this,function(t){switch(t.label){case 0:return"databases"in indexedDB?[4,indexedDB.databases()]:[3,2];case 1:if(e=t.sent(),!e.map(function(t){return t.name}).includes(p))return[2,null];t.label=2;case 2:return s=null,[4,Object(h.openDb)(p,_,function(o){return v(n,void 0,void 0,function(){var e,n,r,i;return y(this,function(t){switch(t.label){case 0:return o.oldVersion<2?[2]:o.objectStoreNames.contains(b)?[4,(e=o.transaction.objectStore(b)).index("fcmSenderId").get(a)]:[2];case 1:return n=t.sent(),[4,e.clear()];case 2:if(t.sent(),!n)return[2];if(2===o.oldVersion){if(!(r=n).auth||!r.p256dh||!r.endpoint)return[2];s={token:r.fcmToken,createTime:null!==(i=r.createTime)&&void 0!==i?i:Date.now(),subscriptionOptions:{auth:r.auth,p256dh:r.p256dh,endpoint:r.endpoint,swScope:r.swScope,vapidKey:"string"==typeof r.vapidKey?r.vapidKey:m(r.vapidKey)}}}else 3===o.oldVersion?s={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:m(r.auth),p256dh:m(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:m(r.vapidKey)}}:4===o.oldVersion&&(s={token:(r=n).fcmToken,createTime:r.createTime,subscriptionOptions:{auth:m(r.auth),p256dh:m(r.p256dh),endpoint:r.endpoint,swScope:r.swScope,vapidKey:m(r.vapidKey)}});return[2]}})})})];case 3:return t.sent().close(),[4,Object(h.deleteDb)(p)];case 4:return t.sent(),[4,Object(h.deleteDb)("fcm_vapid_details_db")];case 5:return t.sent(),[4,Object(h.deleteDb)("undefined")];case 6:return t.sent(),[2,function(t){if(!t||!t.subscriptionOptions)return;var e=t.subscriptionOptions;return"number"==typeof t.createTime&&0<t.createTime&&"string"==typeof t.token&&0<t.token.length&&"string"==typeof e.auth&&0<e.auth.length&&"string"==typeof e.p256dh&&0<e.p256dh.length&&"string"==typeof e.endpoint&&0<e.endpoint.length&&"string"==typeof e.swScope&&0<e.swScope.length&&"string"==typeof e.vapidKey&&0<e.vapidKey.length}(s)?s:null]}})})}var E="firebase-messaging-database",T=1,I="firebase-messaging-store",S=null;function C(){return S=S||Object(h.openDb)(E,T,function(t){switch(t.oldVersion){case 0:t.createObjectStore(I)}})}function A(i){return v(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:return e=O(i),[4,C()];case 1:return[4,t.sent().transaction(I).objectStore(I).get(e)];case 2:return(n=t.sent())?[2,n]:[3,3];case 3:return[4,w(i.appConfig.senderId)];case 4:return(r=t.sent())?[4,N(i,r)]:[3,6];case 5:return t.sent(),[2,r];case 6:return[2]}})})}function N(i,o){return v(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:return e=O(i),[4,C()];case 1:return n=t.sent(),[4,(r=n.transaction(I,"readwrite")).objectStore(I).put(o,e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2,o]}})})}function O(t){return t.appConfig.appId}var D="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",k="https://fcmregistrations.googleapis.com/v1",x="google.c.a.c_id";function R(s,a){return v(this,void 0,void 0,function(){var e,n,r,i,o;return y(this,function(t){switch(t.label){case 0:return[4,L(s)];case 1:e=t.sent(),n={method:"DELETE",headers:e},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(P(s.appConfig)+"/"+a,n)];case 3:return[4,t.sent().json()];case 4:if((r=t.sent()).error)throw i=r.error.message,g.create("token-unsubscribe-failed",{errorInfo:i});return[3,6];case 5:throw o=t.sent(),g.create("token-unsubscribe-failed",{errorInfo:o});case 6:return[2]}})})}function P(t){var e=t.projectId;return k+"/projects/"+e+"/registrations"}function L(t){var n=t.appConfig,r=t.installations;return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return[4,r.getToken()];case 1:return e=t.sent(),[2,new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":n.apiKey,"x-goog-firebase-installations-auth":"FIS "+e})]}})})}function M(t){var e=t.p256dh,n=t.auth,r=t.endpoint,i=t.vapidKey,o={web:{endpoint:r,auth:n,p256dh:e}};return i!==D&&(o.web.applicationPubKey=i),o}var F,j;function U(l,f,p){return v(this,void 0,void 0,function(){var a,u,c,h;return y(this,function(t){switch(t.label){case 0:if("granted"!==Notification.permission)throw g.create("permission-blocked");return[4,function(n,r){return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return[4,n.pushManager.getSubscription()];case 1:return(e=t.sent())?[2,e]:[2,n.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:r})]}})})}(f,p)];case 1:return a=t.sent(),[4,A(l)];case 2:return u=t.sent(),c={vapidKey:p,swScope:f.scope,endpoint:a.endpoint,auth:m(a.getKey("auth")),p256dh:m(a.getKey("p256dh"))},u?[3,3]:[2,V(l,c)];case 3:if(e=u.subscriptionOptions,r=(n=c).vapidKey===e.vapidKey,i=n.endpoint===e.endpoint,o=n.auth===e.auth,s=n.p256dh===e.p256dh,r&&i&&o&&s)return[3,8];t.label=4;case 4:return t.trys.push([4,6,,7]),[4,R(l,u.token)];case 5:return t.sent(),[3,7];case 6:return h=t.sent(),console.warn(h),[3,7];case 7:return[2,V(l,c)];case 8:return Date.now()>=u.createTime+6048e5?[2,function(i,o,s){return v(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,5]),[4,function(a,u){return v(this,void 0,void 0,function(){var e,n,r,i,o,s;return y(this,function(t){switch(t.label){case 0:return[4,L(a)];case 1:e=t.sent(),n=M(u.subscriptionOptions),r={method:"PATCH",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(P(a.appConfig)+"/"+u.token,r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),g.create("token-update-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,g.create("token-update-failed",{errorInfo:s});if(!i.token)throw g.create("token-update-no-token");return[2,i.token]}})})}(o,i)];case 1:return e=t.sent(),n=d({token:e,createTime:Date.now()},i),[4,N(o,n)];case 2:return t.sent(),[2,e];case 3:return r=t.sent(),[4,q(o,s)];case 4:throw t.sent(),r;case 5:return[2]}})})}({token:u.token,createTime:Date.now(),subscriptionOptions:c},l,f)]:[2,u.token];case 9:return[2]}var e,n,r,i,o,s})})}function q(r,i){return v(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return[4,A(r)];case 1:return(e=t.sent())?[4,R(r,e.token)]:[3,4];case 2:return t.sent(),[4,function(i){return v(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:return e=O(i),[4,C()];case 1:return n=t.sent(),[4,(r=n.transaction(I,"readwrite")).objectStore(I).delete(e)];case 2:return t.sent(),[4,r.complete];case 3:return t.sent(),[2]}})})}(r)];case 3:t.sent(),t.label=4;case 4:return[4,i.pushManager.getSubscription()];case 5:return(n=t.sent())?[2,n.unsubscribe()]:[2,!0]}})})}function V(r,i){return v(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:return[4,function(a,u){return v(this,void 0,void 0,function(){var e,n,r,i,o,s;return y(this,function(t){switch(t.label){case 0:return[4,L(a)];case 1:e=t.sent(),n=M(u),r={method:"POST",headers:e,body:JSON.stringify(n)},t.label=2;case 2:return t.trys.push([2,5,,6]),[4,fetch(P(a.appConfig),r)];case 3:return[4,t.sent().json()];case 4:return i=t.sent(),[3,6];case 5:throw o=t.sent(),g.create("token-subscribe-failed",{errorInfo:o});case 6:if(i.error)throw s=i.error.message,g.create("token-subscribe-failed",{errorInfo:s});if(!i.token)throw g.create("token-subscribe-no-token");return[2,i.token]}})})}(r,i)];case 1:return e=t.sent(),n={token:e,createTime:Date.now(),subscriptionOptions:i},[4,N(r,n)];case 2:return t.sent(),[2,n.token]}})})}function H(t){return"object"==typeof t&&t&&x in t}(j=F=F||{}).PUSH_RECEIVED="push-received",j.NOTIFICATION_CLICKED="notification-clicked";var W=(Object.defineProperty(B.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),B.prototype.getToken=function(){return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return this.vapidKey||(this.vapidKey=D),[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),"default"!==Notification.permission?[3,3]:[4,Notification.requestPermission()];case 2:t.sent(),t.label=3;case 3:if("granted"!==Notification.permission)throw g.create("permission-blocked");return[2,U(this.firebaseDependencies,e,this.vapidKey)]}})})},B.prototype.deleteToken=function(){return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return[4,this.getServiceWorkerRegistration()];case 1:return e=t.sent(),[2,q(this.firebaseDependencies,e)]}})})},B.prototype.requestPermission=function(){return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return"granted"===Notification.permission?[2]:[4,Notification.requestPermission()];case 1:if("granted"===(e=t.sent()))return[2];throw"denied"===e?g.create("permission-blocked"):g.create("permission-default")}})})},B.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw g.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw g.create("invalid-vapid-key");this.vapidKey=t},B.prototype.useServiceWorker=function(t){if(!(t instanceof ServiceWorkerRegistration))throw g.create("invalid-sw-registration");if(this.swRegistration)throw g.create("use-sw-after-get-token");this.swRegistration=t},B.prototype.onMessage=function(t){var e=this;return this.onMessageCallback="function"==typeof t?t:t.next,function(){e.onMessageCallback=null}},B.prototype.setBackgroundMessageHandler=function(){throw g.create("only-available-in-sw")},B.prototype.onTokenRefresh=function(){return function(){}},B.prototype.getServiceWorkerRegistration=function(){return v(this,void 0,void 0,function(){var e,n;return y(this,function(t){switch(t.label){case 0:if(this.swRegistration)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),e=this,[4,navigator.serviceWorker.register("/firebase-messaging-sw.js",{scope:"/firebase-cloud-messaging-push-scope"})];case 2:return e.swRegistration=t.sent(),this.swRegistration.update().catch(function(){}),[3,4];case 3:throw n=t.sent(),g.create("failed-service-worker-registration",{browserErrorMessage:n.message});case 4:return[2,this.swRegistration]}})})},B.prototype.messageEventListener=function(o){var s;return v(this,void 0,void 0,function(){var e,n,r,i;return y(this,function(t){switch(t.label){case 0:return null!==(s=o.data)&&void 0!==s&&s.firebaseMessaging?(e=o.data.firebaseMessaging,n=e.type,r=e.payload,this.onMessageCallback&&n===F.PUSH_RECEIVED&&this.onMessageCallback(r),H(i=r.data)&&"1"===i["google.c.a.e"]?[4,this.logEvent(n,i)]:[3,2]):[2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},B.prototype.logEvent=function(n,r){return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return e=function(t){switch(t){case F.NOTIFICATION_CLICKED:return"notification_open";case F.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(n),[4,this.firebaseDependencies.analyticsProvider.get()];case 1:return t.sent().logEvent(e,{message_id:r[x],message_name:r["google.c.a.c_l"],message_time:r["google.c.a.ts"],message_device_time:Math.floor(Date.now()/1e3)}),[2]}})})},B);function B(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.onMessageCallback=null,navigator.serviceWorker.addEventListener("message",function(t){return e.messageEventListener(t)})}var G=(Object.defineProperty(z.prototype,"app",{get:function(){return this.firebaseDependencies.app},enumerable:!0,configurable:!0}),z.prototype.setBackgroundMessageHandler=function(t){if(!t||"function"!=typeof t)throw g.create("invalid-bg-handler");this.bgMessageHandler=t},z.prototype.getToken=function(){var n,r;return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return this.vapidKey?[3,2]:[4,A(this.firebaseDependencies)];case 1:e=t.sent(),this.vapidKey=null!==(r=null===(n=null==e?void 0:e.subscriptionOptions)||void 0===n?void 0:n.vapidKey)&&void 0!==r?r:D,t.label=2;case 2:return[2,U(this.firebaseDependencies,self.registration,this.vapidKey)]}})})},z.prototype.deleteToken=function(){return q(this.firebaseDependencies,self.registration)},z.prototype.requestPermission=function(){throw g.create("only-available-in-window")},z.prototype.usePublicVapidKey=function(t){if(null!==this.vapidKey)throw g.create("use-vapid-key-after-get-token");if("string"!=typeof t||0===t.length)throw g.create("invalid-vapid-key");this.vapidKey=t},z.prototype.useServiceWorker=function(){throw g.create("only-available-in-window")},z.prototype.onMessage=function(){throw g.create("only-available-in-window")},z.prototype.onTokenRefresh=function(){throw g.create("only-available-in-window")},z.prototype.onPush=function(i){return v(this,void 0,void 0,function(){var e,n,r;return y(this,function(t){switch(t.label){case 0:return(e=function(t){var e=t.data;if(!e)return null;try{return e.json()}catch(t){return null}}(i))?[4,K()]:[2];case 1:return(n=t.sent()).some(function(t){return"visible"===t.visibilityState&&!t.url.startsWith("chrome-extension://")})?[2,function(t,e){var n,r,i=Q(F.PUSH_RECEIVED,e);try{for(var o=c(t),s=o.next();!s.done;s=o.next())s.value.postMessage(i)}catch(t){n={error:t}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}}(n,e)]:(r=function(t){var e;if(t&&"object"==typeof t.notification){var n=d({},t.notification);return n.data=d(d({},t.notification.data),((e={}).FCM_MSG=t,e)),n}}(e))?[4,function(t){var e,n=null!==(e=t.title)&&void 0!==e?e:"",r=t.actions,i=Notification.maxActions;return r&&i&&r.length>i&&console.warn("This browser only supports "+i+" actions. The remaining actions will not be displayed."),self.registration.showNotification(n,t)}(r)]:[3,3];case 2:return t.sent(),[3,5];case 3:return this.bgMessageHandler?[4,this.bgMessageHandler(e)]:[3,5];case 4:t.sent(),t.label=5;case 5:return[2]}})})},z.prototype.onSubChange=function(n){var r,i;return v(this,void 0,void 0,function(){var e;return y(this,function(t){switch(t.label){case 0:return n.newSubscription?[3,2]:[4,q(this.firebaseDependencies,self.registration)];case 1:return t.sent(),[2];case 2:return[4,A(this.firebaseDependencies)];case 3:return e=t.sent(),[4,q(this.firebaseDependencies,self.registration)];case 4:return t.sent(),[4,U(this.firebaseDependencies,self.registration,null!==(i=null===(r=null==e?void 0:e.subscriptionOptions)||void 0===r?void 0:r.vapidKey)&&void 0!==i?i:D)];case 5:return t.sent(),[2]}})})},z.prototype.onNotificationClick=function(s){var a,u;return v(this,void 0,void 0,function(){var n,r,i,o;return y(this,function(t){switch(t.label){case 0:return(n=null===(u=null===(a=s.notification)||void 0===a?void 0:a.data)||void 0===u?void 0:u.FCM_MSG)?s.action?[2]:(s.stopImmediatePropagation(),s.notification.close(),(r=function(t){var e,n,r,i=null!==(n=null===(e=t.fcmOptions)||void 0===e?void 0:e.link)&&void 0!==n?n:null===(r=t.notification)||void 0===r?void 0:r.click_action;return i||(H(t.data)?self.location.origin:null)}(n))?[4,function(u){return v(this,void 0,void 0,function(){var e,n,r,i,o,s,a;return y(this,function(t){switch(t.label){case 0:return e=new URL(u,self.location.href).href,[4,K()];case 1:n=t.sent();try{for(r=c(n),i=r.next();!i.done;i=r.next())if(o=i.value,new URL(o.url,self.location.href).href===e)return[2,o]}catch(t){s={error:t}}finally{try{i&&!i.done&&(a=r.return)&&a.call(r)}finally{if(s)throw s.error}}return[2,null]}})})}(r)]:[2]):[2];case 1:return(i=t.sent())?[3,4]:[4,self.clients.openWindow(r)];case 2:return i=t.sent(),[4,(e=3e3,new Promise(function(t){setTimeout(t,e)}))];case 3:return t.sent(),[3,6];case 4:return[4,i.focus()];case 5:i=t.sent(),t.label=6;case 6:return i?(o=Q(F.NOTIFICATION_CLICKED,n),[2,i.postMessage(o)]):[2]}var e})})},z);function z(t){var e=this;this.firebaseDependencies=t,this.vapidKey=null,this.bgMessageHandler=null,self.addEventListener("push",function(t){t.waitUntil(e.onPush(t))}),self.addEventListener("pushsubscriptionchange",function(t){t.waitUntil(e.onSubChange(t))}),self.addEventListener("notificationclick",function(t){t.waitUntil(e.onNotificationClick(t))})}function K(){return self.clients.matchAll({type:"window",includeUncontrolled:!0})}function Q(t,e){return{firebaseMessaging:{type:t,payload:e}}}var Y={isSupported:X};function X(){return self&&"ServiceWorkerGlobalScope"in self?"indexedDB"in self&&null!==indexedDB&&"PushManager"in self&&"Notification"in self&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey"):"indexedDB"in window&&null!==indexedDB&&navigator.cookieEnabled&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")}i.a.INTERNAL.registerComponent(new o.Component("messaging",function(t){var e=t.getProvider("app").getImmediate(),n={app:e,appConfig:function(t){var e,n;if(!t||!t.options)throw f("App Configuration Object");if(!t.name)throw f("App Name");var r=t.options;try{for(var i=c(["projectId","apiKey","appId","messagingSenderId"]),o=i.next();!o.done;o=i.next()){var s=o.value;if(!r[s])throw f(s)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return{appName:t.name,projectId:r.projectId,apiKey:r.apiKey,appId:r.appId,senderId:r.messagingSenderId}}(e),installations:t.getProvider("installations").getImmediate(),analyticsProvider:t.getProvider("analytics-internal")};if(!X())throw g.create("unsupported-browser");return new(self&&"ServiceWorkerGlobalScope"in self?G:W)(n)},"PUBLIC").setServiceProps(Y))},392:function(t,e,n){"use strict";n.r(e);var r=n(16),i=n.n(r);n(229);var h=function(){return(h=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function l(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function f(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}var o=n(152),s=n(86),a=n(74);n.d(e,"factory",function(){return R}),n.d(e,"getGlobalVars",function(){return k}),n.d(e,"registerAnalytics",function(){return F}),n.d(e,"resetGlobalVars",function(){return D}),n.d(e,"settings",function(){return x});var d,u,c,p,v="measurementId",y="firebase_id",g="origin",m="https://www.googletagmanager.com/gtag/js";(u=d=d||{}).EVENT="event",u.SET="set",u.CONFIG="config",(p=c=c||{}).ADD_PAYMENT_INFO="add_payment_info",p.ADD_TO_CART="add_to_cart",p.ADD_TO_WISHLIST="add_to_wishlist",p.BEGIN_CHECKOUT="begin_checkout",p.CHECKOUT_PROGRESS="checkout_progress",p.EXCEPTION="exception",p.GENERATE_LEAD="generate_lead",p.LOGIN="login",p.PAGE_VIEW="page_view",p.PURCHASE="purchase",p.REFUND="refund",p.REMOVE_FROM_CART="remove_from_cart",p.SCREEN_VIEW="screen_view",p.SEARCH="search",p.SELECT_CONTENT="select_content",p.SET_CHECKOUT_OPTION="set_checkout_option",p.SHARE="share",p.SIGN_UP="sign_up",p.TIMING_COMPLETE="timing_complete",p.VIEW_ITEM="view_item",p.VIEW_ITEM_LIST="view_item_list",p.VIEW_PROMOTION="view_promotion",p.VIEW_SEARCH_RESULTS="view_search_results";var _,b=new o.Logger("@firebase/analytics");function w(t,n,e){var f,p,r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];window[n].push(arguments)};return window[e]&&"function"==typeof window[e]&&(r=window[e]),window[e]=(f=r,p=t,function(t,e,n){if(t===d.EVENT){var r=[];if(n&&n.send_to){var i=n.send_to;Array.isArray(i)||(i=[i]);for(var o=0,s=i;o<s.length;o++){var a=s[o],u=p[a];if(!u){r=[];break}r.push(u)}}if(0===r.length)for(var c=0,h=Object.values(p);c<h.length;c++){var l=h[c];r.push(l)}Promise.all(r).then(function(){return f(d.EVENT,e,n||{})}).catch(function(t){return b.error(t)})}else t===d.CONFIG?(p[e]||Promise.resolve()).then(function(){f(d.CONFIG,e,n)}).catch(function(t){return b.error(t)}):f(d.SET,e)}),{gtagCore:r,wrappedGtag:window[e]}}var E,T,I=((_={})["no-ga-id"]='"'+v+'" field is empty in Firebase config. Firebase Analytics requires this field to contain a valid measurement ID.',_["already-exists"]="A Firebase Analytics instance with the measurement ID ${id}  already exists. Only one Firebase Analytics instance can be created for each measurement ID.",_["already-initialized"]="Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.",_["interop-component-reg-failed"]="Firebase Analytics Interop Component failed to instantiate",_),S=new s.ErrorFactory("analytics","Analytics",I),C={},A="dataLayer",N="gtag",O=!1;function D(t,e){void 0===t&&(t=!1),void 0===e&&(e={}),O=t,C=e,A="dataLayer",N="gtag"}function k(){return{initializedIdPromisesMap:C}}function x(t){if(O)throw S.create("already-initialized");t.dataLayerName&&(A=t.dataLayerName),t.gtagName&&(N=t.gtagName)}function R(t,e){var n,r,i,o,c=t.options[v];if(!c)throw S.create("no-ga-id");if(null!=C[c])throw S.create("already-exists",{id:c});if(!O){!function(){for(var t=window.document.getElementsByTagName("script"),e=0,n=Object.values(t);e<n.length;e++){var r=n[e];if(r.src&&r.src.includes(m))return r}}()&&(i=A,(o=document.createElement("script")).src=m+"?l="+i,o.async=!0,document.head.appendChild(o)),n=A,r=[],Array.isArray(window[n])?r=window[n]:window[n]=r;var s=w(C,A,N),a=s.wrappedGtag,u=s.gtagCore;T=a,E=u,O=!0}return C[c]=function(r,i,o){return l(this,void 0,void 0,function(){var e,n;return f(this,function(t){switch(t.label){case 0:return[4,i.getId()];case 1:return e=t.sent(),o("js",new Date),o(d.CONFIG,r.options[v],((n={})[y]=e,n[g]="firebase",n.update=!0,n)),[2]}})})}(t,e,E),{app:t,logEvent:function(t,e,n){return r=T,i=c,o=t,u=(s=e)||{},(a=n)&&a.global||(u=h(h({},s),{send_to:i})),void r(d.EVENT,o,u||{});var r,i,o,s,a,u},setCurrentScreen:function(t,e){return n=T,r=c,i=t,void((o=e)&&o.global?n(d.SET,{screen_name:i}):n(d.CONFIG,r,{update:!0,screen_name:i}));var n,r,i,o},setUserId:function(t,e){return n=T,r=c,i=t,void((o=e)&&o.global?n(d.SET,{user_id:i}):n(d.CONFIG,r,{update:!0,user_id:i}));var n,r,i,o},setUserProperties:function(t,e){return function(t,e,n,r){if(r&&r.global){for(var i={},o=0,s=Object.keys(n);o<s.length;o++){var a=s[o];i["user_properties."+a]=n[a]}t(d.SET,i)}else t(d.CONFIG,e,{update:!0,user_properties:n})}(T,c,t,e)},setAnalyticsCollectionEnabled:function(t){return e=t,void(window["ga-disable-"+c]=!e);var e}}}var P="@firebase/analytics",L="0.2.18",M="analytics";function F(t){t.INTERNAL.registerComponent(new a.Component(M,function(t){return R(t.getProvider("app").getImmediate(),t.getProvider("installations").getImmediate())},"PUBLIC").setServiceProps({settings:x,EventName:c})),t.INTERNAL.registerComponent(new a.Component("analytics-internal",function(t){try{return{logEvent:t.getProvider(M).getImmediate().logEvent}}catch(t){throw S.create("interop-component-reg-failed",{reason:t})}},"PRIVATE")),t.registerVersion(P,L)}F(i.a)},424:function(t,et,e){"use strict";e.r(et),function(t){var n="undefined"!=typeof window&&"undefined"!=typeof document&&"undefined"!=typeof navigator,r=function(){for(var t=["Edge","Trident","Firefox"],e=0;e<t.length;e+=1)if(n&&0<=navigator.userAgent.indexOf(t[e]))return 1;return 0}();var o=n&&window.Promise?function(t){var e=!1;return function(){e||(e=!0,window.Promise.resolve().then(function(){e=!1,t()}))}}:function(t){var e=!1;return function(){e||(e=!0,setTimeout(function(){e=!1,t()},r))}};function s(t){return t&&"[object Function]"==={}.toString.call(t)}function b(t,e){if(1!==t.nodeType)return[];var n=t.ownerDocument.defaultView.getComputedStyle(t,null);return e?n[e]:n}function d(t){return"HTML"===t.nodeName?t:t.parentNode||t.host}function v(t){if(!t)return document.body;switch(t.nodeName){case"HTML":case"BODY":return t.ownerDocument.body;case"#document":return t.body}var e=b(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/(auto|scroll|overlay)/.test(n+i+r)?t:v(d(t))}function y(t){return t&&t.referenceNode?t.referenceNode:t}var e=n&&!(!window.MSInputMethodContext||!document.documentMode),i=n&&/MSIE 10/.test(navigator.userAgent);function g(t){return 11===t?e:10===t?i:e||i}function _(t){if(!t)return document.documentElement;for(var e=g(10)?document.body:null,n=t.offsetParent||null;n===e&&t.nextElementSibling;)n=(t=t.nextElementSibling).offsetParent;var r=n&&n.nodeName;return r&&"BODY"!==r&&"HTML"!==r?-1!==["TH","TD","TABLE"].indexOf(n.nodeName)&&"static"===b(n,"position")?_(n):n:t?t.ownerDocument.documentElement:document.documentElement}function h(t){return null!==t.parentNode?h(t.parentNode):t}function m(t,e){if(!(t&&t.nodeType&&e&&e.nodeType))return document.documentElement;var n=t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING,r=n?t:e,i=n?e:t,o=document.createRange();o.setStart(r,0),o.setEnd(i,0);var s,a,u=o.commonAncestorContainer;if(t!==u&&e!==u||r.contains(i))return"BODY"===(a=(s=u).nodeName)||"HTML"!==a&&_(s.firstElementChild)!==s?_(u):u;var c=h(t);return c.host?m(c.host,e):m(t,h(e).host)}function w(t,e){var n="top"===(1<arguments.length&&void 0!==e?e:"top")?"scrollTop":"scrollLeft",r=t.nodeName;if("BODY"!==r&&"HTML"!==r)return t[n];var i=t.ownerDocument.documentElement;return(t.ownerDocument.scrollingElement||i)[n]}function l(t,e){var n="x"===e?"Left":"Top",r="Left"==n?"Right":"Bottom";return parseFloat(t["border"+n+"Width"],10)+parseFloat(t["border"+r+"Width"],10)}function a(t,e,n,r){return Math.max(e["offset"+t],e["scroll"+t],n["client"+t],n["offset"+t],n["scroll"+t],g(10)?parseInt(n["offset"+t])+parseInt(r["margin"+("Height"===t?"Top":"Left")])+parseInt(r["margin"+("Height"===t?"Bottom":"Right")]):0)}function E(t){var e=t.body,n=t.documentElement,r=g(10)&&getComputedStyle(n);return{height:a("Height",e,n,r),width:a("Width",e,n,r)}}var u=function(t,e,n){return e&&c(t.prototype,e),n&&c(t,n),t};function c(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var I=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};function S(t){return I({},t,{right:t.left+t.width,bottom:t.top+t.height})}function C(t){var e={};try{if(g(10)){e=t.getBoundingClientRect();var n=w(t,"top"),r=w(t,"left");e.top+=n,e.left+=r,e.bottom+=n,e.right+=r}else e=t.getBoundingClientRect()}catch(t){}var i={left:e.left,top:e.top,width:e.right-e.left,height:e.bottom-e.top},o="HTML"===t.nodeName?E(t.ownerDocument):{},s=o.width||t.clientWidth||i.width,a=o.height||t.clientHeight||i.height,u=t.offsetWidth-s,c=t.offsetHeight-a;if(u||c){var h=b(t);u-=l(h,"x"),c-=l(h,"y"),i.width-=u,i.height-=c}return S(i)}function A(t,e,n){var r=2<arguments.length&&void 0!==n&&n,i=g(10),o="HTML"===e.nodeName,s=C(t),a=C(e),u=v(t),c=b(e),h=parseFloat(c.borderTopWidth,10),l=parseFloat(c.borderLeftWidth,10);r&&o&&(a.top=Math.max(a.top,0),a.left=Math.max(a.left,0));var f=S({top:s.top-a.top-h,left:s.left-a.left-l,width:s.width,height:s.height});if(f.marginTop=0,f.marginLeft=0,!i&&o){var p=parseFloat(c.marginTop,10),d=parseFloat(c.marginLeft,10);f.top-=h-p,f.bottom-=h-p,f.left-=l-d,f.right-=l-d,f.marginTop=p,f.marginLeft=d}return(i&&!r?e.contains(u):e===u&&"BODY"!==u.nodeName)&&(f=function(t,e,n){var r=2<arguments.length&&void 0!==n&&n,i=w(e,"top"),o=w(e,"left"),s=r?-1:1;return t.top+=i*s,t.bottom+=i*s,t.left+=o*s,t.right+=o*s,t}(f,e)),f}function N(t){if(!t||!t.parentElement||g())return document.documentElement;for(var e=t.parentElement;e&&"none"===b(e,"transform");)e=e.parentElement;return e||document.documentElement}function p(t,e,n,r,i){var o=4<arguments.length&&void 0!==i&&i,s={top:0,left:0},a=o?N(t):m(t,y(e));if("viewport"===r)s=function(t,e){var n=1<arguments.length&&void 0!==e&&e,r=t.ownerDocument.documentElement,i=A(t,r),o=Math.max(r.clientWidth,window.innerWidth||0),s=Math.max(r.clientHeight,window.innerHeight||0),a=n?0:w(r),u=n?0:w(r,"left");return S({top:a-i.top+i.marginTop,left:u-i.left+i.marginLeft,width:o,height:s})}(a,o);else{var u=void 0;"scrollParent"===r?"BODY"===(u=v(d(e))).nodeName&&(u=t.ownerDocument.documentElement):u="window"===r?t.ownerDocument.documentElement:r;var c=A(u,a,o);if("HTML"!==u.nodeName||function t(e){var n=e.nodeName;if("BODY"===n||"HTML"===n)return!1;if("fixed"===b(e,"position"))return!0;var r=d(e);return!!r&&t(r)}(a))s=c;else{var h=E(t.ownerDocument),l=h.height,f=h.width;s.top+=c.top-c.marginTop,s.bottom=l+c.top,s.left+=c.left-c.marginLeft,s.right=f+c.left}}var p="number"==typeof(n=n||0);return s.left+=p?n:n.left||0,s.top+=p?n:n.top||0,s.right-=p?n:n.right||0,s.bottom-=p?n:n.bottom||0,s}function f(t,e,r,n,i,o){var s=5<arguments.length&&void 0!==o?o:0;if(-1===t.indexOf("auto"))return t;var a=p(r,n,s,i),u={top:{width:a.width,height:e.top-a.top},right:{width:a.right-e.right,height:a.height},bottom:{width:a.width,height:a.bottom-e.bottom},left:{width:e.left-a.left,height:a.height}},c=Object.keys(u).map(function(t){return I({key:t},u[t],{area:(e=u[t]).width*e.height});var e}).sort(function(t,e){return e.area-t.area}),h=c.filter(function(t){var e=t.width,n=t.height;return e>=r.clientWidth&&n>=r.clientHeight}),l=0<h.length?h[0].key:c[0].key,f=t.split("-")[1];return l+(f?"-"+f:"")}function O(t,e,n,r){var i=3<arguments.length&&void 0!==r?r:null;return A(n,i?N(e):m(e,y(n)),i)}function D(t){var e=t.ownerDocument.defaultView.getComputedStyle(t),n=parseFloat(e.marginTop||0)+parseFloat(e.marginBottom||0),r=parseFloat(e.marginLeft||0)+parseFloat(e.marginRight||0);return{width:t.offsetWidth+r,height:t.offsetHeight+n}}function k(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function x(t,e,n){n=n.split("-")[0];var r=D(t),i={width:r.width,height:r.height},o=-1!==["right","left"].indexOf(n),s=o?"top":"left",a=o?"left":"top",u=o?"height":"width",c=o?"width":"height";return i[s]=e[s]+e[u]/2-r[u]/2,i[a]=n===a?e[a]-r[c]:e[k(a)],i}function R(t,e){return Array.prototype.find?t.find(e):t.filter(e)[0]}function P(t,n,e){return(void 0===e?t:t.slice(0,function(t,e,n){if(Array.prototype.findIndex)return t.findIndex(function(t){return t[e]===n});var r=R(t,function(t){return t[e]===n});return t.indexOf(r)}(t,"name",e))).forEach(function(t){t.function&&console.warn("`modifier.function` is deprecated, use `modifier.fn`!");var e=t.function||t.fn;t.enabled&&s(e)&&(n.offsets.popper=S(n.offsets.popper),n.offsets.reference=S(n.offsets.reference),n=e(n,t))}),n}function L(t,n){return t.some(function(t){var e=t.name;return t.enabled&&e===n})}function M(t){for(var e=[!1,"ms","Webkit","Moz","O"],n=t.charAt(0).toUpperCase()+t.slice(1),r=0;r<e.length;r++){var i=e[r],o=i?""+i+n:t;if(void 0!==document.body.style[o])return o}return null}function F(t){var e=t.ownerDocument;return e?e.defaultView:window}function j(t,e,n,r){n.updateBound=r,F(t).addEventListener("resize",n.updateBound,{passive:!0});var i=v(t);return function t(e,n,r,i){var o="BODY"===e.nodeName,s=o?e.ownerDocument.defaultView:e;s.addEventListener(n,r,{passive:!0}),o||t(v(s.parentNode),n,r,i),i.push(s)}(i,"scroll",n.updateBound,n.scrollParents),n.scrollElement=i,n.eventsEnabled=!0,n}function U(){var t,e;this.state.eventsEnabled&&(cancelAnimationFrame(this.scheduleUpdate),this.state=(t=this.reference,e=this.state,F(t).removeEventListener("resize",e.updateBound),e.scrollParents.forEach(function(t){t.removeEventListener("scroll",e.updateBound)}),e.updateBound=null,e.scrollParents=[],e.scrollElement=null,e.eventsEnabled=!1,e))}function q(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}function V(n,r){Object.keys(r).forEach(function(t){var e="";-1!==["width","height","top","right","bottom","left"].indexOf(t)&&q(r[t])&&(e="px"),n.style[t]=r[t]+e})}function H(t,e){function n(t){return t}var r=t.offsets,i=r.popper,o=r.reference,s=Math.round,a=Math.floor,u=s(o.width),c=s(i.width),h=-1!==["left","right"].indexOf(t.placement),l=-1!==t.placement.indexOf("-"),f=e?h||l||u%2==c%2?s:a:n,p=e?s:n;return{left:f(u%2==1&&c%2==1&&!l&&e?i.left-1:i.left),top:p(i.top),bottom:p(i.bottom),right:f(i.right)}}var W=n&&/Firefox/i.test(navigator.userAgent);function B(t,e,n){var r=R(t,function(t){return t.name===e}),i=!!r&&t.some(function(t){return t.name===n&&t.enabled&&t.order<r.order});if(!i){var o="`"+e+"`",s="`"+n+"`";console.warn(s+" modifier is required by "+o+" modifier in order to work, be sure to include it before "+o+"!")}return i}var G=["auto-start","auto","auto-end","top-start","top","top-end","right-start","right","right-end","bottom-end","bottom","bottom-start","left-end","left","left-start"],z=G.slice(3);function K(t,e){var n=1<arguments.length&&void 0!==e&&e,r=z.indexOf(t),i=z.slice(r+1).concat(z.slice(0,r));return n?i.reverse():i}var Q="flip",Y="clockwise",X="counterclockwise";function J(t,i,o,e){var s=[0,0],a=-1!==["right","left"].indexOf(e),n=t.split(/(\+|\-)/).map(function(t){return t.trim()}),r=n.indexOf(R(n,function(t){return-1!==t.search(/,|\s/)}));n[r]&&-1===n[r].indexOf(",")&&console.warn("Offsets separated by white space(s) are deprecated, use a comma (,) instead.");var u=/\s*,\s*|\s+/,c=-1!==r?[n.slice(0,r).concat([n[r].split(u)[0]]),[n[r].split(u)[1]].concat(n.slice(r+1))]:[n];return(c=c.map(function(t,e){var n=(1===e?!a:a)?"height":"width",r=!1;return t.reduce(function(t,e){return""===t[t.length-1]&&-1!==["+","-"].indexOf(e)?(t[t.length-1]=e,r=!0,t):r?(t[t.length-1]+=e,r=!1,t):t.concat(e)},[]).map(function(t){return function(t,e,n,r){var i=t.match(/((?:\-|\+)?\d*\.?\d*)(.*)/),o=+i[1],s=i[2];if(!o)return t;if(0!==s.indexOf("%"))return"vh"!==s&&"vw"!==s?o:("vh"===s?Math.max(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0))/100*o;var a=void 0;switch(s){case"%p":a=n;break;case"%":case"%r":default:a=r}return S(a)[e]/100*o}(t,n,i,o)})})).forEach(function(n,r){n.forEach(function(t,e){q(t)&&(s[r]+=t*("-"===n[e-1]?-1:1))})}),s}var $={placement:"bottom",positionFixed:!1,eventsEnabled:!0,removeOnDestroy:!1,onCreate:function(){},onUpdate:function(){},modifiers:{shift:{order:100,enabled:!0,fn:function(t){var e=t.placement,n=e.split("-")[0],r=e.split("-")[1];if(r){var i=t.offsets,o=i.reference,s=i.popper,a=-1!==["bottom","top"].indexOf(n),u=a?"left":"top",c=a?"width":"height",h={start:T({},u,o[u]),end:T({},u,o[u]+o[c]-s[c])};t.offsets.popper=I({},s,h[r])}return t}},offset:{order:200,enabled:!0,fn:function(t,e){var n=e.offset,r=t.placement,i=t.offsets,o=i.popper,s=i.reference,a=r.split("-")[0],u=void 0;return u=q(+n)?[+n,0]:J(n,o,s,a),"left"===a?(o.top+=u[0],o.left-=u[1]):"right"===a?(o.top+=u[0],o.left+=u[1]):"top"===a?(o.left+=u[0],o.top-=u[1]):"bottom"===a&&(o.left+=u[0],o.top+=u[1]),t.popper=o,t},offset:0},preventOverflow:{order:300,enabled:!0,fn:function(t,r){var e=r.boundariesElement||_(t.instance.popper);t.instance.reference===e&&(e=_(e));var n=M("transform"),i=t.instance.popper.style,o=i.top,s=i.left,a=i[n];i.top="",i.left="",i[n]="";var u=p(t.instance.popper,t.instance.reference,r.padding,e,t.positionFixed);i.top=o,i.left=s,i[n]=a,r.boundaries=u;var c=r.priority,h=t.offsets.popper,l={primary:function(t){var e=h[t];return h[t]<u[t]&&!r.escapeWithReference&&(e=Math.max(h[t],u[t])),T({},t,e)},secondary:function(t){var e="right"===t?"left":"top",n=h[e];return h[t]>u[t]&&!r.escapeWithReference&&(n=Math.min(h[e],u[t]-("right"===t?h.width:h.height))),T({},e,n)}};return c.forEach(function(t){var e=-1!==["left","top"].indexOf(t)?"primary":"secondary";h=I({},h,l[e](t))}),t.offsets.popper=h,t},priority:["left","right","top","bottom"],padding:5,boundariesElement:"scrollParent"},keepTogether:{order:400,enabled:!0,fn:function(t){var e=t.offsets,n=e.popper,r=e.reference,i=t.placement.split("-")[0],o=Math.floor,s=-1!==["top","bottom"].indexOf(i),a=s?"right":"bottom",u=s?"left":"top",c=s?"width":"height";return n[a]<o(r[u])&&(t.offsets.popper[u]=o(r[u])-n[c]),n[u]>o(r[a])&&(t.offsets.popper[u]=o(r[a])),t}},arrow:{order:500,enabled:!0,fn:function(t,e){var n;if(!B(t.instance.modifiers,"arrow","keepTogether"))return t;var r=e.element;if("string"==typeof r){if(!(r=t.instance.popper.querySelector(r)))return t}else if(!t.instance.popper.contains(r))return console.warn("WARNING: `arrow.element` must be child of its popper element!"),t;var i=t.placement.split("-")[0],o=t.offsets,s=o.popper,a=o.reference,u=-1!==["left","right"].indexOf(i),c=u?"height":"width",h=u?"Top":"Left",l=h.toLowerCase(),f=u?"left":"top",p=u?"bottom":"right",d=D(r)[c];a[p]-d<s[l]&&(t.offsets.popper[l]-=s[l]-(a[p]-d)),a[l]+d>s[p]&&(t.offsets.popper[l]+=a[l]+d-s[p]),t.offsets.popper=S(t.offsets.popper);var v=a[l]+a[c]/2-d/2,y=b(t.instance.popper),g=parseFloat(y["margin"+h],10),m=parseFloat(y["border"+h+"Width"],10),_=v-t.offsets.popper[l]-g-m;return _=Math.max(Math.min(s[c]-d,_),0),t.arrowElement=r,t.offsets.arrow=(T(n={},l,Math.round(_)),T(n,f,""),n),t},element:"[x-arrow]"},flip:{order:600,enabled:!0,fn:function(y,g){if(L(y.instance.modifiers,"inner"))return y;if(y.flipped&&y.placement===y.originalPlacement)return y;var m=p(y.instance.popper,y.instance.reference,g.padding,g.boundariesElement,y.positionFixed),_=y.placement.split("-")[0],b=k(_),w=y.placement.split("-")[1]||"",E=[];switch(g.behavior){case Q:E=[_,b];break;case Y:E=K(_);break;case X:E=K(_,!0);break;default:E=g.behavior}return E.forEach(function(t,e){if(_!==t||E.length===e+1)return y;_=y.placement.split("-")[0],b=k(_);var n,r=y.offsets.popper,i=y.offsets.reference,o=Math.floor,s="left"===_&&o(r.right)>o(i.left)||"right"===_&&o(r.left)<o(i.right)||"top"===_&&o(r.bottom)>o(i.top)||"bottom"===_&&o(r.top)<o(i.bottom),a=o(r.left)<o(m.left),u=o(r.right)>o(m.right),c=o(r.top)<o(m.top),h=o(r.bottom)>o(m.bottom),l="left"===_&&a||"right"===_&&u||"top"===_&&c||"bottom"===_&&h,f=-1!==["top","bottom"].indexOf(_),p=!!g.flipVariations&&(f&&"start"===w&&a||f&&"end"===w&&u||!f&&"start"===w&&c||!f&&"end"===w&&h),d=!!g.flipVariationsByContent&&(f&&"start"===w&&u||f&&"end"===w&&a||!f&&"start"===w&&h||!f&&"end"===w&&c),v=p||d;(s||l||v)&&(y.flipped=!0,(s||l)&&(_=E[e+1]),v&&(w="end"===(n=w)?"start":"start"===n?"end":n),y.placement=_+(w?"-"+w:""),y.offsets.popper=I({},y.offsets.popper,x(y.instance.popper,y.offsets.reference,y.placement)),y=P(y.instance.modifiers,y,"flip"))}),y},behavior:"flip",padding:5,boundariesElement:"viewport",flipVariations:!1,flipVariationsByContent:!1},inner:{order:700,enabled:!1,fn:function(t){var e=t.placement,n=e.split("-")[0],r=t.offsets,i=r.popper,o=r.reference,s=-1!==["left","right"].indexOf(n),a=-1===["top","left"].indexOf(n);return i[s?"left":"top"]=o[n]-(a?i[s?"width":"height"]:0),t.placement=k(e),t.offsets.popper=S(i),t}},hide:{order:800,enabled:!0,fn:function(t){if(!B(t.instance.modifiers,"hide","preventOverflow"))return t;var e=t.offsets.reference,n=R(t.instance.modifiers,function(t){return"preventOverflow"===t.name}).boundaries;if(e.bottom<n.top||e.left>n.right||e.top>n.bottom||e.right<n.left){if(!0===t.hide)return t;t.hide=!0,t.attributes["x-out-of-boundaries"]=""}else{if(!1===t.hide)return t;t.hide=!1,t.attributes["x-out-of-boundaries"]=!1}return t}},computeStyle:{order:850,enabled:!0,fn:function(t,e){var n=e.x,r=e.y,i=t.offsets.popper,o=R(t.instance.modifiers,function(t){return"applyStyle"===t.name}).gpuAcceleration;void 0!==o&&console.warn("WARNING: `gpuAcceleration` option moved to `computeStyle` modifier and will not be supported in future versions of Popper.js!");var s=void 0!==o?o:e.gpuAcceleration,a=_(t.instance.popper),u=C(a),c={position:i.position},h=H(t,window.devicePixelRatio<2||!W),l="bottom"===n?"top":"bottom",f="right"===r?"left":"right",p=M("transform"),d=void 0,v=void 0;if(v="bottom"==l?"HTML"===a.nodeName?-a.clientHeight+h.bottom:-u.height+h.bottom:h.top,d="right"==f?"HTML"===a.nodeName?-a.clientWidth+h.right:-u.width+h.right:h.left,s&&p)c[p]="translate3d("+d+"px, "+v+"px, 0)",c[l]=0,c[f]=0,c.willChange="transform";else{var y="bottom"==l?-1:1,g="right"==f?-1:1;c[l]=v*y,c[f]=d*g,c.willChange=l+", "+f}var m={"x-placement":t.placement};return t.attributes=I({},m,t.attributes),t.styles=I({},c,t.styles),t.arrowStyles=I({},t.offsets.arrow,t.arrowStyles),t},gpuAcceleration:!0,x:"bottom",y:"right"},applyStyle:{order:900,enabled:!0,fn:function(t){var e,n;return V(t.instance.popper,t.styles),e=t.instance.popper,n=t.attributes,Object.keys(n).forEach(function(t){!1!==n[t]?e.setAttribute(t,n[t]):e.removeAttribute(t)}),t.arrowElement&&Object.keys(t.arrowStyles).length&&V(t.arrowElement,t.arrowStyles),t},onLoad:function(t,e,n,r,i){var o=O(i,e,t,n.positionFixed),s=f(n.placement,o,e,t,n.modifiers.flip.boundariesElement,n.modifiers.flip.padding);return e.setAttribute("x-placement",s),V(e,{position:n.positionFixed?"fixed":"absolute"}),n},gpuAcceleration:void 0}}},Z=(u(tt,[{key:"update",value:function(){return function(){if(!this.state.isDestroyed){var t={instance:this,styles:{},arrowStyles:{},attributes:{},flipped:!1,offsets:{}};t.offsets.reference=O(this.state,this.popper,this.reference,this.options.positionFixed),t.placement=f(this.options.placement,t.offsets.reference,this.popper,this.reference,this.options.modifiers.flip.boundariesElement,this.options.modifiers.flip.padding),t.originalPlacement=t.placement,t.positionFixed=this.options.positionFixed,t.offsets.popper=x(this.popper,t.offsets.reference,t.placement),t.offsets.popper.position=this.options.positionFixed?"fixed":"absolute",t=P(this.modifiers,t),this.state.isCreated?this.options.onUpdate(t):(this.state.isCreated=!0,this.options.onCreate(t))}}.call(this)}},{key:"destroy",value:function(){return function(){return this.state.isDestroyed=!0,L(this.modifiers,"applyStyle")&&(this.popper.removeAttribute("x-placement"),this.popper.style.position="",this.popper.style.top="",this.popper.style.left="",this.popper.style.right="",this.popper.style.bottom="",this.popper.style.willChange="",this.popper.style[M("transform")]=""),this.disableEventListeners(),this.options.removeOnDestroy&&this.popper.parentNode.removeChild(this.popper),this}.call(this)}},{key:"enableEventListeners",value:function(){return function(){this.state.eventsEnabled||(this.state=j(this.reference,this.options,this.state,this.scheduleUpdate))}.call(this)}},{key:"disableEventListeners",value:function(){return U.call(this)}}]),tt);function tt(t,e){var n=this,r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,tt),this.scheduleUpdate=function(){return requestAnimationFrame(n.update)},this.update=o(this.update.bind(this)),this.options=I({},tt.Defaults,r),this.state={isDestroyed:!1,isCreated:!1,scrollParents:[]},this.reference=t&&t.jquery?t[0]:t,this.popper=e&&e.jquery?e[0]:e,this.options.modifiers={},Object.keys(I({},tt.Defaults.modifiers,r.modifiers)).forEach(function(t){n.options.modifiers[t]=I({},tt.Defaults.modifiers[t]||{},r.modifiers?r.modifiers[t]:{})}),this.modifiers=Object.keys(this.options.modifiers).map(function(t){return I({name:t},n.options.modifiers[t])}).sort(function(t,e){return t.order-e.order}),this.modifiers.forEach(function(t){t.enabled&&s(t.onLoad)&&t.onLoad(n.reference,n.popper,n.options,t,n.state)}),this.update();var i=this.options.eventsEnabled;i&&this.enableEventListeners(),this.state.eventsEnabled=i}Z.Utils=("undefined"!=typeof window?window:t).PopperUtils,Z.placements=G,Z.Defaults=$,et.default=Z}.call(this,e(38))},425:function(t,e,n){"use strict";var r,i=(r=n(16))&&"object"==typeof r&&"default"in r?r.default:r;n(429),n(430),n(432),n(435),n(391),n(465),n(437),n(392),n(439);i.registerVersion("firebase","7.12.0","app");console.warn("\nIt looks like you're using the development build of the Firebase JS SDK.\nWhen deploying Firebase apps to production, it is advisable to only import\nthe individual SDK components you intend to use.\n\nFor the module builds, these are available in the following manner\n(replace <PACKAGE> with the name of a component - i.e. auth, database, etc):\n\nCommonJS Modules:\nconst firebase = require('firebase/app');\nrequire('firebase/<PACKAGE>');\n\nES Modules:\nimport firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n\nTypescript:\nimport * as firebase from 'firebase/app';\nimport 'firebase/<PACKAGE>';\n"),i.registerVersion("firebase","7.12.0"),t.exports=i},426:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return h}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return v}),n.d(e,"__spreadArrays",function(){return y}),n.d(e,"__await",function(){return g}),n.d(e,"__asyncGenerator",function(){return m}),n.d(e,"__asyncDelegator",function(){return _}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return E}),n.d(e,"__importDefault",function(){return T}),n.d(e,"__classPrivateFieldGet",function(){return I}),n.d(e,"__classPrivateFieldSet",function(){return S});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}function u(n,r){return function(t,e){r(t,e,n)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function l(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),s=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<s.push([r,n,t,e])||a(r,n)})})}function a(t,e){try{(n=o[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,c):h(s[0][2],n)}catch(t){h(s[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(i=!i)?{value:g(r[e](t)),done:"return"===e}:n?n(t):t}:n}}function b(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=u[Symbol.asyncIterator];return e?e.call(u):(u=p(u),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=u[a]&&function(s){return new Promise(function(t,e){var n,r,i,o;s=u[a](s),n=t,r=e,i=s.done,o=s.value,Promise.resolve(o).then(function(t){n({value:t,done:i})},r)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function I(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},427:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return h}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return v}),n.d(e,"__spreadArrays",function(){return y}),n.d(e,"__await",function(){return g}),n.d(e,"__asyncGenerator",function(){return m}),n.d(e,"__asyncDelegator",function(){return _}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return E}),n.d(e,"__importDefault",function(){return T}),n.d(e,"__classPrivateFieldGet",function(){return I}),n.d(e,"__classPrivateFieldSet",function(){return S});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}function u(n,r){return function(t,e){r(t,e,n)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function l(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),s=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<s.push([r,n,t,e])||a(r,n)})})}function a(t,e){try{(n=o[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,c):h(s[0][2],n)}catch(t){h(s[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(i=!i)?{value:g(r[e](t)),done:"return"===e}:n?n(t):t}:n}}function b(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=u[Symbol.asyncIterator];return e?e.call(u):(u=p(u),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=u[a]&&function(s){return new Promise(function(t,e){var n,r,i,o;s=u[a](s),n=t,r=e,i=s.done,o=s.value,Promise.resolve(o).then(function(t){n({value:t,done:i})},r)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function I(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},428:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return h}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return v}),n.d(e,"__spreadArrays",function(){return y}),n.d(e,"__await",function(){return g}),n.d(e,"__asyncGenerator",function(){return m}),n.d(e,"__asyncDelegator",function(){return _}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return E}),n.d(e,"__importDefault",function(){return T}),n.d(e,"__classPrivateFieldGet",function(){return I}),n.d(e,"__classPrivateFieldSet",function(){return S});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}function u(n,r){return function(t,e){r(t,e,n)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function l(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),s=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<s.push([r,n,t,e])||a(r,n)})})}function a(t,e){try{(n=o[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,c):h(s[0][2],n)}catch(t){h(s[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(i=!i)?{value:g(r[e](t)),done:"return"===e}:n?n(t):t}:n}}function b(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=u[Symbol.asyncIterator];return e?e.call(u):(u=p(u),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=u[a]&&function(s){return new Promise(function(t,e){var n,r,i,o;s=u[a](s),n=t,r=e,i=s.done,o=s.value,Promise.resolve(o).then(function(t){n({value:t,done:i})},r)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function I(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},429:function(t,e,n){"use strict";n.r(e),function(Yl){var t=n(16),Xl=n.n(t);(function(){var t,o="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)};var s=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof Yl&&Yl,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function c(t){var e,n,r="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return r?r.call(t):{next:(e=t,n=0,function(){return n<e.length?{done:!1,value:e[n++]}:{done:!0}})}}!function(t,e){if(e){var n=s;t=t.split(".");for(var r=0;r<t.length-1;r++){var i=t[r];i in n||(n[i]={}),n=n[i]}(e=e(r=n[t=t[t.length-1]]))!=r&&null!=e&&o(n,t,{configurable:!0,writable:!0,value:e})}}("Promise",function(t){function a(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function e(){this.a=null}function u(e){return e instanceof a?e:new a(function(t){t(e)})}if(t)return t;e.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c(function(){e.g()})}this.a.push(t)};var n=s.setTimeout;e.prototype.c=function(t){n(t,0)},e.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},e.prototype.f=function(t){this.c(function(){throw t})},a.prototype.f=function(){function t(e){return function(t){r||(r=!0,e.call(n,t))}}var n=this,r=!1;return{resolve:t(this.m),reject:t(this.g)}},a.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof a)this.s(t);else{t:switch(typeof t){case"object":var e=null!=t;break t;case"function":e=!0;break t;default:e=!1}e?this.u(t):this.h(t)}},a.prototype.u=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.w(e,t):this.h(t)},a.prototype.g=function(t){this.i(2,t)},a.prototype.h=function(t){this.i(1,t)},a.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},a.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)i.b(this.a[t]);this.a=null}};var i=new e;return a.prototype.s=function(t){var e=this.f();t.Oa(e.resolve,e.reject)},a.prototype.w=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},a.prototype.then=function(t,e){function n(e,t){return"function"==typeof e?function(t){try{r(e(t))}catch(t){i(t)}}:t}var r,i,o=new a(function(t,e){r=t,i=e});return this.Oa(n(t,r),n(e,i)),o},a.prototype.catch=function(t){return this.then(void 0,t)},a.prototype.Oa=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?i.b(n):this.a.push(n)},a.resolve=u,a.reject=function(n){return new a(function(t,e){e(n)})},a.race=function(i){return new a(function(t,e){for(var n=c(i),r=n.next();!r.done;r=n.next())u(r.value).Oa(t,e)})},a.all=function(t){var o=c(t),s=o.next();return s.done?u([]):new a(function(n,t){function e(e){return function(t){r[e]=t,0==--i&&n(r)}}for(var r=[],i=0;r.push(void 0),i++,u(s.value).Oa(e(r.length-1),t),!(s=o.next()).done;);})},a});var u=u||{},p=this||self,d=/^[\w+/_-]+[=]{0,2}$/,v=null;function a(){}function n(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function h(t){var e=n(t);return"array"==e||"object"==e&&"number"==typeof t.length}function l(t){return"function"==n(t)}function f(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function r(t){return Object.prototype.hasOwnProperty.call(t,e)&&t[e]||(t[e]=++i)}var e="closure_uid_"+(1e9*Math.random()>>>0),i=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function g(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function m(t,e,n){return(m=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:g).apply(null,arguments)}function _(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var b=Date.now||function(){return+new Date};function w(t,e){function n(){}n.prototype=e.prototype,t.Za=e.prototype,t.prototype=new n,t.prototype.constructor=t}function E(t,e,n){this.code=S+t,this.message=e||C[t]||"",this.a=n||null}function T(t){var e=t&&t.code;return e?new E(e.substring(S.length),t.message,t.serverResponse):null}w(E,Error),E.prototype.v=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},E.prototype.toJSON=function(){return this.v()};var I,S="auth/",C={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},A={hd:{Ra:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},pd:{Ra:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://securetoken.googleapis.com/v1/token",Ua:"https://identitytoolkit.googleapis.com/v2/",id:"p"},rd:{Ra:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",Xa:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},sd:{Ra:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",Xa:"https://test-securetoken.sandbox.googleapis.com/v1/token",Ua:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function N(t){for(var e in A)if(A[e].id===t)return{firebaseEndpoint:(t=A[e]).Ra,secureTokenEndpoint:t.Xa,identityPlatformEndpoint:t.Ua};return null}function O(t){if(t)try{return t.$goog_Thenable}catch(t){return}}function D(t){if(Error.captureStackTrace)Error.captureStackTrace(this,D);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function k(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");D.call(this,n+t[r])}function x(t,e){throw new k("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function R(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function P(t,e){t.f(e),t.b<100&&(t.b++,e.next=t.a,t.a=e)}function L(){this.b=this.a=null}I=N("__EID__")?"__EID__":void 0,w(D,Error),D.prototype.name="CustomError",w(k,D),k.prototype.name="AssertionError",R.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var M=new R(function(){return new F},function(t){t.reset()});function F(){this.next=this.b=this.a=null}L.prototype.add=function(t,e){var n=M.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},F.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},F.prototype.reset=function(){this.next=this.b=this.a=null};var j=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},U=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};var q=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},V=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},H=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function W(t,e){return 0<=j(t,e)}function B(t,e){var n;return(n=0<=(e=j(t,e)))&&Array.prototype.splice.call(t,e,1),n}function G(n,r){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(n,function(t,e){r.call(void 0,t,e,n)&&1==Array.prototype.splice.call(n,e,1).length&&0})}function z(t){return Array.prototype.concat.apply([],arguments)}function K(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Q,Y=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},X=/&/g,J=/</g,$=/>/g,Z=/"/g,tt=/'/g,et=/\x00/g,nt=/[\x00&<>"']/;function rt(t,e){return-1!=t.indexOf(e)}function it(t,e){return t<e?-1:e<t?1:0}t:{var ot=p.navigator;if(ot){var st=ot.userAgent;if(st){Q=st;break t}}Q=""}function at(t){return rt(Q,t)}function ut(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function ct(t){for(var e in t)return;return 1}function ht(t){var e,n={};for(e in t)n[e]=t[e];return n}var lt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ft(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<lt.length;o++)n=lt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function pt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||p).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(f(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;x("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function dt(t,e){this.a=t===gt&&e||"",this.b=yt}function vt(t){return t instanceof dt&&t.constructor===dt&&t.b===yt?t.a:(x("expected object of type Const, got '"+t+"'"),"type_error:Const")}dt.prototype.ra=!0,dt.prototype.qa=function(){return this.a},dt.prototype.toString=function(){return"Const{"+this.a+"}"};var yt={},gt={},mt=new dt(gt,"");function _t(t,e){this.a=t===St&&e||"",this.b=It}function bt(t){return t instanceof _t&&t.constructor===_t&&t.b===It?t.a:(x("expected object of type TrustedResourceUrl, got '"+t+"' of type "+n(t)),"type_error:TrustedResourceUrl")}function wt(t,n){var r=vt(t);if(!Tt.test(r))throw Error("Invalid TrustedResourceUrl format: "+r);return t=r.replace(Et,function(t,e){if(!Object.prototype.hasOwnProperty.call(n,e))throw Error('Found marker, "'+e+'", in format string, "'+r+'", but no valid label mapping found in args: '+JSON.stringify(n));return(t=n[e])instanceof dt?vt(t):encodeURIComponent(String(t))}),new _t(St,t)}_t.prototype.ra=!0,_t.prototype.qa=function(){return this.a.toString()},_t.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Et=/%{(\w+)}/g,Tt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,It={},St={};function Ct(t,e){this.a=t===kt&&e||"",this.b=Dt}function At(t){return t instanceof Ct&&t.constructor===Ct&&t.b===Dt?t.a:(x("expected object of type SafeUrl, got '"+t+"' of type "+n(t)),"type_error:SafeUrl")}Ct.prototype.ra=!0,Ct.prototype.qa=function(){return this.a.toString()},Ct.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var Nt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Ot(t){return t instanceof Ct?t:(t="object"==typeof t&&t.ra?t.qa():String(t),Nt.test(t)||(t="about:invalid#zClosurez"),new Ct(kt,t))}var Dt={},kt={};function xt(){this.a="",this.b=Pt}function Rt(t){return t instanceof xt&&t.constructor===xt&&t.b===Pt?t.a:(x("expected object of type SafeHtml, got '"+t+"' of type "+n(t)),"type_error:SafeHtml")}xt.prototype.ra=!0,xt.prototype.qa=function(){return this.a.toString()},xt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Pt={};function Lt(t){var e=new xt;return e.a=t,e}Lt("<!DOCTYPE html>");var Mt=Lt("");function Ft(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function jt(t){return nt.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(X,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(J,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace($,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(Z,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(tt,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(et,"&#0;"))),t}function Ut(t){return Ut[" "](t),t}Lt("<br>"),Ut[" "]=a;var qt,Vt,Ht=at("Opera"),Wt=at("Trident")||at("MSIE"),Bt=at("Edge"),Gt=Bt||Wt,zt=at("Gecko")&&!(rt(Q.toLowerCase(),"webkit")&&!at("Edge"))&&!(at("Trident")||at("MSIE"))&&!at("Edge"),Kt=rt(Q.toLowerCase(),"webkit")&&!at("Edge");function Qt(){var t=p.document;return t?t.documentMode:void 0}t:{var Yt="",Xt=(Vt=Q,zt?/rv:([^\);]+)(\)|;)/.exec(Vt):Bt?/Edge\/([\d\.]+)/.exec(Vt):Wt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Vt):Kt?/WebKit\/(\S+)/.exec(Vt):Ht?/(?:Version)[ \/]?(\S+)/.exec(Vt):void 0);if(Xt&&(Yt=Xt?Xt[1]:""),Wt){var Jt=Qt();if(null!=Jt&&Jt>parseFloat(Yt)){qt=String(Jt);break t}}qt=Yt}var $t,Zt={};function te(a){return t=a,e=function(){for(var t=0,e=Y(String(qt)).split("."),n=Y(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=it(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||it(0==o[2].length,0==s[2].length)||it(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=Zt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}$t=p.document&&Wt?Qt():void 0;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(t){}var ee=!Wt||9<=Number($t);function ne(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function re(n,t){ut(t,function(t,e){t&&"object"==typeof t&&t.ra&&(t=t.qa()),"style"==e?n.style.cssText=t:"class"==e?n.className=t:"for"==e?n.htmlFor=t:se.hasOwnProperty(e)?n.setAttribute(se[e],t):0==e.lastIndexOf("aria-",0)||0==e.lastIndexOf("data-",0)?n.setAttribute(e,t):n[e]=t})}var ie,oe,se={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function ae(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ee&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',jt(s.name),'"'),s.type){o.push(' type="',jt(s.type),'"');var a={};ft(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=ue(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):re(o,s)),2<r.length&&function(e,n,t){function r(t){t&&n.appendChild("string"==typeof t?e.createTextNode(t):t)}for(var i=2;i<t.length;i++){var o=t[i];!h(o)||f(o)&&0<o.nodeType?r(o):U(ce(o)?K(o):o,r)}}(i,o,r),o}function ue(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ce(t){if(t&&"number"==typeof t.length){if(f(t))return"function"==typeof t.item||"string"==typeof t.item;if(l(t))return"function"==typeof t.item}}function he(t){p.setTimeout(function(){throw t},0)}function le(){var t=p.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!at("Presto")&&(t=function(){var t,e,n=ue(document,"IFRAME");n.style.display="none",t=n,e=new _t(St,vt(mt)),pt(t,"HTMLIFrameElement"),t.src=bt(e).toString(),document.documentElement.appendChild(n);var r=n.contentWindow;(n=r.document).open(),n.write(Rt(Mt)),n.close();var i="callImmediate"+Math.random(),o="file:"==r.location.protocol?"*":r.location.protocol+"//"+r.location.host;n=m(function(t){"*"!=o&&t.origin!=o||t.data!=i||this.port1.onmessage()},this),r.addEventListener("message",n,!1),this.port1={},this.port2={postMessage:function(){r.postMessage(i,o)}}}),void 0===t||at("Trident")||at("MSIE"))return function(t){p.setTimeout(t,0)};var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Db;n.Db=null,t()}},function(t){r.next={Db:t},r=r.next,e.port2.postMessage(0)}}function fe(t,e){oe||function(){if(p.Promise&&p.Promise.resolve){var t=p.Promise.resolve(void 0);oe=function(){t.then(ve)}}else oe=function(){var t=ve;!l(p.setImmediate)||p.Window&&p.Window.prototype&&!at("Edge")&&p.Window.prototype.setImmediate==p.setImmediate?(ie=ie||le())(t):p.setImmediate(t)}}(),pe||(oe(),pe=!0),de.add(t,e)}var pe=!1,de=new L;function ve(){for(var t;n=e=void 0,n=null,(e=de).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){he(t)}P(M,t)}var e,n;pe=!1}function ye(t,e){if(this.a=ge,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=a)try{var n=this;t.call(e,function(t){Oe(n,me,t)},function(t){if(!(t instanceof Me))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Oe(n,_e,t)})}catch(t){Oe(this,_e,t)}}var ge=0,me=2,_e=3;function be(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}be.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var we=new R(function(){return new be},function(t){t.reset()});function Ee(t,e,n){var r=we.get();return r.g=t,r.b=e,r.f=n,r}function Te(t){if(t instanceof ye)return t;var e=new ye(a);return Oe(e,me,t),e}function Ie(n){return new ye(function(t,e){e(n)})}function Se(t,e,n){De(t,e,n,null)||fe(_(e,t))}function Ce(n){return new ye(function(r){var i=n.length,o=[];if(i)for(var t=function(t,e,n){i--,o[t]=e?{Mb:!0,value:n}:{Mb:!1,reason:n},0==i&&r(o)},e=0;e<n.length;e++)Se(n[e],_(t,e,!0),_(t,e,!1));else r(o)})}function Ae(t,e){t.b||t.a!=me&&t.a!=_e||ke(t),t.f?t.f.next=e:t.b=e,t.f=e}function Ne(t,i,o,s){var e=Ee(null,null,null);return e.a=new ye(function(n,r){e.g=i?function(t){try{var e=i.call(s,t);n(e)}catch(t){r(t)}}:n,e.b=o?function(t){try{var e=o.call(s,t);void 0===e&&t instanceof Me?r(t):n(e)}catch(t){r(t)}}:r}),Ae(e.a.c=t,e),e.a}function Oe(t,e,n){var r,i;t.a==ge&&(t===n&&(e=_e,n=new TypeError("Promise cannot resolve to itself")),t.a=1,De(n,t.Yc,t.Zc,t)||(t.i=n,t.a=e,t.c=null,ke(t),e!=_e||n instanceof Me||(i=n,(r=t).g=!0,fe(function(){r.g&&Le.call(null,i)}))))}function De(t,e,n,r){if(t instanceof ye)return Ae(t,Ee(e||a,n||null,r)),1;if(O(t))return t.then(e,n,r),1;if(f(t))try{var i=t.then;if(l(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,function(t){s||(s=!0,n.call(i,t))},o)}catch(t){o(t)}}(t,i,e,n,r),1}catch(t){return n.call(r,t),1}}function ke(t){t.h||(t.h=!0,fe(t.ec,t))}function xe(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Re(t,e,n,r){if(n==_e&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,Pe(e,n,r);else try{e.c?e.g.call(e.f):Pe(e,n,r)}catch(t){Le.call(null,t)}P(we,e)}function Pe(t,e,n){e==me?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}ye.prototype.then=function(t,e,n){return Ne(this,l(t)?t:null,l(e)?e:null,n)},ye.prototype.$goog_Thenable=!0,(t=ye.prototype).ma=function(t,e){return(t=Ee(t,t,e)).c=!0,Ae(this,t),this},t.o=function(t,e){return Ne(this,null,t,e)},t.cancel=function(t){if(this.a==ge){var e=new Me(t);fe(function(){!function t(e,n){if(e.a==ge)if(e.c){var r=e.c;if(r.b){for(var i=0,o=null,s=null,a=r.b;a&&(a.c||(i++,a.a==e&&(o=a),!(o&&1<i)));a=a.next)o||(s=a);o&&(r.a==ge&&1==i?t(r,n):(s?((i=s).next==r.f&&(r.f=i),i.next=i.next.next):xe(r),Re(r,o,_e,n)))}e.c=null}else Oe(e,_e,n)}(this,e)},this)}},t.Yc=function(t){this.a=ge,Oe(this,me,t)},t.Zc=function(t){this.a=ge,Oe(this,_e,t)},t.ec=function(){for(var t;t=xe(this);)Re(this,t,this.a,this.i);this.h=!1};var Le=he;function Me(t){D.call(this,t)}function Fe(){0!=je&&(Ue[r(this)]=this),this.wa=this.wa,this.na=this.na}w(Me,D);var je=0,Ue={};function qe(t){if(!t.wa&&(t.wa=!0,t.Ba(),0!=je)){var e=r(t);if(0!=je&&t.na&&0<t.na.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ue[e]}}Fe.prototype.wa=!(Me.prototype.name="cancel"),Fe.prototype.Ba=function(){if(this.na)for(;this.na.length;)this.na.shift()()};var Ve=Object.freeze||function(t){return t},He=!Wt||9<=Number($t),We=Wt&&!te("9"),Be=function(){if(!p.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{p.addEventListener("test",a,e),p.removeEventListener("test",a,e)}catch(t){}return t}();function Ge(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function ze(t,e){if(Ge.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(zt){t:{try{Ut(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ke[t.pointerType]||"",(this.a=t).defaultPrevented&&this.preventDefault()}}Ge.prototype.preventDefault=function(){this.defaultPrevented=!0},w(ze,Ge);var Ke=Ve({2:"touch",3:"pen",4:"mouse"});ze.prototype.preventDefault=function(){ze.Za.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,We)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}},ze.prototype.f=function(){return this.a};var Qe="closure_listenable_"+(1e6*Math.random()|0),Ye=0;function Xe(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Ta=i,this.key=++Ye,this.ua=this.Na=!1}function Je(t){t.ua=!0,t.listener=null,t.proxy=null,t.src=null,t.Ta=null}function $e(t){this.src=t,this.a={},this.b=0}function Ze(t,e){var n=e.type;n in t.a&&B(t.a[n],e)&&(Je(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function tn(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ua&&o.listener==e&&o.capture==!!n&&o.Ta==r)return i}return-1}$e.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=tn(t,e,r,i);return-1<s?(e=t[s],n||(e.Na=!1)):((e=new Xe(e,this.src,o,!!r,i)).Na=n,t.push(e)),e};var en="closure_lm_"+(1e6*Math.random()|0),nn={};function rn(t,e,n,r,i){if(r&&r.once)sn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)rn(t,e[o],n,r,i);else n=vn(n),t&&t[Qe]?gn(t,e,n,f(r)?!!r.capture:!!r,i):on(t,e,n,!1,r,i)}function on(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s,a,u=f(i)?!!i.capture:!!i,c=pn(t);if(c||(t[en]=c=new $e(t)),!(n=c.add(e,n,r,u,o)).proxy){if(s=fn,r=a=He?function(t){return s.call(a.src,a.listener,t)}:function(t){if(!(t=s.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)Be||(i=u),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(cn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}0}}function sn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)sn(t,e[o],n,r,i);else n=vn(n),t&&t[Qe]?mn(t,e,n,f(r)?!!r.capture:!!r,i):on(t,e,n,!0,r,i)}function an(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)an(t,e[o],n,r,i);else r=f(r)?!!r.capture:!!r,n=vn(n),t&&t[Qe]?(t=t.u,(e=String(e).toString())in t.a&&(-1<(n=tn(o=t.a[e],n,r,i))&&(Je(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--)))):(t=t&&pn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=tn(e,n,r,i)),(n=-1<t?e[t]:null)&&un(n))}function un(t){if("number"!=typeof t&&t&&!t.ua){var e=t.src;if(e&&e[Qe])Ze(e.u,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(cn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=pn(e))?(Ze(n,t),0==n.b&&(n.src=null,e[en]=null)):Je(t)}}}function cn(t){return t in nn?nn[t]:nn[t]="on"+t}function hn(t,e,n,r){var i=!0;if((t=pn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.ua&&(o=ln(o,r),i=i&&!1!==o)}return i}function ln(t,e){var n=t.listener,r=t.Ta||t.src;return t.Na&&un(t),n.call(r,e)}function fn(t,e){if(t.ua)return!0;if(He)return ln(t,new ze(e,this));if(!e)t:{e=["window","event"];for(var n=p,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new ze(r=e,this),n=!0,!(r.keyCode<0||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}!i&&null!=r.returnValue||(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=hn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=hn(r[i],t,!1,e),n=n&&o}return n}function pn(t){return(t=t[en])instanceof $e?t:null}var dn="__closure_events_fn_"+(1e9*Math.random()>>>0);function vn(e){return l(e)?e:(e[dn]||(e[dn]=function(t){return e.handleEvent(t)}),e[dn])}function yn(){Fe.call(this),this.u=new $e(this),(this.Yb=this).eb=null}function gn(t,e,n,r,i){t.u.add(String(e),n,!1,r,i)}function mn(t,e,n,r,i){t.u.add(String(e),n,!0,r,i)}function _n(t,e,n,r){if(!(e=t.u.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ua&&s.capture==n){var a=s.listener,u=s.Ta||s.src;s.Na&&Ze(t.u,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function bn(t,e,n){if(l(t))n&&(t=m(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=m(t.handleEvent,t)}return 2147483647<Number(e)?-1:p.setTimeout(t,e||0)}function wn(n){var r=null;return new ye(function(t,e){-1==(r=bn(function(){t(void 0)},n))&&e(Error("Failed to schedule timer."))}).o(function(t){throw p.clearTimeout(r),t})}function En(t){if(t.V&&"function"==typeof t.V)return t.V();if("string"==typeof t)return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Tn(t){if(t.X&&"function"==typeof t.X)return t.X();if(!t.V||"function"!=typeof t.V){if(h(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function In(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof In)for(n=t.X(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Sn(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Cn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Cn(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Cn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}w(yn,Fe),yn.prototype[Qe]=!0,yn.prototype.addEventListener=function(t,e,n,r){rn(this,t,e,n,r)},yn.prototype.removeEventListener=function(t,e,n,r){an(this,t,e,n,r)},yn.prototype.dispatchEvent=function(t){var e,n=this.eb;if(n)for(e=[];n;n=n.eb)e.push(n);n=this.Yb;var r=t.type||t;if("string"==typeof t)t=new Ge(t,n);else if(t instanceof Ge)t.target=t.target||n;else{var i=t;ft(t=new Ge(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=_n(s,r,!0,t)&&i}if(i=_n(s=t.b=n,r,!0,t)&&i,i=_n(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=_n(s=t.b=e[o],r,!1,t)&&i;return i},yn.prototype.Ba=function(){if(yn.Za.Ba.call(this),this.u){var t,e=this.u;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Je(n[r]);delete e.a[t],e.b--}}this.eb=null},(t=In.prototype).V=function(){Sn(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.X=function(){return Sn(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Cn(this.b,t)?this.b[t]:e},t.set=function(t,e){Cn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.X(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var An=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/\\#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Nn(t,e){var n;this.b=this.i=this.f="",this.l=null,this.g=this.c="",this.h=!1,t instanceof Nn?(this.h=void 0!==e?e:t.h,On(this,t.f),this.i=t.i,this.b=t.b,Dn(this,t.l),this.c=t.c,kn(this,Xn(t.a)),this.g=t.g):t&&(n=String(t).match(An))?(this.h=!!e,On(this,n[1]||"",!0),this.i=Mn(n[2]||""),this.b=Mn(n[3]||"",!0),Dn(this,n[4]),this.c=Mn(n[5]||"",!0),kn(this,n[6]||"",!0),this.g=Mn(n[7]||"")):(this.h=!!e,this.a=new Bn(null,this.h))}function On(t,e,n){t.f=n?Mn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Dn(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.l=e}else t.l=null}function kn(t,e,n){var r,i;e instanceof Bn?(t.a=e,r=t.a,(i=t.h)&&!r.f&&(Gn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Kn(this,e),Yn(this,n,t))},r)),r.f=i):(n||(e=Fn(e,Hn)),t.a=new Bn(e,t.h))}function xn(t,e,n){t.a.set(e,n)}function Rn(t,e){return t.a.get(e)}function Pn(t){return t instanceof Nn?new Nn(t):new Nn(t,void 0)}function Ln(t,e){var n=new Nn(null,void 0);return On(n,"https"),t&&(n.b=t),e&&(n.c=e),n}function Mn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Fn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,jn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function jn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Nn.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Fn(e,Un,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.i)&&t.push(Fn(e,Un,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.l)&&t.push(":",String(n))),(n=this.c)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Fn(n,"/"==n.charAt(0)?Vn:qn,!0))),(n=this.a.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Fn(n,Wn)),t.join("")},Nn.prototype.resolve=function(t){var e=new Nn(this),n=!!t.f;n?On(e,t.f):n=!!t.i,n?e.i=t.i:n=!!t.b,n?e.b=t.b:n=null!=t.l;var r=t.c;if(n)Dn(e,t.l);else if(n=!!t.c){if("/"!=r.charAt(0))if(this.b&&!this.c)r="/"+r;else{var i=e.c.lastIndexOf("/");-1!=i&&(r=e.c.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(rt(i,"./")||rt(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.c=r:n=""!==t.a.toString(),n?kn(e,Xn(t.a)):n=!!t.g,n&&(e.g=t.g),e};var Un=/[#\/\?@]/g,qn=/[#\?:]/g,Vn=/[#\?]/g,Hn=/[#\?@]/g,Wn=/#/g;function Bn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Gn(n){n.a||(n.a=new In,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function zn(t){var e=Tn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Bn(null,void 0);t=En(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?Yn(n,i,o):n.add(i,o)}return n}function Kn(t,e){Gn(t),e=Jn(t,e),Cn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Cn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Sn(t)))}function Qn(t,e){return Gn(t),e=Jn(t,e),Cn(t.a.b,e)}function Yn(t,e,n){Kn(t,e),0<n.length&&(t.c=null,t.a.set(Jn(t,e),K(n)),t.b+=n.length)}function Xn(t){var e=new Bn;return e.c=t.c,t.a&&(e.a=new In(t.a),e.b=t.b),e}function Jn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function $n(t){var e=[];return function t(e,n,r){if(null==n)r.push("null");else{if("object"==typeof n){if(Array.isArray(n)){var i=n;n=i.length,r.push("[");for(var o="",s=0;s<n;s++)r.push(o),t(e,i[s],r),o=",";return void r.push("]")}if(!(n instanceof String||n instanceof Number||n instanceof Boolean)){for(i in r.push("{"),o="",n)Object.prototype.hasOwnProperty.call(n,i)&&("function"!=typeof(s=n[i])&&(r.push(o),nr(i,r),r.push(":"),t(e,s,r),o=","));return void r.push("}")}n=n.valueOf()}switch(typeof n){case"string":nr(n,r);break;case"number":r.push(isFinite(n)&&!isNaN(n)?String(n):"null");break;case"boolean":r.push(String(n));break;case"function":r.push("null");break;default:throw Error("Unknown type: "+typeof n)}}}(new Zn,t,e),e.join("")}function Zn(){}(t=Bn.prototype).add=function(t,e){Gn(this),this.c=null,t=Jn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(n,r){Gn(this),this.a.forEach(function(t,e){U(t,function(t){n.call(r,t,e,this)},this)},this)},t.X=function(){Gn(this);for(var t=this.a.V(),e=this.a.X(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.V=function(t){Gn(this);var e=[];if("string"==typeof t)Qn(this,t)&&(e=z(e,this.a.get(Jn(this,t))));else{t=this.a.V();for(var n=0;n<t.length;n++)e=z(e,t[n])}return e},t.set=function(t,e){return Gn(this),this.c=null,Qn(this,t=Jn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.V(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.X(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.V(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var tr={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},er=/\uffff/.test("ï¿¿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function nr(t,e){e.push('"',t.replace(er,function(t){var e=tr[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),tr[t]=e),e}),'"')}function rr(){var t=Er();return Wt&&$t&&11==$t||/Edge\/\d+/.test(t)}function ir(){return p.window&&p.window.location.href||self&&self.location&&self.location.href||""}function or(t,e){e=e||p.window;var n="about:blank";t&&(n=At(Ot(t))),e.location.href=n}function sr(t){return!!((t=(t||Er()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function ar(t){t=t||p.window;try{t.close()}catch(t){}}function ur(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Er().toLowerCase(),r&&(e.target=r,rt(n,"crios/")&&(e.target="_blank")),_r(Er())==gr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ct?n:Ot(void 0!==n.href?n.href:String(n)),n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((at("iPhone")&&!at("iPod")&&!at("iPad")||at("iPad")||at("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(pt(s=ue(document,"A"),"HTMLAnchorElement"),e instanceof Ct||e instanceof Ct||(e="object"==typeof e&&e.ra?e.qa():String(e),Nt.test(e)||(e="about:invalid#zClosurez"),e=new Ct(kt,e)),s.href=At(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=r.open("",n,s),t=At(e),s&&(Gt&&rt(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t=Lt('<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+jt(t)+'">'),r=s.document)&&(r.write(Rt(t)),r.close())):(s=r.open(At(e),n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var cr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,hr=/^[^@]+@[^@]+$/;function lr(){var e=null;return new ye(function(t){"complete"==p.document.readyState?t():(e=function(){t()},sn(window,"load",e))}).o(function(t){throw an(window,"load",e),t})}function fr(t){return t=t||Er(),!("file:"!==Ar()&&"ionic:"!==Ar()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function pr(){var t=p.window;try{return t&&t!=t.top}catch(t){return}}function dr(){return void 0!==p.WorkerGlobalScope&&"function"==typeof p.importScripts}function vr(){return Xl.a.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":Xl.a.INTERNAL.hasOwnProperty("node")?"Node":dr()?"Worker":"Browser"}function yr(){var t=vr();return"ReactNative"===t||"Node"===t}var gr="Firefox",mr="Chrome";function _r(t){var e=t.toLowerCase();return rt(e,"opera/")||rt(e,"opr/")||rt(e,"opios/")?"Opera":rt(e,"iemobile")?"IEMobile":rt(e,"msie")||rt(e,"trident/")?"IE":rt(e,"edge/")?"Edge":rt(e,"firefox/")?gr:rt(e,"silk/")?"Silk":rt(e,"blackberry")?"Blackberry":rt(e,"webos")?"Webos":!rt(e,"safari/")||rt(e,"chrome/")||rt(e,"crios/")||rt(e,"android")?!rt(e,"chrome/")&&!rt(e,"crios/")||rt(e,"edge/")?rt(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":mr:"Safari"}var br={jd:"FirebaseCore-web",ld:"FirebaseUI-web"};function wr(t,e){e=e||[];var n,r=[],i={};for(n in br)i[br[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=vr())?r=_r(i=Er()):"Worker"===r&&(r=_r(i=Er())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Er(){return p.navigator&&p.navigator.userAgent||""}function Tr(t,e){t=t.split("."),e=e||p;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Ir(){try{var t=p.localStorage,e=xr();if(t)return t.setItem(e,"1"),t.removeItem(e),!rr()||!!p.indexedDB}catch(t){return dr()&&!!p.indexedDB}return!1}function Sr(){return(Cr()||"chrome-extension:"===Ar()||fr())&&!yr()&&Ir()&&!dr()}function Cr(){return"http:"===Ar()||"https:"===Ar()}function Ar(){return p.location&&p.location.protocol||null}function Nr(t){return!sr(t=t||Er())&&_r(t)!=gr}function Or(t){return void 0===t?null:$n(t)}function Dr(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function kr(t){if(null!==t)return JSON.parse(t)}function xr(t){return t||Math.floor(1e9*Math.random()).toString()}function Rr(t){return"Safari"!=_r(t=t||Er())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Pr(){var t=p.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Lr(t,e){if(e<t)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Er(),e=vr(),this.b=sr(t)||"ReactNative"===e}function Mr(){var t=p.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Fr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function jr(){return Tr("fireauth.oauthhelper",p)||Tr("fireauth.iframe",p)}Lr.prototype.get=function(){var t=p.navigator;return!t||"boolean"!=typeof t.onLine||!Cr()&&"chrome-extension:"!==Ar()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Ur,qr={};function Vr(t){qr[t]||(qr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Hr={};Object.defineProperty(Hr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Hr,"abcd",{configurable:!0,enumerable:!0,value:2}),Ur=2==Hr.abcd}catch(t){Ur=!1}function Wr(t,e,n){Ur?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Br(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Wr(t,n,e[n])}function Gr(t){var e={};return Br(e,t),e}function zr(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Wr(e,n,zr(t[n]));return e}function Kr(t){var e=t&&(t[$r]?"phone":null);if(!(e&&t&&t[Jr]))throw new E("internal-error","Internal assert: invalid MultiFactorInfo object");Wr(this,"uid",t[Jr]),Wr(this,"displayName",t[Yr]||null);var n=null;t[Xr]&&(n=new Date(t[Xr]).toUTCString()),Wr(this,"enrollmentTime",n),Wr(this,"factorId",e)}function Qr(t){try{var e=new Zr(t)}catch(t){e=null}return e}Kr.prototype.v=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var Yr="displayName",Xr="enrolledAt",Jr="mfaEnrollmentId",$r="phoneInfo";function Zr(t){Kr.call(this,t),Wr(this,"phoneNumber",t[$r])}function ti(t){var e={},n=t[ii],r=t[si],i=t[ai];if(t=Qr(t[oi]),!i||i!=ni&&i!=ri&&!n||i==ri&&!r||i==ei&&!t)throw Error("Invalid checkActionCode response!");i==ri?(e[ci]=n||null,e[li]=n||null,e[ui]=r):(e[ci]=r||null,e[li]=r||null,e[ui]=n||null),e[hi]=t||null,Wr(this,pi,i),Wr(this,fi,zr(e))}w(Zr,Kr),Zr.prototype.v=function(){var t=Zr.Za.v.call(this);return t.phoneNumber=this.phoneNumber,t};var ei="REVERT_SECOND_FACTOR_ADDITION",ni="EMAIL_SIGNIN",ri="VERIFY_AND_CHANGE_EMAIL",ii="email",oi="mfaInfo",si="newEmail",ai="requestType",ui="email",ci="fromEmail",hi="multiFactorInfo",li="previousEmail",fi="data",pi="operation";function di(t){var e=Rn(t=Pn(t),vi)||null,n=Rn(t,yi)||null,r=Rn(t,_i)||null;if(r=r&&wi[r]||null,!e||!n||!r)throw new E("argument-error",vi+", "+yi+"and "+_i+" are required in a valid action code URL.");Br(this,{apiKey:e,operation:r,code:n,continueUrl:Rn(t,gi)||null,languageCode:Rn(t,mi)||null,tenantId:Rn(t,bi)||null})}var vi="apiKey",yi="oobCode",gi="continueUrl",mi="languageCode",_i="mode",bi="tenantId",wi={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ei,signIn:ni,verifyAndChangeEmail:ri,verifyEmail:"VERIFY_EMAIL"};function Ei(t){try{return new di(t)}catch(t){return null}}function Ti(t){var e=t[Ni];if(void 0===e)throw new E("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new E("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Ii];if(n&&"object"==typeof n){e=n[ki];var r=n[Oi];if(n=n[Di],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new E("argument-error",Oi+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new E("argument-error",Di+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new E("argument-error",ki+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new E("missing-android-pkg-name")}}else if(void 0!==n)throw new E("argument-error",Ii+" property must be a non null object when specified.");if(this.f=null,(e=t[Ai])&&"object"==typeof e){if("string"==typeof(e=e[xi])&&e.length)this.f=e;else if(void 0!==e)throw new E("argument-error",xi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new E("argument-error",Ai+" property must be a non null object when specified.");if(void 0!==(e=t[Ci])&&"boolean"!=typeof e)throw new E("argument-error",Ci+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[Si])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new E("argument-error",Si+" property must be a non empty string when specified.");this.i=t||null}var Ii="android",Si="dynamicLinkDomain",Ci="handleCodeInApp",Ai="iOS",Ni="url",Oi="installApp",Di="minimumVersion",ki="packageName",xi="bundleId";function Ri(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Pi=null;function Li(t){var e="";return function(r,t){function e(t){for(;i<r.length;){var e=r.charAt(i++),n=Pi[e];if(null!=n)return n;if(!/^[\s\xa0]*$/.test(e))throw Error("Unknown base64 encoding at char: "+e)}return t}!function(){if(!Pi){Pi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;n<5;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Pi[o]&&(Pi[o]=i)}}}();for(var i=0;;){var n=e(-1),o=e(0),s=e(64),a=e(64);if(64===a&&-1===n)break;t(n<<2|o>>4),64!=s&&(t(o<<4&240|s>>2),64!=a&&t(s<<6&192|a))}}(t,function(t){e+=String.fromCharCode(t)}),e}function Mi(t){var e=ji(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.g=t,this.c=e.exp,this.h=e.sub,b(),this.a=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.b=!!e.is_anonymous||"anonymous"==this.a}function Fi(t){try{return new Mi(t)}catch(t){return null}}function ji(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{return JSON.parse(Li(t))}catch(t){}return null}Mi.prototype.S=function(){return this.f},Mi.prototype.i=function(){return this.b},Mi.prototype.toString=function(){return this.g};var Ui="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),qi=["client_id","response_type","scope","redirect_uri","state"],Vi={kd:{Ha:"locale",ta:700,sa:600,ea:"facebook.com",Va:qi},md:{Ha:null,ta:500,sa:750,ea:"github.com",Va:qi},nd:{Ha:"hl",ta:515,sa:680,ea:"google.com",Va:qi},td:{Ha:"lang",ta:485,sa:705,ea:"twitter.com",Va:Ui},gd:{Ha:"locale",ta:600,sa:600,ea:"apple.com",Va:[]}};function Hi(t){for(var e in Vi)if(Vi[e].ea==t)return Vi[e];return null}function Wi(t){var e={};e["facebook.com"]=Qi,e["google.com"]=Xi,e["github.com"]=Yi,e["twitter.com"]=Ji;var n=t&&t[Gi];try{if(n)return e[n]?new e[n](t):new Ki(t);if(void 0!==t[Bi])return new zi(t)}catch(t){}return null}var Bi="idToken",Gi="providerId";function zi(t){var e=t[Gi];if(!e&&t[Bi]){var n=Fi(t[Bi]);n&&n.a&&(e=n.a)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Wr(this,"providerId",e),Wr(this,"isNewUser",n)}function Ki(t){zi.call(this,t),Wr(this,"profile",zr((t=kr(t.rawUserInfo||"{}"))||{}))}function Qi(t){if(Ki.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function Yi(t){if(Ki.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Wr(this,"username",this.profile&&this.profile.login||null)}function Xi(t){if(Ki.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function Ji(t){if(Ki.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Wr(this,"username",t.screenName||null)}function $i(t){var e=Pn(t),n=Rn(e,"link"),r=Rn(Pn(n),"link");return e=Rn(e,"deep_link_id"),Rn(Pn(e),"link")||e||r||n||t}function Zi(t,e){if(!t&&!e)throw new E("internal-error","Internal assert: no raw session string available");if(t&&e)throw new E("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?to:eo}w(Ki,zi),w(Qi,Ki),w(Yi,Ki),w(Xi,Ki),w(Ji,Ki);var to="enroll",eo="signin";function no(){}function ro(t,n){return t.then(function(t){if(t[zs]){var e=Fi(t[zs]);if(!e||n!=e.h)throw new E("user-mismatch");return t}throw new E("user-mismatch")}).o(function(t){throw t&&t.code&&t.code==S+"user-not-found"?new E("user-mismatch"):t})}function io(t,e){if(!e)throw new E("internal-error","failed to construct a credential");this.a=e,Wr(this,"providerId",t),Wr(this,"signInMethod",t)}function oo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function so(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new io(t.providerId,t.pendingToken)}catch(t){}return null}function ao(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Wr(this,"idToken",e.idToken),e.accessToken&&Wr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Wr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new E("internal-error","failed to construct a credential");Wr(this,"accessToken",e.oauthToken),Wr(this,"secret",e.oauthTokenSecret)}Wr(this,"providerId",t),Wr(this,"signInMethod",n)}function uo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:zn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function co(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new ao(t.providerId,e,t.signInMethod)}catch(t){}}return null}function ho(t,e){this.Oc=e||[],Br(this,{providerId:t,isOAuthProvider:!0}),this.Fb={},this.lb=(Hi(t)||{}).Ha||null,this.kb=null}function lo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new E("argument-error",'SAML provider IDs must be prefixed with "saml."');ho.call(this,t,[])}function fo(t){ho.call(this,t,qi),this.a=[]}function po(){fo.call(this,"facebook.com")}function vo(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return f(t)&&(e=t.accessToken),(new po).credential({accessToken:e})}function yo(){fo.call(this,"github.com")}function go(t){if(!t)throw new E("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return f(t)&&(e=t.accessToken),(new yo).credential({accessToken:e})}function mo(){fo.call(this,"google.com"),this.Aa("profile")}function _o(t,e){var n=t;return f(t)&&(n=t.idToken,e=t.accessToken),(new mo).credential({idToken:n,accessToken:e})}function bo(){ho.call(this,"twitter.com",Ui)}function wo(t,e){var n=t;if(f(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new E("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new ao("twitter.com",n,"twitter.com")}function Eo(t,e,n){this.a=t,this.f=e,Wr(this,"providerId","password"),Wr(this,"signInMethod",n===Io.EMAIL_LINK_SIGN_IN_METHOD?Io.EMAIL_LINK_SIGN_IN_METHOD:Io.EMAIL_PASSWORD_SIGN_IN_METHOD)}function To(t){return t&&t.email&&t.password?new Eo(t.email,t.password,t.signInMethod):null}function Io(){Br(this,{providerId:"password",isOAuthProvider:!1})}function So(t,e){if(!(e=Co(e)))throw new E("argument-error","Invalid email link!");return new Eo(t,e.code,Io.EMAIL_LINK_SIGN_IN_METHOD)}function Co(t){return(t=Ei(t=$i(t)))&&t.operation===ni?t:null}function Ao(t){if(!(t.bb&&t.ab||t.Ja&&t.da))throw new E("internal-error");this.a=t,Wr(this,"providerId","phone"),this.ea="phone",Wr(this,"signInMethod","phone")}function No(e){if(e&&"phone"===e.providerId&&(e.verificationId&&e.verificationCode||e.temporaryProof&&e.phoneNumber)){var n={};return U(["verificationId","verificationCode","temporaryProof","phoneNumber"],function(t){e[t]&&(n[t]=e[t])}),new Ao(n)}return null}function Oo(t){return t.a.Ja&&t.a.da?{temporaryProof:t.a.Ja,phoneNumber:t.a.da}:{sessionInfo:t.a.bb,code:t.a.ab}}function Do(t){try{this.a=t||Xl.a.auth()}catch(t){throw new E("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Br(this,{providerId:"phone",isOAuthProvider:!1})}function ko(t,e){if(!t)throw new E("missing-verification-id");if(!e)throw new E("missing-verification-code");return new Ao({bb:t,ab:e})}function xo(t){if(t.temporaryProof&&t.phoneNumber)return new Ao({Ja:t.temporaryProof,da:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return _o(o,n);case"facebook.com":return vo(n);case"github.com":return go(n);case"twitter.com":return wo(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new io(e,s):new ao(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new fo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function Ro(t){if(!t.isOAuthProvider)throw new E("invalid-oauth-provider")}function Po(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new E("invalid-auth-event");if(this.g&&this.a)throw new E("invalid-auth-event");if(this.g&&!this.f)throw new E("invalid-auth-event")}function Lo(t){return(t=t||{}).type?new Po(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&T(t.error),t.postBody,t.tenantId):null}function Mo(){this.b=null,this.a=[]}Zi.prototype.Fa=function(){return this.a?Te(this.a):Te(this.b)},Zi.prototype.v=function(){return this.type==to?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},no.prototype.ia=function(){},no.prototype.b=function(){},no.prototype.c=function(){},no.prototype.v=function(){},io.prototype.ia=function(t){return fa(t,oo(this))},io.prototype.b=function(t,e){var n=oo(this);return n.idToken=e,pa(t,n)},io.prototype.c=function(t,e){return ro(da(t,oo(this)),e)},io.prototype.v=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},ao.prototype.ia=function(t){return fa(t,uo(this))},ao.prototype.b=function(t,e){var n=uo(this);return n.idToken=e,pa(t,n)},ao.prototype.c=function(t,e){return ro(da(t,uo(this)),e)},ao.prototype.v=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},ho.prototype.Ia=function(t){return this.Fb=ht(t),this},w(lo,ho),w(fo,ho),fo.prototype.Aa=function(t){return W(this.a,t)||this.a.push(t),this},fo.prototype.Nb=function(){return K(this.a)},fo.prototype.credential=function(t,e){var n;if(!(n=f(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new E("argument-error","credential failed: must provide the ID token and/or the access token.");return new ao(this.providerId,n,this.providerId)},w(po,fo),Wr(po,"PROVIDER_ID","facebook.com"),Wr(po,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),w(yo,fo),Wr(yo,"PROVIDER_ID","github.com"),Wr(yo,"GITHUB_SIGN_IN_METHOD","github.com"),w(mo,fo),Wr(mo,"PROVIDER_ID","google.com"),Wr(mo,"GOOGLE_SIGN_IN_METHOD","google.com"),w(bo,ho),Wr(bo,"PROVIDER_ID","twitter.com"),Wr(bo,"TWITTER_SIGN_IN_METHOD","twitter.com"),Eo.prototype.ia=function(t){return this.signInMethod==Io.EMAIL_LINK_SIGN_IN_METHOD?Ya(t,Ea,{email:this.a,oobCode:this.f}):Ya(t,Ba,{email:this.a,password:this.f})},Eo.prototype.b=function(t,e){return this.signInMethod==Io.EMAIL_LINK_SIGN_IN_METHOD?Ya(t,Ta,{idToken:e,email:this.a,oobCode:this.f}):Ya(t,Ma,{idToken:e,email:this.a,password:this.f})},Eo.prototype.c=function(t,e){return ro(this.ia(t),e)},Eo.prototype.v=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Br(Io,{PROVIDER_ID:"password"}),Br(Io,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Br(Io,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Ao.prototype.ia=function(t){return t.cb(Oo(this))},Ao.prototype.b=function(t,e){var n=Oo(this);return n.idToken=e,Ya(t,za,n)},Ao.prototype.c=function(t,e){var n=Oo(this);return n.operation="REAUTH",ro(t=Ya(t,Ka,n),e)},Ao.prototype.v=function(){var t={providerId:"phone"};return this.a.bb&&(t.verificationId=this.a.bb),this.a.ab&&(t.verificationCode=this.a.ab),this.a.Ja&&(t.temporaryProof=this.a.Ja),this.a.da&&(t.phoneNumber=this.a.da),t},Do.prototype.cb=function(i,n){var o=this.a.b;return Te(n.verify()).then(function(r){if("string"!=typeof r)throw new E("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(n.type){case"recaptcha":var t=f(i)?i.session:null,e=f(i)?i.phoneNumber:i;return(t&&t.type==to?t.Fa().then(function(t){return Ya(o,ja,{idToken:t,phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r}}).then(function(t){return t.phoneSessionInfo.sessionInfo})}):t&&t.type==eo?t.Fa().then(function(t){return e=o,n={mfaPendingCredential:t,mfaEnrollmentId:i.multiFactorHint&&i.multiFactorHint.uid||i.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}},Ya(e,Ua,n).then(function(t){return t.phoneResponseInfo.sessionInfo});var e,n}):Ya(o,Pa,{phoneNumber:e,recaptchaToken:r})).then(function(t){return"function"==typeof n.reset&&n.reset(),t},function(t){throw"function"==typeof n.reset&&n.reset(),t});default:throw new E("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}})},Br(Do,{PROVIDER_ID:"phone"}),Br(Do,{PHONE_SIGN_IN_METHOD:"phone"}),Po.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Po.prototype.S=function(){return this.h},Po.prototype.v=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.v()}};var Fo,jo=null;function Uo(t){var e="unauthorized-domain",n=void 0,r=Pn(t);t=r.b,"chrome-extension"==(r=r.f)?n=Ft("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Ft("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",E.call(this,e,n)}function qo(t,e,n){E.call(this,t,n),(t=e||{}).Gb&&Wr(this,"email",t.Gb),t.da&&Wr(this,"phoneNumber",t.da),t.credential&&Wr(this,"credential",t.credential),t.Wb&&Wr(this,"tenantId",t.Wb)}function Vo(t){if(t.code){var e=t.code||"";0==e.indexOf(S)&&(e=e.substring(S.length));var n={credential:xo(t),Wb:t.tenantId};if(t.email)n.Gb=t.email;else if(t.phoneNumber)n.da=t.phoneNumber;else if(!n.credential)return new E(e,t.message||void 0);return new qo(e,n,t.message)}return null}function Ho(){}function Wo(t){return t.c||(t.c=t.b())}function Bo(){}function Go(t){if(t.f||"undefined"!=typeof XMLHttpRequest||"undefined"==typeof ActiveXObject)return t.f;for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}function zo(){}function Ko(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=m(this.oc,this),this.a.onerror=m(this.Pb,this),this.a.onprogress=m(this.pc,this),this.a.ontimeout=m(this.tc,this)}function Qo(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function Yo(t,e,n){this.reset(t,e,n,void 0,void 0)}w(Uo,E),w(qo,E),qo.prototype.v=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.v();return e&&ft(t,e),t},qo.prototype.toJSON=function(){return this.v()},Ho.prototype.c=null,w(Bo,Ho),Bo.prototype.a=function(){var t=Go(this);return t?new ActiveXObject(t):new XMLHttpRequest},Bo.prototype.b=function(){var t={};return Go(this)&&(t[0]=!0,t[1]=!0),t},Fo=new Bo,w(zo,Ho),zo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new Ko;throw Error("Unsupported browser")},zo.prototype.b=function(){return{}},(t=Ko.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.oc=function(){this.status=200,this.response=this.responseText=this.a.responseText,Qo(this,4)},t.Pb=function(){this.status=500,this.response=this.responseText="",Qo(this,4)},t.tc=function(){this.Pb()},t.pc=function(){this.status=200,Qo(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},Yo.prototype.a=null;function Xo(t){this.f=t,this.b=this.c=this.a=null}function Jo(t,e){this.name=t,this.value=e}Yo.prototype.reset=function(t,e,n,r,i){"number"==typeof i||0,r||b(),delete this.a},Jo.prototype.toString=function(){return this.name};var $o=new Jo("SEVERE",1e3),Zo=new Jo("WARNING",900),ts=new Jo("CONFIG",700),es=new Jo("FINE",500);Xo.prototype.log=function(t,e,n){if(t.value>=function t(e){return e.c?e.c:e.a?t(e.a):(x("Root logger has no level set."),null)}(this).value)for(l(e)&&(e=e()),t=new Yo(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var ns,rs={},is=null;function os(t){var e;if(is||(is=new Xo(""),(rs[""]=is).c=ts),!(e=rs[t])){e=new Xo(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=os(t.substr(0,n))).b||(n.b={}),(n.b[r]=e).a=n,rs[t]=e}return e}function ss(t,e){t&&t.log(es,e,void 0)}function as(t){this.f=t}function us(t){yn.call(this),this.s=t,this.readyState=cs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.i=new Headers,this.b=null,this.m="GET",this.g="",this.a=!1,this.h=os("goog.net.FetchXmlHttp"),this.l=this.c=this.f=null}w(as,Ho),as.prototype.a=function(){return new us(this.f)},as.prototype.b=(ns={},function(){return ns}),w(us,yn);var cs=0;function hs(t){t.c.read().then(t.nc.bind(t)).catch(t.Sa.bind(t))}function ls(t,e){e&&t.f&&(t.status=t.f.status,t.statusText=t.f.statusText),t.readyState=4,t.f=null,t.c=null,t.l=null,fs(t)}function fs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ps(t){yn.call(this),this.headers=new In,this.D=t||null,this.c=!1,this.B=this.a=null,this.h=this.P=this.l="",this.f=this.O=this.i=this.N=!1,this.g=0,this.s=null,this.m=ds,this.w=this.R=!1}(t=us.prototype).open=function(t,e){if(this.readyState!=cs)throw this.abort(),Error("Error reopening a connection");this.m=t,this.g=e,this.readyState=1,fs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.i,method:this.m,credentials:void 0,cache:void 0};t&&(e.body=t),this.s.fetch(new Request(this.g,e)).then(this.sc.bind(this),this.Sa.bind(this))},t.abort=function(){this.response=this.responseText="",this.i=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ls(this,!1)),this.readyState=cs},t.sc=function(t){this.a&&(this.f=t,this.b||(this.b=t.headers,this.readyState=2,fs(this)),this.a&&(this.readyState=3,fs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.qc.bind(this),this.Sa.bind(this)):void 0!==p.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.l=new TextDecoder,hs(this)):t.text().then(this.rc.bind(this),this.Sa.bind(this)))))},t.nc=function(t){if(this.a){var e=this.l.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ls(this,!0):fs(this),3==this.readyState&&hs(this)}},t.rc=function(t){this.a&&(this.response=this.responseText=t,ls(this,!0))},t.qc=function(t){this.a&&(this.response=t,ls(this,!0))},t.Sa=function(t){var e=this.h;e&&e.log(Zo,"Failed to fetch url "+this.g,t instanceof Error?t:Error(t)),this.a&&ls(this,!0)},t.setRequestHeader=function(t,e){this.i.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.h)&&t.log(Zo,"Attempting to get response header but no headers have been received for url: "+this.g,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.h;return t&&t.log(Zo,"Attempting to get all response headers but no headers have been received for url: "+this.g,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},w(ps,yn);var ds="";ps.prototype.b=os("goog.net.XhrIo");var vs=/^https?$/i,ys=["POST","PUT"];function gs(e,t,n,r,i){if(e.a)throw Error("[goog.net.XhrIo] Object is active with another request="+e.l+"; newUri="+t);n=n?n.toUpperCase():"GET",e.l=t,e.h="",e.P=n,e.N=!1,e.c=!0,e.a=e.D?e.D.a():Fo.a(),e.B=e.D?Wo(e.D):Wo(Fo),e.a.onreadystatechange=m(e.Sb,e);try{ss(e.b,Cs(e,"Opening Xhr")),e.O=!0,e.a.open(n,String(t),!0),e.O=!1}catch(t){return ss(e.b,Cs(e,"Error opening Xhr: "+t.message)),void _s(e,t)}t=r||"";var o,s=new In(e.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||"string"==typeof t)U(t,e,void 0);else for(var n=Tn(t),r=En(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,function(t,e){s.set(e,t)}),i=function(t){t:{for(var e=ms,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(s.X()),r=p.FormData&&t instanceof p.FormData,!W(ys,n)||i||r||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),s.forEach(function(t,e){this.a.setRequestHeader(e,t)},e),e.m&&(e.a.responseType=e.m),"withCredentials"in e.a&&e.a.withCredentials!==e.R&&(e.a.withCredentials=e.R);try{Ts(e),0<e.g&&(e.w=(o=e.a,Wt&&te(9)&&"number"==typeof o.timeout&&void 0!==o.ontimeout),ss(e.b,Cs(e,"Will abort after "+e.g+"ms if incomplete, xhr2 "+e.w)),e.w?(e.a.timeout=e.g,e.a.ontimeout=m(e.Ka,e)):e.s=bn(e.Ka,e.g,e)),ss(e.b,Cs(e,"Sending request")),e.i=!0,e.a.send(t),e.i=!1}catch(t){ss(e.b,Cs(e,"Send error: "+t.message)),_s(e,t)}}function ms(t){return"content-type"==t.toLowerCase()}function _s(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,bs(t),Es(t)}function bs(t){t.N||(t.N=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ws(e){if(e.c&&void 0!==u)if(e.B[1]&&4==Is(e)&&2==Ss(e))ss(e.b,Cs(e,"Local request error detected and ignored"));else if(e.i&&4==Is(e))bn(e.Sb,0,e);else if(e.dispatchEvent("readystatechange"),4==Is(e)){ss(e.b,Cs(e,"Request complete")),e.c=!1;try{var t,n=Ss(e);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(t=r)){var i;if(i=0===n){var o=String(e.l).match(An)[1]||null;if(!o&&p.self&&p.self.location){var s=p.self.location.protocol;o=s.substr(0,s.length-1)}i=!vs.test(o?o.toLowerCase():"")}t=i}if(t)e.dispatchEvent("complete"),e.dispatchEvent("success");else{try{var a=2<Is(e)?e.a.statusText:""}catch(t){ss(e.b,"Can not get status: "+t.message),a=""}e.h=a+" ["+Ss(e)+"]",bs(e)}}finally{Es(e)}}}function Es(e,t){if(e.a){Ts(e);var n=e.a,r=e.B[0]?a:null;e.a=null,e.B=null,t||e.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){(e=e.b)&&e.log($o,"Problem encountered resetting onreadystatechange: "+t.message,void 0)}}}function Ts(t){t.a&&t.w&&(t.a.ontimeout=null),t.s&&(p.clearTimeout(t.s),t.s=null)}function Is(t){return t.a?t.a.readyState:0}function Ss(t){try{return 2<Is(t)?t.a.status:-1}catch(t){return-1}}function Cs(t,e){return e+" ["+t.P+" "+t.l+" "+Ss(t)+"]"}function As(t){var e=js;this.g=[],this.w=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.u=this.B=this.i=!1,this.h=0,this.b=null,this.l=0}function Ns(t,e,n){t.a=!0,t.c=n,t.f=!e,xs(t)}function Os(t){if(t.a){if(!t.u)throw new Rs(t);t.u=!1}}function Ds(t,e,n,r){t.g.push([e,n,r]),t.a&&xs(t)}function ks(t){return H(t.g,function(t){return l(t[1])})}function xs(e){if(e.h&&e.a&&ks(e)){var n=e.h,r=Ms[n];r&&(p.clearTimeout(r.a),delete Ms[n]),e.h=0}e.b&&(e.b.l--,delete e.b),n=e.c;for(var t=r=!1;e.g.length&&!e.i;){var i=e.g.shift(),o=i[0],s=i[1];if(i=i[2],o=e.f?s:o)try{var a=o.call(i||e.s,n);void 0!==a&&(e.f=e.f&&(a==n||a instanceof Error),e.c=n=a),(O(n)||"function"==typeof p.Promise&&n instanceof p.Promise)&&(t=!0,e.i=!0)}catch(t){n=t,e.f=!0,ks(e)||(r=!0)}}e.c=n,t&&(a=m(e.m,e,!0),t=m(e.m,e,!1),n instanceof As?(Ds(n,a,t),n.B=!0):n.then(a,t)),r&&(n=new Ls(n),Ms[n.a]=n,e.h=n.a)}function Rs(){D.call(this)}function Ps(){D.call(this)}function Ls(t){this.a=p.setTimeout(m(this.c,this),0),this.b=t}(t=ps.prototype).Ka=function(){void 0!==u&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ss(this.b,Cs(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ss(this.b,Cs(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Es(this))},t.Ba=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Es(this,!0)),ps.Za.Ba.call(this)},t.Sb=function(){this.wa||(this.O||this.i||this.f?ws(this):this.Hc())},t.Hc=function(){ws(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case ds:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log($o,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ss(this.b,"Can not get response: "+t.message),null}},As.prototype.cancel=function(t){if(this.a)this.c instanceof As&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,e.l<=0&&e.cancel())}this.w?this.w.call(this.s,this):this.u=!0,this.a||(t=new Ps(this),Os(this),Ns(this,!1,t))}},As.prototype.m=function(t,e){this.i=!1,Ns(this,t,e)},As.prototype.then=function(t,e,n){var r,i,o=new ye(function(t,e){r=t,i=e});return Ds(this,r,function(t){t instanceof Ps?o.cancel():i(t)}),o.then(t,e,n)},As.prototype.$goog_Thenable=!0,w(Rs,D),Rs.prototype.message="Deferred has already fired",Rs.prototype.name="AlreadyCalledError",w(Ps,D),Ps.prototype.message="Deferred was canceled",Ps.prototype.name="CanceledError",Ls.prototype.c=function(){throw delete Ms[this.a],this.b};var Ms={};function Fs(t){var e,n,r,i,o={},s=o.document||document,a=bt(t).toString(),u=ue(document,"SCRIPT"),c={Tb:u,Ka:void 0},h=new As(c),l=null,f=null!=o.timeout?o.timeout:5e3;return 0<f&&(l=window.setTimeout(function(){Us(u,!0);var t=new Hs(Vs,"Timeout reached for loading script "+a);Os(h),Ns(h,!1,t)},f),c.Ka=l),u.onload=u.onreadystatechange=function(){u.readyState&&"loaded"!=u.readyState&&"complete"!=u.readyState||(Us(u,o.ud||!1,l),Os(h),Ns(h,!0,null))},u.onerror=function(){Us(u,!0,l);var t=new Hs(qs,"Error while loading script "+a);Os(h),Ns(h,!1,t)},ft(c=o.attributes||{},{type:"text/javascript",charset:"UTF-8"}),re(u,c),n=t,pt(e=u,"HTMLScriptElement"),e.src=bt(n),null===v&&(v=(n=(n=p.document).querySelector&&n.querySelector("script[nonce]"))&&(n=n.nonce||n.getAttribute("nonce"))&&d.test(n)?n:""),(n=v)&&e.setAttribute("nonce",n),((i=((r=s)||document).getElementsByTagName("HEAD"))&&0!=i.length?i[0]:r.documentElement).appendChild(u),h}function js(){if(this&&this.Tb){var t=this.Tb;t&&"SCRIPT"==t.tagName&&Us(t,!0,this.Ka)}}function Us(t,e,n){null!=n&&p.clearTimeout(n),t.onload=a,t.onerror=a,t.onreadystatechange=a,e&&window.setTimeout(function(){t&&t.parentNode&&t.parentNode.removeChild(t)},0)}var qs=0,Vs=1;function Hs(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),D.call(this,n),this.code=t}function Ws(t){this.f=t}function Bs(t,e,n){if(this.c=t,t=e||{},this.u=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Ks,this.g=ht(t.secureTokenHeaders||Qs),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.l=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.i=t.firebaseTimeout||Ys,this.a=ht(t.firebaseHeaders||Xs),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==vr(),!(n=p.XMLHttpRequest||n&&Xl.a.INTERNAL.node&&Xl.a.INTERNAL.node.XMLHttpRequest)&&!dr())throw new E("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,dr()?this.f=new as(self):yr()?this.f=new Ws(n):this.f=new zo,this.b=null}w(Hs,D),w(Ws,Ho),Ws.prototype.a=function(){return new this.f},Ws.prototype.b=function(){return{}};var Gs,zs="idToken",Ks=new Lr(3e4,6e4),Qs={"Content-Type":"application/x-www-form-urlencoded"},Ys=new Lr(3e4,6e4),Xs={"Content-Type":"application/json"};function Js(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function $s(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function Zs(t,e,n,r,i,o,s){var a;(t=!((a=_r(a=Er())!=mr?null:(a=a.match(/\sChrome\/(\d+)/i))&&2==a.length?parseInt(a[1],10):null)&&a<30||Wt&&$t&&!(9<$t))||dr()?m(t.w,t):(Gs=Gs||new ye(function(t,e){!function(t,e){if(((window.gapi||{}).client||{}).request)t();else{p[ea]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ds(t,null,e,void 0)}(Fs(wt(ta,{onload:ea})),function(){e(Error("CORS_UNSUPPORTED"))})}}(t,e)}),m(t.s,t)))(e,n,r,i,o,s)}Bs.prototype.S=function(){return this.b},Bs.prototype.w=function(t,n,e,r,i,o){if(dr()&&(void 0===p.fetch||void 0===p.Headers||void 0===p.Request))throw new E("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ps(this.f);if(o){s.g=Math.max(0,o);var a=setTimeout(function(){s.dispatchEvent("timeout")},o)}gn(s,"complete",function(){a&&clearTimeout(a);var e=null;try{e=JSON.parse(function(e){try{return e.a?e.a.responseText:""}catch(t){return ss(e.b,"Can not get responseText: "+t.message),""}}(this))||null}catch(t){e=null}n&&n(e)}),mn(s,"ready",function(){a&&clearTimeout(a),qe(this)}),mn(s,"timeout",function(){a&&clearTimeout(a),qe(this),n&&n(null)}),gs(s,t,e,r,i)};var ta=new dt(gt,"https://apis.google.com/js/client.js?onload=%{onload}"),ea="__fcb"+Math.floor(1e6*Math.random()).toString();function na(t,e,n,r,i,o,s){var a=Pn(e+n);xn(a,"key",t.c),s&&xn(a,"cb",b().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&xn(a,c,i[c]);return new ye(function(e,n){Zs(t,a.toString(),function(t){t?t.error?n(Ja(t,o||{})):e(t):n(new E("network-request-failed"))},r,u?void 0:$n(Dr(i)),t.a,t.i.get())})}function ra(t){if("string"!=typeof(t=t.email)||!hr.test(t))throw new E("invalid-email")}function ia(t){"email"in t&&ra(t)}function oa(t){if(!t[zs]){if(t.mfaPendingCredential)throw new E("multi-factor-auth-required",null,ht(t));throw new E("internal-error")}}function sa(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new E("internal-error")}else{if(!t.sessionInfo)throw new E("missing-verification-id");if(!t.code)throw new E("missing-verification-code")}}Bs.prototype.s=function(t,n,r,i,o){var s=this;Gs.then(function(){window.gapi.client.setApiKey(s.c);var e=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:r,body:i,headers:o,authType:"none",callback:function(t){window.gapi.auth.setToken(e),n&&n(t)}})}).o(function(t){n&&n({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})})},Bs.prototype.vb=function(){return Ya(this,Fa,{})},Bs.prototype.xb=function(t,e){return Ya(this,La,{idToken:t,email:e})},Bs.prototype.yb=function(t,e){return Ya(this,Ma,{idToken:t,password:e})};var aa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ua(t){if(!t.phoneVerificationInfo)throw new E("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new E("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new E("missing-verification-code")}function ca(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new E("internal-error")}function ha(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&(Qn(t=new Bn(t.postBody),"nonce")&&(e.nonce=t.get("nonce")))),e}function la(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Vo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Vo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Vo(t)):t.errorMessage&&(e=Xa(t.errorMessage)),e)throw e;oa(t)}function fa(t,e){return e.returnIdpCredential=!0,Ya(t,qa,e)}function pa(t,e){return e.returnIdpCredential=!0,Ya(t,Ha,e)}function da(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,Ya(t,Va,e)}function va(t){if(!t.oobCode)throw new E("invalid-action-code")}(t=Bs.prototype).zb=function(t,r){var i={idToken:t},o=[];return ut(aa,function(t,e){var n=r[e];null===n?o.push(t):e in r&&(i[e]=n)}),o.length&&(i.deleteAttribute=o),Ya(this,La,i)},t.rb=function(t,e){return ft(t={requestType:"PASSWORD_RESET",email:t},e),Ya(this,Da,t)},t.sb=function(t,e){return ft(t={requestType:"EMAIL_SIGNIN",email:t},e),Ya(this,Aa,t)},t.qb=function(t,e){return ft(t={requestType:"VERIFY_EMAIL",idToken:t},e),Ya(this,Na,t)},t.Ab=function(t,e,n){return ft(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),Ya(this,Oa,t)},t.cb=function(t){return Ya(this,Ga,t)},t.jb=function(t,e){return Ya(this,Ra,{oobCode:t,newPassword:e})},t.Pa=function(t){return Ya(this,ga,{oobCode:t})},t.fb=function(t){return Ya(this,ya,{oobCode:t})};var ya={endpoint:"setAccountInfo",A:va,Y:"email",C:!0},ga={endpoint:"resetPassword",A:va,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new E("internal-error")},C:!0},ma={endpoint:"signupNewUser",A:function(t){if(ra(t),!t.password)throw new E("weak-password")},G:oa,U:!0,C:!0},_a={endpoint:"createAuthUri",C:!0},ba={endpoint:"deleteAccount",M:["idToken"]},wa={endpoint:"setAccountInfo",M:["idToken","deleteProvider"],A:function(t){if("array"!=n(t.deleteProvider))throw new E("internal-error")}},Ea={endpoint:"emailLinkSignin",M:["email","oobCode"],A:ra,G:oa,U:!0,C:!0},Ta={endpoint:"emailLinkSignin",M:["idToken","email","oobCode"],A:ra,G:oa,U:!0},Ia={endpoint:"accounts/mfaEnrollment:finalize",M:["idToken","phoneVerificationInfo"],A:ua,G:oa,C:!0,La:!0},Sa={endpoint:"accounts/mfaSignIn:finalize",M:["mfaPendingCredential","phoneVerificationInfo"],A:ua,G:oa,C:!0,La:!0},Ca={endpoint:"getAccountInfo"},Aa={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new E("internal-error");ra(t)},Y:"email",C:!0},Na={endpoint:"getOobConfirmationCode",M:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new E("internal-error")},Y:"email",C:!0},Oa={endpoint:"getOobConfirmationCode",M:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new E("internal-error")},Y:"email",C:!0},Da={endpoint:"getOobConfirmationCode",M:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new E("internal-error");ra(t)},Y:"email",C:!0},ka={hb:!0,endpoint:"getProjectConfig",Rb:"GET"},xa={hb:!0,endpoint:"getRecaptchaParam",Rb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new E("internal-error")}},Ra={endpoint:"resetPassword",A:va,Y:"email",C:!0},Pa={endpoint:"sendVerificationCode",M:["phoneNumber","recaptchaToken"],Y:"sessionInfo",C:!0},La={endpoint:"setAccountInfo",M:["idToken"],A:ia,U:!0},Ma={endpoint:"setAccountInfo",M:["idToken"],A:function(t){if(ia(t),!t.password)throw new E("weak-password")},G:oa,U:!0},Fa={endpoint:"signupNewUser",G:oa,U:!0,C:!0},ja={endpoint:"accounts/mfaEnrollment:start",M:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new E("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new E("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new E("internal-error")},C:!0,La:!0},Ua={endpoint:"accounts/mfaSignIn:start",M:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new E("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new E("internal-error")},C:!0,La:!0},qa={endpoint:"verifyAssertion",A:ca,Wa:ha,G:la,U:!0,C:!0},Va={endpoint:"verifyAssertion",A:ca,Wa:ha,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new E("user-not-found");if(t.errorMessage)throw Xa(t.errorMessage);oa(t)},U:!0,C:!0},Ha={endpoint:"verifyAssertion",A:function(t){if(ca(t),!t.idToken)throw new E("internal-error")},Wa:ha,G:la,U:!0},Wa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new E("invalid-custom-token")},G:oa,U:!0,C:!0},Ba={endpoint:"verifyPassword",A:function(t){if(ra(t),!t.password)throw new E("wrong-password")},G:oa,U:!0,C:!0},Ga={endpoint:"verifyPhoneNumber",A:sa,G:oa,C:!0},za={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new E("internal-error");sa(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Vo(t);oa(t)}},Ka={Eb:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:sa,G:oa,C:!0},Qa={endpoint:"accounts/mfaEnrollment:withdraw",M:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[zs]^!!t.refreshToken)throw new E("internal-error")},C:!0,La:!0};function Ya(t,e,n){if(!function(t,e){if(!e||!e.length)return 1;if(t){for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return}return 1}}(n,e.M))return Ie(new E("internal-error"));var r,i=!!e.La,o=e.Rb||"POST";return Te(n).then(e.A).then(function(){return e.U&&(n.returnSecureToken=!0),e.C&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),na(t,i?t.l:t.h,e.endpoint,o,n,e.Eb,e.hb||!1)}).then(function(t){return r=t,e.Wa?e.Wa(n,r):r}).then(e.G).then(function(){if(!e.Y)return r;if(!(e.Y in r))throw new E("internal-error");return r[e.Y]})}function Xa(t){return Ja({error:{errors:[{message:t}],code:400,message:t}})}function Ja(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new E(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",ft(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new E(r[i],e);return!e&&t&&(e=Or(t)),new E("internal-error",e)}function $a(t){var o;this.b=t,this.a=null,this.nb=(o=this,(nu=nu||new ye(function(t,e){function n(){Pr(),Tr("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Pr(),e(Error("Network Error"))},timeout:tu.get()})}if(Tr("gapi.iframes.Iframe"))t();else if(Tr("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();p[r]=function(){Tr("gapi.load")?n():e(Error("Network Error"))},Te(Fs(r=wt(Za,{onload:r}))).o(function(){e(Error("Network Error"))})}}).o(function(t){throw nu=null,t})).then(function(){return new ye(function(r,i){Tr("gapi.iframes.getContext")().open({where:document.body,url:o.b,messageHandlersFilter:Tr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},function(t){function e(){clearTimeout(n),r()}o.a=t,o.a.restyle({setHideOnLeave:!1});var n=setTimeout(function(){i(Error("Network Error"))},eu.get());t.ping(e).then(e,function(){i(Error("Network Error"))})})})}))}var Za=new dt(gt,"https://apis.google.com/js/api.js?onload=%{onload}"),tu=new Lr(3e4,6e4),eu=new Lr(5e3,15e3),nu=null;function ru(t,e,n){this.i=t,this.g=e,this.h=n,this.f=null,this.a=Ln(this.i,"/__/auth/iframe"),xn(this.a,"apiKey",this.g),xn(this.a,"appName",this.h),this.b=null,this.c=[]}function iu(t,e,n,r,i){this.s=t,this.m=e,this.c=n,this.u=r,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function ou(t){try{return Xl.a.app(t).auth().Ea()}catch(t){return[]}}function su(t,e,n,r,i){this.u=t,this.f=e,this.b=n,this.c=r||null,this.h=i||null,this.m=this.s=this.w=null,this.g=[],this.l=this.a=null}function au(t){var a=ir();return Ya(t,ka,{}).then(function(t){return t.authorizedDomains||[]}).then(function(t){t:{var e=Pn(a),n=e.f;e=e.b;for(var r=0;r<t.length;r++){var i=t[r],o=e,s=n;if(o=0==i.indexOf("chrome-extension://")?Pn(i).b==o&&"chrome-extension"==s:("http"==s||"https"==s)&&(cr.test(i)?o==i:(i=i.split(".").join("\\."),new RegExp("^(.+\\."+i+"|"+i+")$","i").test(o)))){t=!0;break t}}t=!1}if(!t)throw new Uo(ir())})}function uu(i){return i.l||(i.l=lr().then(function(){if(!i.s){var t=i.c,e=i.h,n=ou(i.b),r=new ru(i.u,i.f,i.b);r.f=t,r.b=e,r.c=K(n||[]),i.s=r.toString()}i.i=new $a(i.s),function(r){if(!r.i)throw Error("IfcHandler must be initialized!");!function(t,e){t.nb.then(function(){t.a.register("authEvent",e,Tr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})}(r.i,function(t){var e={};if(t&&t.authEvent){var n=!1;for(t=Lo(t.authEvent),e=0;e<r.g.length;e++)n=r.g[e](t)||n;return(e={}).status=n?"ACK":"ERROR",Te(e)}return e.status="ERROR",Te(e)})}(i)})),i.l}function cu(t){return t.m||(t.w=t.c?wr(t.c,ou(t.b)):null,t.m=new Bs(t.f,N(t.h),t.w)),t.m}function hu(t,e,n,r,i,o,s,a,u,c,h){return(t=new iu(t,e,n,r,i)).l=o,t.g=s,t.i=a,t.b=ht(u||null),t.f=c,t.ub(h).toString()}function lu(t){if(this.a=t||Xl.a.INTERNAL.reactNative&&Xl.a.INTERNAL.reactNative.AsyncStorage,!this.a)throw new E("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function fu(t){this.b=t,this.a={},this.f=m(this.c,this)}ru.prototype.toString=function(){return this.f?xn(this.a,"v",this.f):Kn(this.a.a,"v"),this.b?xn(this.a,"eid",this.b):Kn(this.a.a,"eid"),this.c.length?xn(this.a,"fw",this.c.join(",")):Kn(this.a.a,"fw"),this.a.toString()},iu.prototype.ub=function(t){return this.h=t,this},iu.prototype.toString=function(){var t=Ln(this.s,"/__/auth/handler");if(xn(t,"apiKey",this.m),xn(t,"appName",this.c),xn(t,"authType",this.u),this.a.isOAuthProvider){var e=this.a;try{var n=Xl.a.app(this.c).auth().ja()}catch(t){n=null}for(var r in e.kb=n,xn(t,"providerId",this.a.providerId),n=Dr((e=this.a).Fb))n[r]=n[r].toString();r=e.Oc,n=ht(n);for(var i=0;i<r.length;i++){var o=r[i];o in n&&delete n[o]}e.lb&&e.kb&&!n[e.lb]&&(n[e.lb]=e.kb),ct(n)||xn(t,"customParameters",Or(n))}if("function"==typeof this.a.Nb&&((e=this.a.Nb()).length&&xn(t,"scopes",e.join(","))),this.l?xn(t,"redirectUrl",this.l):Kn(t.a,"redirectUrl"),this.g?xn(t,"eventId",this.g):Kn(t.a,"eventId"),this.i?xn(t,"v",this.i):Kn(t.a,"v"),this.b)for(var s in this.b)this.b.hasOwnProperty(s)&&!Rn(t,s)&&xn(t,s,this.b[s]);return this.h?xn(t,"tid",this.h):Kn(t.a,"tid"),this.f?xn(t,"eid",this.f):Kn(t.a,"eid"),(s=ou(this.c)).length&&xn(t,"fw",s.join(",")),t.toString()},(t=su.prototype).Lb=function(e,n,t){var r=new E("popup-closed-by-user"),i=new E("web-storage-unsupported"),o=this,s=!1;return this.ka().then(function(){var t,r;(r={type:"webStorageSupport"},uu(t=o).then(function(){return e=t.i,n=r,e.nb.then(function(){return new ye(function(t){e.a.send(n.type,n,t,Tr("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))})});var e,n}).then(function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()})).then(function(t){t||(e&&ar(e),n(i),s=!0)})}).o(function(){}).then(function(){if(!s)return n=e,new ye(function(e){return function t(){wn(2e3).then(function(){if(n&&!n.closed)return t();e()})}()});var n}).then(function(){if(!s)return wn(t).then(function(){n(r)})})},t.Ub=function(){var t=Er();return!Nr(t)&&!Rr(t)},t.Qb=function(){return!1},t.Jb=function(e,t,n,r,i,o,s,a){if(!e)return Ie(new E("popup-blocked"));if(s&&!Nr())return this.ka().o(function(t){ar(e),i(t)}),r(),Te();this.a||(this.a=au(cu(this)));var u=this;return this.a.then(function(){var t=u.ka().o(function(t){throw ar(e),i(t),t});return r(),t}).then(function(){Ro(n),s||or(hu(u.u,u.f,u.b,t,n,null,o,u.c,void 0,u.h,a),e)}).o(function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t})},t.Kb=function(t,e,n,r){this.a||(this.a=au(cu(this)));var i=this;return this.a.then(function(){Ro(e),or(hu(i.u,i.f,i.b,t,e,ir(),n,i.c,void 0,i.h,r))}).o(function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t})},t.ka=function(){var t=this;return uu(this).then(function(){return t.i.nb}).o(function(){throw t.a=null,new E("network-request-failed")})},t.Xb=function(){return!0},t.Ca=function(t){this.g.push(t)},t.Qa=function(e){G(this.g,function(t){return t==e})},(t=lu.prototype).get=function(t){return Te(this.a.getItem(t)).then(function(t){return t&&kr(t)})},t.set=function(t,e){return Te(this.a.setItem(t,Or(e)))},t.T=function(t){return Te(this.a.removeItem(t))},t.ba=function(){},t.ha=function(){};var pu,du=[];function vu(t,e,n){ct(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function yu(t){this.a=t}function gu(t){this.c=t,this.b=!1,this.a=[]}function mu(r,t,e,n){var i,o,s,a,u=e||{},c=null;if(r.b)return Ie(Error("connection_unavailable"));var h=n?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new ye(function(e,n){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout(function(){n(Error("unsupported_event"))},h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout(function(){n(Error("timeout"))},3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?e(t.data.response):n(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),n(Error("invalid_response"))))}},r.a.push(c),l.port1.addEventListener("message",o),r.c.postMessage({eventType:t,eventId:i,data:u},[l.port2])):n(Error("connection_unavailable"))}).then(function(t){return _u(r,c),t}).o(function(t){throw _u(r,c),t})}function _u(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),G(t.a,function(t){return t==e})}}function bu(){if(!Tu())throw new E("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.u=p.indexedDB,this.type="indexedDB",this.g=this.l=this.f=this.i=null,this.s=!1,this.h=null;var t,r=this;dr()&&self?(this.l=function(){var e=dr()?self:null;if(U(du,function(t){t.b==e&&(n=t)}),!n){var n=new fu(e);du.push(n)}return n}(),vu(this.l,"keyChanged",function(t,n){return Nu(r).then(function(e){return 0<e.length&&U(r.a,function(t){t(e)}),{keyProcessed:W(e,n.key)}})}),vu(this.l,"ping",function(){return Te(["keyChanged"])})):((t=p.navigator)&&t.serviceWorker?Te().then(function(){return t.serviceWorker.ready}).then(function(t){return t.active||null}).o(function(){return null}):Te(null)).then(function(t){(r.h=t)&&(r.g=new gu(new yu(t)),mu(r.g,"ping",null,!0).then(function(t){t[0].fulfilled&&W(t[0].value,"keyChanged")&&(r.s=!0)}).o(function(){}))})}function wu(i){return new ye(function(e,n){var t=i.u.open("firebaseLocalStorageDb",1);t.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},t.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},t.onsuccess=function(t){var r;(t=t.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(t):(r=i,new ye(function(t,e){var n=r.u.deleteDatabase("firebaseLocalStorageDb");n.onsuccess=function(){t()},n.onerror=function(t){e(Error(t.target.error))}})).then(function(){return wu(i)}).then(function(t){e(t)}).o(function(t){n(t)})}})}function Eu(t){return t.m||(t.m=wu(t)),t.m}function Tu(){try{return p.indexedDB}catch(t){return}}function Iu(t){return t.objectStore("firebaseLocalStorage")}function Su(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Cu(t){return new ye(function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}})}function Au(t,e){return t.g&&t.h&&((n=p.navigator)&&n.serviceWorker&&n.serviceWorker.controller||null)===t.h?mu(t.g,"keyChanged",{key:e},t.s).then(function(){}).o(function(){}):Te();var n}function Nu(r){return Eu(r).then(function(t){var i=Iu(Su(t,!1));return i.getAll?Cu(i.getAll()):new ye(function(e,n){var r=[],t=i.openCursor();t.onsuccess=function(t){(t=t.target.result)?(r.push(t.value),t.continue()):e(r)},t.onerror=function(t){n(t.target.error)}})}).then(function(t){var e={},n=[];if(0==r.b){for(n=0;n<t.length;n++)e[t[n].fbase_key]=t[n].value;n=function t(e,n){var r,i=[];for(r in e)r in n?typeof e[r]!=typeof n[r]?i.push(r):"object"==typeof e[r]&&null!=e[r]&&null!=n[r]?0<t(e[r],n[r]).length&&i.push(r):e[r]!==n[r]&&i.push(r):i.push(r);for(r in n)r in e||i.push(r);return i}(r.c,e),r.c=e}return n})}function Ou(t){t.i&&t.i.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Du(t){var r=this,i=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Te().then(function(){if(Tu()){var e=xr(),n="__sak"+e;return pu=pu||new bu,(i=pu).set(n,e).then(function(){return i.get(n)}).then(function(t){if(t!==e)throw Error("indexedDB not supported!");return i.T(n)}).then(function(){return i}).o(function(){return r.c})}return r.c}).then(function(t){return r.type=t.type,t.ba(function(e){U(r.a,function(t){t(e)})}),t})}function ku(){this.a={},this.type="inMemory"}function xu(){if(!function(){var t="Node"==vr();if(!(t=Ru()||t&&Xl.a.INTERNAL.node&&Xl.a.INTERNAL.node.localStorage))return;try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==vr())throw new E("internal-error","The LocalStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Ru()||Xl.a.INTERNAL.node.localStorage,this.type="localStorage"}function Ru(){try{var t=p.localStorage,e=xr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Pu(){this.type="nullStorage"}function Lu(){if(!function(){var t="Node"==vr();if(!(t=Mu()||t&&Xl.a.INTERNAL.node&&Xl.a.INTERNAL.node.sessionStorage))return;try{return t.setItem("__sak","1"),t.removeItem("__sak"),1}catch(t){return}}()){if("Node"==vr())throw new E("internal-error","The SessionStorage compatibility library was not found.");throw new E("web-storage-unsupported")}this.a=Mu()||Xl.a.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Mu(){try{var t=p.sessionStorage,e=xr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Fu(){var t={};t.Browser=qu,t.Node=Vu,t.ReactNative=Hu,t.Worker=Wu,this.a=t[vr()]}fu.prototype.c=function(n){var r=n.data.eventType,i=n.data.eventId,t=this.a[r];if(t&&0<t.length){n.ports[0].postMessage({status:"ack",eventId:i,eventType:r,response:null});var e=[];U(t,function(t){e.push(Te().then(function(){return t(n.origin,n.data.data)}))}),Ce(e).then(function(t){var e=[];U(t,function(t){e.push({fulfilled:t.Mb,value:t.value,reason:t.reason?t.reason.message:void 0})}),U(e,function(t){for(var e in t)void 0===t[e]&&delete t[e]}),n.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:e})})}},yu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},gu.prototype.close=function(){for(;0<this.a.length;)_u(this,this.a[0]);this.b=!0},(t=bu.prototype).set=function(n,r){var i,o=!1,s=this;return Eu(this).then(function(t){return Cu((t=Iu(Su(i=t,!0))).get(n))}).then(function(t){var e=Iu(Su(i,!0));return t?(t.value=r,Cu(e.put(t))):(s.b++,o=!0,(t={}).fbase_key=n,t.value=r,Cu(e.add(t)))}).then(function(){return s.c[n]=r,Au(s,n)}).ma(function(){o&&s.b--})},t.get=function(e){return Eu(this).then(function(t){return Cu(Iu(Su(t,!1)).get(e))}).then(function(t){return t&&t.value})},t.T=function(e){var n=!1,r=this;return Eu(this).then(function(t){return n=!0,r.b++,Cu(Iu(Su(t,!0)).delete(e))}).then(function(){return delete r.c[e],Au(r,e)}).ma(function(){n&&r.b--})},t.ba=function(t){var n;0==this.a.length&&(Ou(n=this),function e(){n.f=setTimeout(function(){n.i=Nu(n).then(function(e){0<e.length&&U(n.a,function(t){t(e)})}).then(function(){e()}).o(function(t){"STOP_EVENT"!=t.message&&e()})},800)}()),this.a.push(t)},t.ha=function(e){G(this.a,function(t){return t==e}),0==this.a.length&&Ou(this)},(t=Du.prototype).get=function(e){return this.b.then(function(t){return t.get(e)})},t.set=function(e,n){return this.b.then(function(t){return t.set(e,n)})},t.T=function(e){return this.b.then(function(t){return t.T(e)})},t.ba=function(t){this.a.push(t)},t.ha=function(e){G(this.a,function(t){return t==e})},(t=ku.prototype).get=function(t){return Te(this.a[t])},t.set=function(t,e){return this.a[t]=e,Te()},t.T=function(t){return delete this.a[t],Te()},t.ba=function(){},t.ha=function(){},(t=xu.prototype).get=function(t){var e=this;return Te().then(function(){return kr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return Te().then(function(){var t=Or(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return Te().then(function(){e.a.removeItem(t)})},t.ba=function(t){p.window&&rn(p.window,"storage",t)},t.ha=function(t){p.window&&an(p.window,"storage",t)},(t=Pu.prototype).get=function(){return Te(null)},t.set=function(){return Te()},t.T=function(){return Te()},t.ba=function(){},t.ha=function(){},(t=Lu.prototype).get=function(t){var e=this;return Te().then(function(){return kr(e.a.getItem(t))})},t.set=function(e,n){var r=this;return Te().then(function(){var t=Or(n);null===t?r.T(e):r.a.setItem(e,t)})},t.T=function(t){var e=this;return Te().then(function(){e.a.removeItem(t)})},t.ba=function(){},t.ha=function(){};var ju,Uu,qu={F:xu,$a:Lu},Vu={F:xu,$a:Lu},Hu={F:lu,$a:Pu},Wu={F:xu,$a:Pu},Bu={od:"local",NONE:"none",qd:"session"};function Gu(){var t=!(Rr(Er())||!pr()),e=Nr(),n=Ir();this.m=t,this.h=e,this.l=n,this.a={},t=ju=ju||new Fu;try{this.g=!rr()&&jr()||!p.indexedDB?new t.a.F:new Du(dr()?new ku:new t.a.F)}catch(t){this.g=new ku,this.h=!0}try{this.i=new t.a.$a}catch(t){this.i=new ku}this.u=new ku,this.f=m(this.Vb,this),this.b={}}function zu(){return Uu=Uu||new Gu}function Ku(t,e){switch(e){case"session":return t.i;case"none":return t.u;default:return t.g}}function Qu(t,e){return"firebase:"+t.name+(e?":"+e:"")}function Yu(t,e,n){return n=Qu(e,n),"local"==e.F&&(t.b[n]=null),Ku(t,e.F).T(n)}function Xu(t){t.c&&(clearInterval(t.c),t.c=null)}function Ju(t){this.a=t,this.b=zu()}(t=Gu.prototype).get=function(t,e){return Ku(this,t.F).get(Qu(t,e))},t.set=function(e,t,n){var r=Qu(e,n),i=this,o=Ku(this,e.F);return o.set(r,t).then(function(){return o.get(r)}).then(function(t){"local"==e.F&&(i.b[r]=t)})},t.addListener=function(t,e,n){var r;t=Qu(t,e),this.l&&(this.b[t]=p.localStorage.getItem(t)),ct(this.a)&&(Ku(this,"local").ba(this.f),this.h||(rr()||!jr())&&p.indexedDB||!this.l||(Xu(r=this),r.c=setInterval(function(){for(var t in r.a){var e=p.localStorage.getItem(t),n=r.b[t];e!=n&&(r.b[t]=e,e=new ze({type:"storage",key:t,target:window,oldValue:n,newValue:e,a:!0}),r.Vb(e))}},1e3))),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=Qu(t,e),this.a[t]&&(G(this.a[t],function(t){return t==n}),0==this.a[t].length&&delete this.a[t]),ct(this.a)&&(Ku(this,"local").ha(this.f),Xu(this))},t.Vb=function(t){if(t&&t.f){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=p.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.ib(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?Ku(this,"local").ha(this.f):Xu(this),this.m)if(n=p.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?p.localStorage.setItem(e,r):p.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===p.localStorage.getItem(e)||(o.b[e]=p.localStorage.getItem(e),o.ib(e))},Wt&&$t&&10==$t&&p.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else U(t,m(this.ib,this))},t.ib=function(t){this.a[t]&&U(this.a[t],function(t){t()})};var $u,Zu={name:"authEvent",F:"local"};function tc(){this.a=zu()}function ec(t,e){this.b=nc,this.f=p.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=p.Int32Array?new Int32Array(64):Array(64),void 0===$u&&($u=p.Int32Array?new Int32Array(cc):cc),this.reset()}w(ec,function(){this.b=-1});for(var nc=64,rc=nc-1,ic=[],oc=0;oc<rc;oc++)ic[oc]=0;var sc=z(128,ic);function ac(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;e<64;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;e<64;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|$u[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function uc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(ac(t),i=0);else{if(!h(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&o<=255&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(ac(t),i=0)}}t.c=i,t.g+=n}ec.prototype.reset=function(){this.g=this.c=0,this.a=p.Int32Array?new Int32Array(this.h):K(this.h)};var cc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function hc(){ec.call(this,8,lc)}w(hc,ec);var lc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function fc(t,e,n,r,i){this.u=t,this.i=e,this.l=n,this.m=r||null,this.s=i||null,this.h=e+":"+n,this.w=new tc,this.g=new Ju(this.h),this.f=null,this.b=[],this.a=this.c=null}function pc(t){return new E("invalid-cordova-configuration",t)}function dc(t){var e=new hc;uc(e,t),t=[];var n=8*e.g;e.c<56?uc(e,sc,56-e.c):uc(e,sc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(ac(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return V(t,function(t){return 1<(t=t.toString(16)).length?t:"0"+t}).join("")}function vc(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function yc(a){return a.f||(a.f=a.ka().then(function(){return new ye(function(n){function e(r){t=!0,s&&s.cancel(),gc(i).then(function(t){var e=o;if(t&&r&&r.url){var n=null;-1!=(e=$i(r.url)).indexOf("/__/auth/callback")&&(n=(n="object"==typeof(n=kr(Rn(n=Pn(e),"firebaseError")||null))?T(n):null)?new Po(t.c,t.b,null,null,n,null,t.S()):new Po(t.c,t.b,e,t.f,null,null,t.S())),e=n||o}vc(i,e)})}var i,o,t,s,r;a.Ca(function t(e){return n(e),a.Qa(t),!1}),i=a,o=new Po("unknown",null,null,null,new E("no-auth-event")),t=!1,s=wn(500).then(function(){return gc(i).then(function(){t||vc(i,o)})}),r=p.handleOpenURL,p.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Tr("BuildInfo.packageName",p).toLowerCase()+"://")&&e({url:t}),"function"==typeof r)try{r(t)}catch(t){console.error(t)}},jo=jo||new Mo,function(t){var n=jo;n.a.push(t),n.b||(n.b=function(t){for(var e=0;e<n.a.length;e++)n.a[e](t)},"function"==typeof(t=Tr("universalLinks.subscribe",p))&&t(null,n.b))}(e)})})),a.f}function gc(e){var t,n=null;return(t=e.g).b.get(Zu,t.a).then(function(t){return Lo(t)}).then(function(t){return n=t,Yu((t=e.g).b,Zu,t.a)}).then(function(){return n})}function mc(t){this.a=t,this.b=zu()}(t=fc.prototype).ka=function(){return this.Ga?this.Ga:this.Ga=(fr(void 0)?lr().then(function(){return new ye(function(t,e){var n=p.document,r=setTimeout(function(){e(Error("Cordova framework is not ready."))},1e3);n.addEventListener("deviceready",function(){clearTimeout(r),t()},!1)})}):Ie(Error("Cordova must run in an Android or iOS file scheme."))).then(function(){if("function"!=typeof Tr("universalLinks.subscribe",p))throw pc("cordova-universal-links-plugin-fix is not installed");if(void 0===Tr("BuildInfo.packageName",p))throw pc("cordova-plugin-buildinfo is not installed");if("function"!=typeof Tr("cordova.plugins.browsertab.openUrl",p))throw pc("cordova-plugin-browsertab is not installed");if("function"!=typeof Tr("cordova.InAppBrowser.open",p))throw pc("cordova-plugin-inappbrowser is not installed")},function(){throw new E("cordova-not-ready")})},t.Lb=function(t,e){return e(new E("operation-not-supported-in-this-environment")),Te()},t.Jb=function(){return Ie(new E("operation-not-supported-in-this-environment"))},t.Xb=function(){return!1},t.Ub=function(){return!0},t.Qb=function(){return!0},t.Kb=function(t,e,n,r){if(this.c)return Ie(new E("redirect-operation-pending"));var i=this,o=p.document,s=null,a=null,u=null,c=null;return this.c=Te().then(function(){return Ro(e),yc(i)}).then(function(){return function(n,t,e,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Po(t,r,null,o,new E("no-auth-event"),null,i),a=Tr("BuildInfo.packageName",p);if("string"!=typeof a)throw new E("invalid-cordova-configuration");var u=Tr("BuildInfo.displayName",p),c={};if(Er().toLowerCase().match(/iphone|ipad|ipod/))c.ibi=a;else{if(!Er().toLowerCase().match(/android/))return Ie(new E("operation-not-supported-in-this-environment"));c.apn=a}u&&(c.appDisplayName=u),o=dc(o),c.sessionId=o;var h=hu(n.u,n.i,n.l,t,e,null,r,n.m,c,n.s,i);return n.ka().then(function(){var t=n.h;return n.w.a.set(Zu,s.v(),t)}).then(function(){var t=Tr("cordova.plugins.browsertab.isAvailable",p);if("function"!=typeof t)throw new E("invalid-cordova-configuration");var e=null;t(function(t){if(t){if("function"!=typeof(e=Tr("cordova.plugins.browsertab.openUrl",p)))throw new E("invalid-cordova-configuration");e(h)}else{if("function"!=typeof(e=Tr("cordova.InAppBrowser.open",p)))throw new E("invalid-cordova-configuration");t=Er(),n.a=e(h,t.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||t.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}})})}(i,t,e,n,r)}).then(function(){return new ye(function(e,t){a=function(){var t=Tr("cordova.plugins.browsertab.close",p);return e(),"function"==typeof t&&t(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ca(a),u=function(){s=s||wn(2e3).then(function(){t(new E("redirect-cancelled-by-user"))})},c=function(){Mr()&&u()},o.addEventListener("resume",u,!1),Er().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",c,!1)}).o(function(t){return gc(i).then(function(){throw t})})}).ma(function(){u&&o.removeEventListener("resume",u,!1),c&&o.removeEventListener("visibilitychange",c,!1),s&&s.cancel(),a&&i.Qa(a),i.c=null})},t.Ca=function(e){this.b.push(e),yc(this).o(function(t){"auth/invalid-cordova-configuration"===t.code&&(t=new Po("unknown",null,null,null,new E("no-auth-event")),e(t))})},t.Qa=function(e){G(this.b,function(t){return t==e})};var _c={name:"pendingRedirect",F:"session"};function bc(t){return Yu(t.b,_c,t.a)}function wc(t,e,n){this.i={},this.w=0,this.D=t,this.u=e,this.m=n,this.h=[],this.f=!1,this.l=m(this.s,this),this.b=new Lc,this.B=new qc,this.g=new mc(this.u+":"+this.m),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.B,this.c.linkViaPopup=this.B,this.c.reauthViaPopup=this.B,this.a=Ec(this.D,this.u,this.m,I)}function Ec(t,e,n,r){var i=Xl.a.SDK_VERSION||null;return new(fr()?fc:su)(t,e,n,i,r)}function Tc(e){e.f||(e.f=!0,e.a.Ca(e.l));var n=e.a;return e.a.ka().o(function(t){throw e.a==n&&e.reset(),t})}function Ic(n){n.a.Ub()&&Tc(n).o(function(t){var e=new Po("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Dc(t)&&n.s(e)}),n.a.Qb()||Mc(n.b)}function Sc(n,t){var e;W(n.h,t)||n.h.push(t),n.f||(e=n.g).b.get(_c,e.a).then(function(t){return"pending"==t}).then(function(t){t?bc(n.g).then(function(){Tc(n).o(function(t){var e=new Po("unknown",null,null,null,new E("operation-not-supported-in-this-environment"));Dc(t)&&n.s(e)})}):Ic(n)}).o(function(){Ic(n)})}function Cc(t,e){G(t.h,function(t){return t==e})}wc.prototype.reset=function(){this.f=!1,this.a.Qa(this.l),this.a=Ec(this.D,this.u,this.m),this.i={}},wc.prototype.s=function(t){if(!t)throw new E("invalid-auth-event");if(6e5<=b()-this.w&&(this.i={},this.w=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Cb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.w=b())),e=!0;break}}return Mc(this.b),e};var Ac=new Lr(2e3,1e4),Nc=new Lr(3e4,6e4);function Oc(t,e,n,r,i,o,s){return t.a.Jb(e,n,r,function(){t.f||(t.f=!0,t.a.Ca(t.l))},function(){t.reset()},i,o,s)}function Dc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function kc(e,t,n,r,i){var o,s;return(s=e.g).b.set(_c,"pending",s.a).then(function(){return e.a.Kb(t,n,r,i).o(function(t){if(Dc(t))throw new E("operation-not-supported-in-this-environment");return o=t,bc(e.g).then(function(){throw o})}).then(function(){return e.a.Xb()?new ye(function(){}):bc(e.g).then(function(){return e.pa()}).then(function(){}).o(function(){})})})}function xc(t,e,n,r,i){return t.a.Lb(r,function(t){e.la(n,null,t,i)},Ac.get())}wc.prototype.pa=function(){return this.b.pa()};var Rc={};function Pc(t,e,n){var r=e+":"+n;return Rc[r]||(Rc[r]=new wc(t,e,n)),Rc[r]}function Lc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Mc(t){t.g||(t.g=!0,Uc(t,!1,null,null))}function Fc(t){t.g&&!t.i&&Uc(t,!1,null,null)}function jc(t,e){if(t.b=function(){return Te(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Uc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ie(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):jc(t,n):jc(t,{user:null}),t.f=[],t.c=[]}function qc(){}function Vc(){this.Bb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.Bb},set:function(t){this.Bb=t},enumerable:!1})}function Hc(t,e){this.a=e,Wr(this,"verificationId",t)}function Wc(t,e,n,r){return new Do(t).cb(e,n).then(function(t){return new Hc(t,r)})}function Bc(t){var e=ji(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new E("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Br(this,{token:t,expirationTime:Fr(1e3*e.exp),authTime:Fr(1e3*e.auth_time),issuedAtTime:Fr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Gc(t,e,n){var r=e&&e[Kc];if(!r)throw new E("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=ht(e),this.g=n,this.c=new Zi(null,r),this.b=[];var i=this;U(e[zc]||[],function(t){(t=Qr(t))&&i.b.push(t)}),Wr(this,"auth",this.a),Wr(this,"session",this.c),Wr(this,"hints",this.b)}Lc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Lc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Uc(this,!0,null,t.a),Te()):e.Da(n,r)?function(e,t,n){n=n.Da(t.c,t.b);var r=t.g,i=t.f,o=t.i,s=t.S(),a=!!t.c.match(/Redirect$/);n(r,i,s,o).then(function(t){Uc(e,a,t,null)}).o(function(t){Uc(e,a,null,t)})}(this,t,e):Ie(new E("invalid-auth-event")):(Uc(this,!1,null,null),Te())}else Ie(new E("invalid-auth-event"))},Lc.prototype.pa=function(){var i=this;return new ye(function(t,e){var n,r;i.b?i.b().then(t,e):(i.f.push(t),i.c.push(e),n=i,r=new E("timeout"),n.a&&n.a.cancel(),n.a=wn(Nc.get()).then(function(){n.b||(n.g=!0,Uc(n,!0,null,r))}))})},qc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.la(t.c,null,t.a,t.b),Te()):e.Da(n,r)?(o=e,s=(i=t).b,a=i.c,o.Da(a,s)(i.g,i.f,i.S(),i.i).then(function(t){o.la(a,t,null,s)}).o(function(t){o.la(a,null,t,s)})):Ie(new E("invalid-auth-event"))}else Ie(new E("invalid-auth-event"));var i,o,s,a},Hc.prototype.confirm=function(t){return t=ko(this.verificationId,t),this.a(t)};var zc="mfaInfo",Kc="mfaPendingCredential";function Qc(t,e,n,r){E.call(this,"multi-factor-auth-required",r,e),this.b=new Gc(t,e,n),Wr(this,"resolver",this.b)}function Yc(t,e,n){if(t&&f(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new Qc(e,t.serverResponse,n,t.message)}catch(t){}return null}function Xc(){}function Jc(t){Wr(this,"factorId",t.ea),this.a=t}function $c(t){if(Jc.call(this,t),this.a.ea!=Do.PROVIDER_ID)throw new E("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function Zc(t,e){for(var n in Ge.call(this,t),e)this[n]=e[n]}function th(t,e){this.a=t,this.b=[],this.c=m(this.wc,this),rn(this.a,"userReloaded",this.c);var r=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&U(e.multiFactor.enrolledFactors,function(t){var e=null,n={};if(t){t.uid&&(n[Jr]=t.uid),t.displayName&&(n[Yr]=t.displayName),t.enrollmentTime&&(n[Xr]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(n[$r]=t.phoneNumber);try{e=new Zr(n)}catch(t){}t=e}else t=null;t&&r.push(t)}),eh(this,r)}function eh(t,e){t.b=e,Wr(t,"enrolledFactors",e)}function nh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function rh(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}function ih(t){this.c=t,this.b=this.a=null}function oh(t){return t.b&&1e3*t.b.c||0}function sh(t,e){var n=e.refreshToken;t.b=Fi(e[zs]||""),t.a=n}function ah(e,t){return(r=e.c,i=t,new ye(function(e,n){"refresh_token"==i.grant_type&&i.refresh_token||"authorization_code"==i.grant_type&&i.code?Zs(r,r.u+"?key="+encodeURIComponent(r.c),function(t){t?t.error?n(Ja(t)):t.access_token&&t.refresh_token?e(t):n(new E("internal-error")):n(new E("network-request-failed"))},"POST",zn(i).toString(),r.g,r.m.get()):n(new E("internal-error"))})).then(function(t){return e.b=Fi(t.access_token),e.a=t.refresh_token,{accessToken:e.b.toString(),refreshToken:e.a}}).o(function(t){throw"auth/user-token-expired"==t.code&&(e.a=null),t});var r,i}function uh(t,e){this.a=t||null,this.b=e||null,Br(this,{lastSignInTime:Fr(e||null),creationTime:Fr(t||null)})}function ch(t,e,n,r,i,o){Br(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function hh(t,e,n){var r;this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null,t=Xl.a.SDK_VERSION?wr(Xl.a.SDK_VERSION):null,this.a=new Bs(this.l,N(I),t),this.b=new ih(this.a),gh(this,e[zs]),sh(this.b,e),Wr(this,"refreshToken",this.b.a),bh(this,n||{}),yn.call(this),this.P=!1,this.s&&Sr()&&(this.i=Pc(this.s,this.l,this.m)),this.R=[],this.h=null,this.B=(r=this,new nh(function(){return r.I(!0)},function(t){return!(!t||"auth/network-request-failed"!=t.code)},function(){var t=oh(r.b)-b()-3e5;return 0<t?t:0})),this.Z=m(this.Ma,this);var i=this;this.oa=null,this.za=function(t){i.va(t.g)},this.aa=null,this.W=[],this.ya=function(t){fh(i,t.c)},this.$=null,this.O=new th(this,n),Wr(this,"multiFactor",this.O)}function lh(t,e){t.aa&&an(t.aa,"languageCodeChanged",t.za),(t.aa=e)&&rn(e,"languageCodeChanged",t.za)}function fh(t,e){t.W=e,$s(t.a,Xl.a.SDK_VERSION?wr(Xl.a.SDK_VERSION,t.W):null)}function ph(t,e){t.$&&an(t.$,"frameworkChanged",t.ya),(t.$=e)&&rn(e,"frameworkChanged",t.ya)}function dh(e){try{return Xl.a.app(e.m).auth()}catch(t){throw new E("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+e.m+"'!")}}function vh(t){t.D||t.B.b||(t.B.start(),an(t,"tokenChanged",t.Z),rn(t,"tokenChanged",t.Z))}function yh(t){an(t,"tokenChanged",t.Z),t.B.stop()}function gh(t,e){t.xa=e,Wr(t,"_lat",e)}function mh(t){for(var e=[],n=0;n<t.R.length;n++)e.push(t.R[n](t));return Ce(e).then(function(){return t})}function _h(t){t.i&&!t.P&&(t.P=!0,Sc(t.i,t))}function bh(t,e){Br(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new uh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function wh(){}function Eh(t){return Te().then(function(){if(t.D)throw new E("app-deleted")})}function Th(t){return V(t.providerData,function(t){return t.providerId})}function Ih(t,e){e&&(Sh(t,e.providerId),t.providerData.push(e))}function Sh(t,e){G(t.providerData,function(t){return t.providerId==e})}function Ch(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Wr(t,e,n)}function Ah(e,t){var n,r,i;e!=t&&(Br(e,{uid:t.uid,displayName:t.displayName,photoURL:t.photoURL,email:t.email,emailVerified:t.emailVerified,phoneNumber:t.phoneNumber,isAnonymous:t.isAnonymous,tenantId:t.tenantId,providerData:[]}),t.metadata?Wr(e,"metadata",new uh((i=t.metadata).a,i.b)):Wr(e,"metadata",new uh),U(t.providerData,function(t){Ih(e,t)}),n=e.b,r=t.b,n.b=r.b,n.a=r.a,Wr(e,"refreshToken",e.b.a),eh(e.O,t.O.b))}function Nh(i){return i.I().then(function(t){var e,n,r=i.isAnonymous;return(n=t,Ya((e=i).a,Ca,{idToken:n}).then(m(e.Ic,e))).then(function(){return r||Ch(i,"isAnonymous",!1),t})})}function Oh(t,e){e[zs]&&t.xa!=e[zs]&&(sh(t.b,e),t.dispatchEvent(new Zc("tokenChanged")),gh(t,e[zs]),Ch(t,"refreshToken",t.b.a))}function Dh(t,e){return Nh(t).then(function(){if(W(Th(t),e))return mh(t).then(function(){throw new E("provider-already-linked")})})}function kh(t,e,n){return Gr({user:t,credential:xo(e),additionalUserInfo:e=Wi(e),operationType:n})}function xh(t,e){return Oh(t,e),t.reload().then(function(){return t})}function Rh(n,r,t,e,i){if(!Sr())return Ie(new E("operation-not-supported-in-this-environment"));if(n.h&&!i)return Ie(n.h);var o=Hi(t.providerId),s=xr(n.uid+":::"),a=null;(!Nr()||pr())&&n.s&&t.isOAuthProvider&&(a=hu(n.s,n.l,n.m,r,t,null,s,Xl.a.SDK_VERSION||null,null,null,n.tenantId));var u=ur(a,o&&o.ta,o&&o.sa);return e=e().then(function(){if(Lh(n),!i)return n.I().then(function(){})}).then(function(){return Oc(n.i,u,r,t,s,!!a,n.tenantId)}).then(function(){return new ye(function(t,e){n.la(r,null,new E("cancelled-popup-request"),n.g||null),n.f=t,n.w=e,n.g=s,n.c=xc(n.i,n,r,u,s)})}).then(function(t){return u&&ar(u),t?Gr(t):null}).o(function(t){throw u&&ar(u),t}),Mh(n,e,i)}function Ph(e,t,n,r,i){if(!Sr())return Ie(new E("operation-not-supported-in-this-environment"));if(e.h&&!i)return Ie(e.h);var o=null,s=xr(e.uid+":::");return r=r().then(function(){if(Lh(e),!i)return e.I().then(function(){})}).then(function(){return e.fa=s,mh(e)}).then(function(t){return e.ga&&(t=(t=e.ga).b.set(Uh,e.v(),t.a)),t}).then(function(){return kc(e.i,t,n,s,e.tenantId)}).o(function(t){if(o=t,e.ga)return qh(e.ga);throw o}).then(function(){if(o)throw o}),Mh(e,r,i)}function Lh(t){if(!t.i||!t.P){if(t.i&&!t.P)throw new E("internal-error");throw new E("auth-domain-config-required")}}function Mh(n,t,e){var r,i,o,s=(i=t,o=e,(r=n).h&&!o?(i.cancel(),Ie(r.h)):i.o(function(t){throw!t||"auth/user-disabled"!=t.code&&"auth/user-token-expired"!=t.code||(r.h||r.dispatchEvent(new Zc("userInvalidated")),r.h=t),t}));return n.N.push(s),s.ma(function(){B(n.N,s)}),s.o(function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Yc(t.v(),dh(n),m(n.hc,n))),e||t})}function Fh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[zs]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=new hh(e,n,t);return t.providerData&&U(t.providerData,function(t){t&&Ih(r,Gr(t))}),t.redirectEventId&&(r.fa=t.redirectEventId),r}function jh(t){this.a=t,this.b=zu()}Gc.prototype.Pc=function(t){var n=this;return t.ob(this.a.b,this.c).then(function(t){var e=ht(n.f);return delete e[zc],delete e[Kc],ft(e,t),n.g(e)})},w(Qc,E),Xc.prototype.ob=function(t,e,n){return e.type==to?(o=this,s=t,a=n,e.Fa().then(function(t){return t={idToken:t},void 0!==a&&(t.displayName=a),ft(t,{phoneVerificationInfo:Oo(o.a)}),Ya(s,Ia,t)})):(r=this,i=t,e.Fa().then(function(t){return ft(t={mfaPendingCredential:t},{phoneVerificationInfo:Oo(r.a)}),Ya(i,Sa,t)}));var r,i,o,s,a},w(Jc,Xc),w($c,Jc),w(Zc,Ge),(t=th.prototype).wc=function(t){var e,n;eh(this,(e=t.ed,n=[],U(e.mfaInfo||[],function(t){(t=Qr(t))&&n.push(t)}),n))},t.Ob=function(){return this.a.I().then(function(t){return new Zi(t,null)})},t.dc=function(e,n){var r=this,i=this.a.a;return this.Ob().then(function(t){return e.ob(i,t,n)}).then(function(t){return Oh(r.a,t),r.a.reload()})},t.$c=function(t){var n=this,r="string"==typeof t?t:t.uid,e=this.a.a;return this.a.I().then(function(t){return Ya(e,Qa,{idToken:t,mfaEnrollmentId:r})}).then(function(t){var e=q(n.b,function(t){return t.uid!=r});return eh(n,e),Oh(n.a,t),n.a.reload().o(function(t){if("auth/user-token-expired"!=t.code)throw t})})},t.v=function(){return{multiFactor:{enrolledFactors:V(this.b,function(t){return t.v()})}}},nh.prototype.start=function(){this.a=this.c,function e(n,t){n.stop();n.b=wn(rh(n,t)).then(function(){return e=p.document,n=null,Mr()||!e?Te():new ye(function(t){n=function(){Mr()&&(e.removeEventListener("visibilitychange",n,!1),t())},e.addEventListener("visibilitychange",n,!1)}).o(function(t){throw e.removeEventListener("visibilitychange",n,!1),t});var e,n}).then(function(){return n.h()}).then(function(){e(n,!0)}).o(function(t){n.i(t)&&e(n,!1)})}(this,!0)},nh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},ih.prototype.v=function(){return{apiKey:this.c.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:oh(this)}},ih.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ie(new E("user-token-expired")):t||!this.b||b()>oh(this)-3e4?this.a?ah(this,{grant_type:"refresh_token",refresh_token:this.a}):Te(null):Te({accessToken:this.b.toString(),refreshToken:this.a})},uh.prototype.v=function(){return{lastLoginAt:this.b,createdAt:this.a}},w(hh,yn),hh.prototype.va=function(t){this.oa=t,Js(this.a,t)},hh.prototype.ja=function(){return this.oa},hh.prototype.Ea=function(){return K(this.W)},hh.prototype.Ma=function(){this.B.b&&(this.B.stop(),this.B.start())},Wr(hh.prototype,"providerId","firebase"),(t=hh.prototype).reload=function(){var t=this;return Mh(this,Eh(this).then(function(){return Nh(t).then(function(){return mh(t)}).then(wh)}))},t.mc=function(t){return this.I(t).then(function(t){return new Bc(t)})},t.I=function(t){var e=this;return Mh(this,Eh(this).then(function(){return e.b.getToken(t)}).then(function(t){if(!t)throw new E("internal-error");return t.accessToken!=e.xa&&(gh(e,t.accessToken),e.dispatchEvent(new Zc("tokenChanged"))),Ch(e,"refreshToken",t.refreshToken),t.accessToken}))},t.Ic=function(t){if(!(t=t.users)||!t.length)throw new E("internal-error");bh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=(r=(r=t).providerUserInfo)&&r.length?V(r,function(t){return new ch(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)}):[],n=0;n<e.length;n++)Ih(this,e[n]);var r;Ch(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new Zc("userReloaded",{ed:t}))},t.Jc=function(t){return Vr("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.pb(t)},t.pb=function(t){var e=this,n=null;return Mh(this,t.c(this.a,this.uid).then(function(t){return Oh(e,t),n=kh(e,t,"reauthenticate"),e.h=null,e.reload()}).then(function(){return n}),!0)},t.Ac=function(t){return Vr("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.mb(t)},t.mb=function(e){var n=this,r=null;return Mh(this,Dh(this,e.providerId).then(function(){return n.I()}).then(function(t){return e.b(n.a,t)}).then(function(t){return r=kh(n,t,"link"),xh(n,t)}).then(function(){return r}))},t.Bc=function(t,e){var n=this;return Mh(this,Dh(this,"phone").then(function(){return Wc(dh(n),t,e,m(n.mb,n))}))},t.Kc=function(t,e){var n=this;return Mh(this,Te().then(function(){return Wc(dh(n),t,e,m(n.pb,n))}),!0)},t.xb=function(e){var n=this;return Mh(this,this.I().then(function(t){return n.a.xb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.cd=function(e){var n=this;return Mh(this,this.I().then(function(t){return e.b(n.a,t)}).then(function(t){return Oh(n,t),n.reload()}))},t.yb=function(e){var n=this;return Mh(this,this.I().then(function(t){return n.a.yb(t,e)}).then(function(t){return Oh(n,t),n.reload()}))},t.zb=function(e){if(void 0===e.displayName&&void 0===e.photoURL)return Eh(this);var n=this;return Mh(this,this.I().then(function(t){return n.a.zb(t,{displayName:e.displayName,photoUrl:e.photoURL})}).then(function(t){return Oh(n,t),Ch(n,"displayName",t.displayName||null),Ch(n,"photoURL",t.photoUrl||null),U(n.providerData,function(t){"password"===t.providerId&&(Wr(t,"displayName",n.displayName),Wr(t,"photoURL",n.photoURL))}),mh(n)}).then(wh))},t.ad=function(e){var n=this;return Mh(this,Nh(this).then(function(t){return W(Th(n),e)?Ya(n.a,wa,{idToken:t,deleteProvider:[e]}).then(function(t){var e={};return U(t.providerUserInfo||[],function(t){e[t.providerId]=!0}),U(Th(n),function(t){e[t]||Sh(n,t)}),e[Do.PROVIDER_ID]||Wr(n,"phoneNumber",null),mh(n)}):mh(n).then(function(){throw new E("no-such-provider")})}))},t.delete=function(){var e=this;return Mh(this,this.I().then(function(t){return Ya(e.a,ba,{idToken:t})}).then(function(){e.dispatchEvent(new Zc("userDeleted"))})).then(function(){for(var t=0;t<e.N.length;t++)e.N[t].cancel("app-deleted");lh(e,null),ph(e,null),e.N=[],e.D=!0,yh(e),Wr(e,"refreshToken",null),e.i&&Cc(e.i,e)})},t.Cb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.fa||null)==e||"reauthViaRedirect"==t&&(this.fa||null)==e)},t.la=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?m(this.Hb,this):"reauthViaPopup"==t&&e==(this.g||null)?m(this.Ib,this):"linkViaRedirect"==t&&(this.fa||null)==e?m(this.Hb,this):"reauthViaRedirect"==t&&(this.fa||null)==e?m(this.Ib,this):null},t.Cc=function(t){var e=this;return Rh(this,"linkViaPopup",t,function(){return Dh(e,t.providerId).then(function(){return mh(e)})},!1)},t.Lc=function(t){return Rh(this,"reauthViaPopup",t,function(){return Te()},!0)},t.Dc=function(t){var e=this;return Ph(this,"linkViaRedirect",t,function(){return Dh(e,t.providerId)},!1)},t.Mc=function(t){return Ph(this,"reauthViaRedirect",t,function(){return Te()},!0)},t.Hb=function(e,n,t,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return t=this.I().then(function(t){return pa(i.a,{requestUri:e,postBody:r,sessionId:n,idToken:t})}).then(function(t){return o=kh(i,t,"link"),xh(i,t)}).then(function(){return o}),Mh(this,t)},t.Ib=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Mh(this,Te().then(function(){return ro(da(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)}).then(function(t){return o=kh(i,t,"reauthenticate"),Oh(i,t),i.h=null,i.reload()}).then(function(){return o}),!0)},t.qb=function(e){var n=this,r=null;return Mh(this,this.I().then(function(t){return r=t,void 0===e||ct(e)?{}:Ri(new Ti(e))}).then(function(t){return n.a.qb(r,t)}).then(function(t){if(n.email!=t)return n.reload()}).then(function(){}))},t.Ab=function(e,n){var r=this,i=null;return Mh(this,this.I().then(function(t){return i=t,void 0===n||ct(n)?{}:Ri(new Ti(n))}).then(function(t){return r.a.Ab(i,e,t)}).then(function(t){if(r.email!=t)return r.reload()}).then(function(){}))},t.hc=function(t){var e=null,n=this;return Mh(this,t=ro(Te(t),n.uid).then(function(t){return e=kh(n,t,"reauthenticate"),Oh(n,t),n.h=null,n.reload()}).then(function(){return e}),!0)},t.toJSON=function(){return this.v()},t.v=function(){var e={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.b.v(),redirectEventId:this.fa||null};return this.metadata&&ft(e,this.metadata.v()),U(this.providerData,function(t){e.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(t))}),ft(e,this.O.v()),e};var Uh={name:"redirectUser",F:"session"};function qh(t){return Yu(t.b,Uh,t.a)}function Vh(t){var e,n,r,i;this.a=t,this.b=zu(),this.c=null,this.f=(e=this,n=Bh("local"),r=Bh("session"),i=Bh("none"),function(n,r,i){var o=Qu(r,i),s=Ku(n,r.F);return n.get(r,i).then(function(t){var e=null;try{e=kr(p.localStorage.getItem(o))}catch(t){}if(e&&!t)return p.localStorage.removeItem(o),n.set(r,e,i);e&&t&&"localStorage"!=s.type&&p.localStorage.removeItem(o)})}(e.b,n,e.a).then(function(){return e.b.get(r,e.a)}).then(function(t){return t?r:e.b.get(i,e.a).then(function(t){return t?i:e.b.get(n,e.a).then(function(t){return t?n:e.b.get(Wh,e.a).then(function(t){return t?Bh(t):n})})})}).then(function(t){return e.c=t,Hh(e,t.F)}).o(function(){e.c||(e.c=n)})),this.b.addListener(Bh("local"),this.a,m(this.g,this))}function Hh(t,e){var n,a,r=[];for(n in Bu)Bu[n]!==e&&r.push(Yu(t.b,Bh(Bu[n]),t.a));return r.push(Yu(t.b,Wh,t.a)),a=r,new ye(function(n,e){var r=a.length,i=[];if(r)for(var t=function(t,e){r--,i[t]=e,0==r&&n(i)},o=function(t){e(t)},s=0;s<a.length;s++)Se(a[s],_(t,s),o);else n(i)})}Vh.prototype.g=function(){var e=this,n=Bh("local");Qh(this,function(){return Te().then(function(){return e.c&&"local"!=e.c.F?e.b.get(n,e.a):null}).then(function(t){if(t)return Hh(e,"local").then(function(){e.c=n})})})};var Wh={name:"persistence",F:"session"};function Bh(t){return{name:"authUser",F:t}}function Gh(t,e){return Qh(t,function(){return t.b.set(t.c,e.v(),t.a)})}function zh(t){return Qh(t,function(){return Yu(t.b,t.c,t.a)})}function Kh(t,e){return Qh(t,function(){return t.b.get(t.c,t.a).then(function(t){return t&&e&&(t.authDomain=e),Fh(t||{})})})}function Qh(t,e){return t.f=t.f.then(e,e),t.f}function Yh(t){if(this.l=!1,Wr(this,"settings",new Vc),Wr(this,"app",t),!rl(this).options||!rl(this).options.apiKey)throw new E("invalid-api-key");var n,e,r,i,o,s,a,u;t=Xl.a.SDK_VERSION?wr(Xl.a.SDK_VERSION):null,this.b=new Bs(rl(this).options&&rl(this).options.apiKey,N(I),t),this.P=[],this.m=[],this.O=[],this.$b=Xl.a.INTERNAL.createSubscribe(m(this.xc,this)),this.W=void 0,this.ac=Xl.a.INTERNAL.createSubscribe(m(this.yc,this)),el(this,null),this.i=new Vh(rl(this).options.apiKey+":"+rl(this).name),this.B=new jh(rl(this).options.apiKey+":"+rl(this).name),this.Z=al(this,(e=rl(n=this).options.authDomain,r=function(e){var t=function(t,e){return t.b.get(Uh,t.a).then(function(t){return t&&e&&(t.authDomain=e),Fh(t||{})})}(e.B,rl(e).options.authDomain).then(function(t){return(e.D=t)&&(t.ga=e.B),qh(e.B)});return al(e,t)}(n).then(function(){return Kh(n.i,e)}).then(function(e){return e?(e.ga=n.B,n.D&&(n.D.fa||null)==(e.fa||null)?e:e.reload().then(function(){return Gh(n.i,e).then(function(){return e})}).o(function(t){return"auth/network-request-failed"==t.code?e:zh(n.i)})):null}).then(function(t){el(n,t||null)}),al(n,r))),this.h=al(this,(i=this).Z.then(function(){return Zh(i)}).o(function(){}).then(function(){if(!i.l)return i.oa()}).o(function(){}).then(function(){if(!i.l){i.aa=!0;var t=i.i;t.b.addListener(Bh("local"),t.a,i.oa)}})),this.aa=!1,this.oa=m(this.Xc,this),this.Ma=m(this.ca,this),this.xa=m(this.jc,this),this.ya=m(this.uc,this),this.za=m(this.vc,this),this.a=null,s=rl(o=this).options.authDomain,a=rl(o).options.apiKey,s&&Sr()&&(o.Zb=o.Z.then(function(){if(!o.l){if(o.a=Pc(s,a,rl(o).name),Sc(o.a,o),il(o)&&_h(il(o)),o.D){_h(o.D);var t=o.D;t.va(o.ja()),lh(t,o),fh(t=o.D,o.N),ph(t,o),o.D=null}return o.a}})),this.INTERNAL={},this.INTERNAL.delete=m(this.delete,this),this.INTERNAL.logFramework=m(this.Ec,this),this.s=0,yn.call(this),u=this,Object.defineProperty(u,"lc",{get:function(){return this.ja()},set:function(t){this.va(t)},enumerable:!1}),u.$=null,Object.defineProperty(u,"ti",{get:function(){return this.S()},set:function(t){this.ub(t)},enumerable:!1}),u.R=null,this.N=[]}function Xh(t){Ge.call(this,"languageCodeChanged"),this.g=t}function Jh(t){Ge.call(this,"frameworkChanged"),this.c=t}function $h(t){return t.Zb||Ie(new E("auth-domain-config-required"))}function Zh(t){if(!Sr())return Ie(new E("operation-not-supported-in-this-environment"));var e=$h(t).then(function(){return t.a.pa()}).then(function(t){return t?Gr(t):null});return al(t,e)}function tl(o,s){var a={};return a.apiKey=rl(o).options.apiKey,a.authDomain=rl(o).options.authDomain,a.appName=rl(o).name,o.Z.then(function(){return t=a,e=s,n=o.B,r=o.Ea(),i=new hh(t,e),n&&(i.ga=n),r&&fh(i,r),i.reload().then(function(){return i});var t,e,n,r,i}).then(function(t){return il(o)&&t.uid==il(o).uid?Ah(il(o),t):(el(o,t),_h(t)),o.ca(t)}).then(function(){sl(o)})}function el(t,e){var n,r;il(t)&&(n=il(t),r=t.Ma,G(n.R,function(t){return t==r}),an(il(t),"tokenChanged",t.xa),an(il(t),"userDeleted",t.ya),an(il(t),"userInvalidated",t.za),yh(il(t))),e&&(e.R.push(t.Ma),rn(e,"tokenChanged",t.xa),rn(e,"userDeleted",t.ya),rn(e,"userInvalidated",t.za),0<t.s&&vh(e)),Wr(t,"currentUser",e),e&&(e.va(t.ja()),lh(e,t),fh(e,t.N),ph(e,t))}function nl(n,t){var e=null,r=null;return al(n,t.then(function(t){return e=xo(t),r=Wi(t),tl(n,t)},function(t){var e=null;throw t&&"auth/multi-factor-auth-required"===t.code&&(e=Yc(t.v(),n,m(n.ic,n))),e||t}).then(function(){return Gr({user:il(n),credential:e,additionalUserInfo:r,operationType:"signIn"})}))}function rl(t){return t.app}function il(t){return t.currentUser}function ol(t){return il(t)&&il(t)._lat||null}function sl(t){if(t.aa){for(var e=0;e<t.m.length;e++)t.m[e]&&t.m[e](ol(t));if(t.W!==t.getUid()&&t.O.length)for(t.W=t.getUid(),e=0;e<t.O.length;e++)t.O[e]&&t.O[e](ol(t))}}function al(t,e){return t.P.push(e),e.ma(function(){B(t.P,e)}),e}function ul(){}function cl(){this.a={},this.b=1e12}Vh.prototype.tb=function(e){var n=null,r=this;return function(t){var e=new E("invalid-persistence-type"),n=new E("unsupported-persistence-type");t:{for(r in Bu)if(Bu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(vr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;default:if(!Ir()&&"none"!==t)throw n}}(e),Qh(this,function(){return e!=r.c.F?r.b.get(r.c,r.a).then(function(t){return n=t,Hh(r,e)}).then(function(){if(r.c=Bh(e),n)return r.b.set(r.c,n,r.a)}):Te()})},w(Yh,yn),w(Xh,Ge),w(Jh,Ge),(t=Yh.prototype).tb=function(t){return t=this.i.tb(t),al(this,t)},t.va=function(t){this.$===t||this.l||(this.$=t,Js(this.b,this.$),this.dispatchEvent(new Xh(this.ja())))},t.ja=function(){return this.$},t.dd=function(){var t=p.navigator;this.va(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.Ec=function(t){this.N.push(t),$s(this.b,Xl.a.SDK_VERSION?wr(Xl.a.SDK_VERSION,this.N):null),this.dispatchEvent(new Jh(this.N))},t.Ea=function(){return K(this.N)},t.ub=function(t){this.R===t||this.l||(this.R=t,this.b.b=this.R)},t.S=function(){return this.R},t.toJSON=function(){return{apiKey:rl(this).options.apiKey,authDomain:rl(this).options.authDomain,appName:rl(this).name,currentUser:il(this)&&il(this).v()}},t.Cb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.la=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.w?this.w(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.w)},t.Da=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?m(this.gc,this):null},t.gc=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.Z.then(function(){return nl(i,fa(i.b,o))})},t.Vc=function(e){if(!Sr())return Ie(new E("operation-not-supported-in-this-environment"));var n=this,t=Hi(e.providerId),r=xr(),i=null;(!Nr()||pr())&&rl(this).options.authDomain&&e.isOAuthProvider&&(i=hu(rl(this).options.authDomain,rl(this).options.apiKey,rl(this).name,"signInViaPopup",e,null,r,Xl.a.SDK_VERSION||null,null,null,this.S()));var o=ur(i,t&&t.ta,t&&t.sa);return al(this,t=$h(this).then(function(t){return Oc(t,o,"signInViaPopup",e,r,!!i,n.S())}).then(function(){return new ye(function(t,e){n.la("signInViaPopup",null,new E("cancelled-popup-request"),n.g),n.f=t,n.w=e,n.g=r,n.c=xc(n.a,n,"signInViaPopup",o,r)})}).then(function(t){return o&&ar(o),t?Gr(t):null}).o(function(t){throw o&&ar(o),t}))},t.Wc=function(t){if(!Sr())return Ie(new E("operation-not-supported-in-this-environment"));var e=this;return al(this,$h(this).then(function(){return Qh(t=e.i,function(){return t.b.set(Wh,t.c.F,t.a)});var t}).then(function(){return kc(e.a,"signInViaRedirect",t,void 0,e.S())}))},t.pa=function(){var e=this;return Zh(this).then(function(t){return e.a&&Fc(e.a.b),t}).o(function(t){throw e.a&&Fc(e.a.b),t})},t.bd=function(t){if(!t)return Ie(new E("null-user"));if(this.R!=t.tenantId)return Ie(new E("tenant-id-mismatch"));var e=this,n={};n.apiKey=rl(this).options.apiKey,n.authDomain=rl(this).options.authDomain,n.appName=rl(this).name;var r,i,o,s,a,u,c=(r=t,i=n,o=e.B,s=e.Ea(),a=r.b,(u={})[zs]=a.b&&a.b.toString(),u.refreshToken=a.a,i=new hh(i||{apiKey:r.l,authDomain:r.s,appName:r.m},u),o&&(i.ga=o),s&&fh(i,s),Ah(i,r),i);return al(this,this.h.then(function(){if(rl(e).options.apiKey!=t.l)return c.reload()}).then(function(){return il(e)&&t.uid==il(e).uid?(Ah(il(e),t),e.ca(t)):(el(e,c),_h(c),e.ca(c))}).then(function(){sl(e)}))},t.wb=function(){var t=this,e=this.h.then(function(){return t.a&&Fc(t.a.b),il(t)?(el(t,null),zh(t.i).then(function(){sl(t)})):Te()});return al(this,e)},t.Xc=function(){var r=this;return Kh(this.i,rl(this).options.authDomain).then(function(t){if(!r.l){var e;if(e=il(r)&&t){e=il(r).uid;var n=t.uid;e=null!=e&&""!==e&&null!=n&&""!==n&&e==n}if(e)return Ah(il(r),t),il(r).I();(il(r)||t)&&(el(r,t),t&&(_h(t),t.ga=r.B),r.a&&Sc(r.a,r),sl(r))}})},t.ca=function(t){return Gh(this.i,t)},t.jc=function(){sl(this),this.ca(il(this))},t.uc=function(){this.wb()},t.vc=function(){this.wb()},t.ic=function(t){var e=this;return this.h.then(function(){return nl(e,Te(t))})},t.xc=function(t){var e=this;this.addAuthTokenListener(function(){t.next(il(e))})},t.yc=function(t){var e,n,r=this;n=function(){t.next(il(r))},(e=this).O.push(n),al(e,e.h.then(function(){!e.l&&W(e.O,n)&&e.W!==e.getUid()&&(e.W=e.getUid(),n(ol(e)))}))},t.Gc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){l(t)?t(il(r)):l(t.next)&&t.next(il(r))}),this.$b(t,e,n)},t.Fc=function(t,e,n){var r=this;return this.aa&&Promise.resolve().then(function(){r.W=r.getUid(),l(t)?t(il(r)):l(t.next)&&t.next(il(r))}),this.ac(t,e,n)},t.kc=function(t){var e=this,n=this.h.then(function(){return il(e)?il(e).I(t).then(function(t){return{accessToken:t}}):null});return al(this,n)},t.Rc=function(t){var n=this;return this.h.then(function(){return nl(n,Ya(n.b,Wa,{token:t}))}).then(function(t){var e=t.user;return Ch(e,"isAnonymous",!1),n.ca(e),t})},t.Sc=function(t,e){var n=this;return this.h.then(function(){return nl(n,Ya(n.b,Ba,{email:t,password:e}))})},t.cc=function(t,e){var n=this;return this.h.then(function(){return nl(n,Ya(n.b,ma,{email:t,password:e}))})},t.Ya=function(t){var e=this;return this.h.then(function(){return nl(e,t.ia(e.b))})},t.Qc=function(t){return Vr("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.Ya(t)},t.vb=function(){var n=this;return this.h.then(function(){var t=il(n);if(t&&t.isAnonymous){var e=Gr({providerId:null,isNewUser:!1});return Gr({user:t,credential:null,additionalUserInfo:e,operationType:"signIn"})}return nl(n,n.b.vb()).then(function(t){var e=t.user;return Ch(e,"isAnonymous",!0),n.ca(e),t})})},t.getUid=function(){return il(this)&&il(this).uid||null},t.bc=function(t){this.addAuthTokenListener(t),this.s++,0<this.s&&il(this)&&vh(il(this))},t.Nc=function(e){var n=this;U(this.m,function(t){t==e&&n.s--}),this.s<0&&(this.s=0),0==this.s&&il(this)&&yh(il(this)),this.removeAuthTokenListener(e)},t.addAuthTokenListener=function(t){var e=this;this.m.push(t),al(this,this.h.then(function(){e.l||W(e.m,t)&&t(ol(e))}))},t.removeAuthTokenListener=function(e){G(this.m,function(t){return t==e})},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Bh("local"),t.a,this.oa),this.a&&(Cc(this.a,this),Fc(this.a.b)),Promise.resolve()},t.fc=function(t){return al(this,Ya(this.b,_a,{identifier:t,continueUri:Cr()?ir():"http://localhost"}).then(function(t){return t.signinMethods||[]}))},t.zc=function(t){return!!Co(t)},t.sb=function(e,n){var r=this;return al(this,Te().then(function(){var t=new Ti(n);if(!t.c)throw new E("argument-error",Ci+" must be true when sending sign in link to email");return Ri(t)}).then(function(t){return r.b.sb(e,t)}).then(function(){}))},t.fd=function(t){return this.Pa(t).then(function(t){return t.data.email})},t.jb=function(t,e){return al(this,this.b.jb(t,e).then(function(){}))},t.Pa=function(t){return al(this,this.b.Pa(t).then(function(t){return new ti(t)}))},t.fb=function(t){return al(this,this.b.fb(t).then(function(){}))},t.rb=function(e,t){var n=this;return al(this,Te().then(function(){return void 0===t||ct(t)?{}:Ri(new Ti(t))}).then(function(t){return n.b.rb(e,t)}).then(function(){}))},t.Uc=function(t,e){return al(this,Wc(this,t,e,m(this.Ya,this)))},t.Tc=function(n,r){var i=this;return al(this,Te().then(function(){var t=r||ir(),e=So(n,t);if(!(t=Co(t)))throw new E("argument-error","Invalid email link!");if(t.tenantId!==i.S())throw new E("tenant-id-mismatch");return i.Ya(e)}))},ul.prototype.render=function(){},ul.prototype.reset=function(){},ul.prototype.getResponse=function(){},ul.prototype.execute=function(){};var hl=null;function ll(t,e){return(e=fl(e))&&t.a[e]||null}function fl(t){return(t=void 0===t?1e12:t)?t.toString():null}function pl(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ne(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():rn(this.f,"click",this.i)}function dl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function vl(){}function yl(){}cl.prototype.render=function(t,e){return this.a[this.b.toString()]=new pl(t,e),this.b++},cl.prototype.reset=function(t){var e=ll(this,t);t=fl(t),e&&t&&(e.delete(),delete this.a[t])},cl.prototype.getResponse=function(t){return(t=ll(this,t))?t.getResponse():null},cl.prototype.execute=function(t){(t=ll(this,t))&&t.execute()},pl.prototype.getResponse=function(){return dl(this),this.b},pl.prototype.execute=function(){dl(this);var n=this;this.a||(this.a=setTimeout(function(){n.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var t=n.c.callback,e=n.c["expired-callback"];if(t)try{t(n.b)}catch(t){}n.a=setTimeout(function(){if(n.a=null,n.b=null,e)try{e()}catch(t){}n.h&&n.execute()},6e4)},500))},pl.prototype.delete=function(){dl(this),this.g=!0,clearTimeout(this.a),this.a=null,an(this.f,"click",this.i)},Wr(vl,"FACTOR_ID","phone"),yl.prototype.g=function(){return Te(hl=hl||new cl)},yl.prototype.c=function(){};var gl=null;function ml(){this.b=p.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var _l=new dt(gt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),bl=new Lr(3e4,6e4);ml.prototype.g=function(i){var o=this;return new ye(function(t,e){var r=setTimeout(function(){e(new E("network-request-failed"))},bl.get());!p.grecaptcha||i!==o.f&&!o.b?(p[o.a]=function(){if(p.grecaptcha){o.f=i;var n=p.grecaptcha.render;p.grecaptcha.render=function(t,e){return t=n(t,e),o.b++,t},clearTimeout(r),t(p.grecaptcha)}else clearTimeout(r),e(new E("internal-error"));delete p[o.a]},Te(Fs(wt(_l,{onload:o.a,hl:i||""}))).o(function(){clearTimeout(r),e(new E("internal-error","Unable to load external reCAPTCHA dependencies!"))})):(clearTimeout(r),t(p.grecaptcha))})},ml.prototype.c=function(){this.b--};var wl=null;function El(t,e,n,r,i,o,s){if(Wr(this,"type","recaptcha"),this.c=this.f=null,this.D=!1,this.u=e,this.g=null,s=s?gl=gl||new yl:wl=wl||new ml,this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Sl])throw new E("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Cl],!p.document)throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ne(e)||!this.i&&ne(e).hasChildNodes())throw new E("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Bs(t,o||null,i||null),this.w=r||function(){return null};var a=this;this.l=[];var u=this.a[Tl];this.a[Tl]=function(t){if(Al(a,t),"function"==typeof u)u(t);else if("string"==typeof u){var e=Tr(u,p);"function"==typeof e&&e(t)}};var c=this.a[Il];this.a[Il]=function(){if(Al(a,null),"function"==typeof c)c();else if("string"==typeof c){var t=Tr(c,p);"function"==typeof t&&t()}}}var Tl="callback",Il="expired-callback",Sl="sitekey",Cl="size";function Al(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function Nl(t,e){return t.h.push(e),e.ma(function(){B(t.h,e)}),e}function Ol(t){if(t.D)throw new E("internal-error","RecaptchaVerifier instance has been destroyed.")}function Dl(t,e,n){var r=!1;try{this.b=n||Xl.a.app()}catch(t){throw new E("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new E("invalid-api-key");n=this.b.options.apiKey;var i=this,o=null;try{o=this.b.auth().Ea()}catch(t){}try{r=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}o=Xl.a.SDK_VERSION?wr(Xl.a.SDK_VERSION,o):null,El.call(this,n,t,e,function(){try{var e=i.b.auth().ja()}catch(t){e=null}return e},o,N(I),r)}function kl(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new E("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].K(n[i])&&!o){if(e=e[i],i<0||i>=xl.length)throw new E("internal-error","Argument validator received an unsupported number of arguments.");n=xl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.J+".";break t}r=null}}if(r)throw new E("argument-error",t+" failed: "+r)}(t=El.prototype).Ga=function(){var e=this;return this.f?this.f:this.f=Nl(this,Te().then(function(){if(Cr()&&!dr())return lr();throw new E("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")}).then(function(){return e.m.g(e.w())}).then(function(t){return e.g=t,Ya(e.s,xa,{})}).then(function(t){e.a[Sl]=t.recaptchaSiteKey}).o(function(t){throw e.f=null,t}))},t.render=function(){Ol(this);var n=this;return Nl(this,this.Ga().then(function(){if(null===n.c){var t=n.u;if(!n.i){var e=ne(t);t=ae("DIV"),e.appendChild(t)}n.c=n.g.render(t,n.a)}return n.c}))},t.verify=function(){Ol(this);var i=this;return Nl(this,this.render().then(function(e){return new ye(function(n){var t=i.g.getResponse(e);if(t)n(t);else{var r=function(t){var e;t&&(e=r,G(i.l,function(t){return t==e}),n(t))};i.l.push(r),i.i&&i.g.execute(i.c)}})}))},t.reset=function(){Ol(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ol(this),this.D=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ne(this.u);for(var e;e=t.firstChild;)t.removeChild(e)}},w(Dl,El);var xl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Rl(t,e){return{name:t||"",J:"a valid string",optional:!!e,K:function(t){return"string"==typeof t}}}function Pl(t,e){return{name:t||"",J:"a boolean",optional:!!e,K:function(t){return"boolean"==typeof t}}}function Ll(t,e){return{name:t||"",J:"a valid object",optional:!!e,K:f}}function Ml(t,e){return{name:t||"",J:"a function",optional:!!e,K:l}}function Fl(t,e){return{name:t||"",J:"null",optional:!!e,K:function(t){return null===t}}}function jl(n){return{name:n?n+"Credential":"credential",J:n?"a valid "+n+" credential":"a valid credential",optional:!1,K:function(t){if(!t)return!1;var e=!n||t.providerId===n;return!(!t.ia||!e)}}}function Ul(){return{name:"multiFactorAssertion",J:"a valid multiFactorAssertion",optional:!1,K:function(t){return!!t&&!!t.ob}}}function ql(){return{name:"authProvider",J:"a valid Auth provider",optional:!1,K:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}}function Vl(t,e){return f(t)&&"string"==typeof t.type&&t.type===e&&l(t.Fa)}function Hl(t){return f(t)&&"string"==typeof t.uid}function Wl(){return{name:"applicationVerifier",J:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,K:function(t){return!(!t||"string"!=typeof t.type||!l(t.verify))}}}function Bl(e,n,t,r){return{name:t||"",J:e.J+" or "+n.J,optional:!!r,K:function(t){return e.K(t)||n.K(t)}}}function Gl(t,e){for(var n in e){var r=e[n].name;t[r]=Ql(r,t[n],e[n].j)}}function zl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:_(function(t){return this[t]},n),set:_(function(t,e,n,r){kl(t,[n],[r],!0),this[e]=r},r,n,e[n].gb),enumerable:!0})}}function Kl(t,e,n,r){t[e]=Ql(e,n,r)}function Ql(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return kl(s,n,t),e.apply(this,t)}if(!n)return e;var i,o,s=(o=(o=t).split("."))[o.length-1];for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Gl(Yh.prototype,{fb:{name:"applyActionCode",j:[Rl("code")]},Pa:{name:"checkActionCode",j:[Rl("code")]},jb:{name:"confirmPasswordReset",j:[Rl("code"),Rl("newPassword")]},cc:{name:"createUserWithEmailAndPassword",j:[Rl("email"),Rl("password")]},fc:{name:"fetchSignInMethodsForEmail",j:[Rl("email")]},pa:{name:"getRedirectResult",j:[]},zc:{name:"isSignInWithEmailLink",j:[Rl("emailLink")]},Fc:{name:"onAuthStateChanged",j:[Bl(Ll(),Ml(),"nextOrObserver"),Ml("opt_error",!0),Ml("opt_completed",!0)]},Gc:{name:"onIdTokenChanged",j:[Bl(Ll(),Ml(),"nextOrObserver"),Ml("opt_error",!0),Ml("opt_completed",!0)]},rb:{name:"sendPasswordResetEmail",j:[Rl("email"),Bl(Ll("opt_actionCodeSettings",!0),Fl(null,!0),"opt_actionCodeSettings",!0)]},sb:{name:"sendSignInLinkToEmail",j:[Rl("email"),Ll("actionCodeSettings")]},tb:{name:"setPersistence",j:[Rl("persistence")]},Qc:{name:"signInAndRetrieveDataWithCredential",j:[jl()]},vb:{name:"signInAnonymously",j:[]},Ya:{name:"signInWithCredential",j:[jl()]},Rc:{name:"signInWithCustomToken",j:[Rl("token")]},Sc:{name:"signInWithEmailAndPassword",j:[Rl("email"),Rl("password")]},Tc:{name:"signInWithEmailLink",j:[Rl("email"),Rl("emailLink",!0)]},Uc:{name:"signInWithPhoneNumber",j:[Rl("phoneNumber"),Wl()]},Vc:{name:"signInWithPopup",j:[ql()]},Wc:{name:"signInWithRedirect",j:[ql()]},bd:{name:"updateCurrentUser",j:[Bl({name:"user",J:"an instance of Firebase User",optional:!1,K:function(t){return!!(t&&t instanceof hh)}},Fl(),"user")]},wb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Rl(null,!0)]},dd:{name:"useDeviceLanguage",j:[]},fd:{name:"verifyPasswordResetCode",j:[Rl("code")]}}),zl(Yh.prototype,{lc:{name:"languageCode",gb:Bl(Rl(),Fl(),"languageCode")},ti:{name:"tenantId",gb:Bl(Rl(),Fl(),"tenantId")}}),(Yh.Persistence=Bu).LOCAL="local",Yh.Persistence.SESSION="session",Yh.Persistence.NONE="none",Gl(hh.prototype,{delete:{name:"delete",j:[]},mc:{name:"getIdTokenResult",j:[Pl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Pl("opt_forceRefresh",!0)]},Ac:{name:"linkAndRetrieveDataWithCredential",j:[jl()]},mb:{name:"linkWithCredential",j:[jl()]},Bc:{name:"linkWithPhoneNumber",j:[Rl("phoneNumber"),Wl()]},Cc:{name:"linkWithPopup",j:[ql()]},Dc:{name:"linkWithRedirect",j:[ql()]},Jc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[jl()]},pb:{name:"reauthenticateWithCredential",j:[jl()]},Kc:{name:"reauthenticateWithPhoneNumber",j:[Rl("phoneNumber"),Wl()]},Lc:{name:"reauthenticateWithPopup",j:[ql()]},Mc:{name:"reauthenticateWithRedirect",j:[ql()]},reload:{name:"reload",j:[]},qb:{name:"sendEmailVerification",j:[Bl(Ll("opt_actionCodeSettings",!0),Fl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Rl(null,!0)]},ad:{name:"unlink",j:[Rl("provider")]},xb:{name:"updateEmail",j:[Rl("email")]},yb:{name:"updatePassword",j:[Rl("password")]},cd:{name:"updatePhoneNumber",j:[jl("phone")]},zb:{name:"updateProfile",j:[Ll("profile")]},Ab:{name:"verifyBeforeUpdateEmail",j:[Rl("email"),Bl(Ll("opt_actionCodeSettings",!0),Fl(null,!0),"opt_actionCodeSettings",!0)]}}),Gl(cl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Gl(ul.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Gl(ye.prototype,{ma:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),zl(Vc.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",gb:Pl("appVerificationDisabledForTesting")}}),Gl(Hc.prototype,{confirm:{name:"confirm",j:[Rl("verificationCode")]}}),Kl(no,"fromJSON",function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[co,To,No,so],r=0;r<n.length;r++)if(e=n[r](t))return e;return null},[Bl(Rl(),Ll(),"json")]),Kl(Io,"credential",function(t,e){return new Eo(t,e)},[Rl("email"),Rl("password")]),Gl(Eo.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Gl(po.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},Ia:{name:"setCustomParameters",j:[Ll("customOAuthParameters")]}}),Kl(po,"credential",vo,[Bl(Rl(),Ll(),"token")]),Kl(Io,"credentialWithLink",So,[Rl("email"),Rl("emailLink")]),Gl(yo.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},Ia:{name:"setCustomParameters",j:[Ll("customOAuthParameters")]}}),Kl(yo,"credential",go,[Bl(Rl(),Ll(),"token")]),Gl(mo.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},Ia:{name:"setCustomParameters",j:[Ll("customOAuthParameters")]}}),Kl(mo,"credential",_o,[Bl(Rl(),Bl(Ll(),Fl()),"idToken"),Bl(Rl(),Fl(),"accessToken",!0)]),Gl(bo.prototype,{Ia:{name:"setCustomParameters",j:[Ll("customOAuthParameters")]}}),Kl(bo,"credential",wo,[Bl(Rl(),Ll(),"token"),Rl("secret",!0)]),Gl(fo.prototype,{Aa:{name:"addScope",j:[Rl("scope")]},credential:{name:"credential",j:[Bl(Rl(),Bl(Ll(),Fl()),"optionsOrIdToken"),Bl(Rl(),Fl(),"accessToken",!0)]},Ia:{name:"setCustomParameters",j:[Ll("customOAuthParameters")]}}),Gl(ao.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Gl(io.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Kl(Do,"credential",ko,[Rl("verificationId"),Rl("verificationCode")]),Gl(Do.prototype,{cb:{name:"verifyPhoneNumber",j:[Bl(Rl(),{name:"phoneInfoOptions",J:"valid phone info options",optional:!1,K:function(t){return!!t&&(t.session&&t.phoneNumber?Vl(t.session,to)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Vl(t.session,eo)&&Hl(t.multiFactorHint):t.session&&t.multiFactorUid?Vl(t.session,eo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),Wl()]}}),Gl(Ao.prototype,{v:{name:"toJSON",j:[Rl(null,!0)]}}),Gl(E.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Gl(qo.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Gl(Uo.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Gl(Qc.prototype,{toJSON:{name:"toJSON",j:[Rl(null,!0)]}}),Gl(Gc.prototype,{Pc:{name:"resolveSignIn",j:[Ul()]}}),Gl(th.prototype,{Ob:{name:"getSession",j:[]},dc:{name:"enroll",j:[Ul(),Rl("displayName",!0)]},$c:{name:"unenroll",j:[Bl({name:"multiFactorInfo",J:"a valid multiFactorInfo",optional:!1,K:Hl},Rl(),"multiFactorInfoIdentifier")]}}),Gl(Dl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Kl(di,"parseLink",Ei,[Rl("link")]),Kl(vl,"assertion",function(t){return new $c(t)},[jl("phone")]),function(){if(void 0===Xl.a||!Xl.a.INTERNAL||!Xl.a.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:ni,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ei,VERIFY_AND_CHANGE_EMAIL:ri,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:Yh,AuthCredential:no,Error:E};Kl(t,"EmailAuthProvider",Io,[]),Kl(t,"FacebookAuthProvider",po,[]),Kl(t,"GithubAuthProvider",yo,[]),Kl(t,"GoogleAuthProvider",mo,[]),Kl(t,"TwitterAuthProvider",bo,[]),Kl(t,"OAuthProvider",fo,[Rl("providerId")]),Kl(t,"SAMLAuthProvider",lo,[Rl("providerId")]),Kl(t,"PhoneAuthProvider",Do,[{name:"auth",J:"an instance of Firebase Auth",optional:!0,K:function(t){return!!(t&&t instanceof Yh)}}]),Kl(t,"RecaptchaVerifier",Dl,[Bl(Rl(),{name:"",J:"an HTML element",optional:!1,K:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Ll("recaptchaParameters",!0),{name:"app",J:"an instance of Firebase App",optional:!0,K:function(t){return!!(t&&t instanceof Xl.a.app.App)}}]),Kl(t,"ActionCodeURL",di,[]),Kl(t,"PhoneMultiFactorGenerator",vl,[]),Xl.a.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new Yh(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC"}),Xl.a.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:m((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:m(t.kc,t),addAuthTokenListener:m(t.bc,t),removeAuthTokenListener:m(t.Nc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),Xl.a.registerVersion("@firebase/auth","0.14.1"),Xl.a.INTERNAL.extendNamespace({User:hh})}()}).apply(void 0!==Yl?Yl:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})}.call(this,n(38))},430:function(Zr,ti,ei){"use strict";(function(u){Object.defineProperty(ti,"__esModule",{value:!0});var t,e=(t=ei(16))&&"object"==typeof t&&"default"in t?t.default:t,d=ei(431),b=ei(86),n=ei(152),r=ei(74),i=(o.prototype.set=function(t,e){null==e?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),b.stringify(e))},o.prototype.get=function(t){var e=this.domStorage_.getItem(this.prefixedName_(t));return null==e?null:b.jsonEval(e)},o.prototype.remove=function(t){this.domStorage_.removeItem(this.prefixedName_(t))},o.prototype.prefixedName_=function(t){return this.prefix_+t},o.prototype.toString=function(){return this.domStorage_.toString()},o);function o(t){this.domStorage_=t,this.prefix_="firebase:"}var s=(a.prototype.set=function(t,e){null==e?delete this.cache_[t]:this.cache_[t]=e},a.prototype.get=function(t){return b.contains(this.cache_,t)?this.cache_[t]:null},a.prototype.remove=function(t){delete this.cache_[t]},a);function a(){this.cache_={},this.isInMemoryStorage=!0}function c(t){try{if("undefined"!=typeof window&&void 0!==window[t]){var e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new i(e)}}catch(t){}return new s}function h(t){var e=b.stringToByteArray(t),n=new b.Sha1;n.update(e);var r=n.digest();return b.base64.encodeByteArray(r)}function l(t,e){b.assert(!e||!0===t||!1===t,"Can't turn on custom loggers persistently."),!0===t?(C.logLevel=n.LogLevel.VERBOSE,O=C.log.bind(C),e&&S.set("logging_enabled",!0)):"function"==typeof t?O=t:(O=null,S.remove("logging_enabled"))}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(!0===D&&(D=!1,null===O&&!0===S.get("logging_enabled")&&l(!0)),O){var n=N.apply(null,t);O(n)}}function p(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];f.apply(void 0,d.__spread([n],t))}}function v(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE INTERNAL ERROR: "+N.apply(void 0,d.__spread(t));C.error(n)}function y(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE FATAL ERROR: "+N.apply(void 0,d.__spread(t));throw C.error(n),new Error(n)}function g(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="FIREBASE WARNING: "+N.apply(void 0,d.__spread(t));C.warn(n)}function m(t){return"number"==typeof t&&(t!=t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)}function _(t,e){return t===e?0:t<e?-1:1}function w(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+b.stringify(e))}function E(t,e){var n=t.length;if(n<=e)return[t];for(var r=[],i=0;i<n;i+=e)n<i+e?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r}var T,I=c("localStorage"),S=c("sessionStorage"),C=new n.Logger("@firebase/database"),A=(T=1,function(){return T++}),N=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n="",r=0;r<t.length;r++){var i=t[r];Array.isArray(i)||i&&"object"==typeof i&&"number"==typeof i.length?n+=N.apply(null,i):n+="object"==typeof i?b.stringify(i):i,n+=" "}return n},O=null,D=!0,k="[MIN_NAME]",x="[MAX_NAME]",R=function(t,e){if(t===e)return 0;if(t===k||e===x)return-1;if(e===k||t===x)return 1;var n=q(t),r=q(e);return null!==n?null!==r?n-r==0?t.length-e.length:n-r:-1:null!==r?1:t<e?-1:1},P=function(t){if("object"!=typeof t||null===t)return b.stringify(t);var e=[];for(var n in t)e.push(n);e.sort();for(var r="{",i=0;i<e.length;i++)0!==i&&(r+=","),r+=b.stringify(e[i]),r+=":",r+=P(t[e[i]]);return r+="}"};function L(t,e){for(var n in t)t.hasOwnProperty(n)&&e(n,t[n])}function M(t){var e,n,r,i,o;b.assert(!m(t),"Invalid JSON number"),0===t?e=1/t==-1/(r=n=0)?1:0:(e=t<0,r=(t=Math.abs(t))>=Math.pow(2,-1022)?(n=(i=Math.min(Math.floor(Math.log(t)/Math.LN2),1023))+1023,Math.round(t*Math.pow(2,52-i)-Math.pow(2,52))):(n=0,Math.round(t/Math.pow(2,-1074))));var s=[];for(o=52;o;--o)s.push(r%2?1:0),r=Math.floor(r/2);for(o=11;o;--o)s.push(n%2?1:0),n=Math.floor(n/2);s.push(e?1:0),s.reverse();var a=s.join(""),u="";for(o=0;o<64;o+=8){var c=parseInt(a.substr(o,8),2).toString(16);1===c.length&&(c="0"+c),u+=c}return u.toLowerCase()}function F(t){try{t()}catch(e){setTimeout(function(){var t=e.stack||"";throw g("Exception was thrown by user callback.",t),e},Math.floor(0))}}function j(t,e){var n=setTimeout(t,e);return"object"==typeof n&&n.unref&&n.unref(),n}var U=new RegExp("^-?(0*)\\d{1,10}$"),q=function(t){if(U.test(t)){var e=Number(t);if(-2147483648<=e&&e<=2147483647)return e}return null},V=(Object.defineProperty(H,"Empty",{get:function(){return new H("")},enumerable:!0,configurable:!0}),H.prototype.getFront=function(){return this.pieceNum_>=this.pieces_.length?null:this.pieces_[this.pieceNum_]},H.prototype.getLength=function(){return this.pieces_.length-this.pieceNum_},H.prototype.popFront=function(){var t=this.pieceNum_;return t<this.pieces_.length&&t++,new H(this.pieces_,t)},H.prototype.getBack=function(){return this.pieceNum_<this.pieces_.length?this.pieces_[this.pieces_.length-1]:null},H.prototype.toString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+this.pieces_[e]);return t||"/"},H.prototype.toUrlEncodedString=function(){for(var t="",e=this.pieceNum_;e<this.pieces_.length;e++)""!==this.pieces_[e]&&(t+="/"+encodeURIComponent(String(this.pieces_[e])));return t||"/"},H.prototype.slice=function(t){return void 0===t&&(t=0),this.pieces_.slice(this.pieceNum_+t)},H.prototype.parent=function(){if(this.pieceNum_>=this.pieces_.length)return null;for(var t=[],e=this.pieceNum_;e<this.pieces_.length-1;e++)t.push(this.pieces_[e]);return new H(t,0)},H.prototype.child=function(t){for(var e=[],n=this.pieceNum_;n<this.pieces_.length;n++)e.push(this.pieces_[n]);if(t instanceof H)for(n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{var r=t.split("/");for(n=0;n<r.length;n++)0<r[n].length&&e.push(r[n])}return new H(e,0)},H.prototype.isEmpty=function(){return this.pieceNum_>=this.pieces_.length},H.relativePath=function(t,e){var n=t.getFront(),r=e.getFront();if(null===n)return e;if(n===r)return H.relativePath(t.popFront(),e.popFront());throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")},H.comparePaths=function(t,e){for(var n=t.slice(),r=e.slice(),i=0;i<n.length&&i<r.length;i++){var o=R(n[i],r[i]);if(0!==o)return o}return n.length===r.length?0:n.length<r.length?-1:1},H.prototype.equals=function(t){if(this.getLength()!==t.getLength())return!1;for(var e=this.pieceNum_,n=t.pieceNum_;e<=this.pieces_.length;e++,n++)if(this.pieces_[e]!==t.pieces_[n])return!1;return!0},H.prototype.contains=function(t){var e=this.pieceNum_,n=t.pieceNum_;if(this.getLength()>t.getLength())return!1;for(;e<this.pieces_.length;){if(this.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0},H);function H(t,e){if(void 0===e){this.pieces_=t.split("/");for(var n=0,r=0;r<this.pieces_.length;r++)0<this.pieces_[r].length&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}var W=(Object.defineProperty(B,"MAX_PATH_DEPTH",{get:function(){return 32},enumerable:!0,configurable:!0}),Object.defineProperty(B,"MAX_PATH_LENGTH_BYTES",{get:function(){return 768},enumerable:!0,configurable:!0}),B.prototype.push=function(t){0<this.parts_.length&&(this.byteLength_+=1),this.parts_.push(t),this.byteLength_+=b.stringLength(t),this.checkValid_()},B.prototype.pop=function(){var t=this.parts_.pop();this.byteLength_-=b.stringLength(t),0<this.parts_.length&&--this.byteLength_},B.prototype.checkValid_=function(){if(this.byteLength_>B.MAX_PATH_LENGTH_BYTES)throw new Error(this.errorPrefix_+"has a key path longer than "+B.MAX_PATH_LENGTH_BYTES+" bytes ("+this.byteLength_+").");if(this.parts_.length>B.MAX_PATH_DEPTH)throw new Error(this.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+B.MAX_PATH_DEPTH+") or object contains a cycle "+this.toErrorString())},B.prototype.toErrorString=function(){return 0===this.parts_.length?"":"in property '"+this.parts_.join(".")+"'"},B);function B(t,e){this.errorPrefix_=e,this.parts_=t.slice(),this.byteLength_=Math.max(1,this.parts_.length);for(var n=0;n<this.parts_.length;n++)this.byteLength_+=b.stringLength(this.parts_[n]);this.checkValid_()}var G="firebaseio.com",z="long_polling",K=(Q.prototype.needsQueryParam=function(){return this.host!==this.internalHost||this.isCustomHost()||this.includeNamespaceInQueryParams},Q.prototype.isCacheableHost=function(){return"s-"===this.internalHost.substr(0,2)},Q.prototype.isDemoHost=function(){return"firebaseio-demo.com"===this.domain},Q.prototype.isCustomHost=function(){return"firebaseio.com"!==this.domain&&"firebaseio-demo.com"!==this.domain},Q.prototype.updateHost=function(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&I.set("host:"+this.host,this.internalHost))},Q.prototype.connectionURL=function(t,e){var n;if(b.assert("string"==typeof t,"typeof type must == string"),b.assert("object"==typeof e,"typeof params must == object"),"websocket"===t)n=(this.secure?"wss://":"ws://")+this.internalHost+"/.ws?";else{if(t!==z)throw new Error("Unknown connection type: "+t);n=(this.secure?"https://":"http://")+this.internalHost+"/.lp?"}this.needsQueryParam()&&(e.ns=this.namespace);var r=[];return L(e,function(t,e){r.push(t+"="+e)}),n+r.join("&")},Q.prototype.toString=function(){var t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t},Q.prototype.toURLString=function(){return(this.secure?"https://":"http://")+this.host},Q);function Q(t,e,n,r,i,o){void 0===i&&(i=""),void 0===o&&(o=!1),this.secure=e,this.namespace=n,this.webSocketOnly=r,this.persistenceKey=i,this.includeNamespaceInQueryParams=o,this.host=t.toLowerCase(),this.domain=this.host.substr(this.host.indexOf(".")+1),this.internalHost=I.get("host:"+t)||this.host}function Y(t){var e=at(t),n=e.namespace;"firebase"===e.domain&&y(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),n&&"undefined"!==n||"localhost"===e.domain||y("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&g("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().");var r="ws"===e.scheme||"wss"===e.scheme;return{repoInfo:new K(e.host,e.secure,n,r,"",n!==e.subdomain),path:new V(e.pathString)}}function X(t){return"string"==typeof t&&0!==t.length&&!ut.test(t)}function J(t){return"string"==typeof t&&0!==t.length&&!ct.test(t)}function $(t){return null===t||"string"==typeof t||"number"==typeof t&&!m(t)||t&&"object"==typeof t&&b.contains(t,".sv")}function Z(t,e,n,r,i){i&&void 0===n||lt(b.errorPrefix(t,e,i),n,r)}function tt(t,e,n,r,i){if(!i||void 0!==n){var o=b.errorPrefix(t,e,i);if(!n||"object"!=typeof n||Array.isArray(n))throw new Error(o+" must be an object containing the children to replace.");var s=[];L(n,function(t,e){var n=new V(t);if(lt(o,e,r.child(n)),".priority"===n.getBack()&&!$(e))throw new Error(o+"contains an invalid value for '"+n.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(n)}),function(t,e){var n,r;for(n=0;n<e.length;n++)for(var i=(r=e[n]).slice(),o=0;o<i.length;o++)if((".priority"!==i[o]||o!==i.length-1)&&!X(i[o]))throw new Error(t+"contains an invalid key ("+i[o]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');e.sort(V.comparePaths);var s=null;for(n=0;n<e.length;n++){if(r=e[n],null!==s&&s.contains(r))throw new Error(t+"contains a path "+s.toString()+" that is ancestor of another path "+r.toString());s=r}}(o,s)}}function et(t,e,n,r){if(!r||void 0!==n){if(m(n))throw new Error(b.errorPrefix(t,e,r)+"is "+n.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!$(n))throw new Error(b.errorPrefix(t,e,r)+"must be a valid Firebase priority (a string, finite number, server value, or null).")}}function nt(t,e,n,r){if(!r||void 0!==n)switch(n){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(b.errorPrefix(t,e,r)+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}function rt(t,e,n,r){if(!(r&&void 0===n||X(n)))throw new Error(b.errorPrefix(t,e,r)+'was an invalid key = "'+n+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')}function it(t,e,n,r){if(!(r&&void 0===n||J(n)))throw new Error(b.errorPrefix(t,e,r)+'was an invalid path = "'+n+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')}function ot(t,e){if(".info"===e.getFront())throw new Error(t+" failed = Can't modify data under /.info/")}function st(t,e,n){var r,i=n.path.toString();if("string"!=typeof n.repoInfo.host||0===n.repoInfo.host.length||!X(n.repoInfo.namespace)&&"localhost"!==n.repoInfo.host.split(":")[0]||0!==i.length&&(r=(r=i)&&r.replace(/^\/*\.info(\/|$)/,"/"),!J(r)))throw new Error(b.errorPrefix(t,e,!1)+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')}var at=function(t){var e="",n="",r="",i="",o="",s=!0,a="https",u=443;if("string"==typeof t){var c=t.indexOf("//");0<=c&&(a=t.substring(0,c-1),t=t.substring(c+2));var h=t.indexOf("/");-1===h&&(h=t.length);var l=t.indexOf("?");-1===l&&(l=t.length),e=t.substring(0,Math.min(h,l)),h<l&&(i=function(t){for(var e="",n=t.split("/"),r=0;r<n.length;r++)if(0<n[r].length){var i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch(t){}e+="/"+i}return e}(t.substring(h,l)));var f=function(t){var e,n,r={};"?"===t.charAt(0)&&(t=t.substring(1));try{for(var i=d.__values(t.split("&")),o=i.next();!o.done;o=i.next()){var s=o.value;if(0!==s.length){var a=s.split("=");2===a.length?r[decodeURIComponent(a[0])]=decodeURIComponent(a[1]):g("Invalid query segment '"+s+"' in query '"+t+"'")}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}(t.substring(Math.min(t.length,l)));0<=(c=e.indexOf(":"))?(s="https"===a||"wss"===a,u=parseInt(e.substring(c+1),10)):c=t.length;var p=e.split(".");3===p.length?(n=p[1],o=r=p[0].toLowerCase()):2===p.length?n=p[0]:"localhost"===p[0].slice(0,c).toLowerCase()&&(n="localhost"),"ns"in f&&(o=f.ns)}return{host:e,port:u,domain:n,subdomain:r,secure:s,scheme:a,pathString:i,namespace:o}},ut=/[\[\].#$\/\u0000-\u001F\u007F]/,ct=/[\[\].#$\u0000-\u001F\u007F]/,ht=10485760,lt=function(n,t,e){var r=e instanceof V?new W(e,n):e;if(void 0===t)throw new Error(n+"contains undefined "+r.toErrorString());if("function"==typeof t)throw new Error(n+"contains a function "+r.toErrorString()+" with contents = "+t.toString());if(m(t))throw new Error(n+"contains "+t.toString()+" "+r.toErrorString());if("string"==typeof t&&t.length>ht/3&&b.stringLength(t)>ht)throw new Error(n+"contains a string greater than "+ht+" utf8 bytes "+r.toErrorString()+" ('"+t.substring(0,50)+"...')");if(t&&"object"==typeof t){var i=!1,o=!1;if(L(t,function(t,e){if(".value"===t)i=!0;else if(".priority"!==t&&".sv"!==t&&(o=!0,!X(t)))throw new Error(n+" contains an invalid key ("+t+") "+r.toErrorString()+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');r.push(t),lt(n,e,r),r.pop()}),i&&o)throw new Error(n+' contains ".value" child '+r.toErrorString()+" in addition to actual children.")}},ft=(pt.prototype.cancel=function(t){b.validateArgCount("OnDisconnect.cancel",0,1,arguments.length),b.validateCallback("OnDisconnect.cancel",1,t,!0);var e=new b.Deferred;return this.repo_.onDisconnectCancel(this.path_,e.wrapCallback(t)),e.promise},pt.prototype.remove=function(t){b.validateArgCount("OnDisconnect.remove",0,1,arguments.length),ot("OnDisconnect.remove",this.path_),b.validateCallback("OnDisconnect.remove",1,t,!0);var e=new b.Deferred;return this.repo_.onDisconnectSet(this.path_,null,e.wrapCallback(t)),e.promise},pt.prototype.set=function(t,e){b.validateArgCount("OnDisconnect.set",1,2,arguments.length),ot("OnDisconnect.set",this.path_),Z("OnDisconnect.set",1,t,this.path_,!1),b.validateCallback("OnDisconnect.set",2,e,!0);var n=new b.Deferred;return this.repo_.onDisconnectSet(this.path_,t,n.wrapCallback(e)),n.promise},pt.prototype.setWithPriority=function(t,e,n){b.validateArgCount("OnDisconnect.setWithPriority",2,3,arguments.length),ot("OnDisconnect.setWithPriority",this.path_),Z("OnDisconnect.setWithPriority",1,t,this.path_,!1),et("OnDisconnect.setWithPriority",2,e,!1),b.validateCallback("OnDisconnect.setWithPriority",3,n,!0);var r=new b.Deferred;return this.repo_.onDisconnectSetWithPriority(this.path_,t,e,r.wrapCallback(n)),r.promise},pt.prototype.update=function(t,e){if(b.validateArgCount("OnDisconnect.update",1,2,arguments.length),ot("OnDisconnect.update",this.path_),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,g("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tt("OnDisconnect.update",1,t,this.path_,!1),b.validateCallback("OnDisconnect.update",2,e,!0);var i=new b.Deferred;return this.repo_.onDisconnectUpdate(this.path_,t,i.wrapCallback(e)),i.promise},pt);function pt(t,e){this.repo_=t,this.path_=e}var dt=(vt.prototype.toJSON=function(){return b.validateArgCount("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}},vt);function vt(t,e){this.committed=t,this.snapshot=e}var yt,gt,mt,_t=(yt="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",gt=0,mt=[],function(t){var e,n=t===gt;gt=t;var r=new Array(8);for(e=7;0<=e;e--)r[e]=yt.charAt(t%64),t=Math.floor(t/64);b.assert(0===t,"Cannot push at time == 0");var i=r.join("");if(n){for(e=11;0<=e&&63===mt[e];e--)mt[e]=0;mt[e]++}else for(e=0;e<12;e++)mt[e]=Math.floor(64*Math.random());for(e=0;e<12;e++)i+=yt.charAt(mt[e]);return b.assert(20===i.length,"nextPushId: Length should be 20."),i}),bt=(wt.Wrap=function(t,e){return new wt(t,e)},wt);function wt(t,e){this.name=t,this.node=e}var Et,Tt=(It.prototype.getCompare=function(){return this.compare.bind(this)},It.prototype.indexedValueChanged=function(t,e){var n=new bt(k,t),r=new bt(k,e);return 0!==this.compare(n,r)},It.prototype.minPost=function(){return bt.MIN},It);function It(){}var St,Ct=(St=Tt,d.__extends(At,St),Object.defineProperty(At,"__EMPTY_NODE",{get:function(){return Et},set:function(t){Et=t},enumerable:!0,configurable:!0}),At.prototype.compare=function(t,e){return R(t.name,e.name)},At.prototype.isDefinedOn=function(t){throw b.assertionError("KeyIndex.isDefinedOn not expected to be called.")},At.prototype.indexedValueChanged=function(t,e){return!1},At.prototype.minPost=function(){return bt.MIN},At.prototype.maxPost=function(){return new bt(x,Et)},At.prototype.makePost=function(t,e){return b.assert("string"==typeof t,"KeyIndex indexValue must always be a string."),new bt(t,Et)},At.prototype.toString=function(){return".key"},At);function At(){return null!==St&&St.apply(this,arguments)||this}var Nt,Ot=new Ct;function Dt(t){return"number"==typeof t?"number:"+M(t):"string:"+t}function kt(t){if(t.isLeafNode()){var e=t.val();b.assert("string"==typeof e||"number"==typeof e||"object"==typeof e&&b.contains(e,".sv"),"Priority must be a string or number.")}else b.assert(t===Nt||t.isEmpty(),"priority of unexpected type.");b.assert(t===Nt||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")}var xt,Rt,Pt,Lt,Mt=(Object.defineProperty(Ft,"__childrenNodeConstructor",{get:function(){return xt},set:function(t){xt=t},enumerable:!0,configurable:!0}),Ft.prototype.isLeafNode=function(){return!0},Ft.prototype.getPriority=function(){return this.priorityNode_},Ft.prototype.updatePriority=function(t){return new Ft(this.value_,t)},Ft.prototype.getImmediateChild=function(t){return".priority"===t?this.priorityNode_:Ft.__childrenNodeConstructor.EMPTY_NODE},Ft.prototype.getChild=function(t){return t.isEmpty()?this:".priority"===t.getFront()?this.priorityNode_:Ft.__childrenNodeConstructor.EMPTY_NODE},Ft.prototype.hasChild=function(){return!1},Ft.prototype.getPredecessorChildName=function(t,e){return null},Ft.prototype.updateImmediateChild=function(t,e){return".priority"===t?this.updatePriority(e):e.isEmpty()&&".priority"!==t?this:Ft.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,e).updatePriority(this.priorityNode_)},Ft.prototype.updateChild=function(t,e){var n=t.getFront();return null===n?e:e.isEmpty()&&".priority"!==n?this:(b.assert(".priority"!==n||1===t.getLength(),".priority must be the last token in a path"),this.updateImmediateChild(n,Ft.__childrenNodeConstructor.EMPTY_NODE.updateChild(t.popFront(),e)))},Ft.prototype.isEmpty=function(){return!1},Ft.prototype.numChildren=function(){return 0},Ft.prototype.forEachChild=function(t,e){return!1},Ft.prototype.val=function(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()},Ft.prototype.hash=function(){if(null===this.lazyHash_){var t="";this.priorityNode_.isEmpty()||(t+="priority:"+Dt(this.priorityNode_.val())+":");var e=typeof this.value_;t+=e+":",t+="number"==e?M(this.value_):this.value_,this.lazyHash_=h(t)}return this.lazyHash_},Ft.prototype.getValue=function(){return this.value_},Ft.prototype.compareTo=function(t){return t===Ft.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof Ft.__childrenNodeConstructor?-1:(b.assert(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))},Ft.prototype.compareToLeafNode_=function(t){var e=typeof t.value_,n=typeof this.value_,r=Ft.VALUE_TYPE_ORDER.indexOf(e),i=Ft.VALUE_TYPE_ORDER.indexOf(n);return b.assert(0<=r,"Unknown leaf type: "+e),b.assert(0<=i,"Unknown leaf type: "+n),r===i?"object"==n?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:i-r},Ft.prototype.withIndex=function(){return this},Ft.prototype.isIndexed=function(){return!0},Ft.prototype.equals=function(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))},Ft.VALUE_TYPE_ORDER=["object","boolean","number","string"],Ft);function Ft(t,e){void 0===e&&(e=Ft.__childrenNodeConstructor.EMPTY_NODE),this.value_=t,this.priorityNode_=e,this.lazyHash_=null,b.assert(void 0!==this.value_&&null!==this.value_,"LeafNode shouldn't be created with null/undefined value."),kt(this.priorityNode_)}function jt(){return null!==Lt&&Lt.apply(this,arguments)||this}var Ut=new(Lt=Tt,d.__extends(jt,Lt),jt.prototype.compare=function(t,e){var n=t.node.getPriority(),r=e.node.getPriority(),i=n.compareTo(r);return 0===i?R(t.name,e.name):i},jt.prototype.isDefinedOn=function(t){return!t.getPriority().isEmpty()},jt.prototype.indexedValueChanged=function(t,e){return!t.getPriority().equals(e.getPriority())},jt.prototype.minPost=function(){return bt.MIN},jt.prototype.maxPost=function(){return new bt(x,new Mt("[PRIORITY-POST]",Pt))},jt.prototype.makePost=function(t,e){var n=Rt(t);return new bt(e,new Mt("[PRIORITY-POST]",n))},jt.prototype.toString=function(){return".priority"},jt),qt=(Vt.prototype.getNext=function(){if(0===this.nodeStack_.length)return null;var t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t},Vt.prototype.hasNext=function(){return 0<this.nodeStack_.length},Vt.prototype.peek=function(){if(0===this.nodeStack_.length)return null;var t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}},Vt);function Vt(t,e,n,r,i){void 0===i&&(i=null),this.isReverse_=r,this.resultGenerator_=i,this.nodeStack_=[];for(var o=1;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)t=this.isReverse_?t.left:t.right;else{if(0===o){this.nodeStack_.push(t);break}this.nodeStack_.push(t),t=this.isReverse_?t.right:t.left}}var Ht=(Wt.prototype.copy=function(t,e,n,r,i){return new Wt(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Wt.prototype.count=function(){return this.left.count()+1+this.right.count()},Wt.prototype.isEmpty=function(){return!1},Wt.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)},Wt.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},Wt.prototype.min_=function(){return this.left.isEmpty()?this:this.left.min_()},Wt.prototype.minKey=function(){return this.min_().key},Wt.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},Wt.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp_()},Wt.prototype.removeMin_=function(){if(this.left.isEmpty())return zt.EMPTY_NODE;var t=this;return t.left.isRed_()||t.left.left.isRed_()||(t=t.moveRedLeft_()),(t=t.copy(null,null,null,t.left.removeMin_(),null)).fixUp_()},Wt.prototype.remove=function(t,e){var n,r;if(e(t,(n=this).key)<0)n.left.isEmpty()||n.left.isRed_()||n.left.left.isRed_()||(n=n.moveRedLeft_()),n=n.copy(null,null,null,n.left.remove(t,e),null);else{if(n.left.isRed_()&&(n=n.rotateRight_()),n.right.isEmpty()||n.right.isRed_()||n.right.left.isRed_()||(n=n.moveRedRight_()),0===e(t,n.key)){if(n.right.isEmpty())return zt.EMPTY_NODE;r=n.right.min_(),n=n.copy(r.key,r.value,null,null,n.right.removeMin_())}n=n.copy(null,null,null,null,n.right.remove(t,e))}return n.fixUp_()},Wt.prototype.isRed_=function(){return this.color},Wt.prototype.fixUp_=function(){var t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t},Wt.prototype.moveRedLeft_=function(){var t=this.colorFlip_();return t.right.left.isRed_()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight_())).rotateLeft_()).colorFlip_()),t},Wt.prototype.moveRedRight_=function(){var t=this.colorFlip_();return t.left.left.isRed_()&&(t=(t=t.rotateRight_()).colorFlip_()),t},Wt.prototype.rotateLeft_=function(){var t=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Wt.prototype.rotateRight_=function(){var t=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Wt.prototype.colorFlip_=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Wt.prototype.checkMaxDepth_=function(){var t=this.check_();return Math.pow(2,t)<=this.count()+1},Wt.prototype.check_=function(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");var t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)},Wt.RED=!0,Wt.BLACK=!1,Wt);function Wt(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Wt.RED,this.left=null!=r?r:zt.EMPTY_NODE,this.right=null!=i?i:zt.EMPTY_NODE}var Bt=(Gt.prototype.copy=function(t,e,n,r,i){return this},Gt.prototype.insert=function(t,e,n){return new Ht(t,e,null)},Gt.prototype.remove=function(t,e){return this},Gt.prototype.count=function(){return 0},Gt.prototype.isEmpty=function(){return!0},Gt.prototype.inorderTraversal=function(t){return!1},Gt.prototype.reverseTraversal=function(t){return!1},Gt.prototype.minKey=function(){return null},Gt.prototype.maxKey=function(){return null},Gt.prototype.check_=function(){return 0},Gt.prototype.isRed_=function(){return!1},Gt);function Gt(){}var zt=(Kt.prototype.insert=function(t,e){return new Kt(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Ht.BLACK,null,null))},Kt.prototype.remove=function(t){return new Kt(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Ht.BLACK,null,null))},Kt.prototype.get=function(t){for(var e,n=this.root_;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key)))return n.value;e<0?n=n.left:0<e&&(n=n.right)}return null},Kt.prototype.getPredecessorKey=function(t){for(var e,n=this.root_,r=null;!n.isEmpty();){if(0===(e=this.comparator_(t,n.key))){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}e<0?n=n.left:0<e&&(n=(r=n).right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")},Kt.prototype.isEmpty=function(){return this.root_.isEmpty()},Kt.prototype.count=function(){return this.root_.count()},Kt.prototype.minKey=function(){return this.root_.minKey()},Kt.prototype.maxKey=function(){return this.root_.maxKey()},Kt.prototype.inorderTraversal=function(t){return this.root_.inorderTraversal(t)},Kt.prototype.reverseTraversal=function(t){return this.root_.reverseTraversal(t)},Kt.prototype.getIterator=function(t){return new qt(this.root_,null,this.comparator_,!1,t)},Kt.prototype.getIteratorFrom=function(t,e){return new qt(this.root_,t,this.comparator_,!1,e)},Kt.prototype.getReverseIteratorFrom=function(t,e){return new qt(this.root_,t,this.comparator_,!0,e)},Kt.prototype.getReverseIterator=function(t){return new qt(this.root_,null,this.comparator_,!0,t)},Kt.EMPTY_NODE=new Bt,Kt);function Kt(t,e){void 0===e&&(e=Kt.EMPTY_NODE),this.comparator_=t,this.root_=e}var Qt=Math.log(2),Yt=(Xt.prototype.nextBitIsOne=function(){var t=!(this.bits_&1<<this.current_);return this.current_--,t},Xt);function Xt(t){var e;this.count=(e=t+1,parseInt(Math.log(e)/Qt,10)),this.current_=this.count-1;var n,r=(n=this.count,parseInt(Array(n+1).join("1"),2));this.bits_=t+1&r}var Jt,$t,Zt=function(c,t,h,e){c.sort(t);var l=function(t,e){var n,r,i=e-t;if(0==i)return null;if(1==i)return n=c[t],r=h?h(n):n,new Ht(r,n.node,Ht.BLACK,null,null);var o=parseInt(i/2,10)+t,s=l(t,o),a=l(o+1,e);return n=c[o],r=h?h(n):n,new Ht(r,n.node,Ht.BLACK,s,a)},n=function(t){for(var e=null,n=null,a=c.length,r=function(t,e){var n=a-t,r=a;a-=t;var i=l(1+n,r),o=c[n],s=h?h(o):o;u(new Ht(s,o.node,e,null,i))},u=function(t){e=e?e.left=t:n=t},i=0;i<t.count;++i){var o=t.nextBitIsOne(),s=Math.pow(2,t.count-(i+1));o?r(s,Ht.BLACK):(r(s,Ht.BLACK),r(s,Ht.RED))}return n}(new Yt(c.length));return new zt(e||t,n)},te={},ee=(Object.defineProperty(ne,"Default",{get:function(){return b.assert(Ut,"ChildrenNode.ts has not been loaded"),Jt=Jt||new ne({".priority":te},{".priority":Ut})},enumerable:!0,configurable:!0}),ne.prototype.get=function(t){var e=b.safeGet(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof zt?e:null},ne.prototype.hasIndex=function(t){return b.contains(this.indexSet_,t.toString())},ne.prototype.addIndex=function(t,e){b.assert(t!==Ot,"KeyIndex always exists and isn't meant to be added to the IndexMap.");for(var n,r=[],i=!1,o=e.getIterator(bt.Wrap),s=o.getNext();s;)i=i||t.isDefinedOn(s.node),r.push(s),s=o.getNext();n=i?Zt(r,t.getCompare()):te;var a=t.toString(),u=d.__assign({},this.indexSet_);u[a]=t;var c=d.__assign({},this.indexes_);return c[a]=n,new ne(c,u)},ne.prototype.addToIndexes=function(u,c){var h=this;return new ne(b.map(this.indexes_,function(t,e){var n=b.safeGet(h.indexSet_,e);if(b.assert(n,"Missing index implementation for "+e),t===te){if(n.isDefinedOn(u.node)){for(var r=[],i=c.getIterator(bt.Wrap),o=i.getNext();o;)o.name!==u.name&&r.push(o),o=i.getNext();return r.push(u),Zt(r,n.getCompare())}return te}var s=c.get(u.name),a=t;return s&&(a=a.remove(new bt(u.name,s))),a.insert(u,u.node)}),this.indexSet_)},ne.prototype.removeFromIndexes=function(n,r){return new ne(b.map(this.indexes_,function(t){if(t===te)return t;var e=r.get(n.name);return e?t.remove(new bt(n.name,e)):t}),this.indexSet_)},ne);function ne(t,e){this.indexes_=t,this.indexSet_=e}function re(t,e){return R(t.name,e.name)}function ie(t,e){return R(t,e)}var oe,se=(Object.defineProperty(ae,"EMPTY_NODE",{get:function(){return $t=$t||new ae(new zt(ie),null,ee.Default)},enumerable:!0,configurable:!0}),ae.prototype.isLeafNode=function(){return!1},ae.prototype.getPriority=function(){return this.priorityNode_||$t},ae.prototype.updatePriority=function(t){return this.children_.isEmpty()?this:new ae(this.children_,t,this.indexMap_)},ae.prototype.getImmediateChild=function(t){if(".priority"===t)return this.getPriority();var e=this.children_.get(t);return null===e?$t:e},ae.prototype.getChild=function(t){var e=t.getFront();return null===e?this:this.getImmediateChild(e).getChild(t.popFront())},ae.prototype.hasChild=function(t){return null!==this.children_.get(t)},ae.prototype.updateImmediateChild=function(t,e){if(b.assert(e,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(e);var n=new bt(t,e),r=void 0,i=void 0;i=e.isEmpty()?(r=this.children_.remove(t),this.indexMap_.removeFromIndexes(n,this.children_)):(r=this.children_.insert(t,e),this.indexMap_.addToIndexes(n,this.children_));var o=r.isEmpty()?$t:this.priorityNode_;return new ae(r,o,i)},ae.prototype.updateChild=function(t,e){var n=t.getFront();if(null===n)return e;b.assert(".priority"!==t.getFront()||1===t.getLength(),".priority must be the last token in a path");var r=this.getImmediateChild(n).updateChild(t.popFront(),e);return this.updateImmediateChild(n,r)},ae.prototype.isEmpty=function(){return this.children_.isEmpty()},ae.prototype.numChildren=function(){return this.children_.count()},ae.prototype.val=function(n){if(this.isEmpty())return null;var r={},i=0,o=0,s=!0;if(this.forEachChild(Ut,function(t,e){r[t]=e.val(n),i++,s&&ae.INTEGER_REGEXP_.test(t)?o=Math.max(o,Number(t)):s=!1}),!n&&s&&o<2*i){var t=[];for(var e in r)t[e]=r[e];return t}return n&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r},ae.prototype.hash=function(){if(null===this.lazyHash_){var r="";this.getPriority().isEmpty()||(r+="priority:"+Dt(this.getPriority().val())+":"),this.forEachChild(Ut,function(t,e){var n=e.hash();""!==n&&(r+=":"+t+":"+n)}),this.lazyHash_=""===r?"":h(r)}return this.lazyHash_},ae.prototype.getPredecessorChildName=function(t,e,n){var r=this.resolveIndex_(n);if(r){var i=r.getPredecessorKey(new bt(t,e));return i?i.name:null}return this.children_.getPredecessorKey(t)},ae.prototype.getFirstChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.minKey();return n&&n.name}return this.children_.minKey()},ae.prototype.getFirstChild=function(t){var e=this.getFirstChildName(t);return e?new bt(e,this.children_.get(e)):null},ae.prototype.getLastChildName=function(t){var e=this.resolveIndex_(t);if(e){var n=e.maxKey();return n&&n.name}return this.children_.maxKey()},ae.prototype.getLastChild=function(t){var e=this.getLastChildName(t);return e?new bt(e,this.children_.get(e)):null},ae.prototype.forEachChild=function(t,e){var n=this.resolveIndex_(t);return n?n.inorderTraversal(function(t){return e(t.name,t.node)}):this.children_.inorderTraversal(e)},ae.prototype.getIterator=function(t){return this.getIteratorFrom(t.minPost(),t)},ae.prototype.getIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getIteratorFrom(t,function(t){return t});for(var r=this.children_.getIteratorFrom(t.name,bt.Wrap),i=r.peek();null!=i&&e.compare(i,t)<0;)r.getNext(),i=r.peek();return r},ae.prototype.getReverseIterator=function(t){return this.getReverseIteratorFrom(t.maxPost(),t)},ae.prototype.getReverseIteratorFrom=function(t,e){var n=this.resolveIndex_(e);if(n)return n.getReverseIteratorFrom(t,function(t){return t});for(var r=this.children_.getReverseIteratorFrom(t.name,bt.Wrap),i=r.peek();null!=i&&0<e.compare(i,t);)r.getNext(),i=r.peek();return r},ae.prototype.compareTo=function(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===ce?-1:0},ae.prototype.withIndex=function(t){if(t===Ot||this.indexMap_.hasIndex(t))return this;var e=this.indexMap_.addIndex(t,this.children_);return new ae(this.children_,this.priorityNode_,e)},ae.prototype.isIndexed=function(t){return t===Ot||this.indexMap_.hasIndex(t)},ae.prototype.equals=function(t){if(t===this)return!0;if(t.isLeafNode())return!1;var e=t;if(this.getPriority().equals(e.getPriority())){if(this.children_.count()!==e.children_.count())return!1;for(var n=this.getIterator(Ut),r=e.getIterator(Ut),i=n.getNext(),o=r.getNext();i&&o;){if(i.name!==o.name||!i.node.equals(o.node))return!1;i=n.getNext(),o=r.getNext()}return null===i&&null===o}return!1},ae.prototype.resolveIndex_=function(t){return t===Ot?null:this.indexMap_.get(t.toString())},ae.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,ae);function ae(t,e,n){this.children_=t,this.priorityNode_=e,this.indexMap_=n,this.lazyHash_=null,this.priorityNode_&&kt(this.priorityNode_),this.children_.isEmpty()&&b.assert(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}function ue(){return oe.call(this,new zt(ie),se.EMPTY_NODE,ee.Default)||this}var ce=new(oe=se,d.__extends(ue,oe),ue.prototype.compareTo=function(t){return t===this?0:1},ue.prototype.equals=function(t){return t===this},ue.prototype.getPriority=function(){return this},ue.prototype.getImmediateChild=function(t){return se.EMPTY_NODE},ue.prototype.isEmpty=function(){return!1},ue);Object.defineProperties(bt,{MIN:{value:new bt(k,se.EMPTY_NODE)},MAX:{value:new bt(x,ce)}}),Ct.__EMPTY_NODE=se.EMPTY_NODE,Mt.__childrenNodeConstructor=se,Nt=ce,Pt=ce;var he,le=!0;function fe(r,t){if(void 0===t&&(t=null),null===r)return se.EMPTY_NODE;if("object"==typeof r&&".priority"in r&&(t=r[".priority"]),b.assert(null===t||"string"==typeof t||"number"==typeof t||"object"==typeof t&&".sv"in t,"Invalid priority type found: "+typeof t),"object"==typeof r&&".value"in r&&null!==r[".value"]&&(r=r[".value"]),"object"!=typeof r||".sv"in r)return new Mt(r,fe(t));if(r instanceof Array||!le){var i=se.EMPTY_NODE;return L(r,function(t,e){if(b.contains(r,t)&&"."!==t.substring(0,1)){var n=fe(e);!n.isLeafNode()&&n.isEmpty()||(i=i.updateImmediateChild(t,n))}}),i.updatePriority(fe(t))}var o=[],s=!1;if(L(r,function(t,e){if("."!==t.substring(0,1)){var n=fe(e);n.isEmpty()||(s=s||!n.getPriority().isEmpty(),o.push(new bt(t,n)))}}),0===o.length)return se.EMPTY_NODE;var e=Zt(o,re,function(t){return t.name},ie);if(s){var n=Zt(o,Ut.getCompare());return new se(e,fe(t),new ee({".priority":n},{".priority":Ut}))}return new se(e,fe(t),ee.Default)}function pe(){return null!==he&&he.apply(this,arguments)||this}Rt=fe;var de,ve=new(he=Tt,d.__extends(pe,he),pe.prototype.compare=function(t,e){var n=t.node.compareTo(e.node);return 0===n?R(t.name,e.name):n},pe.prototype.isDefinedOn=function(t){return!0},pe.prototype.indexedValueChanged=function(t,e){return!t.equals(e)},pe.prototype.minPost=function(){return bt.MIN},pe.prototype.maxPost=function(){return bt.MAX},pe.prototype.makePost=function(t,e){var n=fe(t);return new bt(e,n)},pe.prototype.toString=function(){return".value"},pe),ye=(de=Tt,d.__extends(ge,de),ge.prototype.extractChild=function(t){return t.getChild(this.indexPath_)},ge.prototype.isDefinedOn=function(t){return!t.getChild(this.indexPath_).isEmpty()},ge.prototype.compare=function(t,e){var n=this.extractChild(t.node),r=this.extractChild(e.node),i=n.compareTo(r);return 0===i?R(t.name,e.name):i},ge.prototype.makePost=function(t,e){var n=fe(t),r=se.EMPTY_NODE.updateChild(this.indexPath_,n);return new bt(e,r)},ge.prototype.maxPost=function(){var t=se.EMPTY_NODE.updateChild(this.indexPath_,ce);return new bt(x,t)},ge.prototype.toString=function(){return this.indexPath_.slice().join("/")},ge);function ge(t){var e=de.call(this)||this;return e.indexPath_=t,b.assert(!t.isEmpty()&&".priority"!==t.getFront(),"Can't create PathIndex with empty path or .priority key"),e}var me=(_e.prototype.val=function(){return b.validateArgCount("DataSnapshot.val",0,0,arguments.length),this.node_.val()},_e.prototype.exportVal=function(){return b.validateArgCount("DataSnapshot.exportVal",0,0,arguments.length),this.node_.val(!0)},_e.prototype.toJSON=function(){return b.validateArgCount("DataSnapshot.toJSON",0,1,arguments.length),this.exportVal()},_e.prototype.exists=function(){return b.validateArgCount("DataSnapshot.exists",0,0,arguments.length),!this.node_.isEmpty()},_e.prototype.child=function(t){b.validateArgCount("DataSnapshot.child",0,1,arguments.length),t=String(t),it("DataSnapshot.child",1,t,!1);var e=new V(t),n=this.ref_.child(e);return new _e(this.node_.getChild(e),n,Ut)},_e.prototype.hasChild=function(t){b.validateArgCount("DataSnapshot.hasChild",1,1,arguments.length),it("DataSnapshot.hasChild",1,t,!1);var e=new V(t);return!this.node_.getChild(e).isEmpty()},_e.prototype.getPriority=function(){return b.validateArgCount("DataSnapshot.getPriority",0,0,arguments.length),this.node_.getPriority().val()},_e.prototype.forEach=function(n){var r=this;return b.validateArgCount("DataSnapshot.forEach",1,1,arguments.length),b.validateCallback("DataSnapshot.forEach",1,n,!1),!this.node_.isLeafNode()&&!!this.node_.forEachChild(this.index_,function(t,e){return n(new _e(e,r.ref_.child(t),Ut))})},_e.prototype.hasChildren=function(){return b.validateArgCount("DataSnapshot.hasChildren",0,0,arguments.length),!this.node_.isLeafNode()&&!this.node_.isEmpty()},Object.defineProperty(_e.prototype,"key",{get:function(){return this.ref_.getKey()},enumerable:!0,configurable:!0}),_e.prototype.numChildren=function(){return b.validateArgCount("DataSnapshot.numChildren",0,0,arguments.length),this.node_.numChildren()},_e.prototype.getRef=function(){return b.validateArgCount("DataSnapshot.ref",0,0,arguments.length),this.ref_},Object.defineProperty(_e.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),_e);function _e(t,e,n){this.node_=t,this.ref_=e,this.index_=n}var be=(we.prototype.getPath=function(){var t=this.snapshot.getRef();return"value"===this.eventType?t.path:t.getParent().path},we.prototype.getEventType=function(){return this.eventType},we.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},we.prototype.toString=function(){return this.getPath().toString()+":"+this.eventType+":"+b.stringify(this.snapshot.exportVal())},we);function we(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}var Ee=(Te.prototype.getPath=function(){return this.path},Te.prototype.getEventType=function(){return"cancel"},Te.prototype.getEventRunner=function(){return this.eventRegistration.getEventRunner(this)},Te.prototype.toString=function(){return this.path.toString()+":cancel"},Te);function Te(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}var Ie=(Se.prototype.respondsTo=function(t){return"value"===t},Se.prototype.createEvent=function(t,e){var n=e.getQueryParams().getIndex();return new be("value",this,new me(t.snapshotNode,e.getRef(),n))},Se.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){b.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callback_;return function(){r.call(e,t.snapshot)}},Se.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ee(this,t,e):null},Se.prototype.matches=function(t){return t instanceof Se&&(!t.callback_||!this.callback_||t.callback_===this.callback_&&t.context_===this.context_)},Se.prototype.hasAnyCallback=function(){return null!==this.callback_},Se);function Se(t,e,n){this.callback_=t,this.cancelCallback_=e,this.context_=n}var Ce,Ae=(Ne.prototype.respondsTo=function(t){var e="children_added"===t?"child_added":t;return e="children_removed"===e?"child_removed":e,b.contains(this.callbacks_,e)},Ne.prototype.createCancelEvent=function(t,e){return this.cancelCallback_?new Ee(this,t,e):null},Ne.prototype.createEvent=function(t,e){b.assert(null!=t.childName,"Child events should have a childName.");var n=e.getRef().child(t.childName),r=e.getQueryParams().getIndex();return new be(t.type,this,new me(t.snapshotNode,n,r),t.prevName)},Ne.prototype.getEventRunner=function(t){var e=this.context_;if("cancel"===t.getEventType()){b.assert(this.cancelCallback_,"Raising a cancel event on a listener with no cancel callback");var n=this.cancelCallback_;return function(){n.call(e,t.error)}}var r=this.callbacks_[t.eventType];return function(){r.call(e,t.snapshot,t.prevName)}},Ne.prototype.matches=function(e){var n=this;if(e instanceof Ne){if(!this.callbacks_||!e.callbacks_)return!0;if(this.context_===e.context_){var t=Object.keys(e.callbacks_),r=Object.keys(this.callbacks_),i=t.length;if(i===r.length){if(1!==i)return r.every(function(t){return e.callbacks_[t]===n.callbacks_[t]});var o=t[0],s=r[0];return!(s!==o||e.callbacks_[o]&&this.callbacks_[s]&&e.callbacks_[o]!==this.callbacks_[s])}}}return!1},Ne.prototype.hasAnyCallback=function(){return null!==this.callbacks_},Ne);function Ne(t,e,n){this.callbacks_=t,this.cancelCallback_=e,this.context_=n}var Oe=(Object.defineProperty(De,"__referenceConstructor",{get:function(){return b.assert(Ce,"Reference.ts has not been loaded"),Ce},set:function(t){Ce=t},enumerable:!0,configurable:!0}),De.validateQueryEndpoints_=function(t){var e=null,n=null;if(t.hasStart()&&(e=t.getIndexStartValue()),t.hasEnd()&&(n=t.getIndexEndValue()),t.getIndex()===Ot){var r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), endAt(),or equalTo() must be a string.";if(t.hasStart()){if(t.getIndexStartName()!==k)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(t.hasEnd()){if(t.getIndexEndName()!==x)throw new Error(r);if("string"!=typeof n)throw new Error(i)}}else if(t.getIndex()===Ut){if(null!=e&&!$(e)||null!=n&&!$(n))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), endAt(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(b.assert(t.getIndex()instanceof ye||t.getIndex()===ve,"unknown index type."),null!=e&&"object"==typeof e||null!=n&&"object"==typeof n)throw new Error("Query: First argument passed to startAt(), endAt(), or equalTo() cannot be an object.")},De.validateLimit_=function(t){if(t.hasStart()&&t.hasEnd()&&t.hasLimit()&&!t.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), endAt(), and limit(). Use limitToFirst() or limitToLast() instead.")},De.prototype.validateNoPreviousOrderByCall_=function(t){if(!0===this.orderByCalled_)throw new Error(t+": You can't combine multiple orderBy calls.")},De.prototype.getQueryParams=function(){return this.queryParams_},De.prototype.getRef=function(){return b.validateArgCount("Query.ref",0,0,arguments.length),new De.__referenceConstructor(this.repo,this.path)},De.prototype.on=function(t,e,n,r){b.validateArgCount("Query.on",2,4,arguments.length),nt("Query.on",1,t,!1),b.validateCallback("Query.on",2,e,!1);var i=De.getCancelAndContextArgs_("Query.on",n,r);if("value"===t)this.onValueEvent(e,i.cancel,i.context);else{var o={};o[t]=e,this.onChildEvent(o,i.cancel,i.context)}return e},De.prototype.onValueEvent=function(t,e,n){var r=new Ie(t,e||null,n||null);this.repo.addEventCallbackForQuery(this,r)},De.prototype.onChildEvent=function(t,e,n){var r=new Ae(t,e,n);this.repo.addEventCallbackForQuery(this,r)},De.prototype.off=function(t,e,n){b.validateArgCount("Query.off",0,3,arguments.length),nt("Query.off",1,t,!0),b.validateCallback("Query.off",2,e,!0),b.validateContextObject("Query.off",3,n,!0);var r=null,i=null;"value"===t?r=new Ie(e||null,null,n||null):t&&(e&&((i={})[t]=e),r=new Ae(i,null,n||null)),this.repo.removeEventCallbackForQuery(this,r)},De.prototype.once=function(e,n,t,r){var i=this;b.validateArgCount("Query.once",1,4,arguments.length),nt("Query.once",1,e,!1),b.validateCallback("Query.once",2,n,!0);var o=De.getCancelAndContextArgs_("Query.once",t,r),s=!0,a=new b.Deferred;a.promise.catch(function(){});var u=function(t){s&&(s=!1,i.off(e,u),n&&n.bind(o.context)(t),a.resolve(t))};return this.on(e,u,function(t){i.off(e,u),o.cancel&&o.cancel.bind(o.context)(t),a.reject(t)}),a.promise},De.prototype.limitToFirst=function(t){if(b.validateArgCount("Query.limitToFirst",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToFirst: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToFirst: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new De(this.repo,this.path,this.queryParams_.limitToFirst(t),this.orderByCalled_)},De.prototype.limitToLast=function(t){if(b.validateArgCount("Query.limitToLast",1,1,arguments.length),"number"!=typeof t||Math.floor(t)!==t||t<=0)throw new Error("Query.limitToLast: First argument must be a positive integer.");if(this.queryParams_.hasLimit())throw new Error("Query.limitToLast: Limit was already set (by another call to limit, limitToFirst, or limitToLast).");return new De(this.repo,this.path,this.queryParams_.limitToLast(t),this.orderByCalled_)},De.prototype.orderByChild=function(t){if(b.validateArgCount("Query.orderByChild",1,1,arguments.length),"$key"===t)throw new Error('Query.orderByChild: "$key" is invalid.  Use Query.orderByKey() instead.');if("$priority"===t)throw new Error('Query.orderByChild: "$priority" is invalid.  Use Query.orderByPriority() instead.');if("$value"===t)throw new Error('Query.orderByChild: "$value" is invalid.  Use Query.orderByValue() instead.');it("Query.orderByChild",1,t,!1),this.validateNoPreviousOrderByCall_("Query.orderByChild");var e=new V(t);if(e.isEmpty())throw new Error("Query.orderByChild: cannot pass in empty path.  Use Query.orderByValue() instead.");var n=new ye(e),r=this.queryParams_.orderBy(n);return De.validateQueryEndpoints_(r),new De(this.repo,this.path,r,!0)},De.prototype.orderByKey=function(){b.validateArgCount("Query.orderByKey",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByKey");var t=this.queryParams_.orderBy(Ot);return De.validateQueryEndpoints_(t),new De(this.repo,this.path,t,!0)},De.prototype.orderByPriority=function(){b.validateArgCount("Query.orderByPriority",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByPriority");var t=this.queryParams_.orderBy(Ut);return De.validateQueryEndpoints_(t),new De(this.repo,this.path,t,!0)},De.prototype.orderByValue=function(){b.validateArgCount("Query.orderByValue",0,0,arguments.length),this.validateNoPreviousOrderByCall_("Query.orderByValue");var t=this.queryParams_.orderBy(ve);return De.validateQueryEndpoints_(t),new De(this.repo,this.path,t,!0)},De.prototype.startAt=function(t,e){void 0===t&&(t=null),b.validateArgCount("Query.startAt",0,2,arguments.length),Z("Query.startAt",1,t,this.path,!0),rt("Query.startAt",2,e,!0);var n=this.queryParams_.startAt(t,e);if(De.validateLimit_(n),De.validateQueryEndpoints_(n),this.queryParams_.hasStart())throw new Error("Query.startAt: Starting point was already set (by another call to startAt or equalTo).");return void 0===t&&(e=t=null),new De(this.repo,this.path,n,this.orderByCalled_)},De.prototype.endAt=function(t,e){void 0===t&&(t=null),b.validateArgCount("Query.endAt",0,2,arguments.length),Z("Query.endAt",1,t,this.path,!0),rt("Query.endAt",2,e,!0);var n=this.queryParams_.endAt(t,e);if(De.validateLimit_(n),De.validateQueryEndpoints_(n),this.queryParams_.hasEnd())throw new Error("Query.endAt: Ending point was already set (by another call to endAt or equalTo).");return new De(this.repo,this.path,n,this.orderByCalled_)},De.prototype.equalTo=function(t,e){if(b.validateArgCount("Query.equalTo",1,2,arguments.length),Z("Query.equalTo",1,t,this.path,!1),rt("Query.equalTo",2,e,!0),this.queryParams_.hasStart())throw new Error("Query.equalTo: Starting point was already set (by another call to startAt or equalTo).");if(this.queryParams_.hasEnd())throw new Error("Query.equalTo: Ending point was already set (by another call to endAt or equalTo).");return this.startAt(t,e).endAt(t,e)},De.prototype.toString=function(){return b.validateArgCount("Query.toString",0,0,arguments.length),this.repo.toString()+this.path.toUrlEncodedString()},De.prototype.toJSON=function(){return b.validateArgCount("Query.toJSON",0,1,arguments.length),this.toString()},De.prototype.queryObject=function(){return this.queryParams_.getQueryObject()},De.prototype.queryIdentifier=function(){var t=this.queryObject(),e=P(t);return"{}"===e?"default":e},De.prototype.isEqual=function(t){if(b.validateArgCount("Query.isEqual",1,1,arguments.length),!(t instanceof De))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");var e=this.repo===t.repo,n=this.path.equals(t.path),r=this.queryIdentifier()===t.queryIdentifier();return e&&n&&r},De.getCancelAndContextArgs_=function(t,e,n){var r={cancel:null,context:null};if(e&&n)r.cancel=e,b.validateCallback(t,3,r.cancel,!0),r.context=n,b.validateContextObject(t,4,r.context,!0);else if(e)if("object"==typeof e&&null!==e)r.context=e;else{if("function"!=typeof e)throw new Error(b.errorPrefix(t,3,!0)+" must either be a cancel callback or a context object.");r.cancel=e}return r},Object.defineProperty(De.prototype,"ref",{get:function(){return this.getRef()},enumerable:!0,configurable:!0}),De);function De(t,e,n,r){this.repo=t,this.path=e,this.queryParams_=n,this.orderByCalled_=r}var ke=(xe.prototype.find=function(t){if(null!=this.value)return this.value.getChild(t);if(!t.isEmpty()&&0<this.children.size){var e=t.getFront();return t=t.popFront(),this.children.has(e)?this.children.get(e).find(t):null}return null},xe.prototype.remember=function(t,e){if(t.isEmpty())this.value=e,this.children.clear();else if(null!==this.value)this.value=this.value.updateChild(t,e);else{var n=t.getFront();this.children.has(n)||this.children.set(n,new xe);var r=this.children.get(n);t=t.popFront(),r.remember(t,e)}},xe.prototype.forget=function(t){if(t.isEmpty())return this.value=null,this.children.clear(),!0;if(null!==this.value){if(this.value.isLeafNode())return!1;var e=this.value;this.value=null;var n=this;return e.forEachChild(Ut,function(t,e){n.remember(new V(t),e)}),this.forget(t)}if(0<this.children.size){var r=t.getFront();return t=t.popFront(),!this.children.has(r)||this.children.get(r).forget(t)&&this.children.delete(r),0===this.children.size}return!0},xe.prototype.forEachTree=function(r,i){null!==this.value?i(r,this.value):this.forEachChild(function(t,e){var n=new V(r.toString()+"/"+t);e.forEachTree(n,i)})},xe.prototype.forEachChild=function(n){this.children.forEach(function(t,e){n(e,t)})},xe);function xe(){this.value=null,this.children=new Map}function Re(t,e){return t&&"object"==typeof t?(b.assert(".sv"in t,"Unexpected leaf node or priority contents"),e[t[".sv"]]):t}var Pe,Le,Me=function(t,r){var i,e=t.getPriority().val(),n=Re(e,r);if(t.isLeafNode()){var o=t,s=Re(o.getValue(),r);return s!==o.getValue()||n!==o.getPriority().val()?new Mt(s,fe(n)):t}var a=t;return n!==(i=a).getPriority().val()&&(i=i.updatePriority(new Mt(n))),a.forEachChild(Ut,function(t,e){var n=Me(e,r);n!==e&&(i=i.updateImmediateChild(t,n))}),i};(Le=Pe=Pe||{})[Le.OVERWRITE=0]="OVERWRITE",Le[Le.MERGE=1]="MERGE",Le[Le.ACK_USER_WRITE=2]="ACK_USER_WRITE",Le[Le.LISTEN_COMPLETE=3]="LISTEN_COMPLETE";var Fe=(je.User=new je(!0,!1,null,!1),je.Server=new je(!1,!0,null,!1),je.forServerTaggedQuery=function(t){return new je(!1,!0,t,!0)},je);function je(t,e,n,r){this.fromUser=t,this.fromServer=e,this.queryId=n,this.tagged=r,b.assert(!r||e,"Tagged queries must be from server.")}var Ue,qe=(Ve.prototype.operationForChild=function(t){if(this.path.isEmpty()){if(null!=this.affectedTree.value)return b.assert(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;var e=this.affectedTree.subtree(new V(t));return new Ve(V.Empty,e,this.revert)}return b.assert(this.path.getFront()===t,"operationForChild called for unrelated child."),new Ve(this.path.popFront(),this.affectedTree,this.revert)},Ve);function Ve(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Pe.ACK_USER_WRITE,this.source=Fe.User}var He=(We.fromObject=function(t){var n=We.Empty;return L(t,function(t,e){n=n.set(new V(t),e)}),n},We.prototype.isEmpty=function(){return null===this.value&&this.children.isEmpty()},We.prototype.findRootMostMatchingPathAndValue=function(t,e){if(null!=this.value&&e(this.value))return{path:V.Empty,value:this.value};if(t.isEmpty())return null;var n=t.getFront(),r=this.children.get(n);if(null===r)return null;var i=r.findRootMostMatchingPathAndValue(t.popFront(),e);return null==i?null:{path:new V(n).child(i.path),value:i.value}},We.prototype.findRootMostValueAndPath=function(t){return this.findRootMostMatchingPathAndValue(t,function(){return!0})},We.prototype.subtree=function(t){if(t.isEmpty())return this;var e=t.getFront(),n=this.children.get(e);return null!==n?n.subtree(t.popFront()):We.Empty},We.prototype.set=function(t,e){if(t.isEmpty())return new We(e,this.children);var n=t.getFront(),r=(this.children.get(n)||We.Empty).set(t.popFront(),e),i=this.children.insert(n,r);return new We(this.value,i)},We.prototype.remove=function(t){if(t.isEmpty())return this.children.isEmpty()?We.Empty:new We(null,this.children);var e=t.getFront(),n=this.children.get(e);if(n){var r=n.remove(t.popFront()),i=void 0;return i=r.isEmpty()?this.children.remove(e):this.children.insert(e,r),null===this.value&&i.isEmpty()?We.Empty:new We(this.value,i)}return this},We.prototype.get=function(t){if(t.isEmpty())return this.value;var e=t.getFront(),n=this.children.get(e);return n?n.get(t.popFront()):null},We.prototype.setTree=function(t,e){if(t.isEmpty())return e;var n=t.getFront(),r=(this.children.get(n)||We.Empty).setTree(t.popFront(),e),i=void 0;return i=r.isEmpty()?this.children.remove(n):this.children.insert(n,r),new We(this.value,i)},We.prototype.fold=function(t){return this.fold_(V.Empty,t)},We.prototype.fold_=function(n,r){var i={};return this.children.inorderTraversal(function(t,e){i[t]=e.fold_(n.child(t),r)}),r(n,this.value,i)},We.prototype.findOnPath=function(t,e){return this.findOnPath_(t,V.Empty,e)},We.prototype.findOnPath_=function(t,e,n){var r=!!this.value&&n(e,this.value);if(r)return r;if(t.isEmpty())return null;var i=t.getFront(),o=this.children.get(i);return o?o.findOnPath_(t.popFront(),e.child(i),n):null},We.prototype.foreachOnPath=function(t,e){return this.foreachOnPath_(t,V.Empty,e)},We.prototype.foreachOnPath_=function(t,e,n){if(t.isEmpty())return this;this.value&&n(e,this.value);var r=t.getFront(),i=this.children.get(r);return i?i.foreachOnPath_(t.popFront(),e.child(r),n):We.Empty},We.prototype.foreach=function(t){this.foreach_(V.Empty,t)},We.prototype.foreach_=function(n,r){this.children.inorderTraversal(function(t,e){e.foreach_(n.child(t),r)}),this.value&&r(n,this.value)},We.prototype.foreachChild=function(n){this.children.inorderTraversal(function(t,e){e.value&&n(t,e.value)})},We.Empty=new We(null),We);function We(t,e){void 0===e&&(e=Ue=Ue||new zt(_)),this.value=t,this.children=e}var Be=(Ge.prototype.operationForChild=function(t){return this.path.isEmpty()?new Ge(this.source,V.Empty):new Ge(this.source,this.path.popFront())},Ge);function Ge(t,e){this.source=t,this.path=e,this.type=Pe.LISTEN_COMPLETE}var ze=(Ke.prototype.operationForChild=function(t){return this.path.isEmpty()?new Ke(this.source,V.Empty,this.snap.getImmediateChild(t)):new Ke(this.source,this.path.popFront(),this.snap)},Ke);function Ke(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Pe.OVERWRITE}var Qe=(Ye.prototype.operationForChild=function(t){if(this.path.isEmpty()){var e=this.children.subtree(new V(t));return e.isEmpty()?null:e.value?new ze(this.source,V.Empty,e.value):new Ye(this.source,V.Empty,e)}return b.assert(this.path.getFront()===t,"Can't get a merge for a child not on the path of the operation"),new Ye(this.source,this.path.popFront(),this.children)},Ye.prototype.toString=function(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"},Ye);function Ye(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Pe.MERGE}var Xe=(Je.prototype.isFullyInitialized=function(){return this.fullyInitialized_},Je.prototype.isFiltered=function(){return this.filtered_},Je.prototype.isCompleteForPath=function(t){if(t.isEmpty())return this.isFullyInitialized()&&!this.filtered_;var e=t.getFront();return this.isCompleteForChild(e)},Je.prototype.isCompleteForChild=function(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)},Je.prototype.getNode=function(){return this.node_},Je);function Je(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}var $e=(Ze.prototype.updateEventSnap=function(t,e,n){return new Ze(new Xe(t,e,n),this.serverCache_)},Ze.prototype.updateServerSnap=function(t,e,n){return new Ze(this.eventCache_,new Xe(t,e,n))},Ze.prototype.getEventCache=function(){return this.eventCache_},Ze.prototype.getCompleteEventSnap=function(){return this.eventCache_.isFullyInitialized()?this.eventCache_.getNode():null},Ze.prototype.getServerCache=function(){return this.serverCache_},Ze.prototype.getCompleteServerSnap=function(){return this.serverCache_.isFullyInitialized()?this.serverCache_.getNode():null},Ze.Empty=new Ze(new Xe(se.EMPTY_NODE,!1,!1),new Xe(se.EMPTY_NODE,!1,!1)),Ze);function Ze(t,e){this.eventCache_=t,this.serverCache_=e}var tn=(en.valueChange=function(t){return new en(en.VALUE,t)},en.childAddedChange=function(t,e){return new en(en.CHILD_ADDED,e,t)},en.childRemovedChange=function(t,e){return new en(en.CHILD_REMOVED,e,t)},en.childChangedChange=function(t,e,n){return new en(en.CHILD_CHANGED,e,t,n)},en.childMovedChange=function(t,e){return new en(en.CHILD_MOVED,e,t)},en.CHILD_ADDED="child_added",en.CHILD_REMOVED="child_removed",en.CHILD_CHANGED="child_changed",en.CHILD_MOVED="child_moved",en.VALUE="value",en);function en(t,e,n,r,i){this.type=t,this.snapshotNode=e,this.childName=n,this.oldSnap=r,this.prevName=i}var nn=(rn.prototype.updateChild=function(t,e,n,r,i,o){b.assert(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");var s=t.getImmediateChild(e);return s.getChild(r).equals(n.getChild(r))&&s.isEmpty()===n.isEmpty()?t:(null!=o&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(tn.childRemovedChange(e,s)):b.assert(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):s.isEmpty()?o.trackChildChange(tn.childAddedChange(e,n)):o.trackChildChange(tn.childChangedChange(e,n,s))),t.isLeafNode()&&n.isEmpty()?t:t.updateImmediateChild(e,n).withIndex(this.index_))},rn.prototype.updateFullNode=function(r,n,i){return null!=i&&(r.isLeafNode()||r.forEachChild(Ut,function(t,e){n.hasChild(t)||i.trackChildChange(tn.childRemovedChange(t,e))}),n.isLeafNode()||n.forEachChild(Ut,function(t,e){if(r.hasChild(t)){var n=r.getImmediateChild(t);n.equals(e)||i.trackChildChange(tn.childChangedChange(t,e,n))}else i.trackChildChange(tn.childAddedChange(t,e))})),n.withIndex(this.index_)},rn.prototype.updatePriority=function(t,e){return t.isEmpty()?se.EMPTY_NODE:t.updatePriority(e)},rn.prototype.filtersNodes=function(){return!1},rn.prototype.getIndexedFilter=function(){return this},rn.prototype.getIndex=function(){return this.index_},rn);function rn(t){this.index_=t}var on=(sn.prototype.trackChildChange=function(t){var e=t.type,n=t.childName;b.assert(e===tn.CHILD_ADDED||e===tn.CHILD_CHANGED||e===tn.CHILD_REMOVED,"Only child changes supported for tracking"),b.assert(".priority"!==n,"Only non-priority child changes can be tracked.");var r=this.changeMap.get(n);if(r){var i=r.type;if(e===tn.CHILD_ADDED&&i===tn.CHILD_REMOVED)this.changeMap.set(n,tn.childChangedChange(n,t.snapshotNode,r.snapshotNode));else if(e===tn.CHILD_REMOVED&&i===tn.CHILD_ADDED)this.changeMap.delete(n);else if(e===tn.CHILD_REMOVED&&i===tn.CHILD_CHANGED)this.changeMap.set(n,tn.childRemovedChange(n,r.oldSnap));else if(e===tn.CHILD_CHANGED&&i===tn.CHILD_ADDED)this.changeMap.set(n,tn.childAddedChange(n,t.snapshotNode));else{if(e!==tn.CHILD_CHANGED||i!==tn.CHILD_CHANGED)throw b.assertionError("Illegal combination of changes: "+t+" occurred after "+r);this.changeMap.set(n,tn.childChangedChange(n,t.snapshotNode,r.oldSnap))}}else this.changeMap.set(n,t)},sn.prototype.getChanges=function(){return Array.from(this.changeMap.values())},sn);function sn(){this.changeMap=new Map}function an(){}var un=new(an.prototype.getCompleteChild=function(t){return null},an.prototype.getChildAfterChild=function(t,e,n){return null},an),cn=(hn.prototype.getCompleteChild=function(t){var e=this.viewCache_.getEventCache();if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);var n=null!=this.optCompleteServerCache_?new Xe(this.optCompleteServerCache_,!0,!1):this.viewCache_.getServerCache();return this.writes_.calcCompleteChild(t,n)},hn.prototype.getChildAfterChild=function(t,e,n){var r=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:this.viewCache_.getCompleteServerSnap(),i=this.writes_.calcIndexedSlice(r,e,1,n,t);return 0===i.length?null:i[0]},hn);function hn(t,e,n){void 0===n&&(n=null),this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}var ln=function(t,e){this.viewCache=t,this.changes=e},fn=(pn.prototype.assertIndexed=function(t){b.assert(t.getEventCache().getNode().isIndexed(this.filter_.getIndex()),"Event snap not indexed"),b.assert(t.getServerCache().getNode().isIndexed(this.filter_.getIndex()),"Server snap not indexed")},pn.prototype.applyOperation=function(t,e,n,r){var i,o,s=new on;if(e.type===Pe.OVERWRITE){var a=e;i=a.source.fromUser?this.applyUserOverwrite_(t,a.path,a.snap,n,r,s):(b.assert(a.source.fromServer,"Unknown source."),o=a.source.tagged||t.getServerCache().isFiltered()&&!a.path.isEmpty(),this.applyServerOverwrite_(t,a.path,a.snap,n,r,o,s))}else if(e.type===Pe.MERGE){var u=e;i=u.source.fromUser?this.applyUserMerge_(t,u.path,u.children,n,r,s):(b.assert(u.source.fromServer,"Unknown source."),o=u.source.tagged||t.getServerCache().isFiltered(),this.applyServerMerge_(t,u.path,u.children,n,r,o,s))}else if(e.type===Pe.ACK_USER_WRITE){var c=e;i=c.revert?this.revertUserWrite_(t,c.path,n,r,s):this.ackUserWrite_(t,c.path,c.affectedTree,n,r,s)}else{if(e.type!==Pe.LISTEN_COMPLETE)throw b.assertionError("Unknown operation type: "+e.type);i=this.listenComplete_(t,e.path,n,s)}var h=s.getChanges();return pn.maybeAddValueEvent_(t,i,h),new ln(i,h)},pn.maybeAddValueEvent_=function(t,e,n){var r=e.getEventCache();if(r.isFullyInitialized()){var i=r.getNode().isLeafNode()||r.getNode().isEmpty(),o=t.getCompleteEventSnap();(0<n.length||!t.getEventCache().isFullyInitialized()||i&&!r.getNode().equals(o)||!r.getNode().getPriority().equals(o.getPriority()))&&n.push(tn.valueChange(e.getCompleteEventSnap()))}},pn.prototype.generateEventCacheAfterServerEvent_=function(t,e,n,r,i){var o=t.getEventCache();if(null!=n.shadowingWrite(e))return t;var s=void 0,a=void 0;if(e.isEmpty())if(b.assert(t.getServerCache().isFullyInitialized(),"If change path is empty, we must have complete server data"),t.getServerCache().isFiltered()){var u=t.getCompleteServerSnap(),c=u instanceof se?u:se.EMPTY_NODE,h=n.calcCompleteEventChildren(c);s=this.filter_.updateFullNode(t.getEventCache().getNode(),h,i)}else{var l=n.calcCompleteEventCache(t.getCompleteServerSnap());s=this.filter_.updateFullNode(t.getEventCache().getNode(),l,i)}else{var f=e.getFront();if(".priority"===f){b.assert(1===e.getLength(),"Can't have a priority with additional path components");var p=o.getNode();a=t.getServerCache().getNode();var d=n.calcEventCacheAfterServerOverwrite(e,p,a);s=null!=d?this.filter_.updatePriority(p,d):o.getNode()}else{var v=e.popFront(),y=void 0;if(o.isCompleteForChild(f)){a=t.getServerCache().getNode();var g=n.calcEventCacheAfterServerOverwrite(e,o.getNode(),a);y=null!=g?o.getNode().getImmediateChild(f).updateChild(v,g):o.getNode().getImmediateChild(f)}else y=n.calcCompleteChild(f,t.getServerCache());s=null!=y?this.filter_.updateChild(o.getNode(),f,y,v,r,i):o.getNode()}}return t.updateEventSnap(s,o.isFullyInitialized()||e.isEmpty(),this.filter_.filtersNodes())},pn.prototype.applyServerOverwrite_=function(t,e,n,r,i,o,s){var a,u=t.getServerCache(),c=o?this.filter_:this.filter_.getIndexedFilter();if(e.isEmpty())a=c.updateFullNode(u.getNode(),n,null);else if(c.filtersNodes()&&!u.isFiltered()){var h=u.getNode().updateChild(e,n);a=c.updateFullNode(u.getNode(),h,null)}else{var l=e.getFront();if(!u.isCompleteForPath(e)&&1<e.getLength())return t;var f=e.popFront(),p=u.getNode().getImmediateChild(l).updateChild(f,n);a=".priority"===l?c.updatePriority(u.getNode(),p):c.updateChild(u.getNode(),l,p,f,un,null)}var d=t.updateServerSnap(a,u.isFullyInitialized()||e.isEmpty(),c.filtersNodes()),v=new cn(r,d,i);return this.generateEventCacheAfterServerEvent_(d,e,r,v,s)},pn.prototype.applyUserOverwrite_=function(t,e,n,r,i,o){var s,a,u=t.getEventCache(),c=new cn(r,t,i);if(e.isEmpty())a=this.filter_.updateFullNode(t.getEventCache().getNode(),n,o),s=t.updateEventSnap(a,!0,this.filter_.filtersNodes());else{var h=e.getFront();if(".priority"===h)a=this.filter_.updatePriority(t.getEventCache().getNode(),n),s=t.updateEventSnap(a,u.isFullyInitialized(),u.isFiltered());else{var l=e.popFront(),f=u.getNode().getImmediateChild(h),p=void 0;if(l.isEmpty())p=n;else{var d=c.getCompleteChild(h);p=null!=d?".priority"===l.getBack()&&d.getChild(l.parent()).isEmpty()?d:d.updateChild(l,n):se.EMPTY_NODE}if(f.equals(p))s=t;else{var v=this.filter_.updateChild(u.getNode(),h,p,l,c,o);s=t.updateEventSnap(v,u.isFullyInitialized(),this.filter_.filtersNodes())}}}return s},pn.cacheHasChild_=function(t,e){return t.getEventCache().isCompleteForChild(e)},pn.prototype.applyUserMerge_=function(r,i,t,o,s,a){var u=this,c=r;return t.foreach(function(t,e){var n=i.child(t);pn.cacheHasChild_(r,n.getFront())&&(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),t.foreach(function(t,e){var n=i.child(t);pn.cacheHasChild_(r,n.getFront())||(c=u.applyUserOverwrite_(c,n,e,o,s,a))}),c},pn.prototype.applyMerge_=function(n,t){return t.foreach(function(t,e){n=n.updateChild(t,e)}),n},pn.prototype.applyServerMerge_=function(o,t,e,s,a,u,c){var h=this;if(o.getServerCache().getNode().isEmpty()&&!o.getServerCache().isFullyInitialized())return o;var n,l=o;n=t.isEmpty()?e:He.Empty.setTree(t,e);var f=o.getServerCache().getNode();return n.children.inorderTraversal(function(t,e){if(f.hasChild(t)){var n=o.getServerCache().getNode().getImmediateChild(t),r=h.applyMerge_(n,e);l=h.applyServerOverwrite_(l,new V(t),r,s,a,u,c)}}),n.children.inorderTraversal(function(t,e){var n=!o.getServerCache().isCompleteForChild(t)&&null==e.value;if(!f.hasChild(t)&&!n){var r=o.getServerCache().getNode().getImmediateChild(t),i=h.applyMerge_(r,e);l=h.applyServerOverwrite_(l,new V(t),i,s,a,u,c)}}),l},pn.prototype.ackUserWrite_=function(t,r,e,n,i,o){if(null!=n.shadowingWrite(r))return t;var s=t.getServerCache().isFiltered(),a=t.getServerCache();if(null!=e.value){if(r.isEmpty()&&a.isFullyInitialized()||a.isCompleteForPath(r))return this.applyServerOverwrite_(t,r,a.getNode().getChild(r),n,i,s,o);if(r.isEmpty()){var u=He.Empty;return a.getNode().forEachChild(Ot,function(t,e){u=u.set(new V(t),e)}),this.applyServerMerge_(t,r,u,n,i,s,o)}return t}var c=He.Empty;return e.foreach(function(t,e){var n=r.child(t);a.isCompleteForPath(n)&&(c=c.set(t,a.getNode().getChild(n)))}),this.applyServerMerge_(t,r,c,n,i,s,o)},pn.prototype.listenComplete_=function(t,e,n,r){var i=t.getServerCache(),o=t.updateServerSnap(i.getNode(),i.isFullyInitialized()||e.isEmpty(),i.isFiltered());return this.generateEventCacheAfterServerEvent_(o,e,n,un,r)},pn.prototype.revertUserWrite_=function(t,e,n,r,i){var o;if(null!=n.shadowingWrite(e))return t;var s=new cn(n,t,r),a=t.getEventCache().getNode(),u=void 0;if(e.isEmpty()||".priority"===e.getFront()){var c=void 0;if(t.getServerCache().isFullyInitialized())c=n.calcCompleteEventCache(t.getCompleteServerSnap());else{var h=t.getServerCache().getNode();b.assert(h instanceof se,"serverChildren would be complete if leaf node"),c=n.calcCompleteEventChildren(h)}c=c,u=this.filter_.updateFullNode(a,c,i)}else{var l=e.getFront(),f=n.calcCompleteChild(l,t.getServerCache());null==f&&t.getServerCache().isCompleteForChild(l)&&(f=a.getImmediateChild(l)),(u=null!=f?this.filter_.updateChild(a,l,f,e.popFront(),s,i):t.getEventCache().getNode().hasChild(l)?this.filter_.updateChild(a,l,se.EMPTY_NODE,e.popFront(),s,i):a).isEmpty()&&t.getServerCache().isFullyInitialized()&&(o=n.calcCompleteEventCache(t.getCompleteServerSnap())).isLeafNode()&&(u=this.filter_.updateFullNode(u,o,i))}return o=t.getServerCache().isFullyInitialized()||null!=n.shadowingWrite(V.Empty),t.updateEventSnap(u,o,this.filter_.filtersNodes())},pn);function pn(t){this.filter_=t}var dn=(vn.prototype.generateEventsForChanges=function(t,e,n){var r=this,i=[],o=[];return t.forEach(function(t){t.type===tn.CHILD_CHANGED&&r.index_.indexedValueChanged(t.oldSnap,t.snapshotNode)&&o.push(tn.childMovedChange(t.childName,t.snapshotNode))}),this.generateEventsForType_(i,tn.CHILD_REMOVED,t,n,e),this.generateEventsForType_(i,tn.CHILD_ADDED,t,n,e),this.generateEventsForType_(i,tn.CHILD_MOVED,o,n,e),this.generateEventsForType_(i,tn.CHILD_CHANGED,t,n,e),this.generateEventsForType_(i,tn.VALUE,t,n,e),i},vn.prototype.generateEventsForType_=function(r,e,t,i,o){var s=this,n=t.filter(function(t){return t.type===e});n.sort(this.compareChanges_.bind(this)),n.forEach(function(e){var n=s.materializeSingleChange_(e,o);i.forEach(function(t){t.respondsTo(e.type)&&r.push(t.createEvent(n,s.query_))})})},vn.prototype.materializeSingleChange_=function(t,e){return"value"===t.type||"child_removed"===t.type||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,this.index_)),t},vn.prototype.compareChanges_=function(t,e){if(null==t.childName||null==e.childName)throw b.assertionError("Should only compare child_ events.");var n=new bt(t.childName,t.snapshotNode),r=new bt(e.childName,e.snapshotNode);return this.index_.compare(n,r)},vn);function vn(t){this.query_=t,this.index_=this.query_.getQueryParams().getIndex()}var yn,gn=(mn.prototype.getQuery=function(){return this.query_},mn.prototype.getServerCache=function(){return this.viewCache_.getServerCache().getNode()},mn.prototype.getCompleteServerCache=function(t){var e=this.viewCache_.getCompleteServerSnap();return e&&(this.query_.getQueryParams().loadsAllData()||!t.isEmpty()&&!e.getImmediateChild(t.getFront()).isEmpty())?e.getChild(t):null},mn.prototype.isEmpty=function(){return 0===this.eventRegistrations_.length},mn.prototype.addEventRegistration=function(t){this.eventRegistrations_.push(t)},mn.prototype.removeEventRegistration=function(t,n){var r=[];if(n){b.assert(null==t,"A cancel should cancel all event registrations.");var i=this.query_.path;this.eventRegistrations_.forEach(function(t){n=n;var e=t.createCancelEvent(n,i);e&&r.push(e)})}if(t){for(var e=[],o=0;o<this.eventRegistrations_.length;++o){var s=this.eventRegistrations_[o];if(s.matches(t)){if(t.hasAnyCallback()){e=e.concat(this.eventRegistrations_.slice(o+1));break}}else e.push(s)}this.eventRegistrations_=e}else this.eventRegistrations_=[];return r},mn.prototype.applyOperation=function(t,e,n){t.type===Pe.MERGE&&null!==t.source.queryId&&(b.assert(this.viewCache_.getCompleteServerSnap(),"We should always have a full cache before handling merges"),b.assert(this.viewCache_.getCompleteEventSnap(),"Missing event cache, even though we have a server cache"));var r=this.viewCache_,i=this.processor_.applyOperation(r,t,e,n);return this.processor_.assertIndexed(i.viewCache),b.assert(i.viewCache.getServerCache().isFullyInitialized()||!r.getServerCache().isFullyInitialized(),"Once a server snap is complete, it should never go back"),this.viewCache_=i.viewCache,this.generateEventsForChanges_(i.changes,i.viewCache.getEventCache().getNode(),null)},mn.prototype.getInitialEvents=function(t){var e=this.viewCache_.getEventCache(),n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Ut,function(t,e){n.push(tn.childAddedChange(t,e))}),e.isFullyInitialized()&&n.push(tn.valueChange(e.getNode())),this.generateEventsForChanges_(n,e.getNode(),t)},mn.prototype.generateEventsForChanges_=function(t,e,n){var r=n?[n]:this.eventRegistrations_;return this.eventGenerator_.generateEventsForChanges(t,e,r)},mn);function mn(t,e){this.query_=t,this.eventRegistrations_=[];var n=this.query_.getQueryParams(),r=new nn(n.getIndex()),i=n.getNodeFilter();this.processor_=new fn(i);var o=e.getServerCache(),s=e.getEventCache(),a=r.updateFullNode(se.EMPTY_NODE,o.getNode(),null),u=i.updateFullNode(se.EMPTY_NODE,s.getNode(),null),c=new Xe(a,o.isFullyInitialized(),r.filtersNodes()),h=new Xe(u,s.isFullyInitialized(),i.filtersNodes());this.viewCache_=new $e(h,c),this.eventGenerator_=new dn(this.query_)}var _n=(Object.defineProperty(bn,"__referenceConstructor",{get:function(){return b.assert(yn,"Reference.ts has not been loaded"),yn},set:function(t){b.assert(!yn,"__referenceConstructor has already been defined"),yn=t},enumerable:!0,configurable:!0}),bn.prototype.isEmpty=function(){return 0===this.views.size},bn.prototype.applyOperation=function(t,e,n){var r,i,o=t.source.queryId;if(null!==o){var s=this.views.get(o);return b.assert(null!=s,"SyncTree gave us an op for an invalid query."),s.applyOperation(t,e,n)}var a=[];try{for(var u=d.__values(this.views.values()),c=u.next();!c.done;c=u.next())s=c.value,a=a.concat(s.applyOperation(t,e,n))}catch(t){r={error:t}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return a},bn.prototype.addEventRegistration=function(t,e,n,r,i){var o=t.queryIdentifier(),s=this.views.get(o);if(!s){var a=n.calcCompleteEventCache(i?r:null),u=!1;u=!!a||(a=r instanceof se?n.calcCompleteEventChildren(r):se.EMPTY_NODE,!1);var c=new $e(new Xe(a,u,!1),new Xe(r,i,!1));s=new gn(t,c),this.views.set(o,s)}return s.addEventRegistration(e),s.getInitialEvents(e)},bn.prototype.removeEventRegistration=function(t,e,n){var r,i,o=t.queryIdentifier(),s=[],a=[],u=this.hasCompleteView();if("default"===o)try{for(var c=d.__values(this.views.entries()),h=c.next();!h.done;h=c.next()){var l=d.__read(h.value,2),f=l[0],p=l[1];a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(f),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery()))}}catch(t){r={error:t}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}else(p=this.views.get(o))&&(a=a.concat(p.removeEventRegistration(e,n)),p.isEmpty()&&(this.views.delete(o),p.getQuery().getQueryParams().loadsAllData()||s.push(p.getQuery())));return u&&!this.hasCompleteView()&&s.push(new bn.__referenceConstructor(t.repo,t.path)),{removed:s,events:a}},bn.prototype.getQueryViews=function(){var e,t,n=[];try{for(var r=d.__values(this.views.values()),i=r.next();!i.done;i=r.next()){var o=i.value;o.getQuery().getQueryParams().loadsAllData()||n.push(o)}}catch(t){e={error:t}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(e)throw e.error}}return n},bn.prototype.getCompleteServerCache=function(t){var e,n,r=null;try{for(var i=d.__values(this.views.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r||s.getCompleteServerCache(t)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r},bn.prototype.viewForQuery=function(t){if(t.getQueryParams().loadsAllData())return this.getCompleteView();var e=t.queryIdentifier();return this.views.get(e)},bn.prototype.viewExistsForQuery=function(t){return null!=this.viewForQuery(t)},bn.prototype.hasCompleteView=function(){return null!=this.getCompleteView()},bn.prototype.getCompleteView=function(){var e,t;try{for(var n=d.__values(this.views.values()),r=n.next();!r.done;r=n.next()){var i=r.value;if(i.getQuery().getQueryParams().loadsAllData())return i}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}return null},bn);function bn(){this.views=new Map}var wn=(En.prototype.addWrite=function(t,e){if(t.isEmpty())return new En(new He(e));var n=this.writeTree_.findRootMostValueAndPath(t);if(null!=n){var r=n.path,i=n.value,o=V.relativePath(r,t);return i=i.updateChild(o,e),new En(this.writeTree_.set(r,i))}var s=new He(e);return new En(this.writeTree_.setTree(t,s))},En.prototype.addWrites=function(n,t){var r=this;return L(t,function(t,e){r=r.addWrite(n.child(t),e)}),r},En.prototype.removeWrite=function(t){return t.isEmpty()?En.Empty:new En(this.writeTree_.setTree(t,He.Empty))},En.prototype.hasCompleteWrite=function(t){return null!=this.getCompleteNode(t)},En.prototype.getCompleteNode=function(t){var e=this.writeTree_.findRootMostValueAndPath(t);return null!=e?this.writeTree_.get(e.path).getChild(V.relativePath(e.path,t)):null},En.prototype.getCompleteChildren=function(){var n=[],t=this.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(Ut,function(t,e){n.push(new bt(t,e))}):this.writeTree_.children.inorderTraversal(function(t,e){null!=e.value&&n.push(new bt(t,e.value))}),n},En.prototype.childCompoundWrite=function(t){if(t.isEmpty())return this;var e=this.getCompleteNode(t);return new En(null!=e?new He(e):this.writeTree_.subtree(t))},En.prototype.isEmpty=function(){return this.writeTree_.isEmpty()},En.prototype.apply=function(t){return function n(r,t,i){if(null!=t.value)return i.updateChild(r,t.value);var o=null;return t.children.inorderTraversal(function(t,e){".priority"===t?(b.assert(null!==e.value,"Priority writes must always be leaf nodes"),o=e.value):i=n(r.child(t),e,i)}),i.getChild(r).isEmpty()||null===o||(i=i.updateChild(r.child(".priority"),o)),i}(V.Empty,this.writeTree_,t)},En.Empty=new En(new He(null)),En);function En(t){this.writeTree_=t}var Tn=(In.prototype.childWrites=function(t){return new Sn(t,this)},In.prototype.addOverwrite=function(t,e,n,r){b.assert(n>this.lastWriteId_,"Stacking an older write on top of newer ones"),void 0===r&&(r=!0),this.allWrites_.push({path:t,snap:e,writeId:n,visible:r}),r&&(this.visibleWrites_=this.visibleWrites_.addWrite(t,e)),this.lastWriteId_=n},In.prototype.addMerge=function(t,e,n){b.assert(n>this.lastWriteId_,"Stacking an older merge on top of newer ones"),this.allWrites_.push({path:t,children:e,writeId:n,visible:!0}),this.visibleWrites_=this.visibleWrites_.addWrites(t,e),this.lastWriteId_=n},In.prototype.getWrite=function(t){for(var e=0;e<this.allWrites_.length;e++){var n=this.allWrites_[e];if(n.writeId===t)return n}return null},In.prototype.removeWrite=function(e){var n=this,t=this.allWrites_.findIndex(function(t){return t.writeId===e});b.assert(0<=t,"removeWrite called with nonexistent writeId.");var r=this.allWrites_[t];this.allWrites_.splice(t,1);for(var i=r.visible,o=!1,s=this.allWrites_.length-1;i&&0<=s;){var a=this.allWrites_[s];a.visible&&(t<=s&&this.recordContainsPath_(a,r.path)?i=!1:r.path.contains(a.path)&&(o=!0)),s--}return!!i&&(o?this.resetTree_():r.snap?this.visibleWrites_=this.visibleWrites_.removeWrite(r.path):L(r.children,function(t){n.visibleWrites_=n.visibleWrites_.removeWrite(r.path.child(t))}),!0)},In.prototype.getCompleteWriteData=function(t){return this.visibleWrites_.getCompleteNode(t)},In.prototype.calcCompleteEventCache=function(e,t,n,r){if(n||r){var i=this.visibleWrites_.childCompoundWrite(e);if(!r&&i.isEmpty())return t;if(r||null!=t||i.hasCompleteWrite(V.Empty)){var o=In.layerTree_(this.allWrites_,function(t){return(t.visible||r)&&(!n||!~n.indexOf(t.writeId))&&(t.path.contains(e)||e.contains(t.path))},e);return u=t||se.EMPTY_NODE,o.apply(u)}return null}var s=this.visibleWrites_.getCompleteNode(e);if(null!=s)return s;var a=this.visibleWrites_.childCompoundWrite(e);if(a.isEmpty())return t;if(null!=t||a.hasCompleteWrite(V.Empty)){var u=t||se.EMPTY_NODE;return a.apply(u)}return null},In.prototype.calcCompleteEventChildren=function(t,e){var r=se.EMPTY_NODE,n=this.visibleWrites_.getCompleteNode(t);if(n)return n.isLeafNode()||n.forEachChild(Ut,function(t,e){r=r.updateImmediateChild(t,e)}),r;if(e){var i=this.visibleWrites_.childCompoundWrite(t);return e.forEachChild(Ut,function(t,e){var n=i.childCompoundWrite(new V(t)).apply(e);r=r.updateImmediateChild(t,n)}),i.getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r}return this.visibleWrites_.childCompoundWrite(t).getCompleteChildren().forEach(function(t){r=r.updateImmediateChild(t.name,t.node)}),r},In.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n,r){b.assert(n||r,"Either existingEventSnap or existingServerSnap must exist");var i=t.child(e);if(this.visibleWrites_.hasCompleteWrite(i))return null;var o=this.visibleWrites_.childCompoundWrite(i);return o.isEmpty()?r.getChild(e):o.apply(r.getChild(e))},In.prototype.calcCompleteChild=function(t,e,n){var r=t.child(e),i=this.visibleWrites_.getCompleteNode(r);return null!=i?i:n.isCompleteForChild(e)?this.visibleWrites_.childCompoundWrite(r).apply(n.getNode().getImmediateChild(e)):null},In.prototype.shadowingWrite=function(t){return this.visibleWrites_.getCompleteNode(t)},In.prototype.calcIndexedSlice=function(t,e,n,r,i,o){var s,a=this.visibleWrites_.childCompoundWrite(t),u=a.getCompleteNode(V.Empty);if(null!=u)s=u;else{if(null==e)return[];s=a.apply(e)}if((s=s.withIndex(o)).isEmpty()||s.isLeafNode())return[];for(var c=[],h=o.getCompare(),l=i?s.getReverseIteratorFrom(n,o):s.getIteratorFrom(n,o),f=l.getNext();f&&c.length<r;)0!==h(f,n)&&c.push(f),f=l.getNext();return c},In.prototype.recordContainsPath_=function(t,e){if(t.snap)return t.path.contains(e);for(var n in t.children)if(t.children.hasOwnProperty(n)&&t.path.child(n).contains(e))return!0;return!1},In.prototype.resetTree_=function(){this.visibleWrites_=In.layerTree_(this.allWrites_,In.DefaultFilter_,V.Empty),0<this.allWrites_.length?this.lastWriteId_=this.allWrites_[this.allWrites_.length-1].writeId:this.lastWriteId_=-1},In.DefaultFilter_=function(t){return t.visible},In.layerTree_=function(t,e,n){for(var r=wn.Empty,i=0;i<t.length;++i){var o=t[i];if(e(o)){var s=o.path,a=void 0;if(o.snap)n.contains(s)?(a=V.relativePath(n,s),r=r.addWrite(a,o.snap)):s.contains(n)&&(a=V.relativePath(s,n),r=r.addWrite(V.Empty,o.snap.getChild(a)));else{if(!o.children)throw b.assertionError("WriteRecord should have .snap or .children");if(n.contains(s))a=V.relativePath(n,s),r=r.addWrites(a,o.children);else if(s.contains(n))if((a=V.relativePath(s,n)).isEmpty())r=r.addWrites(V.Empty,o.children);else{var u=b.safeGet(o.children,a.getFront());if(u){var c=u.getChild(a.popFront());r=r.addWrite(V.Empty,c)}}}}}return r},In);function In(){this.visibleWrites_=wn.Empty,this.allWrites_=[],this.lastWriteId_=-1}var Sn=(Cn.prototype.calcCompleteEventCache=function(t,e,n){return this.writeTree_.calcCompleteEventCache(this.treePath_,t,e,n)},Cn.prototype.calcCompleteEventChildren=function(t){return this.writeTree_.calcCompleteEventChildren(this.treePath_,t)},Cn.prototype.calcEventCacheAfterServerOverwrite=function(t,e,n){return this.writeTree_.calcEventCacheAfterServerOverwrite(this.treePath_,t,e,n)},Cn.prototype.shadowingWrite=function(t){return this.writeTree_.shadowingWrite(this.treePath_.child(t))},Cn.prototype.calcIndexedSlice=function(t,e,n,r,i){return this.writeTree_.calcIndexedSlice(this.treePath_,t,e,n,r,i)},Cn.prototype.calcCompleteChild=function(t,e){return this.writeTree_.calcCompleteChild(this.treePath_,t,e)},Cn.prototype.child=function(t){return new Cn(this.treePath_.child(t),this.writeTree_)},Cn);function Cn(t,e){this.treePath_=t,this.writeTree_=e}var An=(Nn.prototype.applyUserOverwrite=function(t,e,n,r){return this.pendingWriteTree_.addOverwrite(t,e,n,r),r?this.applyOperationToSyncPoints_(new ze(Fe.User,t,e)):[]},Nn.prototype.applyUserMerge=function(t,e,n){this.pendingWriteTree_.addMerge(t,e,n);var r=He.fromObject(e);return this.applyOperationToSyncPoints_(new Qe(Fe.User,t,r))},Nn.prototype.ackUserWrite=function(t,e){void 0===e&&(e=!1);var n=this.pendingWriteTree_.getWrite(t);if(this.pendingWriteTree_.removeWrite(t)){var r=He.Empty;return null!=n.snap?r=r.set(V.Empty,!0):L(n.children,function(t,e){r=r.set(new V(t),e)}),this.applyOperationToSyncPoints_(new qe(n.path,r,e))}return[]},Nn.prototype.applyServerOverwrite=function(t,e){return this.applyOperationToSyncPoints_(new ze(Fe.Server,t,e))},Nn.prototype.applyServerMerge=function(t,e){var n=He.fromObject(e);return this.applyOperationToSyncPoints_(new Qe(Fe.Server,t,n))},Nn.prototype.applyListenComplete=function(t){return this.applyOperationToSyncPoints_(new Be(Fe.Server,t))},Nn.prototype.applyTaggedQueryOverwrite=function(t,e,n){var r=this.queryKeyForTag_(n);if(null==r)return[];var i=Nn.parseQueryKey_(r),o=i.path,s=i.queryId,a=V.relativePath(o,t),u=new ze(Fe.forServerTaggedQuery(s),a,e);return this.applyTaggedOperation_(o,u)},Nn.prototype.applyTaggedQueryMerge=function(t,e,n){var r=this.queryKeyForTag_(n);if(r){var i=Nn.parseQueryKey_(r),o=i.path,s=i.queryId,a=V.relativePath(o,t),u=He.fromObject(e),c=new Qe(Fe.forServerTaggedQuery(s),a,u);return this.applyTaggedOperation_(o,c)}return[]},Nn.prototype.applyTaggedListenComplete=function(t,e){var n=this.queryKeyForTag_(e);if(n){var r=Nn.parseQueryKey_(n),i=r.path,o=r.queryId,s=V.relativePath(i,t),a=new Be(Fe.forServerTaggedQuery(o),s);return this.applyTaggedOperation_(i,a)}return[]},Nn.prototype.addEventRegistration=function(t,e){var r=t.path,i=null,o=!1;this.syncPointTree_.foreachOnPath(r,function(t,e){var n=V.relativePath(t,r);i=i||e.getCompleteServerCache(n),o=o||e.hasCompleteView()});var n,s=this.syncPointTree_.get(r);s?(o=o||s.hasCompleteView(),i=i||s.getCompleteServerCache(V.Empty)):(s=new _n,this.syncPointTree_=this.syncPointTree_.set(r,s)),null!=i?n=!0:(n=!1,i=se.EMPTY_NODE,this.syncPointTree_.subtree(r).foreachChild(function(t,e){var n=e.getCompleteServerCache(V.Empty);n&&(i=i.updateImmediateChild(t,n))}));var a=s.viewExistsForQuery(t);if(!a&&!t.getQueryParams().loadsAllData()){var u=Nn.makeQueryKey_(t);b.assert(!this.queryToTagMap.has(u),"View does not exist, but we have a tag");var c=Nn.getNextQueryTag_();this.queryToTagMap.set(u,c),this.tagToQueryMap.set(c,u)}var h=this.pendingWriteTree_.childWrites(r),l=s.addEventRegistration(t,e,h,i,n);if(!a&&!o){var f=s.viewForQuery(t);l=l.concat(this.setupListener_(t,f))}return l},Nn.prototype.removeEventRegistration=function(t,e,n){var r=this,i=t.path,o=this.syncPointTree_.get(i),s=[];if(o&&("default"===t.queryIdentifier()||o.viewExistsForQuery(t))){var a=o.removeEventRegistration(t,e,n);o.isEmpty()&&(this.syncPointTree_=this.syncPointTree_.remove(i));var u=a.removed;s=a.events;var c=-1!==u.findIndex(function(t){return t.getQueryParams().loadsAllData()}),h=this.syncPointTree_.findOnPath(i,function(t,e){return e.hasCompleteView()});if(c&&!h){var l=this.syncPointTree_.subtree(i);if(!l.isEmpty())for(var f=this.collectDistinctViewsForSubTree_(l),p=0;p<f.length;++p){var d=f[p],v=d.getQuery(),y=this.createListenerForView_(d);this.listenProvider_.startListening(Nn.queryForListening_(v),this.tagForQuery_(v),y.hashFn,y.onComplete)}}!h&&0<u.length&&!n&&(c?this.listenProvider_.stopListening(Nn.queryForListening_(t),null):u.forEach(function(t){var e=r.queryToTagMap.get(Nn.makeQueryKey_(t));r.listenProvider_.stopListening(Nn.queryForListening_(t),e)})),this.removeTags_(u)}return s},Nn.prototype.calcCompleteEventCache=function(i,t){var e=this.pendingWriteTree_,n=this.syncPointTree_.findOnPath(i,function(t,e){var n=V.relativePath(t,i),r=e.getCompleteServerCache(n);if(r)return r});return e.calcCompleteEventCache(i,n,t,!0)},Nn.prototype.collectDistinctViewsForSubTree_=function(t){return t.fold(function(t,e,n){if(e&&e.hasCompleteView())return[e.getCompleteView()];var r=[];return e&&(r=e.getQueryViews()),L(n,function(t,e){r=r.concat(e)}),r})},Nn.prototype.removeTags_=function(t){for(var e=0;e<t.length;++e){var n=t[e];if(!n.getQueryParams().loadsAllData()){var r=Nn.makeQueryKey_(n),i=this.queryToTagMap.get(r);this.queryToTagMap.delete(r),this.tagToQueryMap.delete(i)}}},Nn.queryForListening_=function(t){return t.getQueryParams().loadsAllData()&&!t.getQueryParams().isDefault()?t.getRef():t},Nn.prototype.setupListener_=function(t,e){var n=t.path,r=this.tagForQuery_(t),i=this.createListenerForView_(e),o=this.listenProvider_.startListening(Nn.queryForListening_(t),r,i.hashFn,i.onComplete),s=this.syncPointTree_.subtree(n);if(r)b.assert(!s.value.hasCompleteView(),"If we're adding a query, it shouldn't be shadowed");else for(var a=s.fold(function(t,e,n){if(!t.isEmpty()&&e&&e.hasCompleteView())return[e.getCompleteView().getQuery()];var r=[];return e&&(r=r.concat(e.getQueryViews().map(function(t){return t.getQuery()}))),L(n,function(t,e){r=r.concat(e)}),r}),u=0;u<a.length;++u){var c=a[u];this.listenProvider_.stopListening(Nn.queryForListening_(c),this.tagForQuery_(c))}return o},Nn.prototype.createListenerForView_=function(t){var n=this,r=t.getQuery(),i=this.tagForQuery_(r);return{hashFn:function(){return(t.getServerCache()||se.EMPTY_NODE).hash()},onComplete:function(t){if("ok"===t)return i?n.applyTaggedListenComplete(r.path,i):n.applyListenComplete(r.path);var e=function(t,e){var n="Unknown Error";"too_big"===t?n="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===t?n="Client doesn't have permission to access the desired data.":"unavailable"===t&&(n="The service is unavailable");var r=new Error(t+" at "+e.path.toString()+": "+n);return r.code=t.toUpperCase(),r}(t,r);return n.removeEventRegistration(r,null,e)}}},Nn.makeQueryKey_=function(t){return t.path.toString()+"$"+t.queryIdentifier()},Nn.parseQueryKey_=function(t){var e=t.indexOf("$");return b.assert(-1!==e&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new V(t.substr(0,e))}},Nn.prototype.queryKeyForTag_=function(t){return this.tagToQueryMap.get(t)},Nn.prototype.tagForQuery_=function(t){var e=Nn.makeQueryKey_(t);return this.queryToTagMap.get(e)},Nn.getNextQueryTag_=function(){return Nn.nextQueryTag_++},Nn.prototype.applyTaggedOperation_=function(t,e){var n=this.syncPointTree_.get(t);b.assert(n,"Missing sync point for query tag that we're tracking");var r=this.pendingWriteTree_.childWrites(t);return n.applyOperation(e,r,null)},Nn.prototype.applyOperationToSyncPoints_=function(t){return this.applyOperationHelper_(t,this.syncPointTree_,null,this.pendingWriteTree_.childWrites(V.Empty))},Nn.prototype.applyOperationHelper_=function(t,e,n,r){if(t.path.isEmpty())return this.applyOperationDescendantsHelper_(t,e,n,r);var i=e.get(V.Empty);null==n&&null!=i&&(n=i.getCompleteServerCache(V.Empty));var o=[],s=t.path.getFront(),a=t.operationForChild(s),u=e.children.get(s);if(u&&a){var c=n?n.getImmediateChild(s):null,h=r.child(s);o=o.concat(this.applyOperationHelper_(a,u,c,h))}return i&&(o=o.concat(i.applyOperation(t,r,n))),o},Nn.prototype.applyOperationDescendantsHelper_=function(o,t,s,a){var u=this,e=t.get(V.Empty);null==s&&null!=e&&(s=e.getCompleteServerCache(V.Empty));var c=[];return t.children.inorderTraversal(function(t,e){var n=s?s.getImmediateChild(t):null,r=a.child(t),i=o.operationForChild(t);i&&(c=c.concat(u.applyOperationDescendantsHelper_(i,e,n,r)))}),e&&(c=c.concat(e.applyOperation(o,a,s))),c},Nn.nextQueryTag_=1,Nn);function Nn(t){this.listenProvider_=t,this.syncPointTree_=He.Empty,this.pendingWriteTree_=new Tn,this.tagToQueryMap=new Map,this.queryToTagMap=new Map}var On=(Dn.prototype.getNode=function(t){return this.rootNode_.getChild(t)},Dn.prototype.updateSnapshot=function(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)},Dn);function Dn(){this.rootNode_=se.EMPTY_NODE}var kn=(xn.prototype.getToken=function(t){return this.auth_?this.auth_.getToken(t).catch(function(t){return t&&"auth/token-not-initialized"===t.code?(f("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)}):Promise.resolve(null)},xn.prototype.addTokenChangeListener=function(e){this.auth_?this.auth_.addAuthTokenListener(e):(setTimeout(function(){return e(null)},0),this.authProvider_.get().then(function(t){return t.addAuthTokenListener(e)}))},xn.prototype.removeTokenChangeListener=function(e){this.authProvider_.get().then(function(t){return t.removeAuthTokenListener(e)})},xn.prototype.notifyForInvalidToken=function(){var t='Provided authentication credentials for the app named "'+this.app_.name+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.app_.options?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.app_.options?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',g(t)},xn);function xn(t,e){var n=this;this.app_=t,this.authProvider_=e,this.auth_=null,this.auth_=e.getImmediate({optional:!0}),this.auth_||e.get().then(function(t){return n.auth_=t})}var Rn=(Pn.prototype.incrementCounter=function(t,e){void 0===e&&(e=1),b.contains(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e},Pn.prototype.get=function(){return b.deepCopy(this.counters_)},Pn);function Pn(){this.counters_={}}var Ln=(Mn.getCollection=function(t){var e=t.toString();return this.collections_[e]||(this.collections_[e]=new Rn),this.collections_[e]},Mn.getOrCreateReporter=function(t,e){var n=t.toString();return this.reporters_[n]||(this.reporters_[n]=e()),this.reporters_[n]},Mn.collections_={},Mn.reporters_={},Mn);function Mn(){}var Fn=(jn.prototype.get=function(){var t=this.collection_.get(),n=d.__assign({},t);return this.last_&&L(this.last_,function(t,e){n[t]=n[t]-e}),this.last_=t,n},jn);function jn(t){this.collection_=t,this.last_=null}var Un=(qn.prototype.includeStat=function(t){this.statsToReport_[t]=!0},qn.prototype.reportStats_=function(){var n=this,t=this.statsListener_.get(),r={},i=!1;L(t,function(t,e){0<e&&b.contains(n.statsToReport_,t)&&(r[t]=e,i=!0)}),i&&this.server_.reportStats(r),j(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))},qn);function qn(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new Fn(t);var n=1e4+2e4*Math.random();j(this.reportStats_.bind(this),Math.floor(n))}var Vn=(Hn.prototype.queueEvents=function(t){for(var e=null,n=0;n<t.length;n++){var r=t[n],i=r.getPath();null===e||i.equals(e.getPath())||(this.eventLists_.push(e),e=null),null===e&&(e=new Wn(i)),e.add(r)}e&&this.eventLists_.push(e)},Hn.prototype.raiseEventsAtPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.equals(e)})},Hn.prototype.raiseEventsForChangedPath=function(e,t){this.queueEvents(t),this.raiseQueuedEventsMatchingPredicate_(function(t){return t.contains(e)||e.contains(t)})},Hn.prototype.raiseQueuedEventsMatchingPredicate_=function(t){this.recursionDepth_++;for(var e=!0,n=0;n<this.eventLists_.length;n++){var r=this.eventLists_[n];r&&(t(r.getPath())?(this.eventLists_[n].raise(),this.eventLists_[n]=null):e=!1)}e&&(this.eventLists_=[]),this.recursionDepth_--},Hn);function Hn(){this.eventLists_=[],this.recursionDepth_=0}var Wn=(Bn.prototype.add=function(t){this.events_.push(t)},Bn.prototype.raise=function(){for(var t=0;t<this.events_.length;t++){var e=this.events_[t];if(null!==e){this.events_[t]=null;var n=e.getEventRunner();O&&f("event: "+e.toString()),F(n)}}},Bn.prototype.getPath=function(){return this.path_},Bn);function Bn(t){this.path_=t,this.events_=[]}var Gn=(zn.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Array.isArray(this.listeners_[t]))for(var r=d.__spread(this.listeners_[t]),i=0;i<r.length;i++)r[i].callback.apply(r[i].context,e)},zn.prototype.on=function(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});var r=this.getInitialEvent(t);r&&e.apply(n,r)},zn.prototype.off=function(t,e,n){this.validateEventType_(t);for(var r=this.listeners_[t]||[],i=0;i<r.length;i++)if(r[i].callback===e&&(!n||n===r[i].context))return void r.splice(i,1)},zn.prototype.validateEventType_=function(e){b.assert(this.allowedEvents_.find(function(t){return t===e}),"Unknown event: "+e)},zn);function zn(t){this.allowedEvents_=t,this.listeners_={},b.assert(Array.isArray(t)&&0<t.length,"Requires a non-empty array")}var Kn,Qn=(Kn=Gn,d.__extends(Yn,Kn),Yn.getInstance=function(){return new Yn},Yn.prototype.getInitialEvent=function(t){return b.assert("visible"===t,"Unknown event type: "+t),[this.visible_]},Yn);function Yn(){var e,t,n=Kn.call(this,["visible"])||this;return"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(t="visibilitychange",e="hidden"):void 0!==document.mozHidden?(t="mozvisibilitychange",e="mozHidden"):void 0!==document.msHidden?(t="msvisibilitychange",e="msHidden"):void 0!==document.webkitHidden&&(t="webkitvisibilitychange",e="webkitHidden")),n.visible_=!0,t&&document.addEventListener(t,function(){var t=!document[e];t!==n.visible_&&(n.visible_=t,n.trigger("visible",t))},!1),n}var Xn,Jn=(Xn=Gn,d.__extends($n,Xn),$n.getInstance=function(){return new $n},$n.prototype.getInitialEvent=function(t){return b.assert("online"===t,"Unknown event type: "+t),[this.online_]},$n.prototype.currentlyOnline=function(){return this.online_},$n);function $n(){var t=Xn.call(this,["online"])||this;return t.online_=!0,"undefined"==typeof window||void 0===window.addEventListener||b.isMobileCordova()||(window.addEventListener("online",function(){t.online_||(t.online_=!0,t.trigger("online",!0))},!1),window.addEventListener("offline",function(){t.online_&&(t.online_=!1,t.trigger("online",!1))},!1)),t}var Zn=(tr.prototype.closeAfter=function(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)},tr.prototype.handleResponse=function(t,e){var r=this;this.pendingResponses[t]=e;for(var n=function(){var e=i.pendingResponses[i.currentResponseNum];delete i.pendingResponses[i.currentResponseNum];for(var t=function(t){e[t]&&F(function(){r.onMessage_(e[t])})},n=0;n<e.length;++n)t(n);if(i.currentResponseNum===i.closeAfterResponse)return i.onClose&&(i.onClose(),i.onClose=null),"break";i.currentResponseNum++},i=this;this.pendingResponses[this.currentResponseNum]&&"break"!==n(););},tr);function tr(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}var er=(nr.prototype.open=function(t,e){var s=this;this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new Zn(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(function(){s.log_("Timed out trying to connect."),s.onClosed_(),s.connectTimeoutTimer_=null},Math.floor(3e4)),function(t){if(b.isNodeSdk()||"complete"===document.readyState)t();else{var e=!1,n=function(){document.body?e||(e=!0,t()):setTimeout(n,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",function(){"complete"===document.readyState&&n()}),window.attachEvent("onload",n))}}(function(){if(!s.isClosed_){s.scriptTagHolder=new rr(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=d.__read(t,5),r=n[0],i=n[1],o=n[2];if(n[3],n[4],s.incrementIncomingBytes_(t),s.scriptTagHolder)if(s.connectTimeoutTimer_&&(clearTimeout(s.connectTimeoutTimer_),s.connectTimeoutTimer_=null),s.everConnected_=!0,"start"===r)s.id=i,s.password=o;else{if("close"!==r)throw new Error("Unrecognized command received: "+r);i?(s.scriptTagHolder.sendNewPolls=!1,s.myPacketOrderer.closeAfter(i,function(){s.onClosed_()})):s.onClosed_()}},function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=d.__read(t,2),r=n[0],i=n[1];s.incrementIncomingBytes_(t),s.myPacketOrderer.handleResponse(r,i)},function(){s.onClosed_()},s.urlFn);var t={start:"t"};t.ser=Math.floor(1e8*Math.random()),s.scriptTagHolder.uniqueCallbackIdentifier&&(t.cb=s.scriptTagHolder.uniqueCallbackIdentifier),t.v="5",s.transportSessionId&&(t.s=s.transportSessionId),s.lastSessionId&&(t.ls=s.lastSessionId),"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(G)&&(t.r="f");var e=s.urlFn(t);s.log_("Connecting via long-poll to "+e),s.scriptTagHolder.addTag(e,function(){})}})},nr.prototype.start=function(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)},nr.forceAllow=function(){nr.forceAllow_=!0},nr.forceDisallow=function(){nr.forceDisallow_=!0},nr.isAvailable=function(){return!(b.isNodeSdk()||!nr.forceAllow_&&(nr.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))},nr.prototype.markConnectionHealthy=function(){},nr.prototype.shutdown_=function(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)},nr.prototype.onClosed_=function(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))},nr.prototype.close=function(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())},nr.prototype.send=function(t){var e=b.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);for(var n=b.base64Encode(e),r=E(n,1840),i=0;i<r.length;i++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[i]),this.curSegmentNum++},nr.prototype.addDisconnectPingFrame=function(t,e){if(!b.isNodeSdk()){this.myDisconnFrame=document.createElement("iframe");var n={dframe:"t"};n.id=t,n.pw=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}},nr.prototype.incrementIncomingBytes_=function(t){var e=b.stringify(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)},nr);function nr(t,e,n,r){this.connId=t,this.repoInfo=e,this.transportSessionId=n,this.lastSessionId=r,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=p(t),this.stats_=Ln.getCollection(e),this.urlFn=function(t){return e.connectionURL(z,t)}}var rr=(ir.createIFrame_=function(){var e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||f("No IE domain setting required")}catch(t){var n=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e},ir.prototype.close=function(){var t=this;this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(function(){null!==t.myIFrame&&(document.body.removeChild(t.myIFrame),t.myIFrame=null)},Math.floor(0)));var e=this.onDisconnect;e&&(this.onDisconnect=null,e())},ir.prototype.startLongPoll=function(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););},ir.prototype.newRequest_=function(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(0<this.pendingSegs.length?2:1)){this.currentSerial++;var t={};t.id=this.myID,t.pw=this.myPW,t.ser=this.currentSerial;for(var e=this.urlFn(t),n="",r=0;0<this.pendingSegs.length&&this.pendingSegs[0].d.length+30+n.length<=1870;){var i=this.pendingSegs.shift();n=n+"&seg"+r+"="+i.seg+"&ts"+r+"="+i.ts+"&d"+r+"="+i.d,r++}return e+=n,this.addLongPollTag_(e,this.currentSerial),!0}return!1},ir.prototype.enqueueSegment=function(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()},ir.prototype.addLongPollTag_=function(t,e){var n=this;function r(){n.outstandingRequests.delete(e),n.newRequest_()}this.outstandingRequests.add(e);var i=setTimeout(r,Math.floor(25e3));this.addTag(t,function(){clearTimeout(i),r()})},ir.prototype.addTag=function(t,n){var r=this;b.isNodeSdk()?this.doNodeLongPoll(t,n):setTimeout(function(){try{if(!r.sendNewPolls)return;var e=r.myIFrame.doc.createElement("script");e.type="text/javascript",e.async=!0,e.src=t,e.onload=e.onreadystatechange=function(){var t=e.readyState;t&&"loaded"!==t&&"complete"!==t||(e.onload=e.onreadystatechange=null,e.parentNode&&e.parentNode.removeChild(e),n())},e.onerror=function(){f("Long-poll script failed to load: "+t),r.sendNewPolls=!1,r.close()},r.myIFrame.doc.body.appendChild(e)}catch(t){}},Math.floor(1))},ir);function ir(t,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,b.isNodeSdk())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=A(),window["pLPCommand"+this.uniqueCallbackIdentifier]=t,window["pRTLPCB"+this.uniqueCallbackIdentifier]=e,this.myIFrame=ir.createIFrame_();var i="";if(this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,"javascript:".length))i='<script>document.domain="'+document.domain+'";<\/script>';var o="<html><body>"+i+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(t){f("frame writing exception"),t.stack&&f(t.stack),f(t)}}}var or="";var sr=null;"undefined"!=typeof MozWebSocket?sr=MozWebSocket:"undefined"!=typeof WebSocket&&(sr=WebSocket);var ar=(ur.connectionURL_=function(t,e,n){var r={v:"5"};return!b.isNodeSdk()&&"undefined"!=typeof location&&location.href&&-1!==location.href.indexOf(G)&&(r.r="f"),e&&(r.s=e),n&&(r.ls=n),t.connectionURL("websocket",r)},ur.prototype.open=function(t,e){var n=this;this.onDisconnect=e,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,I.set("previous_websocket_failure",!0);try{if(b.isNodeSdk()){var r=b.CONSTANTS.NODE_ADMIN?"AdminNode":"Node",i={headers:{"User-Agent":"Firebase/5/"+or+"/"+u.platform+"/"+r}},o=u.env,s=0===this.connURL.indexOf("wss://")?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;s&&(i.proxy={origin:s}),this.mySock=new sr(this.connURL,[],i)}else this.mySock=new sr(this.connURL)}catch(t){this.log_("Error instantiating WebSocket.");var a=t.message||t.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=function(){n.log_("Websocket connected."),n.everConnected_=!0},this.mySock.onclose=function(){n.log_("Websocket connection was disconnected."),n.mySock=null,n.onClosed_()},this.mySock.onmessage=function(t){n.handleIncomingFrame(t)},this.mySock.onerror=function(t){n.log_("WebSocket error.  Closing connection.");var e=t.message||t.data;e&&n.log_(e),n.onClosed_()}},ur.prototype.start=function(){},ur.forceDisallow=function(){ur.forceDisallow_=!0},ur.isAvailable=function(){var t=!1;if("undefined"!=typeof navigator&&navigator.userAgent){var e=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);e&&1<e.length&&parseFloat(e[1])<4.4&&(t=!0)}return!t&&null!==sr&&!ur.forceDisallow_},ur.previouslyFailed=function(){return I.isInMemoryStorage||!0===I.get("previous_websocket_failure")},ur.prototype.markConnectionHealthy=function(){I.remove("previous_websocket_failure")},ur.prototype.appendFrame_=function(t){if(this.frames.push(t),this.frames.length===this.totalFrames){var e=this.frames.join("");this.frames=null;var n=b.jsonEval(e);this.onMessage(n)}},ur.prototype.handleNewFrameCount_=function(t){this.totalFrames=t,this.frames=[]},ur.prototype.extractFrameCount_=function(t){if(b.assert(null===this.frames,"We already have a frame buffer"),t.length<=6){var e=Number(t);if(!isNaN(e))return this.handleNewFrameCount_(e),null}return this.handleNewFrameCount_(1),t},ur.prototype.handleIncomingFrame=function(t){if(null!==this.mySock){var e=t.data;if(this.bytesReceived+=e.length,this.stats_.incrementCounter("bytes_received",e.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(e);else{var n=this.extractFrameCount_(e);null!==n&&this.appendFrame_(n)}}},ur.prototype.send=function(t){this.resetKeepAlive();var e=b.stringify(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);var n=E(e,16384);1<n.length&&this.sendString_(String(n.length));for(var r=0;r<n.length;r++)this.sendString_(n[r])},ur.prototype.shutdown_=function(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)},ur.prototype.onClosed_=function(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))},ur.prototype.close=function(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())},ur.prototype.resetKeepAlive=function(){var t=this;clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(function(){t.mySock&&t.sendString_("0"),t.resetKeepAlive()},Math.floor(45e3))},ur.prototype.sendString_=function(t){try{this.mySock.send(t)}catch(t){this.log_("Exception thrown from WebSocket.send():",t.message||t.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}},ur.responsesRequiredToBeHealthy=2,ur.healthyTimeout=3e4,ur);function ur(t,e,n,r){this.connId=t,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=p(this.connId),this.stats_=Ln.getCollection(e),this.connURL=ur.connectionURL_(e,n,r)}var cr=(Object.defineProperty(hr,"ALL_TRANSPORTS",{get:function(){return[er,ar]},enumerable:!0,configurable:!0}),hr.prototype.initTransports_=function(t){var e,n,r=ar&&ar.isAvailable(),i=r&&!ar.previouslyFailed();if(t.webSocketOnly&&(r||g("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[ar];else{var o=this.transports_=[];try{for(var s=d.__values(hr.ALL_TRANSPORTS),a=s.next();!a.done;a=s.next()){var u=a.value;u&&u.isAvailable()&&o.push(u)}}catch(t){e={error:t}}finally{try{a&&!a.done&&(n=s.return)&&n.call(s)}finally{if(e)throw e.error}}}},hr.prototype.initialTransport=function(){if(0<this.transports_.length)return this.transports_[0];throw new Error("No transports available")},hr.prototype.upgradeTransport=function(){return 1<this.transports_.length?this.transports_[1]:null},hr);function hr(t){this.initTransports_(t)}var lr=(fr.prototype.start_=function(){var t=this,e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,void 0,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(function(){t.conn_&&t.conn_.open(n,r)},Math.floor(0));var i=e.healthyTimeout||0;0<i&&(this.healthyTimeout_=j(function(){t.healthyTimeout_=null,t.isHealthy_||(t.conn_&&102400<t.conn_.bytesReceived?(t.log_("Connection exceeded healthy timeout but has received "+t.conn_.bytesReceived+" bytes.  Marking connection healthy."),t.isHealthy_=!0,t.conn_.markConnectionHealthy()):t.conn_&&10240<t.conn_.bytesSent?t.log_("Connection exceeded healthy timeout but has sent "+t.conn_.bytesSent+" bytes.  Leaving connection alive."):(t.log_("Closing unhealthy connection after timeout."),t.close()))},Math.floor(i)))},fr.prototype.nextTransportId_=function(){return"c:"+this.id+":"+this.connectionCount++},fr.prototype.disconnReceiver_=function(e){var n=this;return function(t){e===n.conn_?n.onConnectionLost_(t):e===n.secondaryConn_?(n.log_("Secondary connection lost."),n.onSecondaryConnectionLost_()):n.log_("closing an old connection")}},fr.prototype.connReceiver_=function(e){var n=this;return function(t){2!==n.state_&&(e===n.rx_?n.onPrimaryMessageReceived_(t):e===n.secondaryConn_?n.onSecondaryMessageReceived_(t):n.log_("message on old connection"))}},fr.prototype.sendRequest=function(t){var e={t:"d",d:t};this.sendData_(e)},fr.prototype.tryCleanupConnection=function(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)},fr.prototype.onSecondaryControl_=function(t){if("t"in t){var e=t.t;"a"===e?this.upgradeIfSecondaryHealthy_():"r"===e?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),this.tx_!==this.secondaryConn_&&this.rx_!==this.secondaryConn_||this.close()):"o"===e&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}},fr.prototype.onSecondaryMessageReceived_=function(t){var e=w("t",t),n=w("d",t);if("c"===e)this.onSecondaryControl_(n);else{if("d"!==e)throw new Error("Unknown protocol layer: "+e);this.pendingDataMessages.push(n)}},fr.prototype.upgradeIfSecondaryHealthy_=function(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))},fr.prototype.proceedWithUpgrade_=function(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()},fr.prototype.onPrimaryMessageReceived_=function(t){var e=w("t",t),n=w("d",t);"c"===e?this.onControl_(n):"d"===e&&this.onDataMessage_(n)},fr.prototype.onDataMessage_=function(t){this.onPrimaryResponse_(),this.onMessage_(t)},fr.prototype.onPrimaryResponse_=function(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))},fr.prototype.onControl_=function(t){var e=w("t",t);if("d"in t){var n=t.d;if("h"===e)this.onHandshake_(n);else if("n"===e){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(var r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===e?this.onConnectionShutdown_(n):"r"===e?this.onReset_(n):"e"===e?v("Server Error: "+n):"o"===e?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):v("Unknown control packet command: "+e)}},fr.prototype.onHandshake_=function(t){var e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.updateHost(r),0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),"5"!==n&&g("Protocol version mismatch detected"),this.tryStartUpgrade_())},fr.prototype.tryStartUpgrade_=function(){var t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)},fr.prototype.startUpgrade_=function(t){var e=this;this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;var n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),j(function(){e.secondaryConn_&&(e.log_("Timed out trying to upgrade."),e.secondaryConn_.close())},Math.floor(6e4))},fr.prototype.onReset_=function(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.updateHost(t),1===this.state_?this.close():(this.closeConnections_(),this.start_())},fr.prototype.onConnectionEstablished_=function(t,e){var n=this;this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):j(function(){n.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))},fr.prototype.sendPingOnPrimaryIfNecessary_=function(){this.isHealthy_||1!==this.state_||(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))},fr.prototype.onSecondaryConnectionLost_=function(){var t=this.secondaryConn_;this.secondaryConn_=null,this.tx_!==t&&this.rx_!==t||this.close()},fr.prototype.onConnectionLost_=function(t){this.conn_=null,t||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(I.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()},fr.prototype.onConnectionShutdown_=function(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()},fr.prototype.sendData_=function(t){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(t)},fr.prototype.close=function(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))},fr.prototype.closeConnections_=function(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)},fr);function fr(t,e,n,r,i,o,s){this.id=t,this.repoInfo_=e,this.onMessage_=n,this.onReady_=r,this.onDisconnect_=i,this.onKill_=o,this.lastSessionId=s,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=p("c:"+this.id+":"),this.transportManager_=new cr(e),this.log_("Connection created"),this.start_()}var pr=(dr.prototype.put=function(t,e,n,r){},dr.prototype.merge=function(t,e,n,r){},dr.prototype.refreshAuthToken=function(t){},dr.prototype.onDisconnectPut=function(t,e,n){},dr.prototype.onDisconnectMerge=function(t,e,n){},dr.prototype.onDisconnectCancel=function(t,e){},dr.prototype.reportStats=function(t){},dr);function dr(){}var vr,yr=(vr=pr,d.__extends(gr,vr),gr.prototype.sendRequest=function(t,e,n){var r=++this.requestNumber_,i={r:r,a:t,b:e};this.log_(b.stringify(i)),b.assert(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(i),n&&(this.requestCBHash_[r]=n)},gr.prototype.listen=function(t,e,n,r){var i=t.queryIdentifier(),o=t.path.toString();this.log_("Listen called for "+o+" "+i),this.listens.has(o)||this.listens.set(o,new Map),b.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"listen() called for non-default but complete query"),b.assert(!this.listens.get(o).has(i),"listen() called twice for same path/queryId.");var s={onComplete:r,hashFn:e,query:t,tag:n};this.listens.get(o).set(i,s),this.connected_&&this.sendListen_(s)},gr.prototype.sendListen_=function(r){var i=this,o=r.query,s=o.path.toString(),a=o.queryIdentifier();this.log_("Listen on "+s+" for "+a);var t={p:s};r.tag&&(t.q=o.queryObject(),t.t=r.tag),t.h=r.hashFn(),this.sendRequest("q",t,function(t){var e=t.d,n=t.s;gr.warnOnListenWarnings_(e,o),(i.listens.get(s)&&i.listens.get(s).get(a))===r&&(i.log_("listen response",t),"ok"!==n&&i.removeListen_(s,a),r.onComplete&&r.onComplete(n,e))})},gr.warnOnListenWarnings_=function(t,e){if(t&&"object"==typeof t&&b.contains(t,"w")){var n=b.safeGet(t,"w");if(Array.isArray(n)&&~n.indexOf("no_index")){var r='".indexOn": "'+e.getQueryParams().getIndex().toString()+'"',i=e.path.toString();g("Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding "+r+" at "+i+" to your security rules for better performance.")}}},gr.prototype.refreshAuthToken=function(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},function(){}),this.reduceReconnectDelayIfAdminCredential_(t)},gr.prototype.reduceReconnectDelayIfAdminCredential_=function(t){(t&&40===t.length||b.isAdmin(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)},gr.prototype.tryAuth=function(){var r=this;if(this.connected_&&this.authToken_){var i=this.authToken_,t=b.isValidFormat(i)?"auth":"gauth",e={cred:i};null===this.authOverride_?e.noauth=!0:"object"==typeof this.authOverride_&&(e.authvar=this.authOverride_),this.sendRequest(t,e,function(t){var e=t.s,n=t.d||"error";r.authToken_===i&&("ok"===e?r.invalidAuthTokenCount_=0:r.onAuthRevoked_(e,n))})}},gr.prototype.unlisten=function(t,e){var n=t.path.toString(),r=t.queryIdentifier();this.log_("Unlisten called for "+n+" "+r),b.assert(t.getQueryParams().isDefault()||!t.getQueryParams().loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(n,r)&&this.connected_&&this.sendUnlisten_(n,r,t.queryObject(),e)},gr.prototype.sendUnlisten_=function(t,e,n,r){this.log_("Unlisten on "+t+" for "+e);var i={p:t};r&&(i.q=n,i.t=r),this.sendRequest("n",i)},gr.prototype.onDisconnectPut=function(t,e,n){this.connected_?this.sendOnDisconnect_("o",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:e,onComplete:n})},gr.prototype.onDisconnectMerge=function(t,e,n){this.connected_?this.sendOnDisconnect_("om",t,e,n):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:e,onComplete:n})},gr.prototype.onDisconnectCancel=function(t,e){this.connected_?this.sendOnDisconnect_("oc",t,null,e):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:e})},gr.prototype.sendOnDisconnect_=function(t,e,n,r){var i={p:e,d:n};this.log_("onDisconnect "+t,i),this.sendRequest(t,i,function(t){r&&setTimeout(function(){r(t.s,t.d)},Math.floor(0))})},gr.prototype.put=function(t,e,n,r){this.putInternal("p",t,e,n,r)},gr.prototype.merge=function(t,e,n,r){this.putInternal("m",t,e,n,r)},gr.prototype.putInternal=function(t,e,n,r,i){var o={p:e,d:n};void 0!==i&&(o.h=i),this.outstandingPuts_.push({action:t,request:o,onComplete:r}),this.outstandingPutCount_++;var s=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(s):this.log_("Buffering put: "+e)},gr.prototype.sendPut_=function(e){var n=this,r=this.outstandingPuts_[e].action,t=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(r,t,function(t){n.log_(r+" response",t),delete n.outstandingPuts_[e],n.outstandingPutCount_--,0===n.outstandingPutCount_&&(n.outstandingPuts_=[]),i&&i(t.s,t.d)})},gr.prototype.reportStats=function(t){var n=this;if(this.connected_){var e={c:t};this.log_("reportStats",e),this.sendRequest("s",e,function(t){if("ok"!==t.s){var e=t.d;n.log_("reportStats","Error sending stats: "+e)}})}},gr.prototype.onDataMessage_=function(t){if("r"in t){this.log_("from server: "+b.stringify(t));var e=t.r,n=this.requestCBHash_[e];n&&(delete this.requestCBHash_[e],n(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}},gr.prototype.onDataPush_=function(t,e){this.log_("handleServerMessage",t,e),"d"===t?this.onDataUpdate_(e.p,e.d,!1,e.t):"m"===t?this.onDataUpdate_(e.p,e.d,!0,e.t):"c"===t?this.onListenRevoked_(e.p,e.q):"ac"===t?this.onAuthRevoked_(e.s,e.d):"sd"===t?this.onSecurityDebugPacket_(e):v("Unrecognized action received from server: "+b.stringify(t)+"\nAre you using the latest client?")},gr.prototype.onReady_=function(t,e){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=e,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)},gr.prototype.scheduleConnect_=function(t){var e=this;b.assert(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(function(){e.establishConnectionTimer_=null,e.establishConnection_()},Math.floor(t))},gr.prototype.onVisible_=function(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)),this.visible_=t},gr.prototype.onOnline_=function(t){t?(this.log_("Browser went online."),this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())},gr.prototype.onRealtimeDisconnect_=function(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(3e4<(new Date).getTime()-this.lastConnectionEstablishedTime_&&(this.reconnectDelay_=1e3),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());var t=(new Date).getTime()-this.lastConnectionAttemptTime_,e=Math.max(0,this.reconnectDelay_-t);e=Math.random()*e,this.log_("Trying to reconnect in "+e+"ms"),this.scheduleConnect_(e),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)},gr.prototype.establishConnection_=function(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=(new Date).getTime(),this.lastConnectionEstablishedTime_=null;var e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+gr.nextConnectionId_++,o=this,s=this.lastSessionId,a=!1,u=null,c=function(){u?u.close():(a=!0,r())};this.realtime_={close:c,sendRequest:function(t){b.assert(u,"sendRequest call when we're not connected not allowed."),u.sendRequest(t)}};var t=this.forceTokenRefresh_;this.forceTokenRefresh_=!1,this.authTokenProvider_.getToken(t).then(function(t){a?f("getToken() completed but was canceled"):(f("getToken() completed. Creating connection."),o.authToken_=t&&t.accessToken,u=new lr(i,o.repoInfo_,e,n,r,function(t){g(t+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},s))}).then(null,function(t){o.log_("Failed to get token: "+t),a||(b.CONSTANTS.NODE_ADMIN&&g(t),c())})}},gr.prototype.interrupt=function(t){f("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())},gr.prototype.resume=function(t){f("Resuming connection for reason: "+t),delete this.interruptReasons_[t],b.isEmpty(this.interruptReasons_)&&(this.reconnectDelay_=1e3,this.realtime_||this.scheduleConnect_(0))},gr.prototype.handleTimestamp_=function(t){var e=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:e})},gr.prototype.cancelSentTransactions_=function(){for(var t=0;t<this.outstandingPuts_.length;t++){var e=this.outstandingPuts_[t];e&&"h"in e.request&&e.queued&&(e.onComplete&&e.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])},gr.prototype.onListenRevoked_=function(t,e){var n;n=e?e.map(function(t){return P(t)}).join("$"):"default";var r=this.removeListen_(t,n);r&&r.onComplete&&r.onComplete("permission_denied")},gr.prototype.removeListen_=function(t,e){var n,r=new V(t).toString();if(this.listens.has(r)){var i=this.listens.get(r);n=i.get(e),i.delete(e),0===i.size&&this.listens.delete(r)}else n=void 0;return n},gr.prototype.onAuthRevoked_=function(t,e){f("Auth token revoked: "+t+"/"+e),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),"invalid_token"!==t&&"permission_denied"!==t||(this.invalidAuthTokenCount_++,3<=this.invalidAuthTokenCount_&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))},gr.prototype.onSecurityDebugPacket_=function(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))},gr.prototype.restoreState_=function(){var e,t,n,r;this.tryAuth();try{for(var i=d.__values(this.listens.values()),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,d.__values(s.values())),u=a.next();!u.done;u=a.next()){var c=u.value;this.sendListen_(c)}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}for(var h=0;h<this.outstandingPuts_.length;h++)this.outstandingPuts_[h]&&this.sendPut_(h);for(;this.onDisconnectRequestQueue_.length;){var l=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(l.action,l.pathString,l.data,l.onComplete)}},gr.prototype.sendConnectStats_=function(){var t={},e="js";b.CONSTANTS.NODE_ADMIN?e="admin_node":b.CONSTANTS.NODE_CLIENT&&(e="node"),t["sdk."+e+"."+or.replace(/\./g,"-")]=1,b.isMobileCordova()?t["framework.cordova"]=1:b.isReactNative()&&(t["framework.reactnative"]=1),this.reportStats(t)},gr.prototype.shouldReconnect_=function(){var t=Jn.getInstance().currentlyOnline();return b.isEmpty(this.interruptReasons_)&&t},gr.nextPersistentConnectionId_=0,gr.nextConnectionId_=0,gr);function gr(t,e,n,r,i,o){var s=vr.call(this)||this;if(s.repoInfo_=t,s.onDataUpdate_=e,s.onConnectStatus_=n,s.onServerInfoUpdate_=r,s.authTokenProvider_=i,s.authOverride_=o,s.id=gr.nextPersistentConnectionId_++,s.log_=p("p:"+s.id+":"),s.interruptReasons_={},s.listens=new Map,s.outstandingPuts_=[],s.outstandingPutCount_=0,s.onDisconnectRequestQueue_=[],s.connected_=!1,s.reconnectDelay_=1e3,s.maxReconnectDelay_=3e5,s.securityDebugCallback_=null,s.lastSessionId=null,s.establishConnectionTimer_=null,s.visible_=!1,s.requestCBHash_={},s.requestNumber_=0,s.realtime_=null,s.authToken_=null,s.forceTokenRefresh_=!1,s.invalidAuthTokenCount_=0,s.firstConnection_=!0,s.lastConnectionAttemptTime_=null,s.lastConnectionEstablishedTime_=null,o&&!b.isNodeSdk())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");return s.scheduleConnect_(0),Qn.getInstance().on("visible",s.onVisible_,s),-1===t.host.indexOf("fblocal")&&Jn.getInstance().on("online",s.onOnline_,s),s}var mr,_r=(mr=pr,d.__extends(br,mr),br.prototype.reportStats=function(t){throw new Error("Method not implemented.")},br.getListenId_=function(t,e){return void 0!==e?"tag$"+e:(b.assert(t.getQueryParams().isDefault(),"should have a tag if it's not a default query."),t.path.toString())},br.prototype.listen=function(t,e,r,i){var o=this,s=t.path.toString();this.log_("Listen called for "+s+" "+t.queryIdentifier());var a=br.getListenId_(t,r),u={};this.listens_[a]=u;var n=t.getQueryParams().toRestQueryStringParameters();this.restRequest_(s+".json",n,function(t,e){var n=e;404===t&&(t=n=null),null===t&&o.onDataUpdate_(s,n,!1,r),b.safeGet(o.listens_,a)===u&&i(t?401===t?"permission_denied":"rest_error:"+t:"ok",null)})},br.prototype.unlisten=function(t,e){var n=br.getListenId_(t,e);delete this.listens_[n]},br.prototype.refreshAuthToken=function(t){},br.prototype.restRequest_=function(i,o,s){var a=this;void 0===o&&(o={}),o.format="export",this.authTokenProvider_.getToken(!1).then(function(t){var e=t&&t.accessToken;e&&(o.auth=e);var n=(a.repoInfo_.secure?"https://":"http://")+a.repoInfo_.host+i+"?ns="+a.repoInfo_.namespace+b.querystring(o);a.log_("Sending REST request for "+n);var r=new XMLHttpRequest;r.onreadystatechange=function(){if(s&&4===r.readyState){a.log_("REST Response for "+n+" received. status:",r.status,"response:",r.responseText);var t=null;if(200<=r.status&&r.status<300){try{t=b.jsonEval(r.responseText)}catch(t){g("Failed to parse JSON response for "+n+": "+r.responseText)}s(null,t)}else 401!==r.status&&404!==r.status&&g("Got unsuccessful REST response for "+n+" Status: "+r.status),s(r.status);s=null}},r.open("GET",n,!0),r.send()})},br);function br(t,e,n){var r=mr.call(this)||this;return r.repoInfo_=t,r.onDataUpdate_=e,r.authTokenProvider_=n,r.log_=p("p:rest:"),r.listens_={},r}var wr="repo_interrupt",Er=(Tr.prototype.toString=function(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host},Tr.prototype.name=function(){return this.repoInfo_.namespace},Tr.prototype.serverTime=function(){var t=this.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t},Tr.prototype.generateServerValues=function(){return(t=t={timestamp:this.serverTime()}).timestamp=t.timestamp||(new Date).getTime(),t;var t},Tr.prototype.onDataUpdate_=function(t,e,n,r){this.dataUpdateCount++;var i=new V(t);e=this.interceptServerDataCallback_?this.interceptServerDataCallback_(t,e):e;var o=[];if(r)if(n){var s=b.map(e,function(t){return fe(t)});o=this.serverSyncTree_.applyTaggedQueryMerge(i,s,r)}else{var a=fe(e);o=this.serverSyncTree_.applyTaggedQueryOverwrite(i,a,r)}else if(n){var u=b.map(e,function(t){return fe(t)});o=this.serverSyncTree_.applyServerMerge(i,u)}else{var c=fe(e);o=this.serverSyncTree_.applyServerOverwrite(i,c)}var h=i;0<o.length&&(h=this.rerunTransactions_(i)),this.eventQueue_.raiseEventsForChangedPath(h,o)},Tr.prototype.interceptServerData_=function(t){this.interceptServerDataCallback_=t},Tr.prototype.onConnectStatus_=function(t){this.updateInfo_("connected",t),!1===t&&this.runOnDisconnectEvents_()},Tr.prototype.onServerInfoUpdate_=function(t){var n=this;L(t,function(t,e){n.updateInfo_(t,e)})},Tr.prototype.updateInfo_=function(t,e){var n=new V("/.info/"+t),r=fe(e);this.infoData_.updateSnapshot(n,r);var i=this.infoSyncTree_.applyServerOverwrite(n,r);this.eventQueue_.raiseEventsForChangedPath(n,i)},Tr.prototype.getNextWriteId_=function(){return this.nextWriteId_++},Tr.prototype.setWithPriority=function(i,t,e,o){var s=this;this.log_("set",{path:i.toString(),value:t,priority:e});var n=this.generateServerValues(),r=fe(t,e),a=Me(r,n),u=this.getNextWriteId_(),c=this.serverSyncTree_.applyUserOverwrite(i,a,u,!0);this.eventQueue_.queueEvents(c),this.server_.put(i.toString(),r.val(!0),function(t,e){var n="ok"===t;n||g("set at "+i+" failed: "+t);var r=s.serverSyncTree_.ackUserWrite(u,!n);s.eventQueue_.raiseEventsForChangedPath(i,r),s.callOnCompleteCallback(o,t,e)});var h=this.abortTransactions_(i);this.rerunTransactions_(h),this.eventQueue_.raiseEventsForChangedPath(h,[])},Tr.prototype.update=function(o,t,s){var a=this;this.log_("update",{path:o.toString(),value:t});var r=!0,i=this.generateServerValues(),u={};if(L(t,function(t,e){r=!1;var n=fe(e);u[t]=Me(n,i)}),r)f("update() called with empty data.  Don't do anything."),this.callOnCompleteCallback(s,"ok");else{var c=this.getNextWriteId_(),e=this.serverSyncTree_.applyUserMerge(o,u,c);this.eventQueue_.queueEvents(e),this.server_.merge(o.toString(),t,function(t,e){var n="ok"===t;n||g("update at "+o+" failed: "+t);var r=a.serverSyncTree_.ackUserWrite(c,!n),i=0<r.length?a.rerunTransactions_(o):o;a.eventQueue_.raiseEventsForChangedPath(i,r),a.callOnCompleteCallback(s,t,e)}),L(t,function(t){var e=a.abortTransactions_(o.child(t));a.rerunTransactions_(e)}),this.eventQueue_.raiseEventsForChangedPath(o,[])}},Tr.prototype.runOnDisconnectEvents_=function(){var r=this;this.log_("onDisconnectEvents");var t,n,i,e=this.generateServerValues(),o=(t=this.onDisconnect_,n=e,i=new ke,t.forEachTree(new V(""),function(t,e){i.remember(t,Me(e,n))}),i),s=[];o.forEachTree(V.Empty,function(t,e){s=s.concat(r.serverSyncTree_.applyServerOverwrite(t,e));var n=r.abortTransactions_(t);r.rerunTransactions_(n)}),this.onDisconnect_=new ke,this.eventQueue_.raiseEventsForChangedPath(V.Empty,s)},Tr.prototype.onDisconnectCancel=function(n,r){var i=this;this.server_.onDisconnectCancel(n.toString(),function(t,e){"ok"===t&&i.onDisconnect_.forget(n),i.callOnCompleteCallback(r,t,e)})},Tr.prototype.onDisconnectSet=function(n,t,r){var i=this,o=fe(t);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},Tr.prototype.onDisconnectSetWithPriority=function(n,t,e,r){var i=this,o=fe(t,e);this.server_.onDisconnectPut(n.toString(),o.val(!0),function(t,e){"ok"===t&&i.onDisconnect_.remember(n,o),i.callOnCompleteCallback(r,t,e)})},Tr.prototype.onDisconnectUpdate=function(r,n,i){var o=this;if(b.isEmpty(n))return f("onDisconnect().update() called with empty data.  Don't do anything."),void this.callOnCompleteCallback(i,"ok");this.server_.onDisconnectMerge(r.toString(),n,function(t,e){"ok"===t&&L(n,function(t,e){var n=fe(e);o.onDisconnect_.remember(r.child(t),n)}),o.callOnCompleteCallback(i,t,e)})},Tr.prototype.addEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.addEventRegistration(t,e):this.serverSyncTree_.addEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},Tr.prototype.removeEventCallbackForQuery=function(t,e){var n;n=".info"===t.path.getFront()?this.infoSyncTree_.removeEventRegistration(t,e):this.serverSyncTree_.removeEventRegistration(t,e),this.eventQueue_.raiseEventsAtPath(t.path,n)},Tr.prototype.interrupt=function(){this.persistentConnection_&&this.persistentConnection_.interrupt(wr)},Tr.prototype.resume=function(){this.persistentConnection_&&this.persistentConnection_.resume(wr)},Tr.prototype.stats=function(t){if(void 0===t&&(t=!1),"undefined"!=typeof console){var e;e=t?(this.statsListener_||(this.statsListener_=new Fn(this.stats_)),this.statsListener_.get()):this.stats_.get();var i=Object.keys(e).reduce(function(t,e){return Math.max(e.length,t)},0);L(e,function(t,e){for(var n=t,r=t.length;r<i+2;r++)n+=" ";console.log(n+e)})}},Tr.prototype.statsIncrementCounter=function(t){this.stats_.incrementCounter(t),this.statsReporter_.includeStat(t)},Tr.prototype.log_=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="";this.persistentConnection_&&(n=this.persistentConnection_.id+":"),f.apply(void 0,d.__spread([n],t))},Tr.prototype.callOnCompleteCallback=function(r,i,o){r&&F(function(){if("ok"===i)r(null);else{var t=(i||"error").toUpperCase(),e=t;o&&(e+=": "+o);var n=new Error(e);n.code=t,r(n)}})},Object.defineProperty(Tr.prototype,"database",{get:function(){return this.__database||(this.__database=new Hr(this))},enumerable:!0,configurable:!0}),Tr);function Tr(t,e,n,r){var s=this;this.repoInfo_=t,this.app=n,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Vn,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=new ke,this.persistentConnection_=null;var i=new kn(n,r);if(this.stats_=Ln.getCollection(t),e||0<=("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i))this.server_=new _r(this.repoInfo_,this.onDataUpdate_.bind(this),i),setTimeout(this.onConnectStatus_.bind(this,!0),0);else{var o=n.options.databaseAuthVariableOverride;if(null!=o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{b.stringify(o)}catch(t){throw new Error("Invalid authOverride provided: "+t)}}this.persistentConnection_=new yr(this.repoInfo_,this.onDataUpdate_.bind(this),this.onConnectStatus_.bind(this),this.onServerInfoUpdate_.bind(this),i,o),this.server_=this.persistentConnection_}i.addTokenChangeListener(function(t){s.server_.refreshAuthToken(t)}),this.statsReporter_=Ln.getOrCreateReporter(t,function(){return new Un(s.stats_,s.server_)}),this.transactionsInit_(),this.infoData_=new On,this.infoSyncTree_=new An({startListening:function(t,e,n,r){var i=[],o=s.infoData_.getNode(t.path);return o.isEmpty()||(i=s.infoSyncTree_.applyServerOverwrite(t.path,o),setTimeout(function(){r("ok")},0)),i},stopListening:function(){}}),this.updateInfo_("connected",!1),this.serverSyncTree_=new An({startListening:function(r,t,e,i){return s.server_.listen(r,e,t,function(t,e){var n=i(t,e);s.eventQueue_.raiseEventsForChangedPath(r.path,n)}),[]},stopListening:function(t,e){s.server_.unlisten(t,e)}})}var Ir=(Sr.prototype.getStartPost=function(){return this.startPost_},Sr.prototype.getEndPost=function(){return this.endPost_},Sr.prototype.matches=function(t){return this.index_.compare(this.getStartPost(),t)<=0&&this.index_.compare(t,this.getEndPost())<=0},Sr.prototype.updateChild=function(t,e,n,r,i,o){return this.matches(new bt(e,n))||(n=se.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,i,o)},Sr.prototype.updateFullNode=function(t,e,n){e.isLeafNode()&&(e=se.EMPTY_NODE);var r=e.withIndex(this.index_);r=r.updatePriority(se.EMPTY_NODE);var i=this;return e.forEachChild(Ut,function(t,e){i.matches(new bt(t,e))||(r=r.updateImmediateChild(t,se.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)},Sr.prototype.updatePriority=function(t,e){return t},Sr.prototype.filtersNodes=function(){return!0},Sr.prototype.getIndexedFilter=function(){return this.indexedFilter_},Sr.prototype.getIndex=function(){return this.index_},Sr.getStartPost_=function(t){if(t.hasStart()){var e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}return t.getIndex().minPost()},Sr.getEndPost_=function(t){if(t.hasEnd()){var e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}return t.getIndex().maxPost()},Sr);function Sr(t){this.indexedFilter_=new nn(t.getIndex()),this.index_=t.getIndex(),this.startPost_=Sr.getStartPost_(t),this.endPost_=Sr.getEndPost_(t)}var Cr=(Ar.prototype.updateChild=function(t,e,n,r,i,o){return this.rangedFilter_.matches(new bt(e,n))||(n=se.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,i,o):this.fullLimitUpdateChild_(t,e,n,i,o)},Ar.prototype.updateFullNode=function(t,e,n){var r;if(e.isLeafNode()||e.isEmpty())r=se.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<e.numChildren()&&e.isIndexed(this.index_)){r=se.EMPTY_NODE.withIndex(this.index_);var i=void 0;i=this.reverse_?e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);for(var o=0;i.hasNext()&&o<this.limit_;){var s=i.getNext();if(!(this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),s)<=0:this.index_.compare(s,this.rangedFilter_.getEndPost())<=0))break;r=r.updateImmediateChild(s.name,s.node),o++}}else{r=(r=e.withIndex(this.index_)).updatePriority(se.EMPTY_NODE);var a=void 0,u=void 0,c=void 0;if(i=void 0,this.reverse_){i=r.getReverseIterator(this.index_),a=this.rangedFilter_.getEndPost(),u=this.rangedFilter_.getStartPost();var h=this.index_.getCompare();c=function(t,e){return h(e,t)}}else i=r.getIterator(this.index_),a=this.rangedFilter_.getStartPost(),u=this.rangedFilter_.getEndPost(),c=this.index_.getCompare();o=0;for(var l=!1;i.hasNext();)s=i.getNext(),!l&&c(a,s)<=0&&(l=!0),l&&o<this.limit_&&c(s,u)<=0?o++:r=r.updateImmediateChild(s.name,se.EMPTY_NODE)}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)},Ar.prototype.updatePriority=function(t,e){return t},Ar.prototype.filtersNodes=function(){return!0},Ar.prototype.getIndexedFilter=function(){return this.rangedFilter_.getIndexedFilter()},Ar.prototype.getIndex=function(){return this.index_},Ar.prototype.fullLimitUpdateChild_=function(t,e,n,r,i){var o;if(this.reverse_){var s=this.index_.getCompare();o=function(t,e){return s(e,t)}}else o=this.index_.getCompare();var a=t;b.assert(a.numChildren()===this.limit_,"");var u=new bt(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),h=this.rangedFilter_.matches(u);if(a.hasChild(e)){for(var l=a.getImmediateChild(e),f=r.getChildAfterChild(this.index_,c,this.reverse_);null!=f&&(f.name===e||a.hasChild(f.name));)f=r.getChildAfterChild(this.index_,f,this.reverse_);var p=null==f?1:o(f,u);if(h&&!n.isEmpty()&&0<=p)return null!=i&&i.trackChildChange(tn.childChangedChange(e,n,l)),a.updateImmediateChild(e,n);null!=i&&i.trackChildChange(tn.childRemovedChange(e,l));var d=a.updateImmediateChild(e,se.EMPTY_NODE);return null!=f&&this.rangedFilter_.matches(f)?(null!=i&&i.trackChildChange(tn.childAddedChange(f.name,f.node)),d.updateImmediateChild(f.name,f.node)):d}return n.isEmpty()?t:h&&0<=o(c,u)?(null!=i&&(i.trackChildChange(tn.childRemovedChange(c.name,c.node)),i.trackChildChange(tn.childAddedChange(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,se.EMPTY_NODE)):t},Ar);function Ar(t){this.rangedFilter_=new Ir(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft()}var Nr=(Or.prototype.hasStart=function(){return this.startSet_},Or.prototype.isViewFromLeft=function(){return""===this.viewFrom_?this.startSet_:this.viewFrom_===Or.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT},Or.prototype.getIndexStartValue=function(){return b.assert(this.startSet_,"Only valid if start has been set"),this.indexStartValue_},Or.prototype.getIndexStartName=function(){return b.assert(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:k},Or.prototype.hasEnd=function(){return this.endSet_},Or.prototype.getIndexEndValue=function(){return b.assert(this.endSet_,"Only valid if end has been set"),this.indexEndValue_},Or.prototype.getIndexEndName=function(){return b.assert(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:x},Or.prototype.hasLimit=function(){return this.limitSet_},Or.prototype.hasAnchoredLimit=function(){return this.limitSet_&&""!==this.viewFrom_},Or.prototype.getLimit=function(){return b.assert(this.limitSet_,"Only valid if limit has been set"),this.limit_},Or.prototype.getIndex=function(){return this.index_},Or.prototype.copy_=function(){var t=new Or;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t},Or.prototype.limit=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="",e},Or.prototype.limitToFirst=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Or.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_LEFT,e},Or.prototype.limitToLast=function(t){var e=this.copy_();return e.limitSet_=!0,e.limit_=t,e.viewFrom_=Or.WIRE_PROTOCOL_CONSTANTS_.VIEW_FROM_RIGHT,e},Or.prototype.startAt=function(t,e){var n=this.copy_();return n.startSet_=!0,void 0===t&&(t=null),n.indexStartValue_=t,null!=e?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n},Or.prototype.endAt=function(t,e){var n=this.copy_();return n.endSet_=!0,void 0===t&&(t=null),n.indexEndValue_=t,void 0!==e?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n},Or.prototype.orderBy=function(t){var e=this.copy_();return e.index_=t,e},Or.prototype.getQueryObject=function(){var t=Or.WIRE_PROTOCOL_CONSTANTS_,e={};if(this.startSet_&&(e[t.INDEX_START_VALUE]=this.indexStartValue_,this.startNameSet_&&(e[t.INDEX_START_NAME]=this.indexStartName_)),this.endSet_&&(e[t.INDEX_END_VALUE]=this.indexEndValue_,this.endNameSet_&&(e[t.INDEX_END_NAME]=this.indexEndName_)),this.limitSet_){e[t.LIMIT]=this.limit_;var n=this.viewFrom_;""===n&&(n=this.isViewFromLeft()?t.VIEW_FROM_LEFT:t.VIEW_FROM_RIGHT),e[t.VIEW_FROM]=n}return this.index_!==Ut&&(e[t.INDEX]=this.index_.toString()),e},Or.prototype.loadsAllData=function(){return!(this.startSet_||this.endSet_||this.limitSet_)},Or.prototype.isDefault=function(){return this.loadsAllData()&&this.index_===Ut},Or.prototype.getNodeFilter=function(){return this.loadsAllData()?new nn(this.getIndex()):new(this.hasLimit()?Cr:Ir)(this)},Or.prototype.toRestQueryStringParameters=function(){var t,e=Or.REST_QUERY_CONSTANTS_,n={};return this.isDefault()||(t=this.index_===Ut?e.PRIORITY_INDEX:this.index_===ve?e.VALUE_INDEX:this.index_===Ot?e.KEY_INDEX:(b.assert(this.index_ instanceof ye,"Unrecognized index type!"),this.index_.toString()),n[e.ORDER_BY]=b.stringify(t),this.startSet_&&(n[e.START_AT]=b.stringify(this.indexStartValue_),this.startNameSet_&&(n[e.START_AT]+=","+b.stringify(this.indexStartName_))),this.endSet_&&(n[e.END_AT]=b.stringify(this.indexEndValue_),this.endNameSet_&&(n[e.END_AT]+=","+b.stringify(this.indexEndName_))),this.limitSet_&&(this.isViewFromLeft()?n[e.LIMIT_TO_FIRST]=this.limit_:n[e.LIMIT_TO_LAST]=this.limit_)),n},Or.WIRE_PROTOCOL_CONSTANTS_={INDEX_START_VALUE:"sp",INDEX_START_NAME:"sn",INDEX_END_VALUE:"ep",INDEX_END_NAME:"en",LIMIT:"l",VIEW_FROM:"vf",VIEW_FROM_LEFT:"l",VIEW_FROM_RIGHT:"r",INDEX:"i"},Or.REST_QUERY_CONSTANTS_={ORDER_BY:"orderBy",PRIORITY_INDEX:"$priority",VALUE_INDEX:"$value",KEY_INDEX:"$key",START_AT:"startAt",END_AT:"endAt",LIMIT_TO_FIRST:"limitToFirst",LIMIT_TO_LAST:"limitToLast"},Or.DEFAULT=new Or,Or);function Or(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ut}var Dr,kr=(Dr=Oe,d.__extends(xr,Dr),xr.prototype.getKey=function(){return b.validateArgCount("Reference.key",0,0,arguments.length),this.path.isEmpty()?null:this.path.getBack()},xr.prototype.child=function(t){var e,n,r,i;return b.validateArgCount("Reference.child",1,1,arguments.length),"number"==typeof t?t=String(t):t instanceof V||(null===this.path.getFront()?(e="Reference.child",i=!(n=1),r=(r=t)&&r.replace(/^\/*\.info(\/|$)/,"/"),it(e,n,r,i)):it("Reference.child",1,t,!1)),new xr(this.repo,this.path.child(t))},xr.prototype.getParent=function(){b.validateArgCount("Reference.parent",0,0,arguments.length);var t=this.path.parent();return null===t?null:new xr(this.repo,t)},xr.prototype.getRoot=function(){b.validateArgCount("Reference.root",0,0,arguments.length);for(var t=this;null!==t.getParent();)t=t.getParent();return t},xr.prototype.databaseProp=function(){return this.repo.database},xr.prototype.set=function(t,e){b.validateArgCount("Reference.set",1,2,arguments.length),ot("Reference.set",this.path),Z("Reference.set",1,t,this.path,!1),b.validateCallback("Reference.set",2,e,!0);var n=new b.Deferred;return this.repo.setWithPriority(this.path,t,null,n.wrapCallback(e)),n.promise},xr.prototype.update=function(t,e){if(b.validateArgCount("Reference.update",1,2,arguments.length),ot("Reference.update",this.path),Array.isArray(t)){for(var n={},r=0;r<t.length;++r)n[""+r]=t[r];t=n,g("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}tt("Reference.update",1,t,this.path,!1),b.validateCallback("Reference.update",2,e,!0);var i=new b.Deferred;return this.repo.update(this.path,t,i.wrapCallback(e)),i.promise},xr.prototype.setWithPriority=function(t,e,n){if(b.validateArgCount("Reference.setWithPriority",2,3,arguments.length),ot("Reference.setWithPriority",this.path),Z("Reference.setWithPriority",1,t,this.path,!1),et("Reference.setWithPriority",2,e,!1),b.validateCallback("Reference.setWithPriority",3,n,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.setWithPriority failed: "+this.getKey()+" is a read-only object.";var r=new b.Deferred;return this.repo.setWithPriority(this.path,t,e,r.wrapCallback(n)),r.promise},xr.prototype.remove=function(t){return b.validateArgCount("Reference.remove",0,1,arguments.length),ot("Reference.remove",this.path),b.validateCallback("Reference.remove",1,t,!0),this.set(null,t)},xr.prototype.transaction=function(t,r,e){if(b.validateArgCount("Reference.transaction",1,3,arguments.length),ot("Reference.transaction",this.path),b.validateCallback("Reference.transaction",1,t,!1),b.validateCallback("Reference.transaction",2,r,!0),function(t,e,n,r){if((!r||void 0!==n)&&"boolean"!=typeof n)throw new Error(b.errorPrefix(t,e,r)+"must be a boolean.")}("Reference.transaction",3,e,!0),".length"===this.getKey()||".keys"===this.getKey())throw"Reference.transaction failed: "+this.getKey()+" is a read-only object.";void 0===e&&(e=!0);var i=new b.Deferred;return"function"==typeof r&&i.promise.catch(function(){}),this.repo.startTransaction(this.path,t,function(t,e,n){t?i.reject(t):i.resolve(new dt(e,n)),"function"==typeof r&&r(t,e,n)},e),i.promise},xr.prototype.setPriority=function(t,e){b.validateArgCount("Reference.setPriority",1,2,arguments.length),ot("Reference.setPriority",this.path),et("Reference.setPriority",1,t,!1),b.validateCallback("Reference.setPriority",2,e,!0);var n=new b.Deferred;return this.repo.setWithPriority(this.path.child(".priority"),t,null,n.wrapCallback(e)),n.promise},xr.prototype.push=function(t,e){b.validateArgCount("Reference.push",0,2,arguments.length),ot("Reference.push",this.path),Z("Reference.push",1,t,this.path,!0),b.validateCallback("Reference.push",2,e,!0);var n,r=this.repo.serverTime(),i=_t(r),o=this.child(i),s=this.child(i);return n=null!=t?o.set(t,e).then(function(){return s}):Promise.resolve(s),o.then=n.then.bind(n),o.catch=n.then.bind(n,void 0),"function"==typeof e&&n.catch(function(){}),o},xr.prototype.onDisconnect=function(){return ot("Reference.onDisconnect",this.path),new ft(this.repo,this.path)},Object.defineProperty(xr.prototype,"database",{get:function(){return this.databaseProp()},enumerable:!0,configurable:!0}),Object.defineProperty(xr.prototype,"key",{get:function(){return this.getKey()},enumerable:!0,configurable:!0}),Object.defineProperty(xr.prototype,"parent",{get:function(){return this.getParent()},enumerable:!0,configurable:!0}),Object.defineProperty(xr.prototype,"root",{get:function(){return this.getRoot()},enumerable:!0,configurable:!0}),xr);function xr(t,e){if(!(t instanceof Er))throw new Error("new Reference() no longer supported - use app.database().");return Dr.call(this,t,e,Nr.DEFAULT,!1)||this}Oe.__referenceConstructor=kr,_n.__referenceConstructor=kr;var Rr,Pr,Lr=function(){this.children={},this.childCount=0,this.value=null},Mr=(Fr.prototype.subTree=function(t){for(var e=t instanceof V?t:new V(t),n=this,r=e.getFront();null!==r;)n=new Fr(r,n,b.safeGet(n.node_.children,r)||new Lr),r=(e=e.popFront()).getFront();return n},Fr.prototype.getValue=function(){return this.node_.value},Fr.prototype.setValue=function(t){b.assert(void 0!==t,"Cannot set value to undefined"),this.node_.value=t,this.updateParents_()},Fr.prototype.clear=function(){this.node_.value=null,this.node_.children={},this.node_.childCount=0,this.updateParents_()},Fr.prototype.hasChildren=function(){return 0<this.node_.childCount},Fr.prototype.isEmpty=function(){return null===this.getValue()&&!this.hasChildren()},Fr.prototype.forEachChild=function(n){var r=this;L(this.node_.children,function(t,e){n(new Fr(t,r,e))})},Fr.prototype.forEachDescendant=function(e,t,n){t&&!n&&e(this),this.forEachChild(function(t){t.forEachDescendant(e,!0,n)}),t&&n&&e(this)},Fr.prototype.forEachAncestor=function(t,e){for(var n=e?this:this.parent();null!==n;){if(t(n))return!0;n=n.parent()}return!1},Fr.prototype.forEachImmediateDescendantWithValue=function(e){this.forEachChild(function(t){null!==t.getValue()?e(t):t.forEachImmediateDescendantWithValue(e)})},Fr.prototype.path=function(){return new V(null===this.parent_?this.name_:this.parent_.path()+"/"+this.name_)},Fr.prototype.name=function(){return this.name_},Fr.prototype.parent=function(){return this.parent_},Fr.prototype.updateParents_=function(){null!==this.parent_&&this.parent_.updateChild_(this.name_,this)},Fr.prototype.updateChild_=function(t,e){var n=e.isEmpty(),r=b.contains(this.node_.children,t);n&&r?(delete this.node_.children[t],this.node_.childCount--,this.updateParents_()):n||r||(this.node_.children[t]=e.node_,this.node_.childCount++,this.updateParents_())},Fr);function Fr(t,e,n){void 0===t&&(t=""),void 0===e&&(e=null),void 0===n&&(n=new Lr),this.name_=t,this.parent_=e,this.node_=n}(Pr=Rr=Rr||{})[Pr.RUN=0]="RUN",Pr[Pr.SENT=1]="SENT",Pr[Pr.COMPLETED=2]="COMPLETED",Pr[Pr.SENT_NEEDS_ABORT=3]="SENT_NEEDS_ABORT",Pr[Pr.NEEDS_ABORT=4]="NEEDS_ABORT",Er.MAX_TRANSACTION_RETRIES_=25,Er.prototype.transactionsInit_=function(){this.transactionQueueTree_=new Mr},Er.prototype.startTransaction=function(t,e,n,r){this.log_("transaction on "+t);function i(){}var o=new kr(this,t);o.on("value",i);var s={path:t,update:e,onComplete:n,status:null,order:A(),applyLocally:r,retryCount:0,unwatcher:function(){o.off("value",i)},abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=this.getLatestState_(t);s.currentInputSnapshot=a;var u=s.update(a.val());if(void 0===u){if(s.unwatcher(),s.currentOutputSnapshotRaw=null,s.currentOutputSnapshotResolved=null,s.onComplete){var c=new me(s.currentInputSnapshot,new kr(this,s.path),Ut);s.onComplete(null,!1,c)}}else{lt("transaction failed: Data returned ",u,s.path),s.status=Rr.RUN;var h=this.transactionQueueTree_.subTree(t),l=h.getValue()||[];l.push(s),h.setValue(l);var f=void 0;if("object"==typeof u&&null!==u&&b.contains(u,".priority"))f=b.safeGet(u,".priority"),b.assert($(f),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.");else f=(this.serverSyncTree_.calcCompleteEventCache(t)||se.EMPTY_NODE).getPriority().val();f=f;var p=this.generateServerValues(),d=fe(u,f),v=Me(d,p);s.currentOutputSnapshotRaw=d,s.currentOutputSnapshotResolved=v,s.currentWriteId=this.getNextWriteId_();var y=this.serverSyncTree_.applyUserOverwrite(t,v,s.currentWriteId,s.applyLocally);this.eventQueue_.raiseEventsForChangedPath(t,y),this.sendReadyTransactions_()}},Er.prototype.getLatestState_=function(t,e){return this.serverSyncTree_.calcCompleteEventCache(t,e)||se.EMPTY_NODE},Er.prototype.sendReadyTransactions_=function(t){var e=this;if(void 0===t&&(t=this.transactionQueueTree_),t||this.pruneCompletedTransactionsBelowNode_(t),null!==t.getValue()){var n=this.buildTransactionQueue_(t);b.assert(0<n.length,"Sending zero length transaction queue"),n.every(function(t){return t.status===Rr.RUN})&&this.sendTransactionQueue_(t.path(),n)}else t.hasChildren()&&t.forEachChild(function(t){e.sendReadyTransactions_(t)})},Er.prototype.sendTransactionQueue_=function(a,u){for(var c=this,t=u.map(function(t){return t.currentWriteId}),e=this.getLatestState_(a,t),n=e,r=e.hash(),i=0;i<u.length;i++){var o=u[i];b.assert(o.status===Rr.RUN,"tryToSendTransactionQueue_: items in queue should all be run."),o.status=Rr.SENT,o.retryCount++;var s=V.relativePath(a,o.path);n=n.updateChild(s,o.currentOutputSnapshotRaw)}var h=n.val(!0),l=a;this.server_.put(l.toString(),h,function(t){c.log_("transaction put response",{path:l.toString(),status:t});var e=[];if("ok"===t){for(var n=[],r=0;r<u.length;r++){if(u[r].status=Rr.COMPLETED,e=e.concat(c.serverSyncTree_.ackUserWrite(u[r].currentWriteId)),u[r].onComplete){var i=u[r].currentOutputSnapshotResolved,o=new kr(c,u[r].path),s=new me(i,o,Ut);n.push(u[r].onComplete.bind(null,null,!0,s))}u[r].unwatcher()}c.pruneCompletedTransactionsBelowNode_(c.transactionQueueTree_.subTree(a)),c.sendReadyTransactions_(),c.eventQueue_.raiseEventsForChangedPath(a,e);for(r=0;r<n.length;r++)F(n[r])}else{if("datastale"===t)for(r=0;r<u.length;r++)u[r].status===Rr.SENT_NEEDS_ABORT?u[r].status=Rr.NEEDS_ABORT:u[r].status=Rr.RUN;else{g("transaction at "+l.toString()+" failed: "+t);for(r=0;r<u.length;r++)u[r].status=Rr.NEEDS_ABORT,u[r].abortReason=t}c.rerunTransactions_(a)}},r)},Er.prototype.rerunTransactions_=function(t){var e=this.getAncestorTransactionNode_(t),n=e.path(),r=this.buildTransactionQueue_(e);return this.rerunTransactionQueue_(r,n),n},Er.prototype.rerunTransactionQueue_=function(t,e){if(0!==t.length){for(var n,r=[],i=[],o=t.filter(function(t){return t.status===Rr.RUN}).map(function(t){return t.currentWriteId}),s=0;s<t.length;s++){var a=t[s],u=V.relativePath(e,a.path),c=!1,h=void 0;if(b.assert(null!==u,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===Rr.NEEDS_ABORT)c=!0,h=a.abortReason,i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else if(a.status===Rr.RUN)if(a.retryCount>=Er.MAX_TRANSACTION_RETRIES_)c=!0,h="maxretry",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0));else{var l=this.getLatestState_(a.path,o);a.currentInputSnapshot=l;var f=t[s].update(l.val());if(void 0!==f){lt("transaction failed: Data returned ",f,a.path);var p=fe(f);"object"==typeof f&&null!=f&&b.contains(f,".priority")||(p=p.updatePriority(l.getPriority()));var d=a.currentWriteId,v=this.generateServerValues(),y=Me(p,v);a.currentOutputSnapshotRaw=p,a.currentOutputSnapshotResolved=y,a.currentWriteId=this.getNextWriteId_(),o.splice(o.indexOf(d),1),i=(i=i.concat(this.serverSyncTree_.applyUserOverwrite(a.path,y,a.currentWriteId,a.applyLocally))).concat(this.serverSyncTree_.ackUserWrite(d,!0))}else c=!0,h="nodata",i=i.concat(this.serverSyncTree_.ackUserWrite(a.currentWriteId,!0))}if(this.eventQueue_.raiseEventsForChangedPath(e,i),i=[],c&&(t[s].status=Rr.COMPLETED,n=t[s].unwatcher,setTimeout(n,Math.floor(0)),t[s].onComplete))if("nodata"===h){var g=new kr(this,t[s].path),m=t[s].currentInputSnapshot,_=new me(m,g,Ut);r.push(t[s].onComplete.bind(null,null,!1,_))}else r.push(t[s].onComplete.bind(null,new Error(h),!1,null))}this.pruneCompletedTransactionsBelowNode_(this.transactionQueueTree_);for(s=0;s<r.length;s++)F(r[s]);this.sendReadyTransactions_()}},Er.prototype.getAncestorTransactionNode_=function(t){var e,n=this.transactionQueueTree_;for(e=t.getFront();null!==e&&null===n.getValue();)n=n.subTree(e),e=(t=t.popFront()).getFront();return n},Er.prototype.buildTransactionQueue_=function(t){var e=[];return this.aggregateTransactionQueuesForNode_(t,e),e.sort(function(t,e){return t.order-e.order}),e},Er.prototype.aggregateTransactionQueuesForNode_=function(t,e){var n=this,r=t.getValue();if(null!==r)for(var i=0;i<r.length;i++)e.push(r[i]);t.forEachChild(function(t){n.aggregateTransactionQueuesForNode_(t,e)})},Er.prototype.pruneCompletedTransactionsBelowNode_=function(t){var e=this,n=t.getValue();if(n){for(var r=0,i=0;i<n.length;i++)n[i].status!==Rr.COMPLETED&&(n[r]=n[i],r++);n.length=r,t.setValue(0<n.length?n:null)}t.forEachChild(function(t){e.pruneCompletedTransactionsBelowNode_(t)})},Er.prototype.abortTransactions_=function(t){var e=this,n=this.getAncestorTransactionNode_(t).path(),r=this.transactionQueueTree_.subTree(t);return r.forEachAncestor(function(t){e.abortTransactionsOnNode_(t)}),this.abortTransactionsOnNode_(r),r.forEachDescendant(function(t){e.abortTransactionsOnNode_(t)}),n},Er.prototype.abortTransactionsOnNode_=function(t){var e=t.getValue();if(null!==e){for(var n=[],r=[],i=-1,o=0;o<e.length;o++)if(e[o].status!==Rr.SENT_NEEDS_ABORT)if(e[o].status===Rr.SENT)b.assert(i===o-1,"All SENT items should be at beginning of queue."),e[i=o].status=Rr.SENT_NEEDS_ABORT,e[o].abortReason="set";else if(b.assert(e[o].status===Rr.RUN,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(this.serverSyncTree_.ackUserWrite(e[o].currentWriteId,!0)),e[o].onComplete){n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))}-1===i?t.setValue(null):e.length=i+1,this.eventQueue_.raiseEventsForChangedPath(t.path(),r);for(o=0;o<n.length;o++)F(n[o])}};var jr,Ur="databaseURL",qr=(Vr.getInstance=function(){return jr=jr||new Vr},Vr.prototype.interrupt=function(){var e,t,n,r;try{for(var i=d.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,d.__values(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].interrupt()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Vr.prototype.resume=function(){var e,t,n,r;try{for(var i=d.__values(Object.keys(this.repos_)),o=i.next();!o.done;o=i.next()){var s=o.value;try{for(var a=(n=void 0,d.__values(Object.keys(this.repos_[s]))),u=a.next();!u.done;u=a.next()){var c=u.value;this.repos_[s][c].resume()}}catch(t){n={error:t}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}},Vr.prototype.databaseFromApp=function(t,e,n){var r=n||t.options[Ur];void 0===r&&y("Can't determine Firebase Database URL.  Be sure to include "+Ur+" option when calling firebase.initializeApp().");var i=Y(r),o=i.repoInfo,s=void 0;return void 0!==u&&(s=u.env.FIREBASE_DATABASE_EMULATOR_HOST),s&&(r="http://"+s+"?ns="+o.namespace,o=(i=Y(r)).repoInfo),st("Invalid Firebase Database URL",1,i),i.path.isEmpty()||y("Database URL must point to the root of a Firebase Database (not including a child path)."),this.createRepo(o,t,e).database},Vr.prototype.deleteRepo=function(t){var e=b.safeGet(this.repos_,t.app.name);e&&b.safeGet(e,t.repoInfo_.toURLString())===t||y("Database "+t.app.name+"("+t.repoInfo_+") has already been deleted."),t.interrupt(),delete e[t.repoInfo_.toURLString()]},Vr.prototype.createRepo=function(t,e,n){var r=b.safeGet(this.repos_,e.name);r||(r={},this.repos_[e.name]=r);var i=b.safeGet(r,t.toURLString());return i&&y("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),i=new Er(t,this.useRestClient_,e,n),r[t.toURLString()]=i},Vr.prototype.forceRestClient=function(t){this.useRestClient_=t},Vr);function Vr(){this.repos_={},this.useRestClient_=!1}var Hr=(Object.defineProperty(Wr.prototype,"app",{get:function(){return this.repo_.app},enumerable:!0,configurable:!0}),Wr.prototype.ref=function(t){return this.checkDeleted_("ref"),b.validateArgCount("database.ref",0,1,arguments.length),t instanceof kr?this.refFromURL(t.toString()):void 0!==t?this.root_.child(t):this.root_},Wr.prototype.refFromURL=function(t){var e="database.refFromURL";this.checkDeleted_(e),b.validateArgCount(e,1,1,arguments.length);var n=Y(t);st(e,1,n);var r=n.repoInfo;return r.host!==this.repo_.repoInfo_.host&&y(e+": Host name does not match the current database: (found "+r.host+" but expected "+this.repo_.repoInfo_.host+")"),this.ref(n.path.toString())},Wr.prototype.checkDeleted_=function(t){null===this.repo_&&y("Cannot call "+t+" on a deleted database.")},Wr.prototype.goOffline=function(){b.validateArgCount("database.goOffline",0,0,arguments.length),this.checkDeleted_("goOffline"),this.repo_.interrupt()},Wr.prototype.goOnline=function(){b.validateArgCount("database.goOnline",0,0,arguments.length),this.checkDeleted_("goOnline"),this.repo_.resume()},Wr.ServerValue={TIMESTAMP:{".sv":"timestamp"}},Wr);function Wr(t){(this.repo_=t)instanceof Er||y("Don't call new Database() directly - please use firebase.database()."),this.root_=new kr(t,V.Empty),this.INTERNAL=new Br(this)}var Br=(Gr.prototype.delete=function(){return d.__awaiter(this,void 0,void 0,function(){return d.__generator(this,function(t){return this.database.checkDeleted_("delete"),qr.getInstance().deleteRepo(this.database.repo_),this.database.repo_=null,this.database.root_=null,this.database.INTERNAL=null,this.database=null,[2]})})},Gr);function Gr(t){this.database=t}var zr=Object.freeze({__proto__:null,forceLongPolling:function(){ar.forceDisallow(),er.forceAllow()},forceWebSockets:function(){er.forceDisallow()},isWebSocketsAvailable:function(){return ar.isAvailable()},setSecurityDebugCallback:function(t,e){t.repo.persistentConnection_.securityDebugCallback_=e},stats:function(t,e){t.repo.stats(e)},statsIncrementCounter:function(t,e){t.repo.statsIncrementCounter(e)},dataUpdateCount:function(t){return t.repo.dataUpdateCount},interceptServerData:function(t,e){return t.repo.interceptServerData_(e)}}),Kr=yr;yr.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)},yr.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};var Qr=lr,Yr=K,Xr=Object.freeze({__proto__:null,DataConnection:Kr,RealTimeConnection:Qr,hijackHash:function(i){var o=yr.prototype.put;return yr.prototype.put=function(t,e,n,r){void 0!==r&&(r=i()),o.call(this,t,e,n,r)},function(){yr.prototype.put=o}},ConnectionTarget:Yr,queryIdentifier:function(t){return t.queryIdentifier()},forceRestClient:function(t){qr.getInstance().forceRestClient(t)}}),Jr=Hr.ServerValue;function $r(t){var e;e=t.SDK_VERSION,or=e;var n=t.INTERNAL.registerComponent(new r.Component("database",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return qr.getInstance().databaseFromApp(n,r,e)},"PUBLIC").setServiceProps({Reference:kr,Query:Oe,Database:Hr,DataSnapshot:me,enableLogging:l,INTERNAL:zr,ServerValue:Jr,TEST_ACCESS:Xr}).setMultipleInstances(!0));t.registerVersion("@firebase/database","0.5.24"),b.isNodeSdk()&&(Zr.exports=n)}$r(e),ti.DataSnapshot=me,ti.Database=Hr,ti.OnDisconnect=ft,ti.Query=Oe,ti.Reference=kr,ti.ServerValue=Jr,ti.enableLogging=l,ti.registerDatabase=$r}).call(this,ei(54))},431:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return h}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return v}),n.d(e,"__spreadArrays",function(){return y}),n.d(e,"__await",function(){return g}),n.d(e,"__asyncGenerator",function(){return m}),n.d(e,"__asyncDelegator",function(){return _}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return E}),n.d(e,"__importDefault",function(){return T}),n.d(e,"__classPrivateFieldGet",function(){return I}),n.d(e,"__classPrivateFieldSet",function(){return S});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}function u(n,r){return function(t,e){r(t,e,n)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function l(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),s=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<s.push([r,n,t,e])||a(r,n)})})}function a(t,e){try{(n=o[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,c):h(s[0][2],n)}catch(t){h(s[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(i=!i)?{value:g(r[e](t)),done:"return"===e}:n?n(t):t}:n}}function b(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=u[Symbol.asyncIterator];return e?e.call(u):(u=p(u),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=u[a]&&function(s){return new Promise(function(t,e){var n,r,i,o;s=u[a](s),n=t,r=e,i=s.done,o=s.value,Promise.resolve(o).then(function(t){n({value:t,done:i})},r)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function I(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},432:function(t,Fc,jc){"use strict";(function(e){Object.defineProperty(Fc,"__esModule",{value:!0});var t,n=(t=jc(16))&&"object"==typeof t&&"default"in t?t.default:t,v=jc(433),o=jc(152),l=jc(86),r=jc(74),f=jc(434),s=n.SDK_VERSION,a=new o.Logger("@firebase/firestore");function p(){return a.logLevel===o.LogLevel.DEBUG?0:a.logLevel===o.LogLevel.SILENT?2:1}function i(t){switch(t){case 0:a.logLevel=o.LogLevel.DEBUG;break;case 1:a.logLevel=o.LogLevel.ERROR;break;case 2:a.logLevel=o.LogLevel.SILENT;break;default:a.error("Firestore ("+s+"): Invalid value passed to `setLogLevel`")}}function d(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(a.logLevel<=o.LogLevel.DEBUG){var i=n.map(c);a.debug.apply(a,v.__spreadArrays(["Firestore ("+s+") ["+t+"]: "+e],i))}}function u(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(a.logLevel<=o.LogLevel.ERROR){var r=e.map(c);a.error.apply(a,v.__spreadArrays(["Firestore ("+s+"): "+t],r))}}function c(t){if("string"==typeof t)return t;var e=$r.t();try{return e.i(t)}catch(e){return t}}function b(t){var e="FIRESTORE ("+s+") INTERNAL ASSERTION FAILED: "+t;throw u(e),new Error(e)}function y(t,e){t||b(e)}var h=(g.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e="",n=0;n<20;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return y(20===e.length,"Invalid auto ID: "+e),e},g);function g(){}function m(t,e){return t<e?-1:e<t?1:0}function _(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].isEqual(e[n]))return!1;return!0}function w(t){return t+"\0"}function E(t,e,n,r,i){this.s=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i}function T(t,e){this.user=e,this.type="OAuth",this.g={},this.g.Authorization="Bearer "+t}var I,S=(Object.defineProperty(U.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!0,configurable:!0}),U.prototype.isEqual=function(t){return t instanceof U&&t.projectId===this.projectId&&t.database===this.database},U.prototype.h=function(t){return m(this.projectId,t.projectId)||m(this.database,t.database)},U),C=(j.prototype.l=function(){return null!=this.uid},j.prototype.v=function(){return this.l()?"uid:"+this.uid:"anonymous-user"},j.prototype.isEqual=function(t){return t.uid===this.uid},j.UNAUTHENTICATED=new j(null),j.m=new j("google-credentials-uid"),j.p=new j("first-party-uid"),j),A={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},N=(I=Error,v.__extends(F,I),F),O=(M.prototype.getToken=function(){return Promise.resolve(null)},M.prototype.I=function(){},M.prototype.T=function(t){y(!this._,"Can only call setChangeListener() once."),(this._=t)(C.UNAUTHENTICATED)},M.prototype.D=function(){y(null!==this._,"removeChangeListener() when no listener registered"),this._=null},M),D=(L.prototype.getToken=function(){var e=this;y(null!=this.S,"getToken cannot be called after listener removed.");var n=this.C,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){if(e.C!==n)throw new N(A.ABORTED,"getToken aborted due to token change.");return t?(y("string"==typeof t.accessToken,"Invalid tokenData returned from getToken():"+t),new T(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},L.prototype.I=function(){this.forceRefresh=!0},L.prototype.T=function(t){y(!this._,"Can only call setChangeListener() once."),this._=t,this.R&&t(this.currentUser)},L.prototype.D=function(){y(null!=this.S,"removeChangeListener() called twice"),y(null!==this._,"removeChangeListener() called when no listener registered"),this.auth&&this.auth.removeAuthTokenListener(this.S),this.S=null,this._=null},L.prototype.A=function(){var t=this.auth&&this.auth.getUid();return y(null===t||"string"==typeof t,"Received invalid UID: "+t),new C(t)},L),k=(Object.defineProperty(P.prototype,"g",{get:function(){var t={"X-Goog-AuthUser":this.k},e=this.P.auth.N([]);return e&&(t.Authorization=e),t},enumerable:!0,configurable:!0}),P),x=(R.prototype.getToken=function(){return Promise.resolve(new k(this.P,this.k))},R.prototype.T=function(t){t(C.p)},R.prototype.D=function(){},R.prototype.I=function(){},R);function R(t,e){this.P=t,this.k=e}function P(t,e){this.P=t,this.k=e,this.type="FirstParty",this.user=C.p}function L(t){var e=this;this.S=null,this.currentUser=C.UNAUTHENTICATED,this.R=!1,this.C=0,this._=null,this.forceRefresh=!1,this.S=function(){e.C++,e.currentUser=e.A(),e.R=!0,e._&&e._(e.currentUser)},this.C=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.S):(this.S(null),t.get().then(function(t){e.auth=t,e.S&&e.auth.addAuthTokenListener(e.S)},function(){}))}function M(){this._=null}function F(t,e){var n=I.call(this,e)||this;return n.code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}function j(t){this.uid=t}function U(t,e){this.projectId=t,this.database=e||"(default)"}function q(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function V(t,e){return void 0!==t?t:e}function H(t,e){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)){var r=Number(n);isNaN(r)||e(r,t[n])}}function W(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function B(t){for(var e in y(null!=t&&"object"==typeof t,"isEmpty() expects object parameter."),t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function G(t,e){if(0!==e.length)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() does not support arguments, but was called with "+ut(e.length,"argument")+".")}function z(t,e,n){if(e.length!==n)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires "+ut(n,"argument")+", but was called with "+ut(e.length,"argument")+".")}function K(t,e,n){if(e.length<n)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires at least "+ut(n,"argument")+", but was called with "+ut(e.length,"argument")+".")}function Q(t,e,n,r){if(e.length<n||e.length>r)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires between "+n+" and "+r+" arguments, but was called with "+ut(e.length,"argument")+".")}function Y(t,e,n,r){tt(t,e,at(n)+" argument",r)}function X(t,e,n,r){void 0!==r&&Y(t,e,n,r)}function J(t,e,n,r){tt(t,e,n+" option",r)}function $(t,e,n,r){void 0!==r&&J(t,e,n,r)}function Z(t,e,n,r,u){void 0!==r&&function(t,e,n){for(var r=[],i=0,o=u;i<o.length;i++){var s=o[i];if(s===n)return;r.push(nt(s))}var a=nt(n);throw new N(A.INVALID_ARGUMENT,"Invalid value "+a+" provided to function "+t+'() for option "'+e+'". Acceptable values: '+r.join(", "))}(t,n,r)}function tt(t,e,n,r){if(!("object"===e?et(r):"non-empty string"===e?"string"==typeof r&&""!==r:typeof r===e)){var i=nt(r);throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" to be of type "+e+", but it was: "+i)}}function et(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}function nt(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":b("Unknown wrong type: "+typeof e);if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function rt(t,e,n){if(void 0===n)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires a valid "+at(e)+" argument, but it was undefined.")}function it(n,t,r){W(t,function(t,e){if(r.indexOf(t)<0)throw new N(A.INVALID_ARGUMENT,"Unknown option '"+t+"' passed to function "+n+"(). Available options: "+r.join(", "))})}function ot(t,e,n,r){var i=nt(r);return new N(A.INVALID_ARGUMENT,"Function "+t+"() requires its "+at(n)+" argument to be a "+e+", but it was: "+i)}function st(t,e,n){if(n<=0)throw new N(A.INVALID_ARGUMENT,'Function "'+t+'()" requires its '+at(e)+" argument to be a positive number, but it was: "+n+".")}function at(t){switch(t){case 1:return"first";case 2:return"second";case 3:return"third";default:return t+"th"}}function ut(t,e){return t+" "+e+(1===t?"":"s")}var ct,ht,lt=(Object.defineProperty(Rt.prototype,"latitude",{get:function(){return this.F},enumerable:!0,configurable:!0}),Object.defineProperty(Rt.prototype,"longitude",{get:function(){return this.V},enumerable:!0,configurable:!0}),Rt.prototype.isEqual=function(t){return this.F===t.F&&this.V===t.V},Rt.prototype.U=function(t){return m(this.F,t.F)||m(this.V,t.V)},Rt),ft=(xt.now=function(){return xt.fromMillis(Date.now())},xt.fromDate=function(t){return xt.fromMillis(t.getTime())},xt.fromMillis=function(t){var e=Math.floor(t/1e3);return new xt(e,1e6*(t-1e3*e))},xt.prototype.toDate=function(){return new Date(this.toMillis())},xt.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},xt.prototype.U=function(t){return this.seconds===t.seconds?m(this.nanoseconds,t.nanoseconds):m(this.seconds,t.seconds)},xt.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},xt.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},xt.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},xt),pt=(kt.j=function(t){var e=Math.floor(t/1e6);return new kt(new ft(e,t%1e6*1e3))},kt.L=function(t){return new kt(t)},kt.q=function(){return kt.MIN},kt.prototype.h=function(t){return this.timestamp.U(t.timestamp)},kt.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},kt.prototype.B=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},kt.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},kt.prototype.M=function(){return this.timestamp},kt.MIN=new kt(new ft(0,0)),kt),dt=(Object.defineProperty(Dt.prototype,"length",{get:function(){return this.len},enumerable:!0,configurable:!0}),Dt.prototype.isEqual=function(t){return 0===Dt.G(this,t)},Dt.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof Dt?t.forEach(function(t){e.push(t)}):e.push(t),this.W(e)},Dt.prototype.limit=function(){return this.offset+this.length},Dt.prototype.K=function(t){return t=void 0===t?1:t,y(this.length>=t,"Can't call popFirst() with less segments"),this.W(this.segments,this.offset+t,this.length-t)},Dt.prototype.H=function(){return y(!this.J(),"Can't call popLast() on empty path"),this.W(this.segments,this.offset,this.length-1)},Dt.prototype.Y=function(){return y(!this.J(),"Can't call firstSegment() on empty path"),this.segments[this.offset]},Dt.prototype.X=function(){return this.get(this.length-1)},Dt.prototype.get=function(t){return y(t<this.length,"Index out of range"),this.segments[this.offset+t]},Dt.prototype.J=function(){return 0===this.length},Dt.prototype.$=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Dt.prototype.Z=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},Dt.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},Dt.prototype.tt=function(){return this.segments.slice(this.offset,this.limit())},Dt.G=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},Dt),vt=(ht=dt,v.__extends(Ot,ht),Ot.prototype.W=function(t,e,n){return new Ot(t,e,n)},Ot.prototype.nt=function(){return this.tt().join("/")},Ot.prototype.toString=function(){return this.nt()},Ot.it=function(t){if(0<=t.indexOf("//"))throw new N(A.INVALID_ARGUMENT,"Invalid path ("+t+"). Paths must not contain // in them.");return new Ot(t.split("/").filter(function(t){return 0<t.length}))},Ot.et=new Ot([]),Ot),yt=/^[_a-zA-Z][_a-zA-Z0-9]*$/,gt=(ct=dt,v.__extends(Nt,ct),Nt.prototype.W=function(t,e,n){return new Nt(t,e,n)},Nt.rt=function(t){return yt.test(t)},Nt.prototype.nt=function(){return this.tt().map(function(t){return t=t.replace("\\","\\\\").replace("`","\\`"),Nt.rt(t)||(t="`"+t+"`"),t}).join(".")},Nt.prototype.toString=function(){return this.nt()},Nt.prototype.ut=function(){return 1===this.length&&"__name__"===this.get(0)},Nt.st=function(){return new Nt(["__name__"])},Nt.ot=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new N(A.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new N(A.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var a=t[r+1];if("\\"!==a&&"."!==a&&"`"!==a)throw new N(A.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=a,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new N(A.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Nt(e)},Nt.et=new Nt([]),Nt),mt=(At.prototype.ct=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},At.prototype.isEqual=function(t){return null!==t&&0===vt.G(this.path,t.path)},At.prototype.toString=function(){return this.path.toString()},At.G=function(t,e){return vt.G(t.path,e.path)},At.ht=function(t){return t.length%2==0},At.at=function(t){return new At(new vt(t.slice()))},At.ft=function(t){return new At(vt.it(t))},At.EMPTY=new At(new vt([])),At),_t=(Ct.prototype.lt=function(t,e){return new Ct(this.G,this.root.lt(t,e,this.G).copy(null,null,wt.dt,null,null))},Ct.prototype.remove=function(t){return new Ct(this.G,this.root.remove(t,this.G).copy(null,null,wt.dt,null,null))},Ct.prototype.get=function(t){for(var e=this.root;!e.J();){var n=this.G(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Ct.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.J();){var r=this.G(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Ct.prototype.J=function(){return this.root.J()},Object.defineProperty(Ct.prototype,"size",{get:function(){return this.root.size},enumerable:!0,configurable:!0}),Ct.prototype.vt=function(){return this.root.vt()},Ct.prototype.wt=function(){return this.root.wt()},Ct.prototype.pt=function(t){return this.root.pt(t)},Ct.prototype.forEach=function(n){this.pt(function(t,e){return n(t,e),!1})},Ct.prototype.toString=function(){var n=[];return this.pt(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Ct.prototype.gt=function(t){return this.root.gt(t)},Ct.prototype.bt=function(){return new bt(this.root,null,this.G,!1)},Ct.prototype.yt=function(t){return new bt(this.root,t,this.G,!1)},Ct.prototype._t=function(){return new bt(this.root,null,this.G,!0)},Ct.prototype.It=function(t){return new bt(this.root,t,this.G,!0)},Ct),bt=(St.prototype.Dt=function(){y(0<this.Et.length,"getNext() called on iterator when hasNext() is false.");var t=this.Et.pop(),e={key:t.key,value:t.value};if(this.Tt)for(t=t.left;!t.J();)this.Et.push(t),t=t.right;else for(t=t.right;!t.J();)this.Et.push(t),t=t.left;return e},St.prototype.St=function(){return 0<this.Et.length},St.prototype.Rt=function(){if(0===this.Et.length)return null;var t=this.Et[this.Et.length-1];return{key:t.key,value:t.value}},St),wt=(It.prototype.copy=function(t,e,n,r,i){return new It(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},It.prototype.J=function(){return!1},It.prototype.pt=function(t){return this.left.pt(t)||t(this.key,this.value)||this.right.pt(t)},It.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},It.prototype.min=function(){return this.left.J()?this:this.left.min()},It.prototype.vt=function(){return this.min().key},It.prototype.wt=function(){return this.right.J()?this.key:this.right.wt()},It.prototype.lt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.lt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.lt(t,e,n))).Ct()},It.prototype.At=function(){if(this.left.J())return It.EMPTY;var t=this;return t.left.Pt()||t.left.left.Pt()||(t=t.kt()),(t=t.copy(null,null,null,t.left.At(),null)).Ct()},It.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.J()||r.left.Pt()||r.left.left.Pt()||(r=r.kt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.Pt()&&(r=r.Nt()),r.right.J()||r.right.Pt()||r.right.left.Pt()||(r=r.Ot()),0===e(t,r.key)){if(r.right.J())return It.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.At())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Ct()},It.prototype.Pt=function(){return this.color},It.prototype.Ct=function(){var t=this;return t.right.Pt()&&!t.left.Pt()&&(t=t.Ft()),t.left.Pt()&&t.left.left.Pt()&&(t=t.Nt()),t.left.Pt()&&t.right.Pt()&&(t=t.Vt()),t},It.prototype.kt=function(){var t=this.Vt();return t.right.left.Pt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.Nt())).Ft()).Vt()),t},It.prototype.Ot=function(){var t=this.Vt();return t.left.left.Pt()&&(t=(t=t.Nt()).Vt()),t},It.prototype.Ft=function(){var t=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},It.prototype.Nt=function(){var t=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},It.prototype.Vt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},It.prototype.Ut=function(){var t=this.xt();return Math.pow(2,t)<=this.size+1},It.prototype.xt=function(){if(this.Pt()&&this.left.Pt())throw b("Red node has red child("+this.key+","+this.value+")");if(this.right.Pt())throw b("Right child of ("+this.key+","+this.value+") is red");var t=this.left.xt();if(t!==this.right.xt())throw b("Black depths differ");return t+(this.Pt()?0:1)},It.EMPTY=null,It.RED=!0,It.dt=!1,It),Et=(Object.defineProperty(Tt.prototype,"key",{get:function(){throw b("LLRBEmptyNode has no key.")},enumerable:!0,configurable:!0}),Object.defineProperty(Tt.prototype,"value",{get:function(){throw b("LLRBEmptyNode has no value.")},enumerable:!0,configurable:!0}),Object.defineProperty(Tt.prototype,"color",{get:function(){throw b("LLRBEmptyNode has no color.")},enumerable:!0,configurable:!0}),Object.defineProperty(Tt.prototype,"left",{get:function(){throw b("LLRBEmptyNode has no left child.")},enumerable:!0,configurable:!0}),Object.defineProperty(Tt.prototype,"right",{get:function(){throw b("LLRBEmptyNode has no right child.")},enumerable:!0,configurable:!0}),Tt.prototype.copy=function(t,e,n,r,i){return this},Tt.prototype.lt=function(t,e,n){return new wt(t,e)},Tt.prototype.remove=function(t,e){return this},Tt.prototype.J=function(){return!0},Tt.prototype.pt=function(t){return!1},Tt.prototype.gt=function(t){return!1},Tt.prototype.vt=function(){return null},Tt.prototype.wt=function(){return null},Tt.prototype.Pt=function(){return!1},Tt.prototype.Ut=function(){return!0},Tt.prototype.xt=function(){return 0},Tt);function Tt(){this.size=0}function It(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:It.RED,this.left=null!=r?r:It.EMPTY,this.right=null!=i?i:It.EMPTY,this.size=this.left.size+1+this.right.size}function St(t,e,n,r){this.Tt=r,this.Et=[];for(var i=1;!t.J();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.Tt?t.left:t.right;else{if(0===i){this.Et.push(t);break}this.Et.push(t),t=this.Tt?t.right:t.left}}function Ct(t,e){this.G=t,this.root=e||wt.EMPTY}function At(t){this.path=t,y(At.ht(t),"Invalid DocumentKey with an odd number of segments: "+t.tt().join("/"))}function Nt(){return null!==ct&&ct.apply(this,arguments)||this}function Ot(){return null!==ht&&ht.apply(this,arguments)||this}function Dt(t,e,n){void 0===e?e=0:e>t.length&&b("offset "+e+" out of range "+t.length),void 0===n?n=t.length-e:n>t.length-e&&b("length "+n+" out of range "+(t.length-e)),this.segments=t,this.offset=e,this.len=n}function kt(t){this.timestamp=t}function xt(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new N(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new N(A.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new N(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new N(A.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function Rt(t,e){if(z("GeoPoint",arguments,2),Y("GeoPoint","number",1,t),Y("GeoPoint","number",2,e),!isFinite(t)||t<-90||90<t)throw new N(A.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new N(A.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.F=t,this.V=e}wt.EMPTY=new Et;var Pt=(Gt.jt=function(t){var e=new Gt(t.G);return t.forEach(function(t){e=e.add(t)}),e},Gt.prototype.has=function(t){return null!==this.data.get(t)},Gt.prototype.first=function(){return this.data.vt()},Gt.prototype.last=function(){return this.data.wt()},Object.defineProperty(Gt.prototype,"size",{get:function(){return this.data.size},enumerable:!0,configurable:!0}),Gt.prototype.indexOf=function(t){return this.data.indexOf(t)},Gt.prototype.forEach=function(n){this.data.pt(function(t,e){return n(t),!1})},Gt.prototype.Lt=function(t,e){for(var n=this.data.yt(t[0]);n.St();){var r=n.Dt();if(0<=this.G(r.key,t[1]))return;e(r.key)}},Gt.prototype.qt=function(t,e){var n;for(n=void 0!==e?this.data.yt(e):this.data.bt();n.St();)if(!t(n.Dt().key))return},Gt.prototype.Bt=function(t){var e=this.data.yt(t);return e.St()?e.Dt().key:null},Gt.prototype.bt=function(){return new Lt(this.data.bt())},Gt.prototype.yt=function(t){return new Lt(this.data.yt(t))},Gt.prototype.add=function(t){return this.copy(this.data.remove(t).lt(t,!0))},Gt.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Gt.prototype.J=function(){return this.data.J()},Gt.prototype.Mt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Gt.prototype.isEqual=function(t){if(!(t instanceof Gt))return!1;if(this.size!==t.size)return!1;for(var e=this.data.bt(),n=t.data.bt();e.St();){var r=e.Dt().key,i=n.Dt().key;if(0!==this.G(r,i))return!1}return!0},Gt.prototype.tt=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Gt.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Gt.prototype.copy=function(t){var e=new Gt(this.G);return e.data=t,e},Gt),Lt=(Bt.prototype.Dt=function(){return this.Qt.Dt().key},Bt.prototype.St=function(){return this.Qt.St()},Bt),Mt=(Wt.prototype.Gt=function(t,e){return new Qe(e,t)},Wt.prototype.Wt=function(t,e){return e},Wt.prototype.zt=function(t){return null},Wt.prototype.isEqual=function(t){return t instanceof Wt},Wt.instance=new Wt,Wt),Ft=(Ht.prototype.Gt=function(t,e){return this.apply(t)},Ht.prototype.Wt=function(t,e){return this.apply(t)},Ht.prototype.apply=function(t){for(var n=zt(t),e=function(e){n.find(function(t){return t.isEqual(e)})||n.push(e)},r=0,i=this.elements;r<i.length;r++)e(i[r]);return new tn(n)},Ht.prototype.zt=function(t){return null},Ht.prototype.isEqual=function(t){return t instanceof Ht&&_(t.elements,this.elements)},Ht),jt=(Vt.prototype.Gt=function(t,e){return this.apply(t)},Vt.prototype.Wt=function(t,e){return this.apply(t)},Vt.prototype.apply=function(t){for(var n=zt(t),e=function(e){n=n.filter(function(t){return!t.isEqual(e)})},r=0,i=this.elements;r<i.length;r++)e(i[r]);return new tn(n)},Vt.prototype.zt=function(t){return null},Vt.prototype.isEqual=function(t){return t instanceof Vt&&_(t.elements,this.elements)},Vt),Ut=(qt.prototype.Gt=function(t,e){var n=this.zt(t);if(n instanceof Be&&this.Kt instanceof Be){var r=n.Ht+this.Kt.Ht;return new Be(r)}return r=n.Ht+this.Kt.Ht,new Ge(r)},qt.prototype.Wt=function(t,e){return y(null!==e,"Didn't receive transformResult for NUMERIC_ADD transform"),e},qt.prototype.zt=function(t){return t instanceof ve?t:new Be(0)},qt.prototype.isEqual=function(t){return t instanceof qt&&this.Kt.isEqual(t.Kt)},qt);function qt(t){this.Kt=t}function Vt(t){this.elements=t}function Ht(t){this.elements=t}function Wt(){}function Bt(t){this.Qt=t}function Gt(t){this.G=t,this.data=new _t(this.G)}function zt(t){return t instanceof tn?t.Ht.slice():[]}function Kt(t,e){this.version=t,this.transformResults=e}var Qt,Yt,Xt,Jt,$t,Zt,te,ee,ne=(Oe.Jt=function(t){return new Oe(t)},Oe.Yt=function(t){var e=new Pt(gt.G);return t.forEach(function(t){return e=e.add(t)}),new Oe(e)},Oe.prototype.Xt=function(e){var n=!1;return this.fields.forEach(function(t){t.$(e)&&(n=!0)}),n},Oe.prototype.isEqual=function(t){return this.fields.isEqual(t.fields)},Oe),re=(Ne.prototype.isEqual=function(t){return this.field.isEqual(t.field)&&this.transform.isEqual(t.transform)},Ne),ie=(Ae.exists=function(t){return new Ae(void 0,t)},Ae.updateTime=function(t){return new Ae(t)},Object.defineProperty(Ae.prototype,"$t",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!0,configurable:!0}),Ae.prototype.Zt=function(t){return void 0!==this.updateTime?t instanceof nn&&t.version.isEqual(this.updateTime):void 0!==this.exists?this.exists===t instanceof nn:(y(this.$t,"Precondition should be empty"),!0)},Ae.prototype.isEqual=function(t){return e=this.updateTime,n=t.updateTime,(null!=e?!(!n||!e.isEqual(n)):e===n)&&this.exists===t.exists;var e,n},Ae.NONE=new Ae,Ae),oe=(Ce.prototype.tn=function(t){null!=t&&y(t.key.isEqual(this.key),"Can only apply a mutation to a document with the same key")},Ce.nn=function(t){return t instanceof nn?t.version:pt.MIN},Ce),se=(ee=oe,v.__extends(Se,ee),Se.prototype.Wt=function(t,e){this.tn(t),y(null==e.transformResults,"Transform results received by SetMutation.");var n=e.version;return new nn(this.key,n,{hasCommittedMutations:!0},this.value)},Se.prototype.Gt=function(t,e,n){if(this.tn(t),!this.in.Zt(t))return t;var r=oe.nn(t);return new nn(this.key,r,{en:!0},this.value)},Se.prototype.rn=function(t){return null},Se.prototype.isEqual=function(t){return t instanceof Se&&this.key.isEqual(t.key)&&this.value.isEqual(t.value)&&this.in.isEqual(t.in)},Se),ae=(te=oe,v.__extends(Ie,te),Ie.prototype.Wt=function(t,e){if(this.tn(t),y(null==e.transformResults,"Transform results received by PatchMutation."),!this.in.Zt(t))return new on(this.key,e.version);var n=this.sn(t);return new nn(this.key,e.version,{hasCommittedMutations:!0},n)},Ie.prototype.Gt=function(t,e,n){if(this.tn(t),!this.in.Zt(t))return t;var r=oe.nn(t),i=this.sn(t);return new nn(this.key,r,{en:!0},i)},Ie.prototype.rn=function(t){return null},Ie.prototype.isEqual=function(t){return t instanceof Ie&&this.key.isEqual(t.key)&&this.un.isEqual(t.un)&&this.in.isEqual(t.in)},Ie.prototype.sn=function(t){var e;return e=t instanceof nn?t.data():$e.EMPTY,this.on(e)},Ie.prototype.on=function(t){var n=this,r=t.hn();return this.un.fields.forEach(function(t){if(!t.J()){var e=n.data.field(t);null!==e?r.set(t,e):r.delete(t)}}),r.cn()},Ie),ue=(Zt=oe,v.__extends(Te,Zt),Te.prototype.Wt=function(t,e){if(this.tn(t),y(null!=e.transformResults,"Transform results missing for TransformMutation."),!this.in.Zt(t))return new on(this.key,e.version);var n=this.an(t),r=this.fn(t,e.transformResults),i=e.version,o=this.ln(n.data(),r);return new nn(this.key,i,{hasCommittedMutations:!0},o)},Te.prototype.Gt=function(t,e,n){if(this.tn(t),!this.in.Zt(t))return t;var r=this.an(t),i=this.dn(n,t,e),o=this.ln(r.data(),i);return new nn(this.key,r.version,{en:!0},o)},Te.prototype.rn=function(t){for(var e=null,n=0,r=this.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof nn?t.field(i.field):void 0,s=i.transform.zt(o||null);null!=s&&(e=null==e?$e.vn().set(i.field,s):e.set(i.field,s))}return e?e.cn():null},Te.prototype.isEqual=function(t){return t instanceof Te&&this.key.isEqual(t.key)&&_(this.fieldTransforms,t.fieldTransforms)&&this.in.isEqual(t.in)},Te.prototype.an=function(t){return y(t instanceof nn,"Unknown MaybeDocument type "+t),y(t.key.isEqual(this.key),"Can only transform a document with the same key"),t},Te.prototype.fn=function(t,e){var n=[];y(this.fieldTransforms.length===e.length,"server transform result count ("+e.length+") should match field transform count ("+this.fieldTransforms.length+")");for(var r=0;r<e.length;r++){var i=this.fieldTransforms[r],o=i.transform,s=null;t instanceof nn&&(s=t.field(i.field)),n.push(o.Wt(s,e[r]))}return n},Te.prototype.dn=function(t,e,n){for(var r=[],i=0,o=this.fieldTransforms;i<o.length;i++){var s=o[i],a=s.transform,u=null;e instanceof nn&&(u=e.field(s.field)),null===u&&n instanceof nn&&(u=n.field(s.field)),r.push(a.Gt(u,t))}return r},Te.prototype.ln=function(t,e){y(e.length===this.fieldTransforms.length,"TransformResults length mismatch.");for(var n=t.hn(),r=0;r<this.fieldTransforms.length;r++){var i=this.fieldTransforms[r].field;n.set(i,e[r])}return n.cn()},Te),ce=($t=oe,v.__extends(Ee,$t),Ee.prototype.Wt=function(t,e){return this.tn(t),y(null==e.transformResults,"Transform results received by DeleteMutation."),new rn(this.key,e.version,{hasCommittedMutations:!0})},Ee.prototype.Gt=function(t,e,n){return this.tn(t),this.in.Zt(t)?(t&&y(t.key.isEqual(this.key),"Can only apply mutation to document with same key"),new rn(this.key,pt.q())):t},Ee.prototype.rn=function(t){return null},Ee.prototype.isEqual=function(t){return t instanceof Ee&&this.key.isEqual(t.key)&&this.in.isEqual(t.in)},Ee),he=(Jt=oe,v.__extends(we,Jt),we.prototype.Wt=function(t,e){b("VerifyMutation should only be used in Transactions.")},we.prototype.Gt=function(t,e,n){b("VerifyMutation should only be used in Transactions.")},we.prototype.rn=function(t){b("VerifyMutation should only be used in Transactions.")},we.prototype.isEqual=function(t){return t instanceof we&&this.key.isEqual(t.key)&&this.in.isEqual(t.in)},we),le=(be.mn=function(t,e){switch(t.serverTimestamps){case"estimate":return new be(1,e);case"previous":return new be(2,e);case"none":case void 0:return new be(0,e);default:return b("fromSnapshotOptions() called with invalid options.")}},be),fe=(_e.prototype.toString=function(){var t=this.value();return null===t?"null":t.toString()},_e.prototype.pn=function(t){return y(this.gn!==t.gn,"Default compareTo should not be used for values of same type."),m(this.gn,t.gn)},_e),pe=(Xt=fe,v.__extends(me,Xt),me.prototype.value=function(t){return null},me.prototype.isEqual=function(t){return t instanceof me},me.prototype.h=function(t){return t instanceof me?0:this.pn(t)},me.prototype.bn=function(){return 4},me.yn=new me,me),de=(Yt=fe,v.__extends(ge,Yt),ge.prototype.value=function(t){return this.Ht},ge.prototype.isEqual=function(t){return t instanceof ge&&this.Ht===t.Ht},ge.prototype.h=function(t){return t instanceof ge?m(this.Ht,t.Ht):this.pn(t)},ge.prototype.bn=function(){return 4},ge.of=function(t){return t?ge._n:ge.In},ge._n=new ge(!0),ge.In=new ge(!1),ge),ve=(Qt=fe,v.__extends(ye,Qt),ye.prototype.value=function(t){return this.Ht},ye.prototype.h=function(t){return t instanceof ye?(e=this.Ht)<(n=t.Ht)?-1:n<e?1:e===n?0:isNaN(e)?isNaN(n)?0:-1:1:this.pn(t);var e,n},ye.prototype.bn=function(){return 8},ye);function ye(t){var e=Qt.call(this)||this;return e.Ht=t,e.gn=2,e}function ge(t){var e=Yt.call(this)||this;return e.Ht=t,e.gn=1,e}function me(){var t=Xt.call(this)||this;return t.gn=0,t.Ht=null,t}function _e(){}function be(t,e){this.wn=t,this.timestampsInSnapshots=e}function we(t,e){var n=Jt.call(this)||this;return n.key=t,n.in=e,n.type=4,n}function Ee(t,e){var n=$t.call(this)||this;return n.key=t,n.in=e,n.type=3,n}function Te(t,e){var n=Zt.call(this)||this;return n.key=t,n.fieldTransforms=e,n.type=2,n.in=ie.exists(!0),n}function Ie(t,e,n,r){var i=te.call(this)||this;return i.key=t,i.data=e,i.un=n,i.in=r,i.type=1,i}function Se(t,e,n){var r=ee.call(this)||this;return r.key=t,r.value=e,r.in=n,r.type=0,r}function Ce(){}function Ae(t,e){this.updateTime=t,this.exists=e,y(void 0===t||void 0===e,'Precondition can specify "exists" or "updateTime" but not both')}function Ne(t,e){this.field=t,this.transform=e}function Oe(t){this.fields=t}function De(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}var ke,xe,Re,Pe,Le,Me,Fe,je,Ue,qe,Ve,He,We,Be=(We=ve,v.__extends(bn,We),bn.prototype.isEqual=function(t){return t instanceof bn&&De(this.Ht,t.Ht)},bn),Ge=(He=ve,v.__extends(_n,He),_n.prototype.isEqual=function(t){return t instanceof _n&&De(this.Ht,t.Ht)},_n.Tn=new _n(NaN),_n.POSITIVE_INFINITY=new _n(1/0),_n.NEGATIVE_INFINITY=new _n(-1/0),_n),ze=(Ve=fe,v.__extends(mn,Ve),mn.prototype.value=function(t){return this.Ht},mn.prototype.isEqual=function(t){return t instanceof mn&&this.Ht===t.Ht},mn.prototype.h=function(t){return t instanceof mn?m(this.Ht,t.Ht):this.pn(t)},mn.prototype.bn=function(){return 2*this.Ht.length},mn),Ke=(qe=fe,v.__extends(gn,qe),gn.prototype.value=function(t){return!t||t.timestampsInSnapshots?this.Ht:this.Ht.toDate()},gn.prototype.isEqual=function(t){return t instanceof gn&&this.Ht.isEqual(t.Ht)},gn.prototype.h=function(t){return t instanceof gn?this.Ht.U(t.Ht):t instanceof Qe?-1:this.pn(t)},gn.prototype.bn=function(){return 16},gn),Qe=(Ue=fe,v.__extends(yn,Ue),yn.prototype.value=function(t){return t&&1===t.wn?new Ke(this.En).value(t):t&&2===t.wn&&this.previousValue?this.previousValue.value(t):null},yn.prototype.isEqual=function(t){return t instanceof yn&&this.En.isEqual(t.En)},yn.prototype.h=function(t){return t instanceof yn?this.En.U(t.En):t instanceof Ke?1:this.pn(t)},yn.prototype.toString=function(){return"<ServerTimestamp localTime="+this.En.toString()+">"},yn.prototype.bn=function(){return 16+(this.previousValue?this.previousValue.bn():0)},yn),Ye=(je=fe,v.__extends(vn,je),vn.prototype.value=function(t){return this.Ht},vn.prototype.isEqual=function(t){return t instanceof vn&&this.Ht.isEqual(t.Ht)},vn.prototype.h=function(t){return t instanceof vn?this.Ht.U(t.Ht):this.pn(t)},vn.prototype.bn=function(){return this.Ht.Dn()},vn),Xe=(Fe=fe,v.__extends(dn,Fe),dn.prototype.value=function(t){return this.key},dn.prototype.isEqual=function(t){return t instanceof dn&&this.key.isEqual(t.key)&&this.s.isEqual(t.s)},dn.prototype.h=function(t){if(t instanceof dn){var e=this.s.h(t.s);return 0!==e?e:mt.G(this.key,t.key)}return this.pn(t)},dn.prototype.bn=function(){return this.s.projectId.length+this.s.database.length+this.key.toString().length},dn),Je=(Me=fe,v.__extends(pn,Me),pn.prototype.value=function(t){return this.Ht},pn.prototype.isEqual=function(t){return t instanceof pn&&this.Ht.isEqual(t.Ht)},pn.prototype.h=function(t){return t instanceof pn?this.Ht.U(t.Ht):this.pn(t)},pn.prototype.bn=function(){return 16},pn),$e=(Le=fe,v.__extends(fn,Le),fn.vn=function(){return new Ze(fn.EMPTY.Ht)},fn.prototype.value=function(n){var r={};return this.Ht.pt(function(t,e){r[t]=e.value(n)}),r},fn.prototype.forEach=function(t){this.Ht.pt(t)},fn.prototype.isEqual=function(t){if(t instanceof fn){for(var e=this.Ht.bt(),n=t.Ht.bt();e.St()&&n.St();){var r=e.Dt(),i=n.Dt();if(r.key!==i.key||!r.value.isEqual(i.value))return!1}return!e.St()&&!n.St()}return!1},fn.prototype.h=function(t){if(t instanceof fn){for(var e=this.Ht.bt(),n=t.Ht.bt();e.St()&&n.St();){var r=e.Dt(),i=n.Dt(),o=m(r.key,i.key)||r.value.h(i.value);if(o)return o}return m(e.St(),n.St())}return this.pn(t)},fn.prototype.contains=function(t){return null!==this.field(t)},fn.prototype.field=function(t){y(!t.J(),"Can't get field of empty path");var e=this;return t.forEach(function(t){e=e instanceof fn?e.Ht.get(t):null}),e},fn.prototype.un=function(){var i=new Pt(gt.G);return this.Ht.forEach(function(t,e){var n=new gt([t]);if(e instanceof fn){var r=e.un().fields;r.J()?i=i.add(n):r.forEach(function(t){i=i.add(n.child(t))})}else i=i.add(n)}),ne.Jt(i)},fn.prototype.bn=function(){var n=0;return this.Ht.pt(function(t,e){n+=t.length+e.bn()}),n},fn.prototype.toString=function(){return this.Ht.toString()},fn.prototype.hn=function(){return new Ze(this.Ht)},fn.EMPTY=new fn(new _t(m)),fn),Ze=(ln.prototype.set=function(t,e){y(!t.J(),"Cannot set field for empty path on ObjectValue");var n=t.Y();if(1===t.length)this.Ht=this.Ht.lt(n,e);else{var r=this.Ht.get(n),i=(r instanceof $e?r:$e.EMPTY).hn().set(t.K(),e).cn();this.Ht=this.Ht.lt(n,i)}return this},ln.prototype.delete=function(t){y(!t.J(),"Cannot delete field for empty path on ObjectValue");var e=t.Y();if(1===t.length)this.Ht=this.Ht.remove(e);else{var n=this.Ht.get(e);if(n instanceof $e){var r=n.hn().delete(t.K()).cn();this.Ht=this.Ht.lt(t.Y(),r)}}return this},ln.prototype.cn=function(){return new $e(this.Ht)},ln),tn=(Pe=fe,v.__extends(hn,Pe),hn.prototype.value=function(e){return this.Ht.map(function(t){return t.value(e)})},hn.prototype.contains=function(t){for(var e=0,n=this.Ht;e<n.length;e++)if(n[e].isEqual(t))return!0;return!1},hn.prototype.forEach=function(t){this.Ht.forEach(t)},hn.prototype.isEqual=function(t){if(t instanceof hn){if(this.Ht.length!==t.Ht.length)return!1;for(var e=0;e<this.Ht.length;e++)if(!this.Ht[e].isEqual(t.Ht[e]))return!1;return!0}return!1},hn.prototype.h=function(t){if(t instanceof hn){for(var e=Math.min(this.Ht.length,t.Ht.length),n=0;n<e;n++){var r=this.Ht[n].h(t.Ht[n]);if(r)return r}return m(this.Ht.length,t.Ht.length)}return this.pn(t)},hn.prototype.bn=function(){return this.Ht.reduce(function(t,e){return t+e.bn()},0)},hn.prototype.toString=function(){return"["+this.Ht.map(function(t){return t.toString()}).join(",")+"]"},hn),en=(cn.Sn=function(t,e){return mt.G(t.key,e.key)},cn),nn=(Re=en,v.__extends(un,Re),un.prototype.field=function(t){if(this.Rn)return this.Rn.field(t);this.Cn||(this.Cn=new Map);var e=t.nt(),n=this.Cn.get(e);if(void 0===n){var r=this.An(t);n=void 0===r?null:this.converter(r),this.Cn.set(e,n)}return n},un.prototype.data=function(){var n=this;if(!this.Rn){var r=$e.vn();W(this.proto.fields||{},function(t,e){r.set(new gt([t]),n.converter(e))}),this.Rn=r.cn(),this.Cn=void 0}return this.Rn},un.prototype.value=function(){return this.data().value()},un.prototype.isEqual=function(t){return t instanceof un&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.en===t.en&&this.hasCommittedMutations===t.hasCommittedMutations&&this.data().isEqual(t.data())},un.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.data().toString()+", {hasLocalMutations: "+this.en+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(un.prototype,"hasPendingWrites",{get:function(){return this.en||this.hasCommittedMutations},enumerable:!0,configurable:!0}),un.prototype.An=function(t){y(void 0!==this.proto,"Can only call getProtoField() when proto is defined");for(var e=this.proto.fields?this.proto.fields[t.Y()]:void 0,n=1;n<t.length;++n){if(!e||!e.mapValue||!e.mapValue.fields)return;e=e.mapValue.fields[t.get(n)]}return e},un.Pn=function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?r.h(i):b("Trying to compare documents on fields that don't exist")},un),rn=(xe=en,v.__extends(an,xe),an.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(an.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!0,configurable:!0}),an.prototype.isEqual=function(t){return t instanceof an&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},an),on=(ke=en,v.__extends(sn,ke),sn.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(sn.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!0,configurable:!0}),sn.prototype.isEqual=function(t){return t instanceof sn&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},sn);function sn(){return null!==ke&&ke.apply(this,arguments)||this}function an(t,e,n){var r=xe.call(this,t,e)||this;return r.hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function un(t,e,n,r,i,o){var s=Re.call(this,t,e)||this;return s.Rn=r,s.proto=i,s.converter=o,y(void 0!==s.Rn||void 0!==s.proto&&void 0!==s.converter,"If objectValue is not defined, proto and converter need to be set."),s.en=!!n.en,s.hasCommittedMutations=!!n.hasCommittedMutations,s}function cn(t,e){this.key=t,this.version=e}function hn(t){var e=Pe.call(this)||this;return e.Ht=t,e.gn=8,e}function ln(t){this.Ht=t}function fn(t){var e=Le.call(this)||this;return e.Ht=t,e.gn=9,e}function pn(t){var e=Me.call(this)||this;return e.Ht=t,e.gn=7,e}function dn(t,e){var n=Fe.call(this)||this;return n.s=t,n.key=e,n.gn=6,n}function vn(t){var e=je.call(this)||this;return e.Ht=t,e.gn=5,e}function yn(t,e){var n=Ue.call(this)||this;return n.En=t,n.previousValue=e,n.gn=3,n}function gn(t){var e=qe.call(this)||this;return e.Ht=t,e.gn=3,e}function mn(t){var e=Ve.call(this)||this;return e.Ht=t,e.gn=4,e}function _n(){return null!==He&&He.apply(this,arguments)||this}function bn(){return null!==We&&We.apply(this,arguments)||this}function wn(t){return null==t}function En(t){return-0===t&&1/t==-1/0}function Tn(t){return"number"==typeof t&&Number.isInteger(t)&&!En(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var In,Sn,Cn,An,Nn,On,Dn=(rr.prototype.canonicalId=function(){if(null===this.kn){var t=this.path.nt();null!==this.collectionGroup&&(t+="|cg:"+this.collectionGroup),t+="|f:";for(var e=0,n=this.filters;e<n.length;e++)t+=n[e].canonicalId(),t+=",";t+="|ob:";for(var r=0,i=this.orderBy;r<i.length;r++)t+=i[r].canonicalId(),t+=",";wn(this.limit)||(t+="|l:",t+=this.limit),this.startAt&&(t+="|lb:",t+=this.startAt.canonicalId()),this.endAt&&(t+="|ub:",t+=this.endAt.canonicalId()),this.kn=t}return this.kn},rr.prototype.toString=function(){var t=this.path.nt();return null!==this.collectionGroup&&(t+=" collectionGroup="+this.collectionGroup),0<this.filters.length&&(t+=", filters: ["+this.filters.join(", ")+"]"),wn(this.limit)||(t+=", limit: "+this.limit),0<this.orderBy.length&&(t+=", orderBy: ["+this.orderBy.join(", ")+"]"),this.startAt&&(t+=", startAt: "+this.startAt.canonicalId()),this.endAt&&(t+=", endAt: "+this.endAt.canonicalId()),"Target("+t+")"},rr.prototype.isEqual=function(t){if(this.limit!==t.limit)return!1;if(this.orderBy.length!==t.orderBy.length)return!1;for(var e=0;e<this.orderBy.length;e++)if(!this.orderBy[e].isEqual(t.orderBy[e]))return!1;if(this.filters.length!==t.filters.length)return!1;for(e=0;e<this.filters.length;e++)if(!this.filters[e].isEqual(t.filters[e]))return!1;return this.collectionGroup===t.collectionGroup&&!!this.path.isEqual(t.path)&&!(null!==this.startAt?!this.startAt.isEqual(t.startAt):null!==t.startAt)&&(null!==this.endAt?this.endAt.isEqual(t.endAt):null===t.endAt)},rr.prototype.Nn=function(){return mt.ht(this.path)&&null===this.collectionGroup&&0===this.filters.length},rr),kn=(nr.jn=function(t){return new nr(t)},Object.defineProperty(nr.prototype,"orderBy",{get:function(){if(null===this.Vn){var t=this.Ln(),e=this.qn();if(null!==t&&null===e)t.ut()?this.Vn=[Hn]:this.Vn=[new Vn(t),Hn];else{y(null===t||null!==e&&t.isEqual(e),"First orderBy should match inequality field.");for(var n=!(this.Vn=[]),r=0,i=this.On;r<i.length;r++){var o=i[r];this.Vn.push(o),o.field.ut()&&(n=!0)}if(!n){var s=0<this.On.length?this.On[this.On.length-1].dir:Un.ASCENDING;this.Vn.push(s===Un.ASCENDING?Hn:Wn)}}}return this.Vn},enumerable:!0,configurable:!0}),nr.prototype.Bn=function(t){y(null==this.Ln()||!(t instanceof Rn)||!t.Mn()||t.field.isEqual(this.Ln()),"Query must only have one inequality field."),y(!this.Nn(),"No filtering allowed for document query");var e=this.filters.concat([t]);return new nr(this.path,this.collectionGroup,this.On.slice(),e,this.limit,this.Fn,this.startAt,this.endAt)},nr.prototype.Qn=function(t){y(!this.startAt&&!this.endAt,"Bounds must be set after orderBy");var e=this.On.concat([t]);return new nr(this.path,this.collectionGroup,e,this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},nr.prototype.Gn=function(t){return new nr(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),t,"F",this.startAt,this.endAt)},nr.prototype.Wn=function(t){return new nr(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),t,"L",this.startAt,this.endAt)},nr.prototype.zn=function(t){return new nr(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,t,this.endAt)},nr.prototype.Kn=function(t){return new nr(this.path,this.collectionGroup,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,t)},nr.prototype.Hn=function(t){return new nr(t,null,this.On.slice(),this.filters.slice(),this.limit,this.Fn,this.startAt,this.endAt)},nr.prototype.Jn=function(){return 0===this.filters.length&&null===this.limit&&null==this.startAt&&null==this.endAt&&(0===this.On.length||1===this.On.length&&this.On[0].field.ut())},nr.prototype.canonicalId=function(){return this.Yn().canonicalId()+"|lt:"+this.Fn},nr.prototype.toString=function(){return"Query(target="+this.Yn().toString()+"; limitType="+this.Fn+")"},nr.prototype.isEqual=function(t){return this.Yn().isEqual(t.Yn())&&this.Fn===t.Fn},nr.prototype.Xn=function(t,e){for(var n=!1,r=0,i=this.orderBy;r<i.length;r++){var o=i[r],s=o.compare(t,e);if(0!==s)return s;n=n||o.field.ut()}return y(n,"orderBy used that doesn't compare on key field"),0},nr.prototype.matches=function(t){return this.$n(t)&&this.Zn(t)&&this.ti(t)&&this.ni(t)},nr.prototype.ii=function(){return!wn(this.limit)&&"F"===this.Fn},nr.prototype.ei=function(){return!wn(this.limit)&&"L"===this.Fn},nr.prototype.qn=function(){return 0<this.On.length?this.On[0].field:null},nr.prototype.Ln=function(){for(var t=0,e=this.filters;t<e.length;t++){var n=e[t];if(n instanceof Rn&&n.Mn())return n.field}return null},nr.prototype.ri=function(t){for(var e=0,n=this.filters;e<n.length;e++){var r=n[e];if(r instanceof Rn&&0<=t.indexOf(r.op))return r.op}return null},nr.prototype.Nn=function(){return this.Yn().Nn()},nr.prototype.ui=function(){return null!==this.collectionGroup},nr.prototype.Yn=function(){if(!this.Un)if("F"===this.Fn)this.Un=new Dn(this.path,this.collectionGroup,this.orderBy,this.filters,this.limit,this.startAt,this.endAt);else{for(var t=[],e=0,n=this.orderBy;e<n.length;e++){var r=n[e],i=r.dir===Un.DESCENDING?Un.ASCENDING:Un.DESCENDING;t.push(new Vn(r.field,i))}var o=this.endAt?new qn(this.endAt.position,!this.endAt.before):null,s=this.startAt?new qn(this.startAt.position,!this.startAt.before):null;this.Un=new Dn(this.path,this.collectionGroup,t,this.filters,this.limit,o,s)}return this.Un},nr.prototype.$n=function(t){var e=t.key.path;return null!==this.collectionGroup?t.key.ct(this.collectionGroup)&&this.path.$(e):mt.ht(this.path)?this.path.isEqual(e):this.path.Z(e)},nr.prototype.Zn=function(t){for(var e=0,n=this.On;e<n.length;e++){var r=n[e];if(!r.field.ut()&&null===t.field(r.field))return!1}return!0},nr.prototype.ti=function(t){for(var e=0,n=this.filters;e<n.length;e++)if(!n[e].matches(t))return!1;return!0},nr.prototype.ni=function(t){return!(this.startAt&&!this.startAt.si(this.orderBy,t)||this.endAt&&this.endAt.si(this.orderBy,t))},nr.prototype.xn=function(t){y(t.position.length<=this.orderBy.length,"Bound is longer than orderBy")},nr),xn=(er.it=function(t){switch(t){case"<":return er.LESS_THAN;case"<=":return er.LESS_THAN_OR_EQUAL;case"==":return er.EQUAL;case">=":return er.GREATER_THAN_OR_EQUAL;case">":return er.GREATER_THAN;case"array-contains":return er.ARRAY_CONTAINS;case"in":return er.IN;case"array-contains-any":return er.ARRAY_CONTAINS_ANY;default:return b("Unknown FieldFilter operator: "+t)}},er.prototype.toString=function(){return this.name},er.prototype.isEqual=function(t){return this.name===t.name},er.LESS_THAN=new er("<"),er.LESS_THAN_OR_EQUAL=new er("<="),er.EQUAL=new er("=="),er.GREATER_THAN=new er(">"),er.GREATER_THAN_OR_EQUAL=new er(">="),er.ARRAY_CONTAINS=new er("array-contains"),er.IN=new er("in"),er.ARRAY_CONTAINS_ANY=new er("array-contains-any"),er),Rn=(On=function(){},v.__extends(tr,On),tr.create=function(t,e,n){if(t.ut())return e===xn.IN?(y(n instanceof tn,"Comparing on key with IN, but filter value not an ArrayValue"),y(n.Ht.every(function(t){return t instanceof Xe}),"Comparing on key with IN, but an array value was not a RefValue"),new Ln(t,n)):(y(n instanceof Xe,"Comparing on key, but filter value not a RefValue"),y(e!==xn.ARRAY_CONTAINS&&e!==xn.ARRAY_CONTAINS_ANY,"'"+e.toString()+"' queries don't make sense on document keys."),new Pn(t,e,n));if(n.isEqual(pe.yn)){if(e!==xn.EQUAL)throw new N(A.INVALID_ARGUMENT,"Invalid query. Null supports only equality comparisons.");return new tr(t,e,n)}if(n.isEqual(Ge.Tn)){if(e!==xn.EQUAL)throw new N(A.INVALID_ARGUMENT,"Invalid query. NaN supports only equality comparisons.");return new tr(t,e,n)}return e===xn.ARRAY_CONTAINS?new Mn(t,n):e===xn.IN?(y(n instanceof tn,"IN filter has invalid value: "+n.toString()),new Fn(t,n)):e===xn.ARRAY_CONTAINS_ANY?(y(n instanceof tn,"ARRAY_CONTAINS_ANY filter has invalid value: "+n.toString()),new jn(t,n)):new tr(t,e,n)},tr.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&this.value.gn===e.gn&&this.oi(e.h(this.value))},tr.prototype.oi=function(t){switch(this.op){case xn.LESS_THAN:return t<0;case xn.LESS_THAN_OR_EQUAL:return t<=0;case xn.EQUAL:return 0===t;case xn.GREATER_THAN:return 0<t;case xn.GREATER_THAN_OR_EQUAL:return 0<=t;default:return b("Unknown FieldFilter operator: "+this.op)}},tr.prototype.Mn=function(){return 0<=[xn.LESS_THAN,xn.LESS_THAN_OR_EQUAL,xn.GREATER_THAN,xn.GREATER_THAN_OR_EQUAL].indexOf(this.op)},tr.prototype.canonicalId=function(){return this.field.nt()+this.op.toString()+this.value.toString()},tr.prototype.isEqual=function(t){return t instanceof tr&&this.op.isEqual(t.op)&&this.field.isEqual(t.field)&&this.value.isEqual(t.value)},tr.prototype.toString=function(){return this.field.nt()+" "+this.op+" "+this.value.value()},tr),Pn=(Nn=Rn,v.__extends(Zn,Nn),Zn.prototype.matches=function(t){var e=this.value,n=mt.G(t.key,e.key);return this.oi(n)},Zn),Ln=(An=Rn,v.__extends($n,An),$n.prototype.matches=function(e){return this.value.Ht.some(function(t){return e.key.isEqual(t.key)})},$n),Mn=(Cn=Rn,v.__extends(Jn,Cn),Jn.prototype.matches=function(t){var e=t.field(this.field);return e instanceof tn&&e.contains(this.value)},Jn),Fn=(Sn=Rn,v.__extends(Xn,Sn),Xn.prototype.matches=function(t){var e=this.value,n=t.field(this.field);return null!==n&&e.contains(n)},Xn),jn=(In=Rn,v.__extends(Yn,In),Yn.prototype.matches=function(t){var e=this,n=t.field(this.field);return n instanceof tn&&n.Ht.some(function(t){return e.value.contains(t)})},Yn),Un=(Qn.prototype.toString=function(){return this.name},Qn.ASCENDING=new Qn("asc"),Qn.DESCENDING=new Qn("desc"),Qn),qn=(Kn.prototype.canonicalId=function(){for(var t=this.before?"b:":"a:",e=0,n=this.position;e<n.length;e++)t+=n[e].toString();return t},Kn.prototype.si=function(t,e){y(this.position.length<=t.length,"Bound has more components than query's orderBy");for(var n=0,r=0;r<this.position.length;r++){var i=t[r],o=this.position[r];if(i.field.ut())y(o instanceof Xe,"Bound has a non-key value where the key path is being used."),n=mt.G(o.key,e.key);else{var s=e.field(i.field);y(null!==s,"Field should exist since document matched the orderBy already."),n=o.h(s)}if(i.dir===Un.DESCENDING&&(n*=-1),0!==n)break}return this.before?n<=0:n<0},Kn.prototype.isEqual=function(t){if(null===t)return!1;if(this.before!==t.before||this.position.length!==t.position.length)return!1;for(var e=0;e<this.position.length;e++){var n=this.position[e],r=t.position[e];if(!n.isEqual(r))return!1}return!0},Kn),Vn=(zn.prototype.compare=function(t,e){var n=this.hi?nn.Sn(t,e):nn.Pn(this.field,t,e);switch(this.dir){case Un.ASCENDING:return n;case Un.DESCENDING:return-1*n;default:return b("Unknown direction: "+this.dir)}},zn.prototype.canonicalId=function(){return this.field.nt()+this.dir.toString()},zn.prototype.toString=function(){return this.field.nt()+" ("+this.dir+")"},zn.prototype.isEqual=function(t){return this.dir===t.dir&&this.field.isEqual(t.field)},zn),Hn=new Vn(gt.st(),Un.ASCENDING),Wn=new Vn(gt.st(),Un.DESCENDING),Bn=(Gn.fromBase64String=function(t){return new Gn($r.t().atob(t))},Gn.fromUint8Array=function(t){return new Gn(ir(t))},Gn.prototype.toBase64=function(){return $r.t().btoa(this.ci)},Gn.prototype.toUint8Array=function(){return or(this.ci)},Gn.prototype.bn=function(){return 2*this.ci.length},Gn.prototype.isEqual=function(t){return this.ci===t.ci},Gn.ai=new Gn(""),Gn);function Gn(t){this.ci=t}function zn(t,e){this.field=t,void 0===e&&(e=Un.ASCENDING),this.dir=e,this.hi=t.ut()}function Kn(t,e){this.position=t,this.before=e}function Qn(t){this.name=t}function Yn(t,e){var n=In.call(this,t,xn.ARRAY_CONTAINS_ANY,e)||this;return n.value=e,n}function Xn(t,e){var n=Sn.call(this,t,xn.IN,e)||this;return n.value=e,n}function Jn(t,e){return Cn.call(this,t,xn.ARRAY_CONTAINS,e)||this}function $n(t,e){var n=An.call(this,t,xn.IN,e)||this;return n.value=e,n}function Zn(){return null!==Nn&&Nn.apply(this,arguments)||this}function tr(t,e,n){var r=On.call(this)||this;return r.field=t,r.op=e,r.value=n,r}function er(t){this.name=t}function nr(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.On=n,this.filters=r,this.limit=i,this.Fn=o,this.startAt=s,this.endAt=a,this.Vn=null,this.Un=null,this.startAt&&this.xn(this.startAt),this.endAt&&this.xn(this.endAt)}function rr(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.kn=null}function ir(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}function or(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}var sr,ar,ur=(lr.prototype.di=function(t){return new lr(this.target,this.targetId,this.fi,t,this.li,this.lastLimboFreeSnapshotVersion,this.resumeToken)},lr.prototype.vi=function(t,e){return new lr(this.target,this.targetId,this.fi,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},lr.prototype.wi=function(t){return new lr(this.target,this.targetId,this.fi,this.sequenceNumber,this.li,t,this.resumeToken)},lr.prototype.isEqual=function(t){return this.targetId===t.targetId&&this.fi===t.fi&&this.sequenceNumber===t.sequenceNumber&&this.li.isEqual(t.li)&&this.lastLimboFreeSnapshotVersion.isEqual(t.lastLimboFreeSnapshotVersion)&&this.resumeToken.isEqual(t.resumeToken)&&this.target.isEqual(t.target)},lr),cr=(hr.prototype.isEqual=function(t){return t&&t.count===this.count},hr);function hr(t){this.count=t}function lr(t,e,n,r,i,o,s){void 0===i&&(i=pt.MIN),void 0===o&&(o=pt.MIN),void 0===s&&(s=Bn.ai),this.target=t,this.targetId=e,this.fi=n,this.sequenceNumber=r,this.li=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function fr(t){switch(t){case A.OK:return b("Treated status OK as error");case A.CANCELLED:case A.UNKNOWN:case A.DEADLINE_EXCEEDED:case A.RESOURCE_EXHAUSTED:case A.INTERNAL:case A.UNAVAILABLE:case A.UNAUTHENTICATED:return;case A.INVALID_ARGUMENT:case A.NOT_FOUND:case A.ALREADY_EXISTS:case A.PERMISSION_DENIED:case A.FAILED_PRECONDITION:case A.ABORTED:case A.OUT_OF_RANGE:case A.UNIMPLEMENTED:case A.DATA_LOSS:return 1;default:return b("Unknown status code: "+t)}}function pr(t){if(void 0===t)return u("GRPC error has no .code"),A.UNKNOWN;switch(t){case sr.OK:return A.OK;case sr.CANCELLED:return A.CANCELLED;case sr.UNKNOWN:return A.UNKNOWN;case sr.DEADLINE_EXCEEDED:return A.DEADLINE_EXCEEDED;case sr.RESOURCE_EXHAUSTED:return A.RESOURCE_EXHAUSTED;case sr.INTERNAL:return A.INTERNAL;case sr.UNAVAILABLE:return A.UNAVAILABLE;case sr.UNAUTHENTICATED:return A.UNAUTHENTICATED;case sr.INVALID_ARGUMENT:return A.INVALID_ARGUMENT;case sr.NOT_FOUND:return A.NOT_FOUND;case sr.ALREADY_EXISTS:return A.ALREADY_EXISTS;case sr.PERMISSION_DENIED:return A.PERMISSION_DENIED;case sr.FAILED_PRECONDITION:return A.FAILED_PRECONDITION;case sr.ABORTED:return A.ABORTED;case sr.OUT_OF_RANGE:return A.OUT_OF_RANGE;case sr.UNIMPLEMENTED:return A.UNIMPLEMENTED;case sr.DATA_LOSS:return A.DATA_LOSS;default:return b("Unknown status code: "+t)}}(ar=sr=sr||{})[ar.OK=0]="OK",ar[ar.CANCELLED=1]="CANCELLED",ar[ar.UNKNOWN=2]="UNKNOWN",ar[ar.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ar[ar.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ar[ar.NOT_FOUND=5]="NOT_FOUND",ar[ar.ALREADY_EXISTS=6]="ALREADY_EXISTS",ar[ar.PERMISSION_DENIED=7]="PERMISSION_DENIED",ar[ar.UNAUTHENTICATED=16]="UNAUTHENTICATED",ar[ar.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ar[ar.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ar[ar.ABORTED=10]="ABORTED",ar[ar.OUT_OF_RANGE=11]="OUT_OF_RANGE",ar[ar.UNIMPLEMENTED=12]="UNIMPLEMENTED",ar[ar.INTERNAL=13]="INTERNAL",ar[ar.UNAVAILABLE=14]="UNAVAILABLE",ar[ar.DATA_LOSS=15]="DATA_LOSS";var dr=new _t(mt.G);function vr(){return dr}function yr(){return vr()}var gr=new _t(mt.G);function mr(){return gr}var _r=new _t(mt.G);function br(){return _r}var wr=new Pt(mt.G);function Er(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=wr,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var Tr=new Pt(m);function Ir(){return Tr}function Sr(t,e,n,r){this.Ui=t,this.removedTargetIds=e,this.key=n,this.xi=r}function Cr(t,e){this.targetId=t,this.ji=e}function Ar(t,e,n,r){void 0===n&&(n=Bn.ai),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}var Nr=(Vr.gi=function(t){return new Vr(t.G)},Vr.prototype.has=function(t){return null!=this.mi.get(t)},Vr.prototype.get=function(t){return this.mi.get(t)},Vr.prototype.first=function(){return this.pi.vt()},Vr.prototype.last=function(){return this.pi.wt()},Vr.prototype.J=function(){return this.pi.J()},Vr.prototype.indexOf=function(t){var e=this.mi.get(t);return e?this.pi.indexOf(e):-1},Object.defineProperty(Vr.prototype,"size",{get:function(){return this.pi.size},enumerable:!0,configurable:!0}),Vr.prototype.forEach=function(n){this.pi.pt(function(t,e){return n(t),!1})},Vr.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.mi.lt(t.key,t),e.pi.lt(t,null))},Vr.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.mi.remove(t),this.pi.remove(e)):this},Vr.prototype.isEqual=function(t){if(!(t instanceof Vr))return!1;if(this.size!==t.size)return!1;for(var e=this.pi.bt(),n=t.pi.bt();e.St();){var r=e.Dt().key,i=n.Dt().key;if(!r.isEqual(i))return!1}return!0},Vr.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},Vr.prototype.copy=function(t,e){var n=new Vr;return n.G=this.G,n.mi=t,n.pi=e,n},Vr),Or=(qr.prototype.track=function(t){var e=t.doc.key,n=this.bi.get(e);n?0!==t.type&&3===n.type?this.bi=this.bi.lt(e,t):3===t.type&&1!==n.type?this.bi=this.bi.lt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.bi=this.bi.lt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.bi=this.bi.lt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.bi=this.bi.remove(e):1===t.type&&2===n.type?this.bi=this.bi.lt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.bi=this.bi.lt(e,{type:2,doc:t.doc}):b("unsupported combination of changes: "+JSON.stringify(t)+" after "+JSON.stringify(n)):this.bi=this.bi.lt(e,t)},qr.prototype.yi=function(){var n=[];return this.bi.pt(function(t,e){n.push(e)}),n},qr),Dr=(Ur.Di=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new Ur(t,e,Nr.gi(e),i,n,r,!0,!1)},Object.defineProperty(Ur.prototype,"hasPendingWrites",{get:function(){return!this.Ii.J()},enumerable:!0,configurable:!0}),Ur.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.Ti===t.Ti&&this.Ii.isEqual(t.Ii)&&this.query.isEqual(t.query)&&this.docs.isEqual(t.docs)&&this._i.isEqual(t._i)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},Ur),kr=(jr.Pi=function(t,e){var n,r=((n={})[t]=xr.ki(t,e),n);return new jr(pt.MIN,r,Ir(),vr(),Er())},jr),xr=(Fr.ki=function(t,e){return new Fr(Bn.ai,e,Er(),Er(),Er())},Fr),Rr=(Object.defineProperty(Mr.prototype,"Ni",{get:function(){return this.Mi},enumerable:!0,configurable:!0}),Object.defineProperty(Mr.prototype,"resumeToken",{get:function(){return this.Bi},enumerable:!0,configurable:!0}),Object.defineProperty(Mr.prototype,"Gi",{get:function(){return 0!==this.Li},enumerable:!0,configurable:!0}),Object.defineProperty(Mr.prototype,"Wi",{get:function(){return this.Qi},enumerable:!0,configurable:!0}),Mr.prototype.zi=function(t){0<t.bn()&&(this.Qi=!0,this.Bi=t)},Mr.prototype.Ki=function(){var n=Er(),r=Er(),i=Er();return this.qi.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:b("Encountered invalid change type: "+e)}}),new xr(this.Bi,this.Mi,n,r,i)},Mr.prototype.Hi=function(){this.Qi=!1,this.qi=Wr()},Mr.prototype.Ji=function(t,e){this.Qi=!0,this.qi=this.qi.lt(t,e)},Mr.prototype.Yi=function(t){this.Qi=!0,this.qi=this.qi.remove(t)},Mr.prototype.Xi=function(){this.Li+=1},Mr.prototype.$i=function(){--this.Li},Mr.prototype.Zi=function(){this.Qi=!0,this.Mi=!0},Mr),Pr=(Lr.prototype.ue=function(t){for(var e=0,n=t.Ui;e<n.length;e++){var r=n[e];t.xi instanceof nn?this.se(r,t.xi):t.xi instanceof rn&&this.oe(r,t.key,t.xi)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.oe(r,t.key,t.xi)},Lr.prototype.he=function(n){var r=this;this.ce(n,function(t){var e=r.ae(t);switch(n.state){case 0:r.fe(t)&&e.zi(n.resumeToken);break;case 1:e.$i(),e.Gi||e.Hi(),e.zi(n.resumeToken);break;case 2:e.$i(),e.Gi||r.removeTarget(t),y(!n.cause,"WatchChangeAggregator does not handle errored targets");break;case 3:r.fe(t)&&(e.Zi(),e.zi(n.resumeToken));break;case 4:r.fe(t)&&(r.le(t),e.zi(n.resumeToken));break;default:b("Unknown target watch change state: "+n.state)}})},Lr.prototype.ce=function(t,e){0<t.targetIds.length?t.targetIds.forEach(e):H(this.ne,e)},Lr.prototype.de=function(t){var e=t.targetId,n=t.ji.count,r=this.ve(e);if(r){var i=r.target;if(i.Nn())if(0===n){var o=new mt(i.path);this.oe(e,o,new rn(o,pt.q()))}else y(1===n,"Single document existence filter with count: "+n);else this.we(e)!==n&&(this.le(e),this.re=this.re.add(e))}},Lr.prototype.me=function(i){var o=this,s={};H(this.ne,function(t,e){var n=o.ve(t);if(n){if(e.Ni&&n.target.Nn()){var r=new mt(n.target.path);null!==o.ie.get(r)||o.pe(t,r)||o.oe(t,r,new rn(r,i))}e.Wi&&(s[t]=e.Ki(),e.Hi())}});var r=Er();this.ee.forEach(function(t,e){var n=!0;e.qt(function(t){var e=o.ve(t);return!e||2===e.fi||(n=!1)}),n&&(r=r.add(t))});var t=new kr(i,s,this.re,this.ie,r);return this.ie=vr(),this.ee=Hr(),this.re=new Pt(m),t},Lr.prototype.se=function(t,e){if(this.fe(t)){var n=this.pe(t,e.key)?2:0;this.ae(t).Ji(e.key,n),this.ie=this.ie.lt(e.key,e),this.ee=this.ee.lt(e.key,this.ge(e.key).add(t))}},Lr.prototype.oe=function(t,e,n){if(this.fe(t)){var r=this.ae(t);this.pe(t,e)?r.Ji(e,1):r.Yi(e),this.ee=this.ee.lt(e,this.ge(e).delete(t)),n&&(this.ie=this.ie.lt(e,n))}},Lr.prototype.removeTarget=function(t){delete this.ne[t]},Lr.prototype.we=function(t){var e=this.ae(t).Ki();return this.te.be(t).size+e.Oi.size-e.Vi.size},Lr.prototype.Xi=function(t){this.ae(t).Xi()},Lr.prototype.ae=function(t){return this.ne[t]||(this.ne[t]=new Rr),this.ne[t]},Lr.prototype.ge=function(t){var e=this.ee.get(t);return e||(e=new Pt(m),this.ee=this.ee.lt(t,e)),e},Lr.prototype.fe=function(t){var e=null!==this.ve(t);return e||d("WatchChangeAggregator","Detected inactive target",t),e},Lr.prototype.ve=function(t){var e=this.ne[t];return e&&e.Gi?null:this.te.ye(t)},Lr.prototype.le=function(e){var n=this;y(!this.ne[e].Gi,"Should only reset active targets"),this.ne[e]=new Rr,this.te.be(e).forEach(function(t){n.oe(e,t,null)})},Lr.prototype.pe=function(t,e){return this.te.be(t).has(e)},Lr);function Lr(t){this.te=t,this.ne={},this.ie=vr(),this.ee=Hr(),this.re=new Pt(m)}function Mr(){this.Li=0,this.qi=Wr(),this.Bi=Bn.ai,this.Mi=!1,this.Qi=!0}function Fr(t,e,n,r,i){this.resumeToken=t,this.Ni=e,this.Oi=n,this.Fi=r,this.Vi=i}function jr(t,e,n,r,i){this.li=t,this.Si=e,this.Ri=n,this.Ci=r,this.Ai=i}function Ur(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this._i=n,this.docChanges=r,this.Ii=i,this.fromCache=o,this.Ti=s,this.Ei=a}function qr(){this.bi=new _t(mt.G)}function Vr(n){this.G=n?function(t,e){return n(t,e)||mt.G(t.key,e.key)}:function(t,e){return mt.G(t.key,e.key)},this.mi=mr(),this.pi=new _t(this.G)}function Hr(){return new _t(mt.G)}function Wr(){return new _t(mt.G)}var Br,Gr,zr=((Br={})[Un.ASCENDING.name]="ASCENDING",Br[Un.DESCENDING.name]="DESCENDING",Br),Kr=((Gr={})[xn.LESS_THAN.name]="LESS_THAN",Gr[xn.LESS_THAN_OR_EQUAL.name]="LESS_THAN_OR_EQUAL",Gr[xn.GREATER_THAN.name]="GREATER_THAN",Gr[xn.GREATER_THAN_OR_EQUAL.name]="GREATER_THAN_OR_EQUAL",Gr[xn.EQUAL.name]="EQUAL",Gr[xn.ARRAY_CONTAINS.name]="ARRAY_CONTAINS",Gr[xn.IN.name]="IN",Gr[xn.ARRAY_CONTAINS_ANY.name]="ARRAY_CONTAINS_ANY",Gr),Qr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Yr(t,e){y(!wn(t),e+" is missing")}function Xr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):b("can't parse "+t)}var Jr=(ti.prototype._e=function(t){var e=void 0===t.code?A.UNKNOWN:pr(t.code);return new N(e,t.message||"")},ti.prototype.Ie=function(t){return this.options.Te||wn(t)?t:{value:t}},ti.prototype.Ee=function(t){var e;return wn(e="object"==typeof t?t.value:t)?null:e},ti.prototype.M=function(t){return this.options.Te?new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+t.nanoseconds).slice(-9)+"Z":{seconds:""+t.seconds,nanos:t.nanoseconds}},ti.prototype.L=function(t){if("string"==typeof t)return this.De(t);y(!!t,"Cannot deserialize null or undefined timestamp.");var e=Xr(t.seconds||"0"),n=t.nanos||0;return new ft(e,n)},ti.prototype.De=function(t){var e=0,n=Qr.exec(t);if(y(!!n,"invalid timestamp: "+t),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t),o=Math.floor(i.getTime()/1e3);return new ft(o,e)},ti.prototype.Se=function(t){return this.options.Te?t.toBase64():t.toUint8Array()},ti.prototype.Re=function(t){return this.options.Te?(y(void 0===t||"string"==typeof t,"value must be undefined or a string when using proto3 Json"),Bn.fromBase64String(t||"")):(y(void 0===t||t instanceof Uint8Array,"value must be undefined or Uint8Array"),Bn.fromUint8Array(t||new Uint8Array))},ti.prototype.Ce=function(t){return"string"==typeof t?(y(this.options.Te,"Expected bytes to be passed in as Uint8Array, but got a string instead."),oi.fromBase64String(t)):(y(!this.options.Te,"Expected bytes to be passed in as Uint8Array, but got a string instead."),oi.fromUint8Array(t))},ti.prototype.toVersion=function(t){return this.M(t.M())},ti.prototype.fromVersion=function(t){return y(!!t,"Trying to deserialize version that isn't set"),pt.L(this.L(t))},ti.prototype.Ae=function(t,e){return this.Pe(t).child("documents").child(e).nt()},ti.prototype.ke=function(t){var e=vt.it(t);return y(this.Ne(e),"Tried to deserialize invalid key "+e.toString()),e},ti.prototype.Oe=function(t){return this.Ae(this.s,t.path)},ti.prototype.Fe=function(t){var e=this.ke(t);return y(e.get(1)===this.s.projectId,"Tried to deserialize key from different project: "+e.get(1)+" vs "+this.s.projectId),y(!e.get(3)&&!this.s.database||e.get(3)===this.s.database,"Tried to deserialize key from different database: "+e.get(3)+" vs "+this.s.database),new mt(this.Ve(e))},ti.prototype.Ue=function(t){return this.Ae(this.s,t)},ti.prototype.xe=function(t){var e=this.ke(t);return 4===e.length?vt.et:this.Ve(e)},Object.defineProperty(ti.prototype,"je",{get:function(){return new vt(["projects",this.s.projectId,"databases",this.s.database]).nt()},enumerable:!0,configurable:!0}),ti.prototype.Pe=function(t){return new vt(["projects",t.projectId,"databases",t.database])},ti.prototype.Ve=function(t){return y(4<t.length&&"documents"===t.get(4),"tried to deserialize invalid key "+t.toString()),t.K(5)},ti.prototype.Ne=function(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)},ti.prototype.Le=function(t){if(t instanceof pe)return{nullValue:"NULL_VALUE"};if(t instanceof de)return{booleanValue:t.value()};if(t instanceof Be)return{integerValue:""+t.value()};if(t instanceof Ge){var e=t.value();if(this.options.Te){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"};if(En(e))return{doubleValue:"-0"}}return{doubleValue:t.value()}}return t instanceof ze?{stringValue:t.value()}:t instanceof $e?{mapValue:this.qe(t)}:t instanceof tn?{arrayValue:this.Be(t)}:t instanceof Ke?{timestampValue:this.M(t.Ht)}:t instanceof Je?{geoPointValue:{latitude:t.value().latitude,longitude:t.value().longitude}}:t instanceof Ye?{bytesValue:this.Se(t.value())}:t instanceof Xe?{referenceValue:this.Ae(t.s,t.key.path)}:b("Unknown FieldValue "+JSON.stringify(t))},ti.prototype.Me=function(t){var e=this;if("nullValue"in t)return pe.yn;if("booleanValue"in t)return de.of(t.booleanValue);if("integerValue"in t)return new Be(Xr(t.integerValue));if("doubleValue"in t){if(this.options.Te){if("NaN"===t.doubleValue)return Ge.Tn;if("Infinity"===t.doubleValue)return Ge.POSITIVE_INFINITY;if("-Infinity"===t.doubleValue)return Ge.NEGATIVE_INFINITY;if("-0"===t.doubleValue)return new Ge(-0)}return new Ge(t.doubleValue)}if("stringValue"in t)return new ze(t.stringValue);if("mapValue"in t)return this.Qe(t.mapValue.fields||{});if("arrayValue"in t){Yr(t.arrayValue,"arrayValue");var n=t.arrayValue.values||[];return new tn(n.map(function(t){return e.Me(t)}))}if("timestampValue"in t)return Yr(t.timestampValue,"timestampValue"),new Ke(this.L(t.timestampValue));if("geoPointValue"in t){Yr(t.geoPointValue,"geoPointValue");var r=t.geoPointValue.latitude||0,i=t.geoPointValue.longitude||0;return new Je(new lt(r,i))}if("bytesValue"in t){Yr(t.bytesValue,"bytesValue");var o=this.Ce(t.bytesValue);return new Ye(o)}if("referenceValue"in t){Yr(t.referenceValue,"referenceValue");var s=this.ke(t.referenceValue),a=new S(s.get(1),s.get(3)),u=new mt(this.Ve(s));return new Xe(a,u)}return b("Unknown Value proto "+JSON.stringify(t))},ti.prototype.Ge=function(t,e){return{name:this.Oe(t),fields:this.We(e)}},ti.prototype.ze=function(t){return y(!t.en,"Can't serialize documents with mutations."),{name:this.Oe(t.key),fields:this.We(t.data()),updateTime:this.M(t.version.M())}},ti.prototype.Ke=function(t,e){var n=this,r=this.Fe(t.name),i=this.fromVersion(t.updateTime);return new nn(r,i,{hasCommittedMutations:!!e},void 0,t,function(t){return n.Me(t)})},ti.prototype.We=function(t){var n=this,r={};return t.forEach(function(t,e){r[t]=n.Le(e)}),r},ti.prototype.Qe=function(t){var n=this,e=t,r=$e.vn();return W(e,function(t,e){r.set(new gt([t]),n.Me(e))}),r.cn()},ti.prototype.qe=function(t){return{fields:this.We(t)}},ti.prototype.Be=function(t){var e=this,n=[];return t.forEach(function(t){n.push(e.Le(t))}),{values:n}},ti.prototype.He=function(t){var e=this;y(!!t.found,"Tried to deserialize a found document from a missing document."),Yr(t.found.name,"doc.found.name"),Yr(t.found.updateTime,"doc.found.updateTime");var n=this.Fe(t.found.name),r=this.fromVersion(t.found.updateTime);return new nn(n,r,{},void 0,t.found,function(t){return e.Me(t)})},ti.prototype.Je=function(t){y(!!t.missing,"Tried to deserialize a missing document from a found document."),y(!!t.readTime,"Tried to deserialize a missing document without a read time.");var e=this.Fe(t.missing),n=this.fromVersion(t.readTime);return new rn(e,n)},ti.prototype.Ye=function(t){return"found"in t?this.He(t):"missing"in t?this.Je(t):b("invalid batch get response: "+JSON.stringify(t))},ti.prototype.Xe=function(t){switch(t){case 1:return"ADD";case 3:return"CURRENT";case 0:return"NO_CHANGE";case 2:return"REMOVE";case 4:return"RESET";default:return b("Unknown WatchTargetChangeState: "+t)}},ti.prototype.$e=function(t){if(t instanceof Cr)return{filter:{count:t.ji.count,targetId:t.targetId}};if(t instanceof Sr){if(t.xi instanceof nn){var e=t.xi;return{documentChange:{document:{name:this.Oe(e.key),fields:this.We(e.data()),updateTime:this.toVersion(e.version)},targetIds:t.Ui,removedTargetIds:t.removedTargetIds}}}if(t.xi instanceof rn)return e=t.xi,{documentDelete:{document:this.Oe(e.key),readTime:this.toVersion(e.version),removedTargetIds:t.removedTargetIds}};if(null===t.xi)return{documentRemove:{document:this.Oe(t.key),removedTargetIds:t.removedTargetIds}}}if(t instanceof Ar){var n=void 0;return t.cause&&(n={code:function(t){if(void 0===t)return sr.OK;switch(t){case A.OK:return sr.OK;case A.CANCELLED:return sr.CANCELLED;case A.UNKNOWN:return sr.UNKNOWN;case A.DEADLINE_EXCEEDED:return sr.DEADLINE_EXCEEDED;case A.RESOURCE_EXHAUSTED:return sr.RESOURCE_EXHAUSTED;case A.INTERNAL:return sr.INTERNAL;case A.UNAVAILABLE:return sr.UNAVAILABLE;case A.UNAUTHENTICATED:return sr.UNAUTHENTICATED;case A.INVALID_ARGUMENT:return sr.INVALID_ARGUMENT;case A.NOT_FOUND:return sr.NOT_FOUND;case A.ALREADY_EXISTS:return sr.ALREADY_EXISTS;case A.PERMISSION_DENIED:return sr.PERMISSION_DENIED;case A.FAILED_PRECONDITION:return sr.FAILED_PRECONDITION;case A.ABORTED:return sr.ABORTED;case A.OUT_OF_RANGE:return sr.OUT_OF_RANGE;case A.UNIMPLEMENTED:return sr.UNIMPLEMENTED;case A.DATA_LOSS:return sr.DATA_LOSS;default:return b("Unknown status code: "+t)}}(t.cause.code),message:t.cause.message}),{targetChange:{targetChangeType:this.Xe(t.state),targetIds:t.targetIds,resumeToken:this.Se(t.resumeToken),cause:n}}}return b("Unrecognized watch change: "+JSON.stringify(t))},ti.prototype.Ze=function(t){var e,n=this;if("targetChange"in t){Yr(t.targetChange,"targetChange");var r=this.tr(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],o=this.Re(t.targetChange.resumeToken),s=t.targetChange.cause,a=s&&this._e(s);e=new Ar(r,i,o,a||null)}else if("documentChange"in t){Yr(t.documentChange,"documentChange");var u=t.documentChange;Yr(u.document,"documentChange.name"),Yr(u.document.name,"documentChange.document.name"),Yr(u.document.updateTime,"documentChange.document.updateTime");var c=this.Fe(u.document.name),h=this.fromVersion(u.document.updateTime),l=new nn(c,h,{},void 0,u.document,function(t){return n.Me(t)}),f=u.targetIds||[],p=u.removedTargetIds||[];e=new Sr(f,p,l.key,l)}else if("documentDelete"in t){Yr(t.documentDelete,"documentDelete");var d=t.documentDelete;Yr(d.document,"documentDelete.document"),c=this.Fe(d.document),h=d.readTime?this.fromVersion(d.readTime):pt.q(),l=new rn(c,h),p=d.removedTargetIds||[],e=new Sr([],p,l.key,l)}else if("documentRemove"in t){Yr(t.documentRemove,"documentRemove");var v=t.documentRemove;Yr(v.document,"documentRemove"),c=this.Fe(v.document),p=v.removedTargetIds||[],e=new Sr([],p,c,null)}else{if(!("filter"in t))return b("Unknown change type "+JSON.stringify(t));Yr(t.filter,"filter");var y=t.filter;Yr(y.targetId,"filter.targetId");var g=y.count||0,m=new cr(g),_=y.targetId;e=new Cr(_,m)}return e},ti.prototype.tr=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:b("Got unexpected TargetChange.state: "+t)},ti.prototype.nr=function(t){if(!("targetChange"in t))return pt.MIN;var e=t.targetChange;return e.targetIds&&e.targetIds.length?pt.MIN:e.readTime?this.fromVersion(e.readTime):pt.MIN},ti.prototype.ir=function(t){var e,n=this;if(t instanceof se)e={update:this.Ge(t.key,t.value)};else if(t instanceof ce)e={delete:this.Oe(t.key)};else if(t instanceof ae)e={update:this.Ge(t.key,t.data),updateMask:this.er(t.un)};else if(t instanceof ue)e={transform:{document:this.Oe(t.key),fieldTransforms:t.fieldTransforms.map(function(t){return n.rr(t)})}};else{if(!(t instanceof he))return b("Unknown mutation type "+t.type);e={verify:this.Oe(t.key)}}return t.in.$t||(e.currentDocument=this.ur(t.in)),e},ti.prototype.sr=function(t){var e=this,n=t.currentDocument?this.or(t.currentDocument):ie.NONE;if(t.update){Yr(t.update.name,"name");var r=this.Fe(t.update.name),i=this.Qe(t.update.fields||{});if(t.updateMask){var o=this.hr(t.updateMask);return new ae(r,i,o,n)}return new se(r,i,n)}if(t.delete)return r=this.Fe(t.delete),new ce(r,n);if(t.transform){r=this.Fe(t.transform.document);var s=t.transform.fieldTransforms.map(function(t){return e.cr(t)});return y(!0===n.exists,'Transforms only support precondition "exists == true"'),new ue(r,s)}return t.verify?(r=this.Fe(t.verify),new he(r,n)):b("unknown mutation proto: "+JSON.stringify(t))},ti.prototype.ur=function(t){return y(!t.$t,"Can't serialize an empty precondition"),void 0!==t.updateTime?{updateTime:this.toVersion(t.updateTime)}:void 0!==t.exists?{exists:t.exists}:b("Unknown precondition")},ti.prototype.or=function(t){return void 0!==t.updateTime?ie.updateTime(this.fromVersion(t.updateTime)):void 0!==t.exists?ie.exists(t.exists):ie.NONE},ti.prototype.ar=function(t,e){var n=this,r=t.updateTime?this.fromVersion(t.updateTime):this.fromVersion(e);r.isEqual(pt.MIN)&&(r=this.fromVersion(e));var i=null;return t.transformResults&&0<t.transformResults.length&&(i=t.transformResults.map(function(t){return n.Me(t)})),new Kt(r,i)},ti.prototype.lr=function(t,e){var n=this;return t&&0<t.length?(y(void 0!==e,"Received a write result without a commit time"),t.map(function(t){return n.ar(t,e)})):[]},ti.prototype.rr=function(t){var e=this,n=t.transform;if(n instanceof Mt)return{fieldPath:t.field.nt(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ft)return{fieldPath:t.field.nt(),appendMissingElements:{values:n.elements.map(function(t){return e.Le(t)})}};if(n instanceof jt)return{fieldPath:t.field.nt(),removeAllFromArray:{values:n.elements.map(function(t){return e.Le(t)})}};if(n instanceof Ut)return{fieldPath:t.field.nt(),increment:this.Le(n.Kt)};throw b("Unknown transform: "+t.transform)},ti.prototype.cr=function(t){var e=this,n=null;if("setToServerValue"in t)y("REQUEST_TIME"===t.setToServerValue,"Unknown server value transform proto: "+JSON.stringify(t)),n=Mt.instance;else if("appendMissingElements"in t){var r=t.appendMissingElements.values||[];n=new Ft(r.map(function(t){return e.Me(t)}))}else if("removeAllFromArray"in t)r=t.removeAllFromArray.values||[],n=new jt(r.map(function(t){return e.Me(t)}));else if("increment"in t){var i=this.Me(t.increment);y(i instanceof ve,"NUMERIC_ADD transform requires a NumberValue"),n=new Ut(i)}else b("Unknown transform proto: "+JSON.stringify(t));var o=gt.ot(t.fieldPath);return new re(o,n)},ti.prototype.dr=function(t){return{documents:[this.Ue(t.path)]}},ti.prototype.vr=function(t){var e=t.documents.length;y(1===e,"DocumentsTarget contained other than 1 document: "+e);var n=t.documents[0];return kn.jn(this.xe(n)).Yn()},ti.prototype.wr=function(t){var e={structuredQuery:{}},n=t.path;null!==t.collectionGroup?(y(n.length%2==0,"Collection Group queries should be within a document path or root."),e.parent=this.Ue(n),e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(y(n.length%2!=0,"Document queries with filters are not supported."),e.parent=this.Ue(n.H()),e.structuredQuery.from=[{collectionId:n.X()}]);var r=this.mr(t.filters);r&&(e.structuredQuery.where=r);var i=this.pr(t.orderBy);i&&(e.structuredQuery.orderBy=i);var o=this.Ie(t.limit);return null!==o&&(e.structuredQuery.limit=o),t.startAt&&(e.structuredQuery.startAt=this.gr(t.startAt)),t.endAt&&(e.structuredQuery.endAt=this.gr(t.endAt)),e},ti.prototype.br=function(t){var e=this.xe(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(0<r){y(1===r,"StructuredQuery.from with more than one collection is not supported.");var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=this.yr(n.where));var a=[];n.orderBy&&(a=this._r(n.orderBy));var u=null;n.limit&&(u=this.Ee(n.limit));var c=null;n.startAt&&(c=this.Ir(n.startAt));var h=null;return n.endAt&&(h=this.Ir(n.endAt)),new kn(e,i,a,s,u,"F",c,h).Yn()},ti.prototype.Tr=function(t){var e=this.Er(t.fi);return null==e?null:{"goog-listen-tags":e}},ti.prototype.Er=function(t){switch(t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return b("Unrecognized query purpose: "+t)}},ti.prototype.Yn=function(t){var e,n=t.target;return(e=n.Nn()?{documents:this.dr(n)}:{query:this.wr(n)}).targetId=t.targetId,0<t.resumeToken.bn()&&(e.resumeToken=this.Se(t.resumeToken)),e},ti.prototype.mr=function(t){var e=this;if(0!==t.length){var n=t.map(function(t){return t instanceof Rn?e.Dr(t):b("Unrecognized filter: "+JSON.stringify(t))});return 1===n.length?n[0]:{compositeFilter:{op:"AND",filters:n}}}},ti.prototype.yr=function(t){var e=this;return t?void 0!==t.unaryFilter?[this.Sr(t)]:void 0!==t.fieldFilter?[this.Rr(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e.yr(t)}).reduce(function(t,e){return t.concat(e)}):b("Unknown filter: "+JSON.stringify(t)):[]},ti.prototype.pr=function(t){var e=this;if(0!==t.length)return t.map(function(t){return e.Cr(t)})},ti.prototype._r=function(t){var e=this;return t.map(function(t){return e.Ar(t)})},ti.prototype.gr=function(t){var e=this;return{before:t.before,values:t.position.map(function(t){return e.Le(t)})}},ti.prototype.Ir=function(t){var e=this,n=!!t.before,r=t.values.map(function(t){return e.Me(t)});return new qn(r,n)},ti.prototype.Pr=function(t){return zr[t.name]},ti.prototype.kr=function(t){switch(t){case"ASCENDING":return Un.ASCENDING;case"DESCENDING":return Un.DESCENDING;default:return}},ti.prototype.Nr=function(t){return Kr[t.name]},ti.prototype.Or=function(t){switch(t){case"EQUAL":return xn.EQUAL;case"GREATER_THAN":return xn.GREATER_THAN;case"GREATER_THAN_OR_EQUAL":return xn.GREATER_THAN_OR_EQUAL;case"LESS_THAN":return xn.LESS_THAN;case"LESS_THAN_OR_EQUAL":return xn.LESS_THAN_OR_EQUAL;case"ARRAY_CONTAINS":return xn.ARRAY_CONTAINS;case"IN":return xn.IN;case"ARRAY_CONTAINS_ANY":return xn.ARRAY_CONTAINS_ANY;case"OPERATOR_UNSPECIFIED":return b("Unspecified operator");default:return b("Unknown operator")}},ti.prototype.Fr=function(t){return{fieldPath:t.nt()}},ti.prototype.Vr=function(t){return gt.ot(t.fieldPath)},ti.prototype.Cr=function(t){return{field:this.Fr(t.field),direction:this.Pr(t.dir)}},ti.prototype.Ar=function(t){return new Vn(this.Vr(t.field),this.kr(t.direction))},ti.prototype.Rr=function(t){return Rn.create(this.Vr(t.fieldFilter.field),this.Or(t.fieldFilter.op),this.Me(t.fieldFilter.value))},ti.prototype.Dr=function(t){if(t.op===xn.EQUAL){if(t.value.isEqual(Ge.Tn))return{unaryFilter:{field:this.Fr(t.field),op:"IS_NAN"}};if(t.value.isEqual(pe.yn))return{unaryFilter:{field:this.Fr(t.field),op:"IS_NULL"}}}return{fieldFilter:{field:this.Fr(t.field),op:this.Nr(t.op),value:this.Le(t.value)}}},ti.prototype.Sr=function(t){switch(t.unaryFilter.op){case"IS_NAN":var e=this.Vr(t.unaryFilter.field);return Rn.create(e,xn.EQUAL,Ge.Tn);case"IS_NULL":var n=this.Vr(t.unaryFilter.field);return Rn.create(n,xn.EQUAL,pe.yn);case"OPERATOR_UNSPECIFIED":return b("Unspecified filter");default:return b("Unknown filter")}},ti.prototype.er=function(t){var e=[];return t.fields.forEach(function(t){return e.push(t.nt())}),{fieldPaths:e}},ti.prototype.hr=function(t){var e=(t.fieldPaths||[]).map(function(t){return gt.ot(t)});return ne.Yt(e)},ti),$r=(Zr.Ur=function(t){Zr.platform&&b("Platform already defined"),Zr.platform=t},Zr.t=function(){return Zr.platform||b("Platform not set"),Zr.platform},Zr);function Zr(){}function ti(t,e){this.s=t,this.options=e}function ei(t,e){function n(){var t="This constructor is private.";throw e&&(t+=" ",t+=e),new N(A.INVALID_ARGUMENT,t)}return n.prototype=t.prototype,Object.assign(n,t),n}function ni(){if("undefined"==typeof Uint8Array)throw new N(A.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ri(){if(!$r.t().xr)throw new N(A.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}function ii(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}var oi=(pi.fromBase64String=function(t){z("Blob.fromBase64String",arguments,1),Y("Blob.fromBase64String","string",1,t),ri();try{return new pi($r.t().atob(t))}catch(t){throw new N(A.INVALID_ARGUMENT,"Failed to construct Blob from Base64 string: "+t)}},pi.fromUint8Array=function(t){if(z("Blob.fromUint8Array",arguments,1),ni(),!(t instanceof Uint8Array))throw ot("Blob.fromUint8Array","Uint8Array",1,t);return new pi(ir(t))},pi.prototype.toBase64=function(){return z("Blob.toBase64",arguments,0),ri(),$r.t().btoa(this.ci)},pi.prototype.toUint8Array=function(){return z("Blob.toUint8Array",arguments,0),ni(),or(this.ci)},pi.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},pi.prototype.isEqual=function(t){return this.ci===t.ci},pi.prototype.Dn=function(){return 2*this.ci.length},pi.prototype.U=function(t){return m(this.ci,t.ci)},pi),si=ei(oi,"Use Blob.fromUint8Array() or Blob.fromBase64String() instead."),ai=(fi.prototype.Lr=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},fi.prototype.next=function(){var t=++this.previousValue;return this.qr&&this.qr(t),t},fi.Mr=-1,fi),ui=(li.Hr=function(t,e,n,r,i){var o=new li(t,e,Date.now()+n,r,i);return o.start(n),o},li.prototype.start=function(t){var e=this;this.Jr=setTimeout(function(){return e.Yr()},t)},li.prototype.Xr=function(){return this.Yr()},li.prototype.cancel=function(t){null!==this.Jr&&(this.clearTimeout(),this.Kr.reject(new N(A.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},li.prototype.Yr=function(){var e=this;this.Qr.$r(function(){return null!==e.Jr?(e.clearTimeout(),e.op().then(function(t){return e.Kr.resolve(t)})):Promise.resolve()})},li.prototype.clearTimeout=function(){null!==this.Jr&&(this.zr(this),clearTimeout(this.Jr),this.Jr=null)},li),ci=(Object.defineProperty(hi.prototype,"uu",{get:function(){return this.tu},enumerable:!0,configurable:!0}),hi.prototype.$r=function(t){this.enqueue(t)},hi.prototype.su=function(t){this.ou(),this.hu(t)},hi.prototype.cu=function(t){return this.ou(),this.hu(t)},hi.prototype.au=function(e){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.ou(),this.tu?[3,2]:(this.tu=!0,[4,this.cu(e)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},hi.prototype.enqueue=function(t){return this.ou(),this.tu?new Promise(function(t){}):this.hu(t)},hi.prototype.hu=function(t){var n=this,e=this.Zr.then(function(){return n.eu=!0,t().catch(function(t){n.iu=t,n.eu=!1;var e=t.stack||t.message||"";throw u("INTERNAL UNHANDLED ERROR: ",e),e.indexOf("Firestore Test Simulated Error")<0&&setTimeout(function(){throw t},0),t}).then(function(t){return n.eu=!1,t})});return this.Zr=e},hi.prototype.fu=function(t,e,n){var r=this;this.ou(),y(0<=e,"Attempted to schedule an operation with a negative delay of "+e),-1<this.ru.indexOf(t)&&(e=0);var i=ui.Hr(this,t,e,n,function(t){return r.lu(t)});return this.nu.push(i),i},hi.prototype.ou=function(){this.iu&&b("AsyncQueue is already failed: "+(this.iu.stack||this.iu.message))},hi.prototype.du=function(){y(this.eu,"verifyOpInProgress() called when no op in progress on this queue.")},hi.prototype.vu=function(){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return[4,e=this.Zr];case 1:t.sent(),t.label=2;case 2:if(e!==this.Zr)return[3,0];t.label=3;case 3:return[2]}})})},hi.prototype.wu=function(t){for(var e=0,n=this.nu;e<n.length;e++)if(n[e].Gr===t)return!0;return!1},hi.prototype.mu=function(r){var i=this;return this.vu().then(function(){y("all"===r||i.wu(r),"Attempted to drain to missing operation "+r),i.nu.sort(function(t,e){return t.Wr-e.Wr});for(var t=0,e=i.nu;t<e.length;t++){var n=e[t];if(n.Xr(),"all"!==r&&n.Gr===r)break}return i.vu()})},hi.prototype.pu=function(t){this.ru.push(t)},hi.prototype.lu=function(t){var e=this.nu.indexOf(t);y(0<=e,"Delayed operation not found."),this.nu.splice(e,1)},hi);function hi(){this.Zr=Promise.resolve(),this.tu=!1,this.nu=[],this.iu=null,this.eu=!1,this.ru=[]}function li(t,e,n,r,i){this.Qr=t,this.Gr=e,this.Wr=n,this.op=r,this.zr=i,this.Kr=new ii,this.then=this.Kr.promise.then.bind(this.Kr.promise),this.catch=this.Kr.promise.catch.bind(this.Kr.promise),this.Kr.promise.catch(function(t){})}function fi(t,e){var n=this;this.previousValue=t,e&&(e.jr=function(t){return n.Lr(t)},this.qr=function(t){return e.Br(t)})}function pi(t){ri(),this.ci=t}function di(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=yi(e)),e=vi(t.get(n),e);return yi(e)}function vi(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function yi(t){return t+""}function gi(t){var e=t.length;if(y(2<=e,"Invalid path "+t),2===e)return y(""===t.charAt(0)&&""===t.charAt(1),"Non-empty path "+t+" had length 2"),vt.et;for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||n<s)&&b('Invalid encoded resource path: "'+t+'"'),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:b('Invalid encoded resource path: "'+t+'"')}o=s+2}return new vt(r)}var mi=(Hi.prototype.Wt=function(t,e,n){e&&y(e.key.isEqual(t),"applyToRemoteDocument: key "+t+" should match maybeDoc key\n        "+e.key);var r=n.gu;y(r.length===this.mutations.length,"Mismatch between mutations length\n      ("+this.mutations.length+") and mutation results length\n      ("+r.length+").");for(var i=0;i<this.mutations.length;i++){var o=this.mutations[i];if(o.key.isEqual(t)){var s=r[i];e=o.Wt(e,s)}}return e},Hi.prototype.Gt=function(t,e){e&&y(e.key.isEqual(t),"applyToLocalDocument: key "+t+" should match maybeDoc key\n        "+e.key);for(var n=0,r=this.baseMutations;n<r.length;n++)(a=r[n]).key.isEqual(t)&&(e=a.Gt(e,e,this.En));for(var i=e,o=0,s=this.mutations;o<s.length;o++){var a;(a=s[o]).key.isEqual(t)&&(e=a.Gt(e,i,this.En))}return e},Hi.prototype.bu=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.Gt(t.key,n.get(t.key));e&&(i=i.lt(t.key,e))}),i},Hi.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Er())},Hi.prototype.isEqual=function(t){return this.batchId===t.batchId&&_(this.mutations,t.mutations)&&_(this.baseMutations,t.baseMutations)},Hi),_i=(Vi.from=function(t,e,n,r){y(t.mutations.length===n.length,"Mutations sent "+t.mutations.length+" must equal results received "+n.length);for(var i=br(),o=t.mutations,s=0;s<o.length;s++)i=i.lt(o[s].key,n[s].version);return new Vi(t,e,n,r,i)},Vi),bi=(qi.prototype.J=function(){return this.Iu.J()},qi.prototype.Du=function(t,e){var n=new wi(t,e);this.Iu=this.Iu.add(n),this.Tu=this.Tu.add(n)},qi.prototype.Su=function(t,e){var n=this;t.forEach(function(t){return n.Du(t,e)})},qi.prototype.Ru=function(t,e){this.Cu(new wi(t,e))},qi.prototype.Au=function(t,e){var n=this;t.forEach(function(t){return n.Ru(t,e)})},qi.prototype.Pu=function(t){var e=this,n=mt.EMPTY,r=new wi(n,t),i=new wi(n,t+1),o=[];return this.Tu.Lt([r,i],function(t){e.Cu(t),o.push(t.key)}),o},qi.prototype.ku=function(){var e=this;this.Iu.forEach(function(t){return e.Cu(t)})},qi.prototype.Cu=function(t){this.Iu=this.Iu.delete(t),this.Tu=this.Tu.delete(t)},qi.prototype.Nu=function(t){var e=mt.EMPTY,n=new wi(e,t),r=new wi(e,t+1),i=Er();return this.Tu.Lt([n,r],function(t){i=i.add(t.key)}),i},qi.prototype.Ou=function(t){var e=new wi(t,0),n=this.Iu.Bt(e);return null!==n&&t.isEqual(n.key)},qi),wi=(Ui.Sn=function(t,e){return mt.G(t.key,e.key)||m(t.Fu,e.Fu)},Ui.Eu=function(t,e){return m(t.Fu,e.Fu)||mt.G(t.key,e.key)},Ui),Ei=(ji.prototype.get=function(t){var e=this.Vu(t),n=this.Uu[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(s.isEqual(t))return a}},ji.prototype.has=function(t){return void 0!==this.get(t)},ji.prototype.set=function(t,e){var n=this.Vu(t),r=this.Uu[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(r[i][0].isEqual(t))return void(r[i]=[t,e]);r.push([t,e])}else this.Uu[n]=[[t,e]]},ji.prototype.delete=function(t){var e=this.Vu(t),n=this.Uu[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(n[r][0].isEqual(t))return 1===n.length?delete this.Uu[e]:n.splice(r,1),!0;return!1},ji.prototype.forEach=function(a){W(this.Uu,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],s=i[1];a(o,s)}})},ji.prototype.J=function(){return B(this.Uu)},ji),Ti=(Fi.prototype.catch=function(t){return this.next(void 0,t)},Fi.prototype.next=function(r,i){var o=this;return this.qu&&b("Called next() or catch() twice for PersistencePromise"),this.qu=!0,this.Lu?this.error?this.Bu(i,this.error):this.Mu(r,this.result):new Fi(function(e,n){o.xu=function(t){o.Mu(r,t).next(e,n)},o.ju=function(t){o.Bu(i,t).next(e,n)}})},Fi.prototype.Qu=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},Fi.prototype.Gu=function(t){try{var e=t();return e instanceof Fi?e:Fi.resolve(e)}catch(t){return Fi.reject(t)}},Fi.prototype.Mu=function(t,e){return t?this.Gu(function(){return t(e)}):Fi.resolve(e)},Fi.prototype.Bu=function(t,e){return t?this.Gu(function(){return t(e)}):Fi.reject(e)},Fi.resolve=function(n){return new Fi(function(t,e){t(n)})},Fi.reject=function(n){return new Fi(function(t,e){e(n)})},Fi.Wu=function(t){return new Fi(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},Fi.zu=function(t){for(var n=Fi.resolve(!1),e=function(e){n=n.next(function(t){return t?Fi.resolve(t):e()})},r=0,i=t;r<i.length;r++)e(i[r]);return n},Fi.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.Wu(i)},Fi),Ii=(Object.defineProperty(Mi.prototype,"readTime",{get:function(){return y(void 0!==this.Ju,"Read time is not set. All removeEntry() calls must include a readTime if `trackRemovals` is used."),this.Ju},set:function(t){y(void 0===this.Ju||this.Ju.isEqual(t),"All changes in a RemoteDocumentChangeBuffer must have the same read time"),this.Ju=t},enumerable:!0,configurable:!0}),Mi.prototype.Yu=function(t,e){this.Xu(),this.readTime=e,this.Ku.set(t.key,t)},Mi.prototype.$u=function(t,e){this.Xu(),e&&(this.readTime=e),this.Ku.set(t,null)},Mi.prototype.Zu=function(t,e){this.Xu();var n=this.Ku.get(e);return void 0!==n?Ti.resolve(n):this.ts(t,e)},Mi.prototype.getEntries=function(t,e){return this.ns(t,e)},Mi.prototype.apply=function(t){return this.Xu(),this.Hu=!0,this.es(t)},Mi.prototype.Xu=function(){y(!this.Hu,"Changes have already been applied.")},Mi),Si="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ci=(Li.prototype.us=function(t){this.rs.push(t)},Li.prototype.ss=function(){this.rs.forEach(function(t){return t()})},Li),Ai=(Pi.hs=function(o,t,s){return y(Pi.cs(),"IndexedDB not supported in current environment."),d("SimpleDb","Opening database:",o),new Ti(function(n,r){var i=window.indexedDB.open(o,t);i.onsuccess=function(t){var e=t.target.result;n(new Pi(e))},i.onblocked=function(){r(new N(A.FAILED_PRECONDITION,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(t){var e=t.target.error;"VersionError"===e.name?r(new N(A.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(e)},i.onupgradeneeded=function(t){d("SimpleDb",'Database "'+o+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;s.createOrUpgrade(e,i.transaction,t.oldVersion,Lo).next(function(){d("SimpleDb","Database upgrade to version "+Lo+" complete")})}}).Qu()},Pi.delete=function(t){return d("SimpleDb","Removing database:",t),Wi(window.indexedDB.deleteDatabase(t)).Qu()},Pi.cs=function(){if("undefined"==typeof window||null==window.indexedDB)return!1;if(Pi.as())return!0;if(void 0===window.navigator)return!1;var t=l.getUA(),e=Pi.os(t),n=0<e&&e<10,r=Pi.fs(t),i=0<r&&r<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||i)},Pi.as=function(){var t;return void 0!==e&&"YES"===(null===(t=e.env)||void 0===t?void 0:t.ls)},Pi.ds=function(t,e){return t.store(e)},Pi.os=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},Pi.fs=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},Pi.prototype.vs=function(e){this.db.onversionchange=function(t){return e(t)}},Pi.prototype.runTransaction=function(r,c,h){return v.__awaiter(this,void 0,void 0,function(){var o,s,a,e,u,n;return v.__generator(this,function(t){switch(t.label){case 0:o=r.startsWith("readonly"),s=r.endsWith("idempotent"),a=0,e=function(){var e,n,r,i;return v.__generator(this,function(t){switch(t.label){case 0:++a,e=Oi.open(u.db,o?"readonly":"readwrite",c),t.label=1;case 1:return t.trys.push([1,3,,4]),(n=h(e).catch(function(t){return e.abort(t),Ti.reject(t)}).Qu()).catch(function(){}),[4,e.ws];case 2:return t.sent(),[2,{value:n}];case 3:return r=t.sent(),i=s&&"FirebaseError"!==r.name&&a<3,d("SimpleDb","Transaction failed with error: %s. Retrying: %s.",r.message,i),i?[3,4]:[2,{value:Promise.reject(r)}];case 4:return[2]}})},u=this,t.label=1;case 1:return[5,e()];case 2:return"object"==typeof(n=t.sent())?[2,n.value]:[3,1];case 3:return[2]}})})},Pi.prototype.close=function(){this.db.close()},Pi),Ni=(Object.defineProperty(Ri.prototype,"Lu",{get:function(){return this.ps},enumerable:!0,configurable:!0}),Object.defineProperty(Ri.prototype,"bs",{get:function(){return this.gs},enumerable:!0,configurable:!0}),Object.defineProperty(Ri.prototype,"cursor",{set:function(t){this.ms=t},enumerable:!0,configurable:!0}),Ri.prototype.done=function(){this.ps=!0},Ri.prototype.ys=function(t){this.gs=t},Ri.prototype.delete=function(){return Wi(this.ms.delete())},Ri),Oi=(xi.open=function(t,e,n){return new xi(t.transaction(n,e))},Object.defineProperty(xi.prototype,"ws",{get:function(){return this._s.promise},enumerable:!0,configurable:!0}),xi.prototype.abort=function(t){t&&this._s.reject(t),this.aborted||(d("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},xi.prototype.store=function(t){var e=this.transaction.objectStore(t);return y(!!e,"Object store not part of transaction: "+t),new Di(e)},xi),Di=(ki.prototype.put=function(t,e){return Wi(void 0!==e?(d("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(d("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t)))},ki.prototype.add=function(t){return d("SimpleDb","ADD",this.store.name,t,t),Wi(this.store.add(t))},ki.prototype.get=function(e){var n=this;return Wi(this.store.get(e)).next(function(t){return void 0===t&&(t=null),d("SimpleDb","GET",n.store.name,e,t),t})},ki.prototype.delete=function(t){return d("SimpleDb","DELETE",this.store.name,t),Wi(this.store.delete(t))},ki.prototype.count=function(){return d("SimpleDb","COUNT",this.store.name),Wi(this.store.count())},ki.prototype.Is=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Ts(n,function(t,e){r.push(e)}).next(function(){return r})},ki.prototype.Es=function(t,e){d("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ds=!1;var r=this.cursor(n);return this.Ts(r,function(t,e,n){return n.delete()})},ki.prototype.Ss=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Ts(r,e)},ki.prototype.Rs=function(i){var t=this.cursor({});return new Ti(function(n,r){t.onerror=function(t){var e=Gi(t.target.error);r(e)},t.onsuccess=function(t){var e=t.target.result;e?i(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},ki.prototype.Ts=function(t,s){var a=[];return new Ti(function(o,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e=t.target.result;if(e){var n=new Ni(e),r=s(e.primaryKey,e.value,n);if(r instanceof Ti){var i=r.catch(function(t){return n.done(),Ti.reject(t)});a.push(i)}n.Lu?o():null===n.bs?e.continue():e.continue(n.bs)}else o()}}).next(function(){return Ti.Wu(a)})},ki.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:(y(void 0===e,"3rd argument must not be defined if 2nd is a range."),e=t)),{index:n,range:e}},ki.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ds?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},ki);function ki(t){this.store=t}function xi(t){var n=this;this.transaction=t,this.aborted=!1,this._s=new ii,this.transaction.oncomplete=function(){n._s.resolve()},this.transaction.onabort=function(){t.error?n._s.reject(t.error):n._s.resolve()},this.transaction.onerror=function(t){var e=Gi(t.target.error);n._s.reject(e)}}function Ri(t){this.ms=t,this.ps=!1,this.gs=null}function Pi(t){this.db=t,12.2===Pi.os(l.getUA())&&u("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function Li(){this.rs=[]}function Mi(){this.Ku=new Ei(function(t){return t.toString()}),this.Hu=!1}function Fi(t){var e=this;this.xu=null,this.ju=null,this.result=void 0,this.error=void 0,this.Lu=!1,this.qu=!1,t(function(t){e.Lu=!0,e.result=t,e.xu&&e.xu(t)},function(t){e.Lu=!0,e.error=t,e.ju&&e.ju(t)})}function ji(t){this.Vu=t,this.Uu={}}function Ui(t,e){this.key=t,this.Fu=e}function qi(){this.Iu=new Pt(wi.Sn),this.Tu=new Pt(wi.Eu)}function Vi(t,e,n,r,i){this.batch=t,this.yu=e,this.gu=n,this.streamToken=r,this._u=i}function Hi(t,e,n,r){this.batchId=t,this.En=e,this.baseMutations=n,y(0<(this.mutations=r).length,"Cannot create an empty mutation batch")}function Wi(t){return new Ti(function(n,r){t.onsuccess=function(t){var e=t.target.result;n(e)},t.onerror=function(t){var e=Gi(t.target.error);r(e)}})}var Bi=!1;function Gi(t){var e=Ai.os(l.getUA());if(12.2<=e&&e<13){var n="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(n)){var r=new N("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Bi||(Bi=!0,setTimeout(function(){throw r},0)),r}}return t}var zi=(Ki.ks=function(t,e,n,r){return y(""!==t.uid,"UserID must not be an empty string."),new Ki(t.l()?t.uid:"",e,n,r)},Ki.prototype.Ns=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Xi(t).Ss({index:Bo.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},Ki.prototype.Os=function(e,t,n){return this.Fs(e).next(function(t){return t.lastStreamToken=n.toBase64(),$i(e).put(t)})},Ki.prototype.Vs=function(t){return this.Fs(t).next(function(t){return Bn.fromBase64String(t.lastStreamToken)})},Ki.prototype.Us=function(e,n){return this.Fs(e).next(function(t){return t.lastStreamToken=n.toBase64(),$i(e).put(t)})},Ki.prototype.xs=function(c,h,l,f){var p=this,d=Ji(c),v=Xi(c);return v.add({}).next(function(t){y("number"==typeof t,"Auto-generated key is not a number");for(var e=new mi(t,h,l,f),n=p.serializer.js(p.userId,e),r=[],i=new Pt(function(t,e){return m(t.nt(),e.nt())}),o=0,s=f;o<s.length;o++){var a=s[o],u=Ko.key(p.userId,a.key.path,t);i=i.add(a.key.path.H()),r.push(v.put(n)),r.push(d.put(u,Ko.PLACEHOLDER))}return i.forEach(function(t){r.push(p.Cs.Ls(c,t))}),c.us(function(){p.Ps[t]=e.keys()}),Ti.Wu(r).next(function(){return e})})},Ki.prototype.qs=function(t,e){var n=this;return Xi(t).get(e).next(function(t){return t?(y(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),n.serializer.Bs(t)):null})},Ki.prototype.Ms=function(t,n){var r=this;return this.Ps[n]?Ti.resolve(this.Ps[n]):this.qs(t,n).next(function(t){if(t){var e=t.keys();return r.Ps[n]=e}return null})},Ki.prototype.Qs=function(t,e){var r=this,i=e+1,n=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Xi(t).Ss({index:Bo.userMutationsIndex,range:n},function(t,e,n){e.userId===r.userId&&(y(e.batchId>=i,"Should have found mutation after "+i),o=r.serializer.Bs(e)),n.done()}).next(function(){return o})},Ki.prototype.Gs=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Xi(t).Ss({index:Bo.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},Ki.prototype.Ws=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Xi(t).Is(Bo.userMutationsIndex,n).next(function(t){return t.map(function(t){return e.serializer.Bs(t)})})},Ki.prototype.zs=function(a,u){var c=this,t=Ko.prefixForPath(this.userId,u.path),e=IDBKeyRange.lowerBound(t),h=[];return Ji(a).Ss({range:e},function(e,t,n){var r=e[0],i=e[1],o=e[2],s=gi(i);if(r===c.userId&&u.path.isEqual(s))return Xi(a).get(o).next(function(t){if(!t)throw b("Dangling document-mutation reference found: "+e+" which points to "+o);y(t.userId===c.userId,"Unexpected user '"+t.userId+"' for mutation batch "+o),h.push(c.serializer.Bs(t))});n.done()}).next(function(){return h})},Ki.prototype.Ks=function(r,t){var u=this,c=new Pt(m),i=[];return t.forEach(function(a){var t=Ko.prefixForPath(u.userId,a.path),e=IDBKeyRange.lowerBound(t),n=Ji(r).Ss({range:e},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=gi(i);r===u.userId&&a.path.isEqual(s)?c=c.add(o):n.done()});i.push(n)}),Ti.Wu(i).next(function(){return u.Hs(r,c)})},Ki.prototype.Js=function(t,e){var a=this;y(!e.Nn(),"Document queries shouldn't go down this path"),y(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var u=e.path,c=u.length+1,n=Ko.prefixForPath(this.userId,u),r=IDBKeyRange.lowerBound(n),h=new Pt(m);return Ji(t).Ss({range:r},function(t,e,n){var r=t[0],i=t[1],o=t[2],s=gi(i);r===a.userId&&u.$(s)?s.length===c&&(h=h.add(o)):n.done()}).next(function(){return a.Hs(t,h)})},Ki.prototype.Hs=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(Xi(t).get(e).next(function(t){if(null===t)throw b("Dangling document-mutation reference found, which points to "+e);y(t.userId===n.userId,"Unexpected user '"+t.userId+"' for mutation batch "+e),r.push(n.serializer.Bs(t))}))}),Ti.Wu(i).next(function(){return r})},Ki.prototype.Ys=function(e,n){var r=this;return Yi(e.Xs,this.userId,n).next(function(t){return e.us(function(){r.$s(n.batchId)}),Ti.forEach(t,function(t){return r.As.Zs(e,t)})})},Ki.prototype.$s=function(t){delete this.Ps[t]},Ki.prototype.to=function(n){var o=this;return this.Ns(n).next(function(t){if(!t)return Ti.resolve();var e=IDBKeyRange.lowerBound(Ko.prefixForUser(o.userId)),i=[];return Ji(n).Ss({range:e},function(t,e,n){if(t[0]===o.userId){var r=gi(t[1]);i.push(r)}else n.done()}).next(function(){y(0===i.length,"Document leak -- detected dangling mutation references when queue is empty. Dangling keys: "+i.map(function(t){return t.nt()}))})})},Ki.prototype.Ou=function(t,e){return Qi(t,this.userId,e)},Ki.prototype.Fs=function(t){var e=this;return $i(t).get(this.userId).next(function(t){return t||new Wo(e.userId,-1,"")})},Ki);function Ki(t,e,n,r){this.userId=t,this.serializer=e,this.Cs=n,this.As=r,this.Ps={}}function Qi(t,o,e){var n=Ko.prefixForPath(o,e.path),s=n[1],r=IDBKeyRange.lowerBound(n),a=!1;return Ji(t).Ss({range:r,Ds:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(a=!0),n.done()}).next(function(){return a})}function Yi(t,e,n){var r=t.store(Bo.store),i=t.store(Ko.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.Ss({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){y(1===a,"Dangling document-mutation reference found: Missing batch "+n.batchId)}));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],p=Ko.key(e,f.key.path,n.batchId);o.push(i.delete(p)),c.push(f.key)}return Ti.Wu(o).next(function(){return c})}function Xi(t){return Is.ds(t,Bo.store)}function Ji(t){return Is.ds(t,Ko.store)}function $i(t){return Is.ds(t,Wo.store)}var Zi=(so.prototype.next=function(){var t=this.eo;return this.eo+=2,t},so.prototype.after=function(t){return this.io(t+2),this.next()},so.prototype.io=function(t){y((1&t)===this.no,"Cannot supply target ID from different generator ID"),this.eo=t},so.ro=function(){return new so(0,2)},so.uo=function(){return new so(1)},so),to=(oo.prototype.ho=function(e,n){var r=this;return this.oo.zs(e,n).next(function(t){return r.co(e,n,t)})},oo.prototype.co=function(t,r,i){return this.so.Zu(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].Gt(r,t);return t})},oo.prototype.ao=function(t,e,i){var o=yr();return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].Gt(t,e);o=o.lt(t,e)}),o},oo.prototype.fo=function(e,t){var n=this;return this.so.getEntries(e,t).next(function(t){return n.lo(e,t)})},oo.prototype.lo=function(r,i){var o=this;return this.oo.Ks(r,i).next(function(t){var e=o.ao(r,i,t),n=vr();return e.forEach(function(t,e){e=e||new rn(t,pt.q()),n=n.lt(t,e)}),n})},oo.prototype.do=function(t,e,n){return e.Nn()?this.vo(t,e.path):e.ui()?this.wo(t,e,n):this.mo(t,e,n)},oo.prototype.vo=function(t,e){return this.ho(t,new mt(e)).next(function(t){var e=mr();return t instanceof nn&&(e=e.lt(t.key,t)),e})},oo.prototype.wo=function(n,r,i){var o=this;y(r.path.J(),"Currently we only support collection group queries at the root.");var s=r.collectionGroup,a=mr();return this.Cs.po(n,s).next(function(t){return Ti.forEach(t,function(t){var e=r.Hn(t.child(s));return o.mo(n,e,i).next(function(t){t.forEach(function(t,e){a=a.lt(t,e)})})}).next(function(){return a})})},oo.prototype.mo=function(e,n,t){var h,l,r=this;return this.so.do(e,n,t).next(function(t){return h=t,r.oo.Js(e,n)}).next(function(t){return l=t,r.bo(e,l,h).next(function(t){h=t;for(var e=0,n=l;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],a=s.key,u=h.get(a),c=s.Gt(u,u,r.En);h=c instanceof nn?h.lt(a,c):h.remove(a)}})}).next(function(){return h.forEach(function(t,e){n.matches(e)||(h=h.remove(t))}),h})},oo.prototype.bo=function(t,e,n){for(var r=Er(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ae&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.so.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof nn&&(c=c.lt(t,e))}),c})},oo),eo=(io.Io=function(t,e){for(var n=Er(),r=Er(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new io(t,e.fromCache,n,r)},io),no=(ro.prototype.start=function(){return this.jo()},ro.prototype.Lo=function(i){return v.__awaiter(this,void 0,void 0,function(){var e,y,n,r=this;return v.__generator(this,function(t){switch(t.label){case 0:return e=this.oo,y=this.Vo,[4,this.persistence.runTransaction("Handle user change","readonly-idempotent",function(d){var v;return r.oo.Ws(d).next(function(t){return v=t,e=r.persistence.Po(i),y=new to(r.ko,e,r.persistence.Uo()),e.Ws(d)}).next(function(t){for(var e=[],n=[],r=Er(),i=0,o=v;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var a=0,u=s.mutations;a<u.length;a++){var c=u[a];r=r.add(c.key)}}for(var h=0,l=t;h<l.length;h++){s=l[h],n.push(s.batchId);for(var f=0,p=s.mutations;f<p.length;f++)c=p[f],r=r.add(c.key)}return y.fo(d,r).next(function(t){return{qo:t,Bo:e,Mo:n}})})})];case 1:return n=t.sent(),this.oo=e,this.Vo=y,this.To.xo(this.Vo),[2,n]}})})},ro.prototype.Qo=function(a){var u,c=this,h=ft.now(),t=a.reduce(function(t,e){return t.add(e.key)},Er());return this.persistence.runTransaction("Locally write mutations","readwrite-idempotent",function(s){return c.Vo.fo(s,t).next(function(t){u=t;for(var e=[],n=0,r=a;n<r.length;n++){var i=r[n],o=i.rn(u.get(i.key));null!=o&&e.push(new ae(i.key,o,o.un(),ie.exists(!0)))}return c.oo.xs(s,h,e,a)})}).then(function(t){var e=t.bu(u);return{batchId:t.batchId,Ku:e}})},ro.prototype.Go=function(t){var n=this;return this.persistence.runTransaction("Lookup mutation documents","readonly-idempotent",function(e){return n.oo.Ms(e,t).next(function(t){return t?n.Vo.fo(e,t):Ti.resolve(null)})})},ro.prototype.Os=function(r){var i=this;return this.persistence.runTransaction("Acknowledge batch","readwrite-primary-idempotent",function(t){var e=r.batch.keys(),n=i.ko.Wo({zo:!0});return i.oo.Os(t,r.batch,r.streamToken).next(function(){return i.Ko(t,r,n)}).next(function(){return n.apply(t)}).next(function(){return i.oo.to(t)}).next(function(){return i.Vo.fo(t,e)})})},ro.prototype.Ho=function(t){var r=this;return this.persistence.runTransaction("Reject batch","readwrite-primary-idempotent",function(e){var n;return r.oo.qs(e,t).next(function(t){return y(null!==t,"Attempt to reject nonexistent batch!"),n=t.keys(),r.oo.Ys(e,t)}).next(function(){return r.oo.to(e)}).next(function(){return r.Vo.fo(e,n)})})},ro.prototype.Gs=function(){var e=this;return this.persistence.runTransaction("Get highest unacknowledged batch id","readonly-idempotent",function(t){return e.oo.Gs(t)})},ro.prototype.Vs=function(){var e=this;return this.persistence.runTransaction("Get last stream token","readonly-idempotent",function(t){return e.oo.Vs(t)})},ro.prototype.Us=function(e){var n=this;return this.persistence.runTransaction("Set last stream token","readwrite-primary-idempotent",function(t){return n.oo.Us(t,e)})},ro.prototype.Jo=function(){var e=this;return this.persistence.runTransaction("Get last remote snapshot version","readonly-idempotent",function(t){return e.Oo.Jo(t)})},ro.prototype.Yo=function(u){var c=this,h=u.li,l=this.Do;return this.persistence.runTransaction("Apply remote event","readwrite-primary-idempotent",function(o){var i=c.ko.Wo({zo:!0});l=c.Do;var s=[];H(u.Si,function(t,e){var n=l.get(t);if(n){s.push(c.Oo.Xo(o,e.Vi,t).next(function(){return c.Oo.$o(o,e.Oi,t)}));var r=e.resumeToken;if(0<r.bn()){var i=n.vi(r,h).di(o.Zo);l=l.lt(t,i),ro.th(n,i,e)&&s.push(c.Oo.nh(o,i))}}});var a=vr(),n=Er();if(u.Ci.forEach(function(t,e){n=n.add(t)}),s.push(i.getEntries(o,n).next(function(r){u.Ci.forEach(function(t,e){var n=r.get(t);e instanceof rn&&e.version.isEqual(pt.MIN)?(i.$u(t,h),a=a.lt(t,e)):null==n||0<e.version.h(n.version)||0===e.version.h(n.version)&&n.hasPendingWrites?(y(!pt.MIN.isEqual(h),"Cannot add a document when the remote version is zero"),i.Yu(e,h),a=a.lt(t,e)):d("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version),u.Ai.has(t)&&s.push(c.persistence.As.ih(o,t))})})),!h.isEqual(pt.MIN)){var t=c.Oo.Jo(o).next(function(t){return y(0<=h.h(t),"Watch stream reverted to previous snapshot?? "+h+" < "+t),c.Oo.eh(o,o.Zo,h)});s.push(t)}return Ti.Wu(s).next(function(){return i.apply(o)}).next(function(){return c.Vo.lo(o,a)})}).then(function(t){return c.Do=l,t})},ro.th=function(t,e,n){return y(0<e.resumeToken.bn(),"Attempted to persist target data with no resume token"),0===t.resumeToken.bn()||e.li.B()-t.li.B()>=this.rh||0<n.Oi.size+n.Fi.size+n.Vi.size},ro.prototype.uh=function(t){for(var n=this,e=0,r=t;e<r.length;e++){var i=r[e],o=i.targetId;if(this.Eo.Su(i.yo,o),this.Eo.Au(i._o,o),!i.fromCache){var s=this.Do.get(o);y(null!==s,"Can't set limbo-free snapshot version for unknown target: "+o);var a=s.li,u=s.wi(a);this.Do=this.Do.lt(o,u)}}return this.persistence.runTransaction("notifyLocalViewChanges","readwrite-idempotent",function(e){return Ti.forEach(t,function(t){return Ti.forEach(t._o,function(t){return n.persistence.As.Ru(e,t)})})})},ro.prototype.sh=function(e){var n=this;return this.persistence.runTransaction("Get next mutation batch","readonly-idempotent",function(t){return void 0===e&&(e=-1),n.oo.Qs(t,e)})},ro.prototype.oh=function(e){var n=this;return this.persistence.runTransaction("read document","readonly-idempotent",function(t){return n.Vo.ho(t,e)})},ro.prototype.hh=function(r){var i=this;return this.persistence.runTransaction("Allocate target","readwrite-idempotent",function(e){var n;return i.Oo.ah(e,r).next(function(t){return t?(n=t,Ti.resolve(n)):i.Oo.fh(e).next(function(t){return n=new ur(r,t,0,e.Zo),i.Oo.lh(e,n).next(function(){return n})})})}).then(function(t){return null===i.Do.get(t.targetId)&&(i.Do=i.Do.lt(t.targetId,t),i.So.set(r,t.targetId)),t})},ro.prototype.ah=function(t,e){var n=this.So.get(e);return void 0!==n?Ti.resolve(this.Do.get(n)):this.Oo.ah(t,e)},ro.prototype.dh=function(n,r){var i=this,o=this.Do.get(n);y(null!==o,"Tried to release nonexistent target: "+n);var t=r?"readwrite-idempotent":"readwrite-primary-idempotent";return this.persistence.runTransaction("Release target",t,function(e){var t=i.Eo.Pu(n);return r?Ti.resolve():Ti.forEach(t,function(t){return i.persistence.As.Ru(e,t)}).next(function(){i.persistence.As.removeTarget(e,o)})}).then(function(){i.Do=i.Do.remove(n),i.So.delete(o.target)})},ro.prototype.vh=function(t,n){var r=this,i=pt.MIN,o=Er();return this.persistence.runTransaction("Execute query","readonly-idempotent",function(e){return r.ah(e,t.Yn()).next(function(t){if(t)return i=t.lastLimboFreeSnapshotVersion,r.Oo.wh(e,t.targetId).next(function(t){o=t})}).next(function(){return r.To.do(e,t,n?i:pt.MIN,n?o:Er())}).next(function(t){return{documents:t,mh:o}})})},ro.prototype.ph=function(e){var n=this;return this.persistence.runTransaction("Remote document keys","readonly-idempotent",function(t){return n.Oo.wh(t,e)})},ro.prototype.gh=function(){return this.persistence.gh()},ro.prototype.bh=function(t){this.oo.$s(t)},ro.prototype.yh=function(t){this.persistence.yh(t)},ro.prototype.Ko=function(t,i,o){var e=this,s=i.batch,n=s.keys(),a=Ti.resolve();return n.forEach(function(r){a=a.next(function(){return o.Zu(t,r)}).next(function(t){var e=t,n=i._u.get(r);y(null!==n,"ackVersions should contain every doc in the write."),(!e||e.version.h(n)<0)&&((e=s.Wt(r,e,i))?o.Yu(e,i.yu):y(!t,"Mutation batch "+s+" applied to document "+t+" resulted in null"))})}),a.next(function(){return e.oo.Ys(t,s)})},ro.prototype._h=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary-idempotent",function(t){return e.Ih(t,n.Do)})},ro.prototype.Th=function(e){var n=this,t=this.Do.get(e);return t?Promise.resolve(t.target):this.persistence.runTransaction("Get target data","readonly-idempotent",function(t){return n.Oo.ye(t,e).next(function(t){return t?t.target:null})})},ro.prototype.Eh=function(){var r=this;return this.persistence.runTransaction("Get new document changes","readonly-idempotent",function(t){return r.ko.Eh(t,r.Ro)}).then(function(t){var e=t.Dh,n=t.readTime;return r.Ro=n,e})},ro.prototype.jo=function(){return v.__awaiter(this,void 0,void 0,function(){var e,n=this;return v.__generator(this,function(t){switch(t.label){case 0:return[4,(e=this).persistence.runTransaction("Synchronize last document change read time","readonly-idempotent",function(t){return n.ko.Sh(t)})];case 1:return e.Ro=t.sent(),[2]}})})},ro.rh=3e8,ro);function ro(t,e,n){this.persistence=t,this.To=e,this.Eo=new bi,this.Do=new _t(m),this.So=new Ei(function(t){return t.canonicalId()}),this.Ro=pt.MIN,y(t.Co,"LocalStore was passed an unstarted persistence implementation"),this.persistence.As.Ao(this.Eo),this.oo=t.Po(n),this.ko=t.No(),this.Oo=t.Fo(),this.Vo=new to(this.ko,this.oo,this.persistence.Uo()),this.To.xo(this.Vo)}function io(t,e,n,r){this.targetId=t,this.fromCache=e,this.yo=n,this._o=r}function oo(t,e,n){this.so=t,this.oo=e,this.Cs=n}function so(t,e){y((1&(this.no=t))===t,"Generator ID "+t+" contains more than 1 reserved bits"),this.io(void 0!==e?e:this.no)}function ao(e){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){if(e.code!==A.FAILED_PRECONDITION||e.message!==Si)throw e;return d("LocalStore","Unexpectedly lost primary lease"),[2]})})}function uo(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=m(n,i);return 0===s?m(r,o):s}var co=(bo.prototype.Ah=function(){return++this.Ch},bo.prototype.Ph=function(t){var e=[t,this.Ah()];if(this.buffer.size<this.Rh)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();uo(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(bo.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!0,configurable:!0}),bo),ho={kh:!1,Nh:0,Oh:0,Fh:0},lo=(_o.jh=function(t){return new _o(t,_o.Lh,_o.qh)},_o.Bh=-1,_o.Mh=1048576,_o.Gh=new _o(_o.Qh=41943040,_o.Lh=10,_o.qh=1e3),_o.DISABLED=new _o(_o.Bh,0,0),_o),fo=(mo.prototype.start=function(){y(null===this.Hh,"Cannot start an already started LruScheduler"),this.Wh.params.Vh!==lo.Bh&&this.Jh()},mo.prototype.stop=function(){this.Hh&&(this.Hh.cancel(),this.Hh=null)},Object.defineProperty(mo.prototype,"Co",{get:function(){return null!==this.Hh},enumerable:!0,configurable:!0}),mo.prototype.Jh=function(){var t=this;y(null===this.Hh,"Cannot schedule GC while a task is pending");var e=this.Kh?3e5:6e4;d("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.Hh=this.Qr.fu("lru_garbage_collection",e,function(){return t.Hh=null,t.Kh=!0,t.zh._h(t.Wh).then(function(){return t.Jh()}).catch(ao)})},mo),po=(go.prototype.Xh=function(t,e){return this.Yh.$h(t).next(function(t){return Math.floor(e/100*t)})},go.prototype.Zh=function(t,e){var n=this;if(0===e)return Ti.resolve(ai.Mr);var r=new co(e);return this.Yh.ce(t,function(t){return r.Ph(t.sequenceNumber)}).next(function(){return n.Yh.tc(t,function(t){return r.Ph(t)})}).next(function(){return r.maxValue})},go.prototype.nc=function(t,e,n){return this.Yh.nc(t,e,n)},go.prototype.ic=function(t,e){return this.Yh.ic(t,e)},go.prototype.Ih=function(e,n){var r=this;return this.params.Vh===lo.Bh?(d("LruGarbageCollector","Garbage collection skipped; disabled"),Ti.resolve(ho)):this.ec(e).next(function(t){return t<r.params.Vh?(d("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.Vh),ho):r.rc(e,n)})},go.prototype.ec=function(t){return this.Yh.ec(t)},go.prototype.rc=function(e,n){var r,i,o,s,a,u,c,h=this,l=Date.now();return this.Xh(e,this.params.Uh).next(function(t){return i=t>h.params.xh?(d("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.xh+" from "+t),h.params.xh):t,s=Date.now(),h.Zh(e,i)}).next(function(t){return r=t,a=Date.now(),h.nc(e,r,n)}).next(function(t){return o=t,u=Date.now(),h.ic(e,r)}).next(function(t){return c=Date.now(),p()<=0&&d("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-l)+"ms\n\tDetermined least recently used "+i+" in "+(a-s)+"ms\n\tRemoved "+o+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),Ti.resolve({kh:!0,Nh:i,Oh:o,Fh:t})})},go),vo=(yo.prototype.fh=function(e){var n=this;return this.sc(e).next(function(t){return t.highestTargetId=n.uc.after(t.highestTargetId),n.oc(e,t).next(function(){return t.highestTargetId})})},yo.prototype.Jo=function(t){return this.sc(t).next(function(t){return pt.L(new ft(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},yo.prototype.hc=function(t){return To(t.Xs)},yo.prototype.eh=function(e,n,r){var i=this;return this.sc(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.M()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.oc(e,t)})},yo.prototype.lh=function(e,n){var r=this;return this.cc(e,n).next(function(){return r.sc(e).next(function(t){return t.targetCount+=1,r.ac(n,t),r.oc(e,t)})})},yo.prototype.nh=function(t,e){return this.cc(t,e)},yo.prototype.fc=function(e,t){var n=this;return this.lc(e,t.targetId).next(function(){return wo(e).delete(t.targetId)}).next(function(){return n.sc(e)}).next(function(t){return y(0<t.targetCount,"Removing from an empty target cache"),--t.targetCount,n.oc(e,t)})},yo.prototype.nc=function(r,i,o){var s=this,a=0,u=[];return wo(r).Ss(function(t,e){var n=s.serializer.dc(e);n.sequenceNumber<=i&&null===o.get(n.targetId)&&(a++,u.push(s.fc(r,n)))}).next(function(){return Ti.Wu(u)}).next(function(){return a})},yo.prototype.ce=function(t,r){var i=this;return wo(t).Ss(function(t,e){var n=i.serializer.dc(e);r(n)})},yo.prototype.sc=function(t){return Eo(t.Xs)},yo.prototype.oc=function(t,e){return Is.ds(t,rs.store).put(rs.key,e)},yo.prototype.cc=function(t,e){return wo(t).put(this.serializer.vc(e))},yo.prototype.ac=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},yo.prototype.wc=function(t){return this.sc(t).next(function(t){return t.targetCount})},yo.prototype.ah=function(t,i){var o=this,e=i.canonicalId(),n=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),s=null;return wo(t).Ss({range:n,index:es.queryTargetsIndexName},function(t,e,n){var r=o.serializer.dc(e);i.isEqual(r.target)&&(s=r,n.done())}).next(function(){return s})},yo.prototype.$o=function(n,t,r){var i=this,o=[],s=Io(n);return t.forEach(function(t){var e=di(t.path);o.push(s.put(new ns(r,e))),o.push(i.As.Du(n,t))}),Ti.Wu(o)},yo.prototype.Xo=function(n,t,r){var i=this,o=Io(n);return Ti.forEach(t,function(t){var e=di(t.path);return Ti.Wu([o.delete([r,e]),i.As.Ru(n,t)])})},yo.prototype.lc=function(t,e){var n=Io(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},yo.prototype.wh=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Io(t),o=Er();return r.Ss({range:n,Ds:!0},function(t,e,n){var r=gi(t[1]),i=new mt(r);o=o.add(i)}).next(function(){return o})},yo.prototype.Ou=function(t,e){var n=di(e.path),r=IDBKeyRange.bound([n],[w(n)],!1,!0),i=0;return Io(t).Ss({index:ns.documentTargetsIndex,Ds:!0,range:r},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},yo.prototype.ye=function(t,e){var n=this;return wo(t).get(e).next(function(t){return t?n.serializer.dc(t):null})},yo);function yo(t,e){this.As=t,this.serializer=e,this.uc=Zi.ro()}function go(t,e){this.Yh=t,this.params=e}function mo(t,e,n){this.Wh=t,this.Qr=e,this.zh=n,this.Kh=!1,this.Hh=null}function _o(t,e,n){this.Vh=t,this.Uh=e,this.xh=n}function bo(t){this.Rh=t,this.buffer=new Pt(uo),this.Ch=0}function wo(t){return Is.ds(t,es.store)}function Eo(t){return Ai.ds(t,rs.store).get(rs.key).next(function(t){return y(null!==t,"Missing metadata row."),t})}function To(t){return Eo(t).next(function(t){return t.highestListenSequenceNumber})}function Io(t){return Is.ds(t,ns.store)}var So,Co=(Ao.prototype.Yu=function(t,e,n){return Do(t).put(ko(e),n)},Ao.prototype.$u=function(t,e){var n=Do(t),r=ko(e);return n.delete(r)},Ao.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.mc(e,t)})},Ao.prototype.Zu=function(t,e){var n=this;return Do(t).get(ko(e)).next(function(t){return n.pc(t)})},Ao.prototype.gc=function(t,e){var n=this;return Do(t).get(ko(e)).next(function(t){var e=n.pc(t);return e?{bc:e,size:xo(t)}:null})},Ao.prototype.getEntries=function(t,e){var r=this,i=yr();return this.yc(t,e,function(t,e){var n=r.pc(e);i=i.lt(t,n)}).next(function(){return i})},Ao.prototype._c=function(t,e){var r=this,i=yr(),o=new _t(mt.G);return this.yc(t,e,function(t,e){var n=r.pc(e);o=n?(i=i.lt(t,n),o.lt(t,xo(e))):(i=i.lt(t,null),o.lt(t,0))}).next(function(){return{Ic:i,Tc:o}})},Ao.prototype.yc=function(t,e,i){if(e.J())return Ti.resolve();var n=IDBKeyRange.bound(e.first().path.tt(),e.last().path.tt()),o=e.bt(),s=o.Dt();return Do(t).Ss({range:n},function(t,e,n){for(var r=mt.at(t);s&&mt.G(s,r)<0;)i(s,null),s=o.Dt();s&&s.isEqual(r)&&(i(s,e),s=o.St()?o.Dt():null),s?n.ys(s.path.tt()):n.done()}).next(function(){for(;s;)i(s,null),s=o.St()?o.Dt():null})},Ao.prototype.do=function(t,i,e){var o=this;y(!i.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var s=mr(),a=i.path.length+1,n={};if(e.isEqual(pt.MIN)){var r=i.path.tt();n.range=IDBKeyRange.lowerBound(r)}else{var u=i.path.tt(),c=this.serializer.Ec(e);n.range=IDBKeyRange.lowerBound([u,c],!0),n.index=Jo.collectionReadTimeIndex}return Do(t).Ss(n,function(t,e,n){if(t.length===a){var r=o.serializer.Dc(e);i.path.$(r.key.path)?r instanceof nn&&i.matches(r)&&(s=s.lt(r.key,r)):n.done()}}).next(function(){return s})},Ao.prototype.Eh=function(t,e){var r=this,i=vr(),o=this.serializer.Ec(e),n=Do(t),s=IDBKeyRange.lowerBound(o,!0);return n.Ss({index:Jo.readTimeIndex,range:s},function(t,e){var n=r.serializer.Dc(e);i=i.lt(n.key,n),o=e.readTime}).next(function(){return{Dh:i,readTime:r.serializer.Sc(o)}})},Ao.prototype.Sh=function(t){var r=this,e=Do(t),i=pt.MIN;return e.Ss({index:Jo.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(i=r.serializer.Sc(e.readTime)),n.done()}).next(function(){return i})},Ao.prototype.Wo=function(t){return new Ao.Rc(this,!!t&&t.zo)},Ao.prototype.Cc=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},Ao.prototype.getMetadata=function(t){return Oo(t).get($o.key).next(function(t){return y(!!t,"Missing document cache metadata"),t})},Ao.prototype.mc=function(t,e){return Oo(t).put($o.key,e)},Ao.prototype.pc=function(t){if(t){var e=this.serializer.Dc(t);return e instanceof rn&&e.version.isEqual(pt.q())?null:e}return null},Ao.Rc=(So=Ii,v.__extends(No,So),No.prototype.es=function(s){var a=this,u=[],c=0,h=new Pt(function(t,e){return m(t.nt(),e.nt())});return this.Ku.forEach(function(t,e){var n=a.Pc.get(t);if(y(void 0!==n,"Cannot modify a document that wasn't read (for "+t+")"),e){y(!a.readTime.isEqual(pt.MIN),"Cannot add a document with a read time of zero");var r=a.Ac.serializer.kc(e,a.readTime);h=h.add(t.path.H());var i=xo(r);c+=i-n,u.push(a.Ac.Yu(s,t,r))}else if(c-=n,a.zo){var o=a.Ac.serializer.kc(new rn(t,pt.q()),a.readTime);u.push(a.Ac.Yu(s,t,o))}else u.push(a.Ac.$u(s,t))}),h.forEach(function(t){u.push(a.Ac.Cs.Ls(s,t))}),u.push(this.Ac.updateMetadata(s,c)),Ti.Wu(u)},No.prototype.ts=function(t,e){var n=this;return this.Ac.gc(t,e).next(function(t){return null===t?(n.Pc.set(e,0),null):(n.Pc.set(e,t.size),t.bc)})},No.prototype.ns=function(t,e){var n=this;return this.Ac._c(t,e).next(function(t){var e=t.Ic;return t.Tc.forEach(function(t,e){n.Pc.set(t,e)}),e})},No),Ao);function Ao(t,e){this.serializer=t,this.Cs=e}function No(t,e){var n=So.call(this)||this;return n.Ac=t,n.zo=e,n.Pc=new Ei(function(t){return t.toString()}),n}function Oo(t){return Is.ds(t,$o.store)}function Do(t){return Is.ds(t,Jo.store)}function ko(t){return t.path.tt()}function xo(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw b("Unknown remote document type");e=t.noDocument}return JSON.stringify(e).length}var Ro=(Uo.prototype.Ls=function(t,e){return this.Nc.add(e),Ti.resolve()},Uo.prototype.po=function(t,e){return Ti.resolve(this.Nc.getEntries(e))},Uo),Po=(jo.prototype.add=function(t){y(t.length%2==1,"Expected a collection path.");var e=t.X(),n=t.H(),r=this.index[e]||new Pt(vt.G),i=!r.has(n);return this.index[e]=r.add(n),i},jo.prototype.has=function(t){var e=t.X(),n=t.H(),r=this.index[e];return r&&r.has(n)},jo.prototype.getEntries=function(t){return(this.index[t]||new Pt(vt.G)).tt()},jo),Lo=9,Mo=(Fo.prototype.createOrUpgrade=function(n,r,t,e){var i=this;y(t<e&&0<=t&&e<=Lo,"Unexpected schema upgrade from v"+t+" to v{toVersion}.");var o,s=new Oi(r);t<1&&1<=e&&(n.createObjectStore(Vo.store),(o=n).createObjectStore(Wo.store,{keyPath:Wo.keyPath}),o.createObjectStore(Bo.store,{keyPath:Bo.keyPath,autoIncrement:!0}).createIndex(Bo.userMutationsIndex,Bo.userMutationsKeyPath,{unique:!0}),o.createObjectStore(Ko.store),cs(n),n.createObjectStore(Jo.store));var a,u=Ti.resolve();return t<3&&3<=e&&(0!==t&&((a=n).deleteObjectStore(ns.store),a.deleteObjectStore(es.store),a.deleteObjectStore(rs.store),cs(n)),u=u.next(function(){return t=s.store(rs.store),e=new rs(0,0,pt.MIN.M(),0),t.put(rs.key,e);var t,e})),t<4&&4<=e&&(0!==t&&(u=u.next(function(){return r=n,(i=s).store(Bo.store).Is().next(function(t){r.deleteObjectStore(Bo.store),r.createObjectStore(Bo.store,{keyPath:Bo.keyPath,autoIncrement:!0}).createIndex(Bo.userMutationsIndex,Bo.userMutationsKeyPath,{unique:!0});var e=i.store(Bo.store),n=t.map(function(t){return e.put(t)});return Ti.Wu(n)});var r,i})),u=u.next(function(){n.createObjectStore(hs.store,{keyPath:hs.keyPath})})),t<5&&5<=e&&(u=u.next(function(){return i.removeAcknowledgedMutations(s)})),t<6&&6<=e&&(u=u.next(function(){return n.createObjectStore($o.store),i.addDocumentGlobal(s)})),t<7&&7<=e&&(u=u.next(function(){return i.ensureSequenceNumbers(s)})),t<8&&8<=e&&(u=u.next(function(){return i.createCollectionParentIndex(n,s)})),t<9&&9<=e&&(u=u.next(function(){var t,e;(e=n).objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges"),(t=r.objectStore(Jo.store)).createIndex(Jo.readTimeIndex,Jo.readTimeIndexPath,{unique:!1}),t.createIndex(Jo.collectionReadTimeIndex,Jo.collectionReadTimeIndexPath,{unique:!1})})),u},Fo.prototype.addDocumentGlobal=function(e){var n=0;return e.store(Jo.store).Ss(function(t,e){n+=xo(e)}).next(function(){var t=new $o(n);return e.store($o.store).put($o.key,t)})},Fo.prototype.removeAcknowledgedMutations=function(r){var i=this,t=r.store(Wo.store),e=r.store(Bo.store);return t.Is().next(function(t){return Ti.forEach(t,function(n){var t=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return e.Is(Bo.userMutationsIndex,t).next(function(t){return Ti.forEach(t,function(t){y(t.userId===n.userId,"Cannot process batch "+t.batchId+" from unexpected user");var e=i.serializer.Bs(t);return Yi(r,n.userId,e).next(function(){})})})})})},Fo.prototype.ensureSequenceNumbers=function(t){var s=t.store(ns.store),e=t.store(Jo.store);return To(t).next(function(i){var o=[];return e.Ss(function(t,e){var n=new vt(t),r=[0,di(n)];o.push(s.get(r).next(function(t){return t?Ti.resolve():(e=n,s.put(new ns(0,di(e),i)));var e}))}).next(function(){return Ti.Wu(o)})})},Fo.prototype.createCollectionParentIndex=function(t,e){function i(t){if(o.add(t)){var e=t.X(),n=t.H();return r.put({collectionId:e,parent:di(n)})}}t.createObjectStore(is.store,{keyPath:is.keyPath});var r=e.store(is.store),o=new Po;return e.store(Jo.store).Ss({Ds:!0},function(t,e){var n=new vt(t);return i(n.H())}).next(function(){return e.store(Ko.store).Ss({Ds:!0},function(t,e){t[0];var n=t[1],r=(t[2],gi(n));return i(r.H())})})},Fo);function Fo(t){this.serializer=t}function jo(){this.index={}}function Uo(){this.Nc=new Po}function qo(t,e){this.seconds=t,this.nanoseconds=e}var Vo=(Ho.store="owner",Ho.key="owner",Ho);function Ho(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n}var Wo=(zo.store="mutationQueues",zo.keyPath="userId",zo),Bo=(Go.store="mutations",Go.keyPath="batchId",Go.userMutationsIndex="userMutationsIndex",Go.userMutationsKeyPath=["userId","batchId"],Go);function Go(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i}function zo(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n}var Ko=(Qo.prefixForUser=function(t){return[t]},Qo.prefixForPath=function(t,e){return[t,di(e)]},Qo.key=function(t,e,n){return[t,di(e),n]},Qo.store="documentMutations",Qo.PLACEHOLDER=new Qo,Qo);function Qo(){}function Yo(t,e){this.path=t,this.readTime=e}function Xo(t,e){this.path=t,this.version=e}var Jo=(ts.store="remoteDocuments",ts.readTimeIndex="readTimeIndex",ts.readTimeIndexPath="readTime",ts.collectionReadTimeIndex="collectionReadTimeIndex",ts.collectionReadTimeIndexPath=["parentPath","readTime"],ts),$o=(Zo.store="remoteDocumentGlobal",Zo.key="remoteDocumentGlobalKey",Zo);function Zo(t){this.byteSize=t}function ts(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o}var es=(us.store="targets",us.keyPath="targetId",us.queryTargetsIndexName="queryTargetsIndex",us.queryTargetsKeyPath=["canonicalId","targetId"],us),ns=(as.store="targetDocuments",as.keyPath=["targetId","path"],as.documentTargetsIndex="documentTargetsIndex",as.documentTargetsKeyPath=["path","targetId"],as),rs=(ss.key="targetGlobalKey",ss.store="targetGlobal",ss),is=(os.store="collectionParents",os.keyPath=["collectionId","parent"],os);function os(t,e){this.collectionId=t,this.parent=e}function ss(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r}function as(t,e,n){this.targetId=t,this.path=e,y(0===t==(void 0!==(this.sequenceNumber=n)),"A target-document row must either have targetId == 0 and a defined sequence number, or a non-zero targetId and no sequence number")}function us(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s}function cs(t){t.createObjectStore(ns.store,{keyPath:ns.keyPath}).createIndex(ns.documentTargetsIndex,ns.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(es.store,{keyPath:es.keyPath}).createIndex(es.queryTargetsIndexName,es.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(rs.store)}var hs=(ls.store="clientMetadata",ls.keyPath="clientId",ls);function ls(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r}var fs=[Wo.store,Bo.store,Ko.store,Jo.store,es.store,Vo.store,rs.store,ns.store],ps=v.__spreadArrays(fs,[hs.store]),ds=v.__spreadArrays(ps,[$o.store]),vs=v.__spreadArrays(ds,[is.store]),ys=(gs.prototype.Ls=function(t,e){var n=this;if(y(e.length%2==1,"Expected a collection path."),this.Oc.has(e))return Ti.resolve();var r=e.X(),i=e.H();t.us(function(){n.Oc.add(e)});var o={collectionId:r,parent:di(i)};return ms(t).put(o)},gs.prototype.po=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[w(i),""],!1,!0);return ms(t).Is(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(gi(r.parent))}return o})},gs);function gs(){this.Oc=new Po}function ms(t){return Is.ds(t,is.store)}var _s=(bs.prototype.Dc=function(t){if(t.document)return this.Fc.Ke(t.document,!!t.hasCommittedMutations);if(t.noDocument){var e=mt.at(t.noDocument.path),n=this.Vc(t.noDocument.readTime);return new rn(e,n,{hasCommittedMutations:!!t.hasCommittedMutations})}return t.unknownDocument?(e=mt.at(t.unknownDocument.path),n=this.Vc(t.unknownDocument.version),new on(e,n)):b("Unexpected DbRemoteDocument")},bs.prototype.kc=function(t,e){var n=this.Ec(e),r=t.key.path.H().tt();if(t instanceof nn){var i=t.proto?t.proto:this.Fc.ze(t),o=t.hasCommittedMutations;return new Jo(null,null,i,o,n,r)}if(t instanceof rn){var s=t.key.path.tt(),a=this.Uc(t.version);return o=t.hasCommittedMutations,new Jo(null,new Yo(s,a),null,o,n,r)}if(t instanceof on){s=t.key.path.tt();var u=this.Uc(t.version);return new Jo(new Xo(s,u),null,null,!0,n,r)}return b("Unexpected MaybeDocument")},bs.prototype.Ec=function(t){var e=t.M();return[e.seconds,e.nanoseconds]},bs.prototype.Sc=function(t){var e=new ft(t[0],t[1]);return pt.L(e)},bs.prototype.Uc=function(t){var e=t.M();return new qo(e.seconds,e.nanoseconds)},bs.prototype.Vc=function(t){var e=new ft(t.seconds,t.nanoseconds);return pt.L(e)},bs.prototype.js=function(t,e){var n=this,r=e.baseMutations.map(function(t){return n.Fc.ir(t)}),i=e.mutations.map(function(t){return n.Fc.ir(t)});return new Bo(t,e.batchId,e.En.toMillis(),r,i)},bs.prototype.Bs=function(t){var e=this,n=(t.baseMutations||[]).map(function(t){return e.Fc.sr(t)}),r=t.mutations.map(function(t){return e.Fc.sr(t)}),i=ft.fromMillis(t.localWriteTimeMs);return new mi(t.batchId,i,n,r)},bs.prototype.xc=function(t){var e=[];return t.forEach(function(t){e.push(di(t.path))}),e},bs.prototype.jc=function(t){for(var e=Er(),n=0,r=t;n<r.length;n++){var i=r[n];e=e.add(new mt(gi(i)))}return e},bs.prototype.dc=function(t){var e,n=this.Vc(t.readTime),r=void 0!==t.lastLimboFreeSnapshotVersion?this.Vc(t.lastLimboFreeSnapshotVersion):pt.MIN;return e=void 0!==t.query.documents?this.Fc.vr(t.query):this.Fc.br(t.query),new ur(e,t.targetId,0,t.lastListenSequenceNumber,n,r,Bn.fromBase64String(t.resumeToken))},bs.prototype.vc=function(t){y(0===t.fi,"Only queries with purpose 0 may be stored, got "+t.fi);var e,n=this.Uc(t.li),r=this.Uc(t.lastLimboFreeSnapshotVersion);e=t.target.Nn()?this.Fc.dr(t.target):this.Fc.wr(t.target);var i=t.resumeToken.toBase64();return new es(t.targetId,t.target.canonicalId(),n,i,t.sequenceNumber,r,e)},bs);function bs(t){this.Fc=t}var ws,Es="Another tab has exclusive access to the persistence layer. To allow shared access, make sure to invoke `enablePersistence()` with `synchronizeTabs:true` in all tabs.",Ts=(ws=Ci,v.__extends(Cs,ws),Cs),Is=(Ss.ds=function(t,e){if(t instanceof Ts)return Ai.ds(t.Xs,e);throw b("IndexedDbPersistence must use instances of IndexedDbTransaction")},Ss.Yc=function(n){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:if(!Ss.cs())throw new N(A.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");return[4,(e=new Ss(n.allowTabSynchronization,n.persistenceKey,n.clientId,n.platform,n.Xc,n.Lc,n.serializer,n.qc)).start()];case 1:return t.sent(),[2,e]}})})},Ss.prototype.start=function(){var e=this;return y(!this.Co,"IndexedDbPersistence double-started!"),y(null!==this.window,"Expected 'window' to be defined"),Ai.hs(this.Kc,Lo,new Mo(this.serializer)).then(function(t){return e.$c=t,e.Zc()}).then(function(){return e.ta(),e.na(),e.ia(),e.$c.runTransaction("readonly-idempotent",[rs.store],function(t){return To(t)})}).then(function(t){e.ea=new ai(t,e.qc)}).then(function(){e.Bc=!0}).catch(function(t){return e.$c&&e.$c.close(),Promise.reject(t)})},Ss.prototype.ra=function(n){var t=this;return this.zc=function(e){return v.__awaiter(t,void 0,void 0,function(){return v.__generator(this,function(t){return this.Co?[2,n(e)]:[2]})})},n(this.isPrimary)},Ss.prototype.ua=function(n){var t=this;this.$c.vs(function(e){return v.__awaiter(t,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return null!==e.newVersion?[3,2]:[4,n()];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},Ss.prototype.yh=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Lc.$r(function(){return v.__awaiter(e,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.Co?[4,this.Zc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},Ss.prototype.Zc=function(){var n=this;return this.$c.runTransaction("readwrite-idempotent",vs,function(e){return Ns(e).put(new hs(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.sa(e).next(function(t){t||(n.isPrimary=!1,n.Lc.$r(function(){return n.zc(!1)}))})}).next(function(){return n.oa(e)}).next(function(t){return n.isPrimary&&!t?n.ha(e).next(function(){return!1}):!!t&&n.ca(e).next(function(){return!0})})}).catch(function(t){if(!n.allowTabSynchronization)throw t;return d("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Lc.$r(function(){return n.zc(t)}),n.isPrimary=t})},Ss.prototype.sa=function(t){var e=this;return As(t).get(Vo.key).next(function(t){return Ti.resolve(e.aa(t))})},Ss.prototype.fa=function(t){return Ns(t).delete(this.clientId)},Ss.prototype.la=function(){return v.__awaiter(this,void 0,void 0,function(){var i=this;return v.__generator(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.da(this.Wc,18e5)?[3,2]:(this.Wc=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary-idempotent",function(t){var r=Ss.ds(t,hs.store);return r.Is().next(function(t){var e=i.va(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return Ti.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:t.sent().forEach(function(t){i.window.localStorage.removeItem(i.wa(t.clientId))}),t.label=2;case 2:return[2]}})})},Ss.prototype.ia=function(){var t=this;this.Gc=this.Lc.fu("client_metadata_refresh",4e3,function(){return t.Zc().then(function(){return t.la()}).then(function(){return t.ia()})})},Ss.prototype.aa=function(t){return!!t&&t.ownerId===this.clientId},Ss.prototype.oa=function(e){var i=this;return As(e).get(Vo.key).next(function(t){if(null!==t&&i.da(t.leaseTimestampMs,5e3)&&!i.ma(t.ownerId)){if(i.aa(t)&&i.networkEnabled)return!0;if(!i.aa(t)){if(!t.allowTabSynchronization)throw new N(A.FAILED_PRECONDITION,Es);return!1}}return!(!i.networkEnabled||!i.inForeground)||Ns(e).Is().next(function(t){return void 0===i.va(t,5e3).find(function(t){if(i.clientId!==t.clientId){var e=!i.networkEnabled&&t.networkEnabled,n=!i.inForeground&&t.inForeground,r=i.networkEnabled===t.networkEnabled;if(e||n&&r)return!0}return!1})})}).next(function(t){return i.isPrimary!==t&&d("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},Ss.prototype.shutdown=function(){return v.__awaiter(this,void 0,void 0,function(){var e=this;return v.__generator(this,function(t){switch(t.label){case 0:return this.Bc=!1,this.pa(),this.Gc&&(this.Gc.cancel(),this.Gc=null),this.ga(),this.ba(),[4,this.$c.runTransaction("readwrite-idempotent",[Vo.store,hs.store],function(t){return e.ha(t).next(function(){return e.fa(t)})})];case 1:return t.sent(),this.$c.close(),this.ya(),[2]}})})},Ss.prototype.va=function(t,e){var n=this;return t.filter(function(t){return n.da(t.updateTimeMs,e)&&!n.ma(t.clientId)})},Ss.prototype.gh=function(){var e=this;return this.$c.runTransaction("readonly-idempotent",[hs.store],function(t){return Ns(t).Is().next(function(t){return e.va(t,18e5).map(function(t){return t.clientId})})})},Ss.clearPersistence=function(n){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return Ss.cs()?(e=n+Ss.Hc,[4,Ai.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})},Object.defineProperty(Ss.prototype,"Co",{get:function(){return this.Bc},enumerable:!0,configurable:!0}),Ss.prototype.Po=function(t){return y(this.Co,"Cannot initialize MutationQueue before persistence is started."),zi.ks(t,this.serializer,this.Cs,this.As)},Ss.prototype.Fo=function(){return y(this.Co,"Cannot initialize TargetCache before persistence is started."),this.Oo},Ss.prototype.No=function(){return y(this.Co,"Cannot initialize RemoteDocumentCache before persistence is started."),this.so},Ss.prototype.Uo=function(){return y(this.Co,"Cannot initialize IndexManager before persistence is started."),this.Cs},Ss.prototype.runTransaction=function(n,t,r){var i=this;d("IndexedDbPersistence","Starting transaction:",n);var o,e=t.endsWith("idempotent"),s=t.startsWith("readonly")?e?"readonly-idempotent":"readonly":e?"readwrite-idempotent":"readwrite";return this.$c.runTransaction(s,vs,function(e){return o=new Ts(e,i.ea.next()),"readwrite-primary"===t||"readwrite-primary-idempotent"===t?i.sa(e).next(function(t){return!!t||i.oa(e)}).next(function(t){if(!t)throw u("Failed to obtain primary lease for action '"+n+"'."),i.isPrimary=!1,i.Lc.$r(function(){return i.zc(!1)}),new N(A.FAILED_PRECONDITION,Si);return r(o)}).next(function(t){return i.ca(e).next(function(){return t})}):i._a(e).next(function(){return r(o)})}).then(function(t){return o.ss(),t})},Ss.prototype._a=function(t){var e=this;return As(t).get(Vo.key).next(function(t){if(null!==t&&e.da(t.leaseTimestampMs,5e3)&&!e.ma(t.ownerId)&&!e.aa(t)&&!t.allowTabSynchronization)throw new N(A.FAILED_PRECONDITION,Es)})},Ss.prototype.ca=function(t){var e=new Vo(this.clientId,this.allowTabSynchronization,Date.now());return As(t).put(Vo.key,e)},Ss.cs=function(){return Ai.cs()},Ss.Ia=function(t){var e=t.s.projectId;return t.s.o||(e+="."+t.s.database),"firestore/"+t.persistenceKey+"/"+e+"/"},Ss.prototype.ha=function(t){var e=this,n=As(t);return n.get(Vo.key).next(function(t){return e.aa(t)?(d("IndexedDbPersistence","Releasing primary lease."),n.delete(Vo.key)):Ti.resolve()})},Ss.prototype.da=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(u("Detected an update time that is in the future: "+t+" > "+n),1))},Ss.prototype.ta=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Qc=function(){t.Lc.$r(function(){return t.inForeground="visible"===t.document.visibilityState,t.Zc()})},this.document.addEventListener("visibilitychange",this.Qc),this.inForeground="visible"===this.document.visibilityState)},Ss.prototype.ga=function(){this.Qc&&(y(null!==this.document&&"function"==typeof this.document.addEventListener,"Expected 'document.addEventListener' to be a function"),this.document.removeEventListener("visibilitychange",this.Qc),this.Qc=null)},Ss.prototype.na=function(){var t=this;"function"==typeof this.window.addEventListener&&(this.Mc=function(){t.pa(),t.Lc.$r(function(){return t.shutdown()})},this.window.addEventListener("unload",this.Mc))},Ss.prototype.ba=function(){this.Mc&&(y("function"==typeof this.window.removeEventListener,"Expected 'window.removeEventListener' to be a function"),this.window.removeEventListener("unload",this.Mc),this.Mc=null)},Ss.prototype.ma=function(t){try{var e=null!==this.Jc.getItem(this.wa(t));return d("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return u("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},Ss.prototype.pa=function(){try{this.Jc.setItem(this.wa(this.clientId),String(Date.now()))}catch(t){u("Failed to set zombie client id.",t)}},Ss.prototype.ya=function(){try{this.Jc.removeItem(this.wa(this.clientId))}catch(t){}},Ss.prototype.wa=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},Ss.Hc="main",Ss);function Ss(t,e,n,r,i,o,s,a){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Lc=o,this.qc=a,this.Bc=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Mc=null,this.inForeground=!1,this.Qc=null,this.Gc=null,this.Wc=Number.NEGATIVE_INFINITY,this.zc=function(t){return Promise.resolve()},this.As=new Os(this,i),this.Kc=e+Ss.Hc,this.serializer=new _s(s),this.document=r.document,this.Oo=new vo(this.As,this.serializer),this.Cs=new ys,this.so=new Co(this.serializer,this.Cs),!r.window||!r.window.localStorage)throw new N(A.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");this.window=r.window,this.Jc=this.window.localStorage}function Cs(t,e){var n=ws.call(this)||this;return n.Xs=t,n.Zo=e,n}function As(t){return t.store(Vo.store)}function Ns(t){return t.store(hs.store)}var Os=(Ds.prototype.$h=function(t){var n=this.Ea(t);return this.db.Fo().wc(t).next(function(e){return n.next(function(t){return e+t})})},Ds.prototype.Ea=function(t){var e=0;return this.tc(t,function(t){e++}).next(function(){return e})},Ds.prototype.ce=function(t,e){return this.db.Fo().ce(t,e)},Ds.prototype.tc=function(t,n){return this.Da(t,function(t,e){return n(e)})},Ds.prototype.Ao=function(t){this.Ta=t},Ds.prototype.Du=function(t,e){return ks(t,e)},Ds.prototype.Ru=function(t,e){return ks(t,e)},Ds.prototype.nc=function(t,e,n){return this.db.Fo().nc(t,e,n)},Ds.prototype.Zs=function(t,e){return ks(t,e)},Ds.prototype.Sa=function(t,e){return this.Ta.Ou(e)?Ti.resolve(!0):(r=e,i=!1,$i(n=t).Rs(function(t){return Qi(n,t,r).next(function(t){return t&&(i=!0),Ti.resolve(!t)})}).next(function(){return i}));var n,r,i},Ds.prototype.ic=function(r,i){var o=this,s=this.db.No().Wo(),a=[],u=0;return this.Da(r,function(e,t){if(t<=i){var n=o.Sa(r,e).next(function(t){if(!t)return u++,s.Zu(r,e).next(function(){return s.$u(e),Io(r).delete([0,di(e.path)])})});a.push(n)}}).next(function(){return Ti.Wu(a)}).next(function(){return s.apply(r)}).next(function(){return u})},Ds.prototype.removeTarget=function(t,e){var n=e.di(t.Zo);return this.db.Fo().nh(t,n)},Ds.prototype.ih=function(t,e){return ks(t,e)},Ds.prototype.Da=function(t,o){var s,e=Io(t),a=ai.Mr;return e.Ss({index:ns.documentTargetsIndex},function(t,e){var n=t[0],r=(t[1],e.path),i=e.sequenceNumber;0===n?(a!==ai.Mr&&o(new mt(gi(s)),a),a=i,s=r):a=ai.Mr}).next(function(){a!==ai.Mr&&o(new mt(gi(s)),a)})},Ds.prototype.ec=function(t){return this.db.No().Cc(t)},Ds);function Ds(t,e){this.db=t,this.Ta=null,this.Wh=new po(this,e)}function ks(t,e){return Io(t).put((n=e,r=t.Zo,new ns(0,di(n.path),r)));var n,r}var xs=(Ls.prototype.xo=function(t){this.Ra=t},Ls.prototype.do=function(e,r,i,o){var s=this;return y(void 0!==this.Ra,"setLocalDocumentsView() not called"),r.Jn()||i.isEqual(pt.MIN)?this.Ca(e,r):this.Ra.fo(e,o).next(function(t){var n=s.Aa(r,t);return(r.ii()||r.ei())&&s.Pa(r.Fn,n,o,i)?s.Ca(e,r):(p()<=0&&d("IndexFreeQueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),r.toString()),s.Ra.do(e,r,i).next(function(e){return n.forEach(function(t){e=e.lt(t.key,t)}),e}))})},Ls.prototype.Aa=function(n,t){var r=new Pt(function(t,e){return n.Xn(t,e)});return t.forEach(function(t,e){e instanceof nn&&n.matches(e)&&(r=r.add(e))}),r},Ls.prototype.Pa=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||0<i.version.h(r))},Ls.prototype.Ca=function(t,e){return p()<=0&&d("IndexFreeQueryEngine","Using full collection scan to execute query: %s",e.toString()),this.Ra.do(t,e,pt.MIN)},Ls),Rs=(Ps.prototype.Ns=function(t){return Ti.resolve(0===this.oo.length)},Ps.prototype.Os=function(t,e,n){var r=e.batchId,i=this.Oa(r,"acknowledged");y(0===i,"Can only acknowledge the first batch in the mutation queue");var o=this.oo[i];return y(r===o.batchId,"Queue ordering failure: expected batch "+r+", got batch "+o.batchId),this.lastStreamToken=n,Ti.resolve()},Ps.prototype.Vs=function(t){return Ti.resolve(this.lastStreamToken)},Ps.prototype.Us=function(t,e){return this.lastStreamToken=e,Ti.resolve()},Ps.prototype.xs=function(t,e,n,r){y(0!==r.length,"Mutation batches should not be empty");var i=this.ka;this.ka++,0<this.oo.length&&y(this.oo[this.oo.length-1].batchId<i,"Mutation batchIDs must be monotonically increasing order");var o=new mi(i,e,n,r);this.oo.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.Na=this.Na.add(new wi(u.key,i)),this.Cs.Ls(t,u.key.path.H())}return Ti.resolve(o)},Ps.prototype.qs=function(t,e){return Ti.resolve(this.Fa(e))},Ps.prototype.Ms=function(t,e){var n=this.Fa(e);return y(null!=n,"Failed to find local mutation batch."),Ti.resolve(n.keys())},Ps.prototype.Qs=function(t,e){var n=e+1,r=this.Va(n),i=r<0?0:r;return Ti.resolve(this.oo.length>i?this.oo[i]:null)},Ps.prototype.Gs=function(){return Ti.resolve(0===this.oo.length?-1:this.ka-1)},Ps.prototype.Ws=function(t){return Ti.resolve(this.oo.slice())},Ps.prototype.zs=function(t,n){var r=this,e=new wi(n,0),i=new wi(n,Number.POSITIVE_INFINITY),o=[];return this.Na.Lt([e,i],function(t){y(n.isEqual(t.key),"Should only iterate over a single key's batches");var e=r.Fa(t.Fu);y(null!==e,"Batches in the index must exist in the main table"),o.push(e)}),Ti.resolve(o)},Ps.prototype.Ks=function(t,e){var r=this,i=new Pt(m);return e.forEach(function(e){var t=new wi(e,0),n=new wi(e,Number.POSITIVE_INFINITY);r.Na.Lt([t,n],function(t){y(e.isEqual(t.key),"For each key, should only iterate over a single key's batches"),i=i.add(t.Fu)})}),Ti.resolve(this.Ua(i))},Ps.prototype.Js=function(t,e){y(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");var n=e.path,r=n.length+1,i=n;mt.ht(i)||(i=i.child(""));var o=new wi(new mt(i),0),s=new Pt(m);return this.Na.qt(function(t){var e=t.key.path;return!!n.$(e)&&(e.length===r&&(s=s.add(t.Fu)),!0)},o),Ti.resolve(this.Ua(s))},Ps.prototype.Ua=function(t){var n=this,r=[];return t.forEach(function(t){var e=n.Fa(t);null!==e&&r.push(e)}),r},Ps.prototype.Ys=function(n,r){var i=this;y(0===this.Oa(r.batchId,"removed"),"Can only remove the first entry of the mutation queue"),this.oo.shift();var o=this.Na;return Ti.forEach(r.mutations,function(t){var e=new wi(t.key,r.batchId);return o=o.delete(e),i.As.Zs(n,t.key)}).next(function(){i.Na=o})},Ps.prototype.$s=function(t){},Ps.prototype.Ou=function(t,e){var n=new wi(e,0),r=this.Na.Bt(n);return Ti.resolve(e.isEqual(r&&r.key))},Ps.prototype.to=function(t){return 0===this.oo.length&&y(this.Na.J(),"Document leak -- detected dangling mutation references when queue is empty."),Ti.resolve()},Ps.prototype.Oa=function(t,e){var n=this.Va(t);return y(0<=n&&n<this.oo.length,"Batches must exist to be "+e),n},Ps.prototype.Va=function(t){return 0===this.oo.length?0:t-this.oo[0].batchId},Ps.prototype.Fa=function(t){var e=this.Va(t);if(e<0||e>=this.oo.length)return null;var n=this.oo[e];return y(n.batchId===t,"If found batch must match"),n},Ps);function Ps(t,e){this.Cs=t,this.As=e,this.oo=[],this.ka=1,this.lastStreamToken=Bn.ai,this.Na=new Pt(wi.Sn)}function Ls(){}var Ms,Fs,js,Us,qs=(ha.prototype.Yu=function(t,e,n){y(!n.isEqual(pt.MIN),"Cannot add a document with a read time of zero");var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.xa(e);return this.docs=this.docs.lt(r,{bc:e,size:s,readTime:n}),this.size+=s-o,this.Cs.Ls(t,r.path.H())},ha.prototype.$u=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},ha.prototype.Zu=function(t,e){var n=this.docs.get(e);return Ti.resolve(n?n.bc:null)},ha.prototype.getEntries=function(t,e){var n=this,r=yr();return e.forEach(function(t){var e=n.docs.get(t);r=r.lt(t,e?e.bc:null)}),Ti.resolve(r)},ha.prototype.do=function(t,e,n){y(!e.ui(),"CollectionGroup queries should be handled in LocalDocumentsView");for(var r=mr(),i=new mt(e.path.child("")),o=this.docs.yt(i);o.St();){var s=o.Dt(),a=s.key,u=s.value,c=u.bc,h=u.readTime;if(!e.path.$(a.path))break;h.h(n)<=0||c instanceof nn&&e.matches(c)&&(r=r.lt(c.key,c))}return Ti.resolve(r)},ha.prototype.ja=function(t,e){return Ti.forEach(this.docs,function(t){return e(t)})},ha.prototype.Eh=function(t,e){throw new Error("getNewDocumentChanges() is not supported with MemoryPersistence")},ha.prototype.Sh=function(t){return Ti.resolve(pt.MIN)},ha.prototype.Wo=function(t){return new ha.Rc(this)},ha.prototype.Cc=function(t){return Ti.resolve(this.size)},ha.Rc=(Us=Ii,v.__extends(la,Us),la.prototype.es=function(n){var r=this,i=[];return this.Ku.forEach(function(t,e){e?i.push(r.Ac.Yu(n,e,r.readTime)):r.Ac.$u(t)}),Ti.Wu(i)},la.prototype.ts=function(t,e){return this.Ac.Zu(t,e)},la.prototype.ns=function(t,e){return this.Ac.getEntries(t,e)},la),ha),Vs=(ca.prototype.ce=function(t,n){return this.La.forEach(function(t,e){return n(e)}),Ti.resolve()},ca.prototype.Jo=function(t){return Ti.resolve(this.lastRemoteSnapshotVersion)},ca.prototype.hc=function(t){return Ti.resolve(this.qa)},ca.prototype.fh=function(t){var e=this.uc.after(this.highestTargetId);return this.highestTargetId=e,Ti.resolve(e)},ca.prototype.eh=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.qa&&(this.qa=e),Ti.resolve()},ca.prototype.cc=function(t){this.La.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.highestTargetId=e),t.sequenceNumber>this.qa&&(this.qa=t.sequenceNumber)},ca.prototype.lh=function(t,e){return y(!this.La.has(e.target),"Adding a target that already exists"),this.cc(e),this.targetCount+=1,Ti.resolve()},ca.prototype.nh=function(t,e){return y(this.La.has(e.target),"Updating a non-existent target"),this.cc(e),Ti.resolve()},ca.prototype.fc=function(t,e){return y(0<this.targetCount,"Removing a target from an empty cache"),y(this.La.has(e.target),"Removing a non-existent target from the cache"),this.La.delete(e.target),this.Ba.Pu(e.targetId),--this.targetCount,Ti.resolve()},ca.prototype.nc=function(n,r,i){var o=this,s=0,a=[];return this.La.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.La.delete(t),a.push(o.lc(n,e.targetId)),s++)}),Ti.Wu(a).next(function(){return s})},ca.prototype.wc=function(t){return Ti.resolve(this.targetCount)},ca.prototype.ah=function(t,e){var n=this.La.get(e)||null;return Ti.resolve(n)},ca.prototype.ye=function(t,e){return b("Not yet implemented.")},ca.prototype.$o=function(e,t,n){this.Ba.Su(t,n);var r=this.persistence.As,i=[];return r&&t.forEach(function(t){i.push(r.Du(e,t))}),Ti.Wu(i)},ca.prototype.Xo=function(e,t,n){this.Ba.Au(t,n);var r=this.persistence.As,i=[];return r&&t.forEach(function(t){i.push(r.Ru(e,t))}),Ti.Wu(i)},ca.prototype.lc=function(t,e){return this.Ba.Pu(e),Ti.resolve()},ca.prototype.wh=function(t,e){var n=this.Ba.Nu(e);return Ti.resolve(n)},ca.prototype.Ou=function(t,e){return Ti.resolve(this.Ba.Ou(e))},ca),Hs=(ua.Ga=function(t,e){return new ua(t,function(t){return new Gs(t,e)})},ua.Wa=function(t){return new ua(t,function(t){return new Bs(t)})},ua.prototype.shutdown=function(){return this.Bc=!1,Promise.resolve()},Object.defineProperty(ua.prototype,"Co",{get:function(){return this.Bc},enumerable:!0,configurable:!0}),ua.prototype.gh=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return[2,[this.clientId]]})})},ua.prototype.ra=function(t){return t(!0)},ua.prototype.ua=function(){},ua.prototype.yh=function(t){},ua.prototype.Uo=function(){return this.Cs},ua.prototype.Po=function(t){var e=this.Ma[t.v()];return e||(e=new Rs(this.Cs,this.As),this.Ma[t.v()]=e),e},ua.prototype.Fo=function(){return this.Oo},ua.prototype.No=function(){return this.so},ua.prototype.runTransaction=function(t,e,n){var r=this;d("MemoryPersistence","Starting transaction:",t);var i=new Ws(this.ea.next());return this.As.za(),n(i).next(function(t){return r.As.Ka(i).next(function(){return t})}).Qu().then(function(t){return i.ss(),t})},ua.prototype.Ha=function(e,n){return Ti.zu((t=this.Ma,r=[],W(t,function(t,e){return r.push(e)}),r).map(function(t){return function(){return t.Ou(e,n)}}));var t,r},ua),Ws=(js=Ci,v.__extends(aa,js),aa),Bs=(Object.defineProperty(sa.prototype,"Ya",{get:function(){if(this.Ja)return this.Ja;throw b("orphanedDocuments is only valid during a transaction.")},enumerable:!0,configurable:!0}),sa.prototype.Ao=function(t){this.Ta=t},sa.prototype.Du=function(t,e){return this.Ya.delete(e),Ti.resolve()},sa.prototype.Ru=function(t,e){return this.Ya.add(e),Ti.resolve()},sa.prototype.Zs=function(t,e){return this.Ya.add(e),Ti.resolve()},sa.prototype.removeTarget=function(t,e){var n=this,r=this.persistence.Fo();return r.wh(t,e.targetId).next(function(t){t.forEach(function(t){return n.Ya.add(t)})}).next(function(){return r.fc(t,e)})},sa.prototype.za=function(){this.Ja=new Set},sa.prototype.Ka=function(t){var n=this,r=this.persistence.No().Wo();return Ti.forEach(this.Ya,function(e){return n.Xa(t,e).next(function(t){t||r.$u(e)})}).next(function(){return n.Ja=null,r.apply(t)})},sa.prototype.ih=function(t,e){var n=this;return this.Xa(t,e).next(function(t){t?n.Ya.delete(e):n.Ya.add(e)})},sa.prototype.Qa=function(t){return 0},sa.prototype.Xa=function(t,e){var n=this;return Ti.zu([function(){return n.persistence.Fo().Ou(t,e)},function(){return n.persistence.Ha(t,e)},function(){return Ti.resolve(n.Ta.Ou(e))}])},sa),Gs=(oa.prototype.za=function(){},oa.prototype.Ka=function(t){return Ti.resolve()},oa.prototype.ce=function(t,e){return this.persistence.Fo().ce(t,e)},oa.prototype.$h=function(t){var n=this.Za(t);return this.persistence.Fo().wc(t).next(function(e){return n.next(function(t){return e+t})})},oa.prototype.Za=function(t){var e=0;return this.tc(t,function(t){e++}).next(function(){return e})},oa.prototype.tc=function(n,r){var i=this;return Ti.forEach(this.$a,function(t,e){return i.Sa(n,t,e).next(function(t){return t?Ti.resolve():r(e)})})},oa.prototype.Ao=function(t){this.Ta=t},oa.prototype.nc=function(t,e,n){return this.persistence.Fo().nc(t,e,n)},oa.prototype.ic=function(t,n){var r=this,i=0,e=this.persistence.No(),o=e.Wo();return e.ja(t,function(e){return r.Sa(t,e,n).next(function(t){t||(i++,o.$u(e))})}).next(function(){return o.apply(t)}).next(function(){return i})},oa.prototype.Zs=function(t,e){return this.$a.set(e,t.Zo),Ti.resolve()},oa.prototype.removeTarget=function(t,e){var n=e.di(t.Zo);return this.persistence.Fo().nh(t,n)},oa.prototype.Du=function(t,e){return this.$a.set(e,t.Zo),Ti.resolve()},oa.prototype.Ru=function(t,e){return this.$a.set(e,t.Zo),Ti.resolve()},oa.prototype.ih=function(t,e){return this.$a.set(e,t.Zo),Ti.resolve()},oa.prototype.Qa=function(t){var e=t.key.toString().length;return t instanceof nn&&(e+=t.data().bn()),e},oa.prototype.Sa=function(t,e,n){var r=this;return Ti.zu([function(){return r.persistence.Ha(t,e)},function(){return Ti.resolve(r.Ta.Ou(e))},function(){return r.persistence.Fo().Ou(t,e)},function(){var t=r.$a.get(e);return Ti.resolve(void 0!==t&&n<t)}])},oa.prototype.ec=function(t){return this.persistence.No().Cc(t)},oa),zs=(ia.prototype.reset=function(){this.ef=0},ia.prototype.sf=function(){this.ef=this.if},ia.prototype.hf=function(t){var e=this;this.cancel();var n=Math.floor(this.ef+this.cf()),r=Math.max(0,Date.now()-this.uf),i=Math.max(0,n-r);0<this.ef&&d("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.ef+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.rf=this.Lc.fu(this.Gr,i,function(){return e.uf=Date.now(),t()}),this.ef*=this.nf,this.ef<this.tf&&(this.ef=this.tf),this.ef>this.if&&(this.ef=this.if)},ia.prototype.cancel=function(){null!==this.rf&&(this.rf.cancel(),this.rf=null)},ia.prototype.cf=function(){return(Math.random()-.5)*this.ef},ia),Ks=(ra.prototype.wf=function(){return 1===this.state||2===this.state||4===this.state},ra.prototype.mf=function(){return 2===this.state},ra.prototype.start=function(){3!==this.state?(y(0===this.state,"Already started"),this.auth()):this.pf()},ra.prototype.stop=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.wf()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},ra.prototype.gf=function(){y(!this.wf(),"Can only inhibit backoff in a stopped state"),this.state=0,this.vf.reset()},ra.prototype.bf=function(){var t=this;this.mf()&&null===this.df&&(this.df=this.Lc.fu(this.af,6e4,function(){return t.yf()}))},ra.prototype._f=function(t){this.If(),this.stream.send(t)},ra.prototype.yf=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return this.mf()?[2,this.close(0)]:[2]})})},ra.prototype.If=function(){this.df&&(this.df.cancel(),this.df=null)},ra.prototype.close=function(e,n){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return y(this.wf(),"Only started streams should be closed."),y(3===e||wn(n),"Can't provide an error when not in an error state."),this.If(),this.vf.cancel(),this.lf++,3!==e?this.vf.reset():n&&n.code===A.RESOURCE_EXHAUSTED?(u(n.toString()),u("Using maximum backoff delay to prevent overloading the backend."),this.vf.sf()):n&&n.code===A.UNAUTHENTICATED&&this.ff.I(),null!==this.stream&&(this.Tf(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.Ef(n)];case 1:return t.sent(),[2]}})})},ra.prototype.Tf=function(){},ra.prototype.auth=function(){var n=this;y(0===this.state,"Must be in initial state to auth"),this.state=1;var t=this.Df(this.lf),e=this.lf;this.ff.getToken().then(function(t){n.lf===e&&n.Sf(t)},function(e){t(function(){var t=new N(A.UNKNOWN,"Fetching auth token failed: "+e.message);return n.Rf(t)})})},ra.prototype.Sf=function(t){var e=this;y(1===this.state,"Trying to start stream in a non-starting state");var n=this.Df(this.lf);this.stream=this.Cf(t),this.stream.Af(function(){n(function(){return y(1===e.state,"Expected stream to be in state Starting, but was "+e.state),e.state=2,e.listener.Af()})}),this.stream.Ef(function(t){n(function(){return e.Rf(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},ra.prototype.pf=function(){var t=this;y(3===this.state,"Should only perform backoff when in Error state"),this.state=4,this.vf.hf(function(){return v.__awaiter(t,void 0,void 0,function(){return v.__generator(this,function(t){return y(4===this.state,"Backoff elapsed but state is now: "+this.state),this.state=0,this.start(),y(this.wf(),"PersistentStream should have started"),[2]})})})},ra.prototype.Rf=function(t){return y(this.wf(),"Can't handle server close on non-started stream"),d("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},ra.prototype.Df=function(e){var n=this;return function(t){n.Lc.$r(function(){return n.lf===e?t():(d("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},ra),Qs=(Fs=Ks,v.__extends(na,Fs),na.prototype.Cf=function(t){return this.connection.Pf("Listen",t)},na.prototype.onMessage=function(t){this.vf.reset();var e=this.serializer.Ze(t),n=this.serializer.nr(t);return this.listener.kf(e,n)},na.prototype.watch=function(t){var e={};e.database=this.serializer.je,e.addTarget=this.serializer.Yn(t);var n=this.serializer.Tr(t);n&&(e.labels=n),this._f(e)},na.prototype.Nf=function(t){var e={};e.database=this.serializer.je,e.removeTarget=t,this._f(e)},na),Ys=(Ms=Ks,v.__extends(ea,Ms),Object.defineProperty(ea.prototype,"Ff",{get:function(){return this.Of},enumerable:!0,configurable:!0}),ea.prototype.start=function(){this.Of=!1,Ms.prototype.start.call(this)},ea.prototype.Tf=function(){this.Of&&this.Vf([])},ea.prototype.Cf=function(t){return this.connection.Pf("Write",t)},ea.prototype.onMessage=function(t){if(y(!!t.streamToken,"Got a write response without a stream token"),this.lastStreamToken=this.serializer.Re(t.streamToken),this.Of){this.vf.reset();var e=this.serializer.lr(t.writeResults,t.commitTime),n=this.serializer.fromVersion(t.commitTime);return this.listener.Uf(n,e)}return y(!t.writeResults||0===t.writeResults.length,"Got mutation results for handshake"),this.Of=!0,this.listener.xf()},ea.prototype.jf=function(){y(this.mf(),"Writing handshake requires an opened stream"),y(!this.Of,"Handshake already completed");var t={};t.database=this.serializer.je,this._f(t)},ea.prototype.Vf=function(t){var e=this;y(this.mf(),"Writing mutations requires an opened stream"),y(this.Of,"Handshake must be complete before writing mutations"),y(0<this.lastStreamToken.bn(),"Trying to write mutation without a token");var n={streamToken:this.serializer.Se(this.lastStreamToken),writes:t.map(function(t){return e.serializer.ir(t)})};this._f(n)},ea),Xs=(ta.prototype.Lf=function(t){return new Ys(this.Lc,this.connection,this.credentials,this.serializer,t)},ta.prototype.qf=function(t){return new Qs(this.Lc,this.connection,this.credentials,this.serializer,t)},ta.prototype.commit=function(t){var e=this,n={database:this.serializer.je,writes:t.map(function(t){return e.serializer.ir(t)})};return this.Bf("Commit",n).then(function(t){return e.serializer.lr(t.writeResults,t.commitTime)})},ta.prototype.lookup=function(e){var i=this,t={database:this.serializer.je,documents:e.map(function(t){return i.serializer.Oe(t)})};return this.Mf("BatchGetDocuments",t).then(function(t){var n=vr();t.forEach(function(t){var e=i.serializer.Ye(t);n=n.lt(e.key,e)});var r=[];return e.forEach(function(t){var e=n.get(t);y(!!e,"Missing entity in write response for "+t),r.push(e)}),r})},ta.prototype.Bf=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.connection.Bf(e,n,t)}).catch(function(t){throw t.code===A.UNAUTHENTICATED&&r.credentials.I(),t})},ta.prototype.Mf=function(e,n){var r=this;return this.credentials.getToken().then(function(t){return r.connection.Mf(e,n,t)}).catch(function(t){throw t.code===A.UNAUTHENTICATED&&r.credentials.I(),t})},ta),Js=(Zs.documentId=function(){return Zs.Gf},Zs.prototype.isEqual=function(t){if(!(t instanceof Zs))throw ot("isEqual","FieldPath",1,t);return this.Qf.isEqual(t.Qf)},Zs.Gf=new Zs(gt.st().nt()),Zs),$s=new RegExp("[~\\*/\\[\\]]");function Zs(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t,e,n,r){if(!(e instanceof Array)||e.length<r)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires its "+n+" argument to be an array with at least "+ut(r,"element")+".")}("FieldPath",t,"fieldNames",1);for(var n=0;n<t.length;++n)if(Y("FieldPath","string",n,t[n]),0===t[n].length)throw new N(A.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.Qf=new gt(t)}function ta(t,e,n,r){this.Lc=t,this.connection=e,this.credentials=n,this.serializer=r}function ea(t,e,n,r,i){var o=Ms.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this;return o.serializer=r,o.Of=!1,o.lastStreamToken=Bn.ai,o}function na(t,e,n,r,i){var o=Fs.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this;return o.serializer=r,o}function ra(t,e,n,r,i,o){this.Lc=t,this.af=n,this.connection=r,this.ff=i,this.listener=o,this.state=0,this.lf=0,this.df=null,this.stream=null,this.vf=new zs(t,e)}function ia(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Lc=t,this.Gr=e,this.tf=n,this.nf=r,this.if=i,this.ef=0,this.rf=null,this.uf=Date.now(),this.reset()}function oa(t,e){this.persistence=t,this.Ta=null,this.$a=new Ei(function(t){return di(t.path)}),this.Wh=new po(this,e)}function sa(t){this.persistence=t,this.Ta=null,this.Ja=null}function aa(t){var e=js.call(this)||this;return e.Zo=t,e}function ua(t,e){var n=this;this.clientId=t,this.Ma={},this.ea=new ai(0),this.Bc=!1,this.Bc=!0,this.As=e(this),this.Oo=new Vs(this),this.Cs=new Ro,this.so=new qs(this.Cs,function(t){return n.As.Qa(t)})}function ca(t){this.persistence=t,this.La=new Ei(function(t){return t.canonicalId()}),this.lastRemoteSnapshotVersion=pt.MIN,this.highestTargetId=0,this.qa=0,this.Ba=new bi,this.targetCount=0,this.uc=Zi.ro()}function ha(t,e){this.Cs=t,this.xa=e,this.docs=new _t(mt.G),this.size=0}function la(t){var e=Us.call(this)||this;return e.Ac=t,e}var fa,pa,da,va,ya,ga=(Pa.delete=function(){return G("FieldValue.delete",arguments),ma.instance},Pa.serverTimestamp=function(){return G("FieldValue.serverTimestamp",arguments),_a.instance},Pa.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return K("FieldValue.arrayUnion",arguments,1),new ba(t)},Pa.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return K("FieldValue.arrayRemove",arguments,1),new wa(t)},Pa.increment=function(t){return Y("FieldValue.increment","number",1,t),z("FieldValue.increment",arguments,1),new Ea(t)},Pa.prototype.isEqual=function(t){return this===t},Pa),ma=(ya=ga,v.__extends(Ra,ya),Ra.instance=new Ra,Ra),_a=(va=ga,v.__extends(xa,va),xa.instance=new xa,xa),ba=(da=ga,v.__extends(ka,da),ka),wa=(pa=ga,v.__extends(Da,pa),Da),Ea=(fa=ga,v.__extends(Oa,fa),Oa),Ta=ei(ga,"Use FieldValue.<field>() instead."),Ia=/^__.*__$/,Sa=(Na.prototype.Hf=function(t,e){var n=[];return null!==this.un?n.push(new ae(t,this.data,this.un,e)):n.push(new se(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new ue(t,this.fieldTransforms)),n},Na),Ca=(Aa.prototype.Hf=function(t,e){var n=[new ae(t,this.data,this.un,e)];return 0<this.fieldTransforms.length&&n.push(new ue(t,this.fieldTransforms)),n},Aa);function Aa(t,e,n){this.data=t,this.un=e,this.fieldTransforms=n}function Na(t,e,n){this.data=t,this.un=e,this.fieldTransforms=n}function Oa(t){var e=fa.call(this,"FieldValue.increment")||this;return e.Kf=t,e}function Da(t){var e=pa.call(this,"FieldValue.arrayRemove")||this;return e.zf=t,e}function ka(t){var e=da.call(this,"FieldValue.arrayUnion")||this;return e.zf=t,e}function xa(){return va.call(this,"FieldValue.serverTimestamp")||this}function Ra(){return ya.call(this,"FieldValue.delete")||this}function Pa(t){this.Wf=t}function La(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw b("Unexpected case for UserDataSource: "+t)}}var Ma=(qa.prototype.$f=function(t){var e=null==this.path?null:this.path.child(t),n=new qa(this.Jf,this.methodName,e,!1,this.fieldTransforms,this.un);return n.Zf(t),n},qa.prototype.tl=function(t){var e=null==this.path?null:this.path.child(t),n=new qa(this.Jf,this.methodName,e,!1,this.fieldTransforms,this.un);return n.Xf(),n},qa.prototype.nl=function(t){return new qa(this.Jf,this.methodName,null,!0,this.fieldTransforms,this.un)},qa.prototype.il=function(t){var e=null===this.path||this.path.J()?"":" (found in field "+this.path.toString()+")";return new N(A.INVALID_ARGUMENT,"Function "+this.methodName+"() called with invalid data. "+t+e)},qa.prototype.contains=function(e){return void 0!==this.un.find(function(t){return e.$(t)})||void 0!==this.fieldTransforms.find(function(t){return e.$(t.field)})},qa.prototype.Xf=function(){if(null!==this.path)for(var t=0;t<this.path.length;t++)this.Zf(this.path.get(t))},qa.prototype.Zf=function(t){if(0===t.length)throw this.il("Document fields must not be empty");if(La(this.Jf)&&Ia.test(t))throw this.il('Document fields cannot begin and end with "__"')},qa),Fa=function(t,e){this.s=t,this.key=e},ja=(Ua.prototype.rl=function(t,e){var n=new Ma(0,t,gt.et);Ha("Data must be an object, but it was:",n,e);var r=this.ul(e,n);return new Sa(r,null,n.fieldTransforms)},Ua.prototype.sl=function(t,e,n){var r=new Ma(2,t,gt.et);Ha("Data must be an object, but it was:",r,e);var i,o,s=this.ul(e,r);if(n){for(var a=new Pt(gt.G),u=0,c=n;u<c.length;u++){var h=c[u],l=void 0;if(h instanceof Js)l=h.Qf;else{if("string"!=typeof h)throw b("Expected stringOrFieldPath to be a string or a FieldPath");l=Ba(t,h)}if(!r.contains(l))throw new N(A.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");a=a.add(l)}i=ne.Jt(a),o=r.fieldTransforms.filter(function(t){return i.Xt(t.field)})}else i=ne.Yt(r.un),o=r.fieldTransforms;return new Sa(s,i,o)},Ua.prototype.ol=function(o,t){var s=this,a=new Ma(1,o,gt.et);Ha("Data must be an object, but it was:",a,t);var u=new Pt(gt.G),c=$e.vn();W(t,function(t,e){var n=Ba(o,t),r=a.tl(n);if((e=s.hl(e,r))instanceof ma)u=u.add(n);else{var i=s.ul(e,r);null!=i&&(u=u.add(n),c.set(n,i))}});var e=ne.Jt(u);return new Ca(c.cn(),e,a.fieldTransforms)},Ua.prototype.cl=function(t,e,n,r){var i=new Ma(1,t,gt.et),o=[Wa(t,e)],s=[n];if(r.length%2!=0)throw new N(A.INVALID_ARGUMENT,"Function "+t+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var a=0;a<r.length;a+=2)o.push(Wa(t,r[a])),s.push(r[a+1]);var u=new Pt(gt.G),c=$e.vn();for(a=0;a<o.length;++a){var h=o[a],l=i.tl(h),f=this.hl(s[a],l);if(f instanceof ma)u=u.add(h);else{var p=this.ul(f,l);null!=p&&(u=u.add(h),c.set(h,p))}}var d=ne.Jt(u);return new Ca(c.cn(),d,i.fieldTransforms)},Ua.prototype.al=function(t,e,n){void 0===n&&(n=!1);var r=new Ma(n?4:3,t,gt.et),i=this.ul(e,r);return y(null!=i,"Parsed data should not be null."),y(0===r.fieldTransforms.length,"Field transforms should have been disallowed."),i},Ua.prototype.hl=function(t,e){try{return this.el(t)}catch(t){var n=Ga(t);throw e.il(n)}},Ua.prototype.ul=function(t,e){if(Va(t=this.hl(t,e)))return Ha("Unsupported field value:",e,t),this.fl(t,e);if(t instanceof ga)return this.ll(t,e),null;if(e.path&&e.un.push(e.path),t instanceof Array){if(e.Yf&&4!==e.Jf)throw e.il("Nested arrays are not supported");return this.dl(t,e)}return this.vl(t,e)},Ua.prototype.fl=function(t,r){var i=this,o=new _t(m);return B(t)?r.path&&0<r.path.length&&r.un.push(r.path):W(t,function(t,e){var n=i.ul(e,r.$f(t));null!=n&&(o=o.lt(t,n))}),new $e(o)},Ua.prototype.dl=function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=o[i],a=this.ul(s,e.nl(r));null==a&&(a=pe.yn),n.push(a),r++}return new tn(n)},Ua.prototype.ll=function(t,e){if(!La(e.Jf))throw e.il(t.Wf+"() can only be used with update() and set()");if(null===e.path)throw e.il(t.Wf+"() is not currently supported inside arrays");if(t instanceof ma){if(2!==e.Jf)throw 1===e.Jf?(y(0<e.path.length,"FieldValue.delete() at the top level should have already been handled."),e.il("FieldValue.delete() can only appear at the top level of your update data")):e.il("FieldValue.delete() cannot be used with set() unless you pass {merge:true}");e.un.push(e.path)}else if(t instanceof _a)e.fieldTransforms.push(new re(e.path,Mt.instance));else if(t instanceof ba){var n=this.wl(t.Wf,t.zf),r=new Ft(n);e.fieldTransforms.push(new re(e.path,r))}else if(t instanceof wa){n=this.wl(t.Wf,t.zf);var i=new jt(n);e.fieldTransforms.push(new re(e.path,i))}else if(t instanceof Ea){var o=this.al("FieldValue.increment",t.Kf),s=new Ut(o);e.fieldTransforms.push(new re(e.path,s))}else b("Unknown FieldValue type: "+t)},Ua.prototype.vl=function(t,e){if(null===t)return pe.yn;if("number"==typeof t)return new(Tn(t)?Be:Ge)(t);if("boolean"==typeof t)return de.of(t);if("string"==typeof t)return new ze(t);if(t instanceof Date)return new Ke(ft.fromDate(t));if(t instanceof ft)return new Ke(new ft(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)));if(t instanceof lt)return new Je(t);if(t instanceof oi)return new Ye(t);if(t instanceof Fa)return new Xe(t.s,t.key);throw e.il("Unsupported field value: "+nt(t))},Ua.prototype.wl=function(r,t){var i=this;return t.map(function(t,e){var n=new Ma(3,r,gt.et);return i.ul(t,n.nl(e))})},Ua);function Ua(t){this.el=t}function qa(t,e,n,r,i,o){this.Jf=t,this.methodName=e,this.path=n,this.Yf=r,void 0===i&&this.Xf(),this.Yf=void 0!==r&&r,this.fieldTransforms=i||[],this.un=o||[]}function Va(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof ft||t instanceof lt||t instanceof oi||t instanceof Fa||t instanceof ga)}function Ha(t,e,n){if(!Va(n)||!et(n)){var r=nt(n);throw"an object"===r?e.il(t+" a custom object"):e.il(t+" "+r)}}function Wa(t,e){if(e instanceof Js)return e.Qf;if("string"==typeof e)return Ba(t,e);throw new N(A.INVALID_ARGUMENT,"Function "+t+"() called with invalid data. Field path arguments must be of type string or FieldPath.")}function Ba(e,t){try{return function(e){if(0<=e.search($s))throw new N(A.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'");try{return new(Js.bind.apply(Js,v.__spreadArrays([void 0],e.split("."))))}catch(t){throw new N(A.INVALID_ARGUMENT,"Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'")}}(t).Qf}catch(t){var n=Ga(t);throw new N(A.INVALID_ARGUMENT,"Function "+e+"() called with invalid data. "+n)}}function Ga(t){return t instanceof Error?t.message:t.toString()}var za=(Ja.prototype.lookup=function(r){return v.__awaiter(this,void 0,void 0,function(){var e,n=this;return v.__generator(this,function(t){switch(t.label){case 0:if(this._l(),0<this.mutations.length)throw new N(A.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,this.ml.lookup(r)];case 1:return(e=t.sent()).forEach(function(t){t instanceof rn||t instanceof nn?n.Il(t):b("Document in a transaction was a "+t.constructor.name)}),[2,e]}})})},Ja.prototype.set=function(t,e){this.write(e.Hf(t,this.in(t))),this.yl.add(t)},Ja.prototype.update=function(t,e){try{this.write(e.Hf(t,this.Tl(t)))}catch(t){this.bl=t}this.yl.add(t)},Ja.prototype.delete=function(t){this.write([new ce(t,this.in(t))]),this.yl.add(t)},Ja.prototype.commit=function(){return v.__awaiter(this,void 0,void 0,function(){var e,n=this;return v.__generator(this,function(t){switch(t.label){case 0:if(this._l(),this.bl)throw this.bl;return e=this.pl,this.mutations.forEach(function(t){e=e.remove(t.key)}),e.forEach(function(t,e){n.mutations.push(new he(t,n.in(t)))}),[4,this.ml.commit(this.mutations)];case 1:return t.sent(),this.gl=!0,[2]}})})},Ja.prototype.Il=function(t){var e;if(t instanceof nn)e=t.version;else{if(!(t instanceof rn))throw b("Document in a transaction was a "+t.constructor.name);e=pt.q()}var n=this.pl.get(t.key);if(null!==n){if(!e.isEqual(n))throw new N(A.ABORTED,"Document version changed between two reads.")}else this.pl=this.pl.lt(t.key,e)},Ja.prototype.in=function(t){var e=this.pl.get(t);return!this.yl.has(t)&&e?ie.updateTime(e):ie.NONE},Ja.prototype.Tl=function(t){var e=this.pl.get(t);if(this.yl.has(t)||!e)return ie.exists(!0);if(e.isEqual(pt.q()))throw new N(A.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ie.updateTime(e)},Ja.prototype.write=function(t){this._l(),this.mutations=this.mutations.concat(t)},Ja.prototype._l=function(){y(!this.gl,"A transaction object cannot be used after its update callback has been invoked.")},Ja),Ka=(Xa.prototype.Cl=function(){var t=this;0===this.Dl&&(this.Al("Unknown"),y(null===this.Sl,"onlineStateTimer shouldn't be started yet"),this.Sl=this.Qr.fu("online_state_timeout",1e4,function(){return t.Sl=null,y("Unknown"===t.state,"Timer should be canceled if we transitioned to a different state."),t.Pl("Backend didn't respond within 10 seconds."),t.Al("Offline"),Promise.resolve()}))},Xa.prototype.kl=function(t){"Online"===this.state?(this.Al("Unknown"),y(0===this.Dl,"watchStreamFailures must be 0"),y(null===this.Sl,"onlineStateTimer must be null")):(this.Dl++,1<=this.Dl&&(this.Nl(),this.Pl("Connection failed 1 times. Most recent error: "+t.toString()),this.Al("Offline")))},Xa.prototype.set=function(t){this.Nl(),this.Dl=0,"Online"===t&&(this.Rl=!1),this.Al(t)},Xa.prototype.Al=function(t){t!==this.state&&(this.state=t,this.El(t))},Xa.prototype.Pl=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Rl?(u(e),this.Rl=!1):d("OnlineStateTracker",e)},Xa.prototype.Nl=function(){null!==this.Sl&&(this.Sl.cancel(),this.Sl=null)},Xa),Qa=(Ya.prototype.start=function(){return this.enableNetwork()},Ya.prototype.enableNetwork=function(){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!0,this.jl()?(e=this.Wl,[4,this.zh.Vs()]):[3,3];case 1:return e.lastStreamToken=t.sent(),this.Jl()?this.Yl():this.ql.set("Unknown"),[4,this.Xl()];case 2:t.sent(),t.label=3;case 3:return[2]}})})},Ya.prototype.disableNetwork=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.ql.set("Offline"),[2]}})})},Ya.prototype.$l=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return[4,this.Wl.stop()];case 1:return t.sent(),[4,this.Bl.stop()];case 2:return t.sent(),0<this.Ol.length&&(d("RemoteStore","Stopping write stream with "+this.Ol.length+" pending writes"),this.Ol=[]),this.Zl(),[2]}})})},Ya.prototype.shutdown=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return d("RemoteStore","RemoteStore shutting down."),this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.Ul.shutdown(),this.ql.set("Unknown"),[2]}})})},Ya.prototype.listen=function(t){q(this.Fl,t.targetId)||(this.Fl[t.targetId]=t,this.Jl()?this.Yl():this.Bl.mf()&&this.td(t))},Ya.prototype.nd=function(t){y(q(this.Fl,t),"unlisten called on target no currently watched: "+t),delete this.Fl[t],this.Bl.mf()&&this.ed(t),B(this.Fl)&&(this.Bl.mf()?this.Bl.bf():this.jl()&&this.ql.set("Unknown"))},Ya.prototype.ye=function(t){return this.Fl[t]||null},Ya.prototype.be=function(t){return this.rd.be(t)},Ya.prototype.td=function(t){this.Vl.Xi(t.targetId),this.Bl.watch(t)},Ya.prototype.ed=function(t){this.Vl.Xi(t),this.Bl.Nf(t)},Ya.prototype.Yl=function(){y(this.Jl(),"startWatchStream() called when shouldStartWatchStream() is false."),this.Vl=new Pr(this),this.Bl.start(),this.ql.Cl()},Ya.prototype.Jl=function(){return this.jl()&&!this.Bl.wf()&&!B(this.Fl)},Ya.prototype.jl=function(){return this.isPrimary&&this.networkEnabled},Ya.prototype.Zl=function(){this.Vl=null},Ya.prototype.Ml=function(){return v.__awaiter(this,void 0,void 0,function(){var n=this;return v.__generator(this,function(t){return H(this.Fl,function(t,e){n.td(e)}),[2]})})},Ya.prototype.Ql=function(e){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return void 0===e&&y(!this.Jl(),"Watch stream was stopped gracefully while still needed."),this.Zl(),this.Jl()?(this.ql.kl(e),this.Yl()):this.ql.set("Unknown"),[2]})})},Ya.prototype.Gl=function(n,r){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return this.ql.set("Online"),n instanceof Ar&&2===n.state&&n.cause?[2,this.ud(n)]:(n instanceof Sr?this.Vl.ue(n):n instanceof Cr?this.Vl.de(n):(y(n instanceof Ar,"Expected watchChange to be an instance of WatchTargetChange"),this.Vl.he(n)),r.isEqual(pt.MIN)?[3,3]:[4,this.zh.Jo()]);case 1:return e=t.sent(),0<=r.h(e)?[4,this.sd(r)]:[3,3];case 2:t.sent(),t.label=3;case 3:return[2]}})})},Ya.prototype.sd=function(r){var i=this;y(!r.isEqual(pt.MIN),"Can't raise event for unknown SnapshotVersion");var t=this.Vl.me(r);return H(t.Si,function(t,e){if(0<e.resumeToken.bn()){var n=i.Fl[t];n&&(i.Fl[t]=n.vi(e.resumeToken,r))}}),t.Ri.forEach(function(t){var e=i.Fl[t];if(e){i.Fl[t]=e.vi(Bn.ai,e.li),i.ed(t);var n=new ur(e.target,t,1,e.sequenceNumber);i.td(n)}}),this.rd.Yo(t)},Ya.prototype.ud=function(t){var n=this;y(!!t.cause,"Handling target error without a cause");var r=t.cause,i=Promise.resolve();return t.targetIds.forEach(function(e){i=i.then(function(){return v.__awaiter(n,void 0,void 0,function(){return v.__generator(this,function(t){return q(this.Fl,e)?(delete this.Fl[e],this.Vl.removeTarget(e),[2,this.rd.od(e,r)]):[2]})})})}),i},Ya.prototype.Xl=function(){return v.__awaiter(this,void 0,void 0,function(){var e,n;return v.__generator(this,function(t){switch(t.label){case 0:return this.hd()?(e=0<this.Ol.length?this.Ol[this.Ol.length-1].batchId:-1,[4,this.zh.sh(e)]):[3,4];case 1:return null!==(n=t.sent())?[3,2]:(0===this.Ol.length&&this.Wl.bf(),[3,4]);case 2:return this.ad(n),[4,this.Xl()];case 3:t.sent(),t.label=4;case 4:return this.fd()&&this.ld(),[2]}})})},Ya.prototype.hd=function(){return this.jl()&&this.Ol.length<10},Ya.prototype.dd=function(){return this.Ol.length},Ya.prototype.ad=function(t){y(this.hd(),"addToWritePipeline called when pipeline is full"),this.Ol.push(t),this.Wl.mf()&&this.Wl.Ff&&this.Wl.Vf(t.mutations)},Ya.prototype.fd=function(){return this.jl()&&!this.Wl.wf()&&0<this.Ol.length},Ya.prototype.ld=function(){y(this.fd(),"startWriteStream() called when shouldStartWriteStream() is false."),this.Wl.start()},Ya.prototype.zl=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return this.Wl.jf(),[2]})})},Ya.prototype.Hl=function(){var r=this;return this.zh.Us(this.Wl.lastStreamToken).then(function(){for(var t=0,e=r.Ol;t<e.length;t++){var n=e[t];r.Wl.Vf(n.mutations)}}).catch(ao)},Ya.prototype.Uf=function(t,e){var n=this;y(0<this.Ol.length,"Got result for empty write pipeline");var r=this.Ol.shift(),i=_i.from(r,t,e,this.Wl.lastStreamToken);return this.rd.vd(i).then(function(){return n.Xl()})},Ya.prototype.Kl=function(n){return v.__awaiter(this,void 0,void 0,function(){var e=this;return v.__generator(this,function(t){return void 0===n&&y(!this.fd(),"Write stream was stopped gracefully while still needed."),n&&0<this.Ol.length?[2,(this.Wl.Ff?this.wd(n):this.md(n)).then(function(){e.fd()&&e.ld()})]:[2]})})},Ya.prototype.md=function(e){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return fr(e.code)?(d("RemoteStore","RemoteStore error before completed handshake; resetting stream token: ",this.Wl.lastStreamToken),this.Wl.lastStreamToken=Bn.ai,[2,this.zh.Us(Bn.ai).catch(ao)]):[2]})})},Ya.prototype.wd=function(i){return v.__awaiter(this,void 0,void 0,function(){var n,r=this;return v.__generator(this,function(t){return fr(e=i.code)&&e!==A.ABORTED?(n=this.Ol.shift(),this.Wl.gf(),[2,this.rd.pd(n.batchId,i).then(function(){return r.Xl()})]):[2];var e})})},Ya.prototype.gd=function(){return new za(this.ml)},Ya.prototype.Ll=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.networkEnabled=!1,[4,this.$l()];case 1:return t.sent(),this.ql.set("Unknown"),[4,this.enableNetwork()];case 2:return t.sent(),[2]}})})},Ya.prototype.bd=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.jl()?(d("RemoteStore","RemoteStore restarting streams for new credential"),[4,this.Ll()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},Ya.prototype.yd=function(e){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return(this.isPrimary=e)&&this.networkEnabled?[4,this.enableNetwork()]:[3,2];case 1:return t.sent(),[3,4];case 2:return e?[3,4]:[4,this.$l()];case 3:t.sent(),this.ql.set("Unknown"),t.label=4;case 4:return[2]}})})},Ya);function Ya(t,e,n,r,i){var o=this;this.zh=t,this.ml=e,this.Ol=[],this.Fl={},this.Vl=null,this.networkEnabled=!1,this.isPrimary=!1,this.Ul=i,this.Ul.xl(function(t){n.$r(function(){return v.__awaiter(o,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.jl()?(d("RemoteStore","Restarting streams for network reachability change."),[4,this.Ll()]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.ql=new Ka(n,r),this.Bl=this.ml.qf({Af:this.Ml.bind(this),Ef:this.Ql.bind(this),kf:this.Gl.bind(this)}),this.Wl=this.ml.Lf({Af:this.zl.bind(this),Ef:this.Kl.bind(this),xf:this.Hl.bind(this),Uf:this.Uf.bind(this)})}function Xa(t,e){this.Qr=t,this.El=e,this.state="Unknown",this.Dl=0,this.Sl=null,this.Rl=!0}function Ja(t){this.ml=t,this.pl=br(),this.mutations=[],this.gl=!1,this.bl=null,this.yl=new Set}function $a(t,e){return y(-1===e.indexOf("_"),"Client key cannot contain '_', but was '"+e+"'"),"firestore_clients_"+t+"_"+e}function Za(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.l()&&(r+="_"+e.uid),r}function tu(t,e){return"firestore_targets_"+t+"_"+e}var eu=(fu._d=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new N(r.error.code,r.error.message)),i?new fu(t,e,r.state,o):(u("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},fu.prototype.Id=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},fu),nu=(lu._d=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new N(n.error.code,n.error.message)),r?new lu(t,n.state,i):(u("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},lu.prototype.Id=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},lu),ru=(hu._d=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=Ir(),o=0;r&&o<n.activeTargetIds.length;++o)r=Tn(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new hu(t,i):(u("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},hu),iu=(cu._d=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new cu(e.clientId,e.onlineState):(u("SharedClientState","Failed to parse online state: "+t),null)},cu),ou=(uu.prototype.Td=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},uu.prototype.Ed=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},uu.prototype.Id=function(){var t={activeTargetIds:this.activeTargetIds.tt(),updateTimeMs:Date.now()};return JSON.stringify(t)},uu),su=(au.cs=function(t){return!(!t.window||null==t.window.localStorage)},au.prototype.start=function(){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f=this;return v.__generator(this,function(t){switch(t.label){case 0:return y(!this.Co,"WebStorageSharedClientState already started"),y(null!==this.rd,"syncEngine property must be set before calling start()"),y(null!==this.El,"onlineStateHandler property must be set before calling start()"),[4,this.rd.gh()];case 1:for(e=t.sent(),n=0,r=e;n<r.length;n++)(i=r[n])!==this.Dd&&(o=this.getItem($a(this.persistenceKey,i)))&&(s=ru._d(i,o))&&(this.Sd[s.clientId]=s);for(this.Ud(),(a=this.storage.getItem(this.Vd))&&(u=this.xd(a))&&this.jd(u),c=0,h=this.Ad;c<h.length;c++)l=h[c],this.Cd(l);return this.Ad=[],this.platform.window.addEventListener("unload",function(){return f.shutdown()}),this.Co=!0,[2]}})})},au.prototype.Br=function(t){this.setItem(this.kd,JSON.stringify(t))},au.prototype.Ld=function(){var n=Ir();return W(this.Sd,function(t,e){n=n.Mt(e.activeTargetIds)}),n},au.prototype.qd=function(t){for(var e in this.Sd)if(this.Sd.hasOwnProperty(e)&&this.Sd[e].activeTargetIds.has(t))return!0;return!1},au.prototype.Bd=function(t){this.Md(t,"pending")},au.prototype.Qd=function(t,e,n){this.Md(t,e,n),this.Gd(t)},au.prototype.Wd=function(t){var e="not-current";if(this.qd(t)){var n=this.storage.getItem(tu(this.persistenceKey,t));if(n){var r=nu._d(t,n);r&&(e=r.state)}}return this.zd.Td(t),this.Ud(),e},au.prototype.Kd=function(t){this.zd.Ed(t),this.Ud()},au.prototype.Hd=function(t){return this.zd.activeTargetIds.has(t)},au.prototype.Jd=function(t){this.removeItem(tu(this.persistenceKey,t))},au.prototype.Yd=function(t,e,n){this.Xd(t,e,n)},au.prototype.Lo=function(t,e,n){var r=this;e.forEach(function(t){r.Gd(t)}),this.currentUser=t,n.forEach(function(t){r.Bd(t)})},au.prototype.$d=function(t){this.Zd(t)},au.prototype.shutdown=function(){this.Co&&(this.platform.window.removeEventListener("storage",this.Rd),this.removeItem(this.Pd),this.Co=!1)},au.prototype.getItem=function(t){var e=this.storage.getItem(t);return d("SharedClientState","READ",t,e),e},au.prototype.setItem=function(t,e){d("SharedClientState","SET",t,e),this.storage.setItem(t,e)},au.prototype.removeItem=function(t){d("SharedClientState","REMOVE",t),this.storage.removeItem(t)},au.prototype.Cd=function(a){var t=this;if(a.storageArea===this.storage){if(d("SharedClientState","EVENT",a.key,a.newValue),a.key===this.Pd)return void u("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Lc.$r(function(){return v.__awaiter(t,void 0,void 0,function(){var e,n,r,i,o,s;return v.__generator(this,function(t){if(!this.Co)return this.Ad.push(a),[2];if(null===a.key)return[2];if(this.Nd.test(a.key)){if(null==a.newValue)return n=this.tv(a.key),[2,this.nv(n,null)];if(e=this.iv(a.key,a.newValue))return[2,this.nv(e.clientId,e)]}else if(this.Od.test(a.key)){if(null!==a.newValue&&(r=this.ev(a.key,a.newValue)))return[2,this.rv(r)]}else if(this.Fd.test(a.key)){if(null!==a.newValue&&(i=this.uv(a.key,a.newValue)))return[2,this.sv(i)]}else if(a.key===this.Vd){if(null!==a.newValue&&(o=this.xd(a.newValue)))return[2,this.jd(o)]}else a.key===this.kd&&(y(!!this.jr,"Missing sequenceNumberHandler"),(s=function(t){var e=ai.Mr;if(null!=t)try{var n=JSON.parse(t);y("number"==typeof n,"Found non-numeric sequence number"),e=n}catch(t){u("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(a.newValue))!==ai.Mr&&this.jr(s));return[2]})})})}},Object.defineProperty(au.prototype,"zd",{get:function(){return this.Sd[this.Dd]},enumerable:!0,configurable:!0}),au.prototype.Ud=function(){this.setItem(this.Pd,this.zd.Id())},au.prototype.Md=function(t,e,n){var r=new eu(this.currentUser,t,e,n),i=Za(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Id())},au.prototype.Gd=function(t){var e=Za(this.persistenceKey,this.currentUser,t);this.removeItem(e)},au.prototype.Zd=function(t){var e={clientId:this.Dd,onlineState:t};this.storage.setItem(this.Vd,JSON.stringify(e))},au.prototype.Xd=function(t,e,n){var r=tu(this.persistenceKey,t),i=new nu(t,e,n);this.setItem(r,i.Id())},au.prototype.tv=function(t){var e=this.Nd.exec(t);return e?e[1]:null},au.prototype.iv=function(t,e){var n=this.tv(t);return y(null!==n,"Cannot parse client state key '"+t+"'"),ru._d(n,e)},au.prototype.ev=function(t,e){var n=this.Od.exec(t);y(null!==n,"Cannot parse mutation batch key '"+t+"'");var r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return eu._d(new C(i),r,e)},au.prototype.uv=function(t,e){var n=this.Fd.exec(t);y(null!==n,"Cannot parse query target key '"+t+"'");var r=Number(n[1]);return nu._d(r,e)},au.prototype.xd=function(t){return iu._d(t)},au.prototype.rv=function(e){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return e.user.uid!==this.currentUser.uid?(d("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2]):[2,this.rd.ov(e.batchId,e.state,e.error)]})})},au.prototype.sv=function(t){return this.rd.hv(t.targetId,t.state,t.error)},au.prototype.nv=function(t,e){var n=this,r=this.Ld();e?this.Sd[t]=e:delete this.Sd[t];var i=this.Ld(),o=[],s=[];return i.forEach(function(e){return v.__awaiter(n,void 0,void 0,function(){return v.__generator(this,function(t){return r.has(e)||o.push(e),[2]})})}),r.forEach(function(e){return v.__awaiter(n,void 0,void 0,function(){return v.__generator(this,function(t){return i.has(e)||s.push(e),[2]})})}),this.rd.cv(o,s)},au.prototype.jd=function(t){this.Sd[t.clientId]&&this.El(t.onlineState)},au);function au(t,e,n,r,i){if(this.Lc=t,this.platform=e,this.persistenceKey=n,this.Dd=r,this.rd=null,this.El=null,this.jr=null,this.Sd={},this.Rd=this.Cd.bind(this),this.Co=!1,this.Ad=[],!au.cs(this.platform))throw new N(A.UNIMPLEMENTED,"LocalStorage is not available on this platform.");var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.platform.window.localStorage,this.currentUser=i,this.Pd=$a(this.persistenceKey,this.Dd),this.kd="firestore_sequence_number_"+this.persistenceKey,this.Sd[this.Dd]=new ou,this.Nd=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Od=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Fd=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Vd="firestore_online_state_"+this.persistenceKey,this.platform.window.addEventListener("storage",this.Rd)}function uu(){this.activeTargetIds=Ir()}function cu(t,e){this.clientId=t,this.onlineState=e}function hu(t,e){this.clientId=t,this.activeTargetIds=e}function lu(t,e,n){this.targetId=t,this.state=e,y(void 0!==(this.error=n)==("rejected"===e),"QueryTargetMetadata must contain an error iff state is 'rejected'")}function fu(t,e,n,r){this.user=t,this.batchId=e,this.state=n,y(void 0!==(this.error=r)==("rejected"===n),"MutationMetadata must contain an error iff state is 'rejected'")}function pu(t){this.key=t}function du(t){this.key=t}var vu=(mu.prototype.Bd=function(t){},mu.prototype.Qd=function(t,e,n){},mu.prototype.Wd=function(t){return this.av.Td(t),this.fv[t]||"not-current"},mu.prototype.Yd=function(t,e,n){this.fv[t]=e},mu.prototype.Kd=function(t){this.av.Ed(t)},mu.prototype.Hd=function(t){return this.av.activeTargetIds.has(t)},mu.prototype.Jd=function(t){delete this.fv[t]},mu.prototype.Ld=function(){return this.av.activeTargetIds},mu.prototype.qd=function(t){return this.av.activeTargetIds.has(t)},mu.prototype.start=function(){return this.av=new ou,Promise.resolve()},mu.prototype.Lo=function(t,e,n){},mu.prototype.$d=function(t){},mu.prototype.shutdown=function(){},mu.prototype.Br=function(t){},mu),yu=(Object.defineProperty(gu.prototype,"mv",{get:function(){return this.lv},enumerable:!0,configurable:!0}),gu.prototype.pv=function(t,e){var a=this,u=e?e.gv:new Or,c=e?e.wv:this.wv,h=e?e.Ii:this.Ii,l=c,f=!1,p=this.query.ii()&&c.size===this.query.limit?c.last():null,d=this.query.ei()&&c.size===this.query.limit?c.first():null;if(t.pt(function(t,e){var n=c.get(t),r=e instanceof nn?e:null;r&&(y(t.isEqual(r.key),"Mismatching keys found in document changes: "+t+" != "+r.key),r=a.query.matches(r)?r:null);var i=!!n&&a.Ii.has(n.key),o=!!r&&(r.en||a.Ii.has(r.key)&&r.hasCommittedMutations),s=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),s=!0):a.bv(n,r)||(u.track({type:2,doc:r}),s=!0,(p&&0<a.query.Xn(r,p)||d&&a.query.Xn(r,d)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),s=!0):n&&!r&&(u.track({type:1,doc:n}),s=!0,(p||d)&&(f=!0)),s&&(h=r?(l=l.add(r),o?h.add(t):h.delete(t)):(l=l.delete(t),h.delete(t)))}),this.query.ii()||this.query.ei())for(;l.size>this.query.limit;){var n=this.query.ii()?l.last():l.first();l=l.delete(n.key),h=h.delete(n.key),u.track({type:1,doc:n})}return y(!f||!e,"View was refilled using docs that themselves needed refilling."),{wv:l,gv:u,Pa:f,Ii:h}},gu.prototype.bv=function(t,e){return t.en&&e.hasCommittedMutations&&!e.en},gu.prototype.es=function(t,e,n){var o=this;y(!t.Pa,"Cannot apply changes that need a refill");var r=this.wv;this.wv=t.wv,this.Ii=t.Ii;var i=t.gv.yi();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.query.Xn(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return b("Unknown ChangeType: "+t)}}var r,i}),this.yv(n);var s=e?this._v():[],a=0===this.vv.size&&this.Ni?1:0,u=a!==this.dv;return this.dv=a,0!==i.length||u?{snapshot:new Dr(this.query,t.wv,r,i,t.Ii,0==a,u,!1),Iv:s}:{Iv:s}},gu.prototype.Tv=function(t){return this.Ni&&"Offline"===t?(this.Ni=!1,this.es({wv:this.wv,gv:new Or,Ii:this.Ii,Pa:!1},!1)):{Iv:[]}},gu.prototype.Ev=function(t){return!this.lv.has(t)&&!!this.wv.has(t)&&!this.wv.get(t).en},gu.prototype.yv=function(t){var e=this;t&&(t.Oi.forEach(function(t){return e.lv=e.lv.add(t)}),t.Fi.forEach(function(t){return y(e.lv.has(t),"Modified document "+t+" not found in view.")}),t.Vi.forEach(function(t){return e.lv=e.lv.delete(t)}),this.Ni=t.Ni)},gu.prototype._v=function(){var e=this;if(!this.Ni)return[];var n=this.vv;this.vv=Er(),this.wv.forEach(function(t){e.Ev(t.key)&&(e.vv=e.vv.add(t.key))});var r=[];return n.forEach(function(t){e.vv.has(t)||r.push(new du(t))}),this.vv.forEach(function(t){n.has(t)||r.push(new pu(t))}),r},gu.prototype.Dv=function(t){this.lv=t.mh,this.vv=Er();var e=this.pv(t.documents);return this.es(e,!0)},gu.prototype.Sv=function(){return Dr.Di(this.query,this.wv,this.Ii,0===this.dv)},gu);function gu(t,e){this.query=t,this.lv=e,this.dv=null,this.Ni=!1,this.vv=Er(),this.Ii=Er(),this.wv=new Nr(t.Xn.bind(t))}function mu(){this.av=new ou,this.fv={},this.rd=null,this.El=null,this.jr=null}function _u(t,e,n){this.query=t,this.targetId=e,this.view=n}function bu(t){this.key=t,this.Ov=!1}function wu(){this.aw=null,this.targetId=0,this.listeners=[]}function Eu(){}var Tu=(Mu.prototype.run=function(){this.Av()},Mu.prototype.Av=function(){var t=this;this.vf.hf(function(){return v.__awaiter(t,void 0,void 0,function(){var e,n,r=this;return v.__generator(this,function(t){return e=this.Rv.gd(),(n=this.Pv(e))&&n.then(function(t){r.Qr.$r(function(){return e.commit().then(function(){r.Kr.resolve(t)}).catch(function(t){r.kv(t)})})}).catch(function(t){r.kv(t)}),[2]})})})},Mu.prototype.Pv=function(t){try{var e=this.updateFunction(t);return!wn(e)&&e.catch&&e.then?e:(this.Kr.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Kr.reject(t),null}},Mu.prototype.kv=function(t){var e=this;0<this.Cv&&this.Nv(t)?(--this.Cv,this.Qr.$r(function(){return e.Av(),Promise.resolve()})):this.Kr.reject(t)},Mu.prototype.Nv=function(t){if("FirebaseError"!==t.name)return!1;var e=t.code;return"aborted"===e||"failed-precondition"===e||!fr(e)},Mu),Iu=(Object.defineProperty(Lu.prototype,"Gv",{get:function(){return!0===this.isPrimary},enumerable:!0,configurable:!0}),Lu.prototype.subscribe=function(t){y(null!==t,"SyncEngine listener cannot be null"),y(null===this.Vv,"SyncEngine already has a subscriber."),this.Vv=t},Lu.prototype.listen=function(s){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return v.__generator(this,function(t){switch(t.label){case 0:return this.Wv("listen()"),(r=this.Uv.get(s))?(e=r.targetId,this.Fv.Wd(e),n=r.view.Sv(),[3,4]):[3,1];case 1:return[4,this.zh.hh(s.Yn())];case 2:return i=t.sent(),o=this.Fv.Wd(i.targetId),e=i.targetId,[4,this.zv(s,e,"current"===o)];case 3:n=t.sent(),this.isPrimary&&this.Rv.listen(i),t.label=4;case 4:return this.Vv.kf([n]),[2,e]}})})},Lu.prototype.zv=function(a,u,c){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s;return v.__generator(this,function(t){switch(t.label){case 0:return[4,this.zh.vh(a,!0)];case 1:return e=t.sent(),n=new yu(a,e.mh),r=n.pv(e.documents),i=xr.ki(u,c&&"Offline"!==this.onlineState),y(0===(o=n.es(r,!0===this.isPrimary,i)).Iv.length,"View returned limbo docs before target ack from the server."),y(!!o.snapshot,"applyChanges for new view should always return a snapshot"),s=new _u(a,u,n),this.Uv.set(a,s),this.xv[u]||(this.xv[u]=[]),this.xv[u].push(a),[2,o.snapshot]}})})},Lu.prototype.Kv=function(r){return v.__awaiter(this,void 0,void 0,function(){var e,n;return v.__generator(this,function(t){switch(t.label){case 0:return[4,this.zh.vh(r.query,!0)];case 1:return e=t.sent(),n=r.view.Dv(e),this.isPrimary&&this.Hv(r.targetId,n.Iv),[2,n]}})})},Lu.prototype.nd=function(i){return v.__awaiter(this,void 0,void 0,function(){var e,n,r=this;return v.__generator(this,function(t){switch(t.label){case 0:return this.Wv("unlisten()"),y(!!(e=this.Uv.get(i)),"Trying to unlisten on query not found:"+i),1<(n=this.xv[e.targetId]).length?(this.xv[e.targetId]=n.filter(function(t){return!t.isEqual(i)}),this.Uv.delete(i),[2]):this.isPrimary?(this.Fv.Kd(e.targetId),this.Fv.qd(e.targetId)?[3,2]:[4,this.zh.dh(e.targetId,!1).then(function(){r.Fv.Jd(e.targetId),r.Rv.nd(e.targetId),r.Jv(e.targetId)}).catch(ao)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return this.Jv(e.targetId),[4,this.zh.dh(e.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})},Lu.prototype.write=function(n,r){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return this.Wv("write()"),[4,this.zh.Qo(n)];case 1:return e=t.sent(),this.Fv.Bd(e.batchId),this.Yv(e.batchId,r),[4,this.Xv(e.Ku)];case 2:return t.sent(),[4,this.Rv.Xl()];case 3:return t.sent(),[2]}})})},Lu.prototype.runTransaction=function(t,e,n){new Tu(t,this.Rv,e,n).run()},Lu.prototype.Yo=function(n){return v.__awaiter(this,void 0,void 0,function(){var e,r=this;return v.__generator(this,function(t){switch(t.label){case 0:this.Wv("applyRemoteEvent()"),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.zh.Yo(n)];case 2:return e=t.sent(),W(n.Si,function(t,e){var n=r.Lv[Number(t)];n&&(y(e.Oi.size+e.Fi.size+e.Vi.size<=1,"Limbo resolution for single document contains multiple changes."),0<e.Oi.size?n.Ov=!0:0<e.Fi.size?y(n.Ov,"Received change for limbo target document without add."):0<e.Vi.size&&(y(n.Ov,"Received remove for limbo target document without add."),n.Ov=!1))}),[4,this.Xv(e,n)];case 3:return t.sent(),[3,6];case 4:return[4,ao(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},Lu.prototype.Tv=function(r,t){if(this.isPrimary&&0===t||!this.isPrimary&&1===t){this.Wv("applyOnlineStateChange()");var i=[];this.Uv.forEach(function(t,e){var n=e.view.Tv(r);y(0===n.Iv.length,"OnlineState should not affect limbo documents."),n.snapshot&&i.push(n.snapshot)}),this.Vv.$v(r),this.Vv.kf(i),this.onlineState=r,this.isPrimary&&this.Fv.$d(r)}},Lu.prototype.od=function(a,u){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s=this;return v.__generator(this,function(t){switch(t.label){case 0:return this.Wv("rejectListens()"),this.Fv.Yd(a,"rejected",u),e=this.Lv[a],(n=e&&e.key)?(this.jv=this.jv.remove(n),delete this.Lv[a],r=(r=new _t(mt.G)).lt(n,new rn(n,pt.q())),i=Er().add(n),o=new kr(pt.MIN,{},new Pt(m),r,i),[2,this.Yo(o)]):[3,1];case 1:return[4,this.zh.dh(a,!1).then(function(){return s.Jv(a,u)}).catch(ao)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},Lu.prototype.ov=function(n,r,i){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:return this.Wv("applyBatchState()"),[4,this.zh.Go(n)];case 1:return null===(e=t.sent())?(d("SyncEngine","Cannot apply mutation batch with id: "+n),[2]):"pending"!==r?[3,3]:[4,this.Rv.Xl()];case 2:return t.sent(),[3,4];case 3:"acknowledged"===r||"rejected"===r?(this.Zv(n,i||null),this.zh.bh(n)):b("Unknown batchState: "+r),t.label=4;case 4:return[4,this.Xv(e)];case 5:return t.sent(),[2]}})})},Lu.prototype.vd=function(r){return v.__awaiter(this,void 0,void 0,function(){var e,n;return v.__generator(this,function(t){switch(t.label){case 0:this.Wv("applySuccessfulWrite()"),e=r.batch.batchId,this.Zv(e,null),this.tw(e),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.zh.Os(r)];case 2:return n=t.sent(),this.Fv.Qd(e,"acknowledged"),[4,this.Xv(n)];case 3:return t.sent(),[3,6];case 4:return[4,ao(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},Lu.prototype.pd=function(n,r){return v.__awaiter(this,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:this.Wv("rejectFailedWrite()"),this.Zv(n,r),this.tw(n),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this.zh.Ho(n)];case 2:return e=t.sent(),this.Fv.Qd(n,"rejected",r),[4,this.Xv(e)];case 3:return t.sent(),[3,6];case 4:return[4,ao(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})},Lu.prototype.nw=function(r){return v.__awaiter(this,void 0,void 0,function(){var e,n;return v.__generator(this,function(t){switch(t.label){case 0:return this.Rv.jl()||d("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),[4,this.zh.Gs()];case 1:return-1===(e=t.sent())?r.resolve():((n=this.Mv.get(e)||[]).push(r),this.Mv.set(e,n)),[2]}})})},Lu.prototype.tw=function(t){(this.Mv.get(t)||[]).forEach(function(t){t.resolve()}),this.Mv.delete(t)},Lu.prototype.iw=function(e){this.Mv.forEach(function(t){t.forEach(function(t){t.reject(new N(A.CANCELLED,e))})}),this.Mv.clear()},Lu.prototype.Yv=function(t,e){var n=this.Bv[this.currentUser.v()];n=(n=n||new _t(m)).lt(t,e),this.Bv[this.currentUser.v()]=n},Lu.prototype.Zv=function(t,e){var n=this.Bv[this.currentUser.v()];if(n){var r=n.get(t);r&&(y(t===n.vt(),"Mutation callbacks processed out-of-order?"),e?r.reject(e):r.resolve(),n=n.remove(t)),this.Bv[this.currentUser.v()]=n}},Lu.prototype.Jv=function(t,e){var n=this;void 0===e&&(e=null),this.Fv.Kd(t),y(this.xv[t]&&0!==this.xv[t].length,"There are no queries mapped to target id "+t);for(var r=0,i=this.xv[t];r<i.length;r++){var o=i[r];this.Uv.delete(o),e&&this.Vv.ew(o,e)}if(delete this.xv[t],this.isPrimary){var s=this.qv.Nu(t);this.qv.Pu(t),s.forEach(function(t){n.qv.Ou(t)||n.rw(t)})}},Lu.prototype.rw=function(t){var e=this.jv.get(t);null!==e&&(this.Rv.nd(e),this.jv=this.jv.remove(t),delete this.Lv[e])},Lu.prototype.Hv=function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n];i instanceof pu?(this.qv.Du(i.key,t),this.uw(i)):i instanceof du?(d("SyncEngine","Document no longer in limbo: "+i.key),this.qv.Ru(i.key,t),this.qv.Ou(i.key)||this.rw(i.key)):b("Unknown limbo change: "+JSON.stringify(i))}},Lu.prototype.uw=function(t){var e=t.key;if(!this.jv.get(e)){d("SyncEngine","New document in limbo: "+e);var n=this.Qv.next(),r=kn.jn(e.path);this.Lv[n]=new bu(e),this.Rv.listen(new ur(r.Yn(),n,2,ai.Mr)),this.jv=this.jv.lt(e,n)}},Lu.prototype.sw=function(){return this.jv},Lu.prototype.Xv=function(r,u){return v.__awaiter(this,void 0,void 0,function(){var o,s,e,a=this;return v.__generator(this,function(t){switch(t.label){case 0:return o=[],s=[],e=[],this.Uv.forEach(function(t,i){e.push(Promise.resolve().then(function(){var n=i.view.pv(r);return n.Pa?a.zh.vh(i.query,!1).then(function(t){var e=t.documents;return i.view.pv(e,n)}):n}).then(function(t){var e=u&&u.Si[i.targetId],n=i.view.es(t,!0===a.isPrimary,e);if(a.Hv(i.targetId,n.Iv),n.snapshot){a.isPrimary&&a.Fv.Yd(i.targetId,n.snapshot.fromCache?"not-current":"current"),o.push(n.snapshot);var r=eo.Io(i.targetId,n.snapshot);s.push(r)}}))}),[4,Promise.all(e)];case 1:return t.sent(),this.Vv.kf(o),[4,this.zh.uh(s)];case 2:return t.sent(),[2]}})})},Lu.prototype.Wv=function(t){y(null!==this.Vv,"Trying to call "+t+" before calling subscribe().")},Lu.prototype.bd=function(r){return v.__awaiter(this,void 0,void 0,function(){var e,n;return v.__generator(this,function(t){switch(t.label){case 0:return e=!this.currentUser.isEqual(r),this.currentUser=r,e?(this.iw("'waitForPendingWrites' promise is rejected due to a user change."),[4,this.zh.Lo(r)]):[3,3];case 1:return n=t.sent(),this.Fv.Lo(r,n.Bo,n.Mo),[4,this.Xv(n.qo)];case 2:t.sent(),t.label=3;case 3:return[4,this.Rv.bd()];case 4:return t.sent(),[2]}})})},Lu.prototype.yd=function(u){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,a=this;return v.__generator(this,function(t){switch(t.label){case 0:return!0!==u||!0===this.isPrimary?[3,3]:(this.isPrimary=!0,[4,this.Rv.yd(!0)]);case 1:return t.sent(),o=this.Fv.Ld(),[4,this.ow(o.tt())];case 2:for(e=t.sent(),n=0,r=e;n<r.length;n++)i=r[n],this.Rv.listen(i);return[3,7];case 3:return!1!==u||!1===this.isPrimary?[3,7]:(this.isPrimary=!1,o=[],s=Promise.resolve(),H(this.xv,function(t,e){a.Fv.Hd(t)?o.push(t):s=s.then(function(){return a.Jv(t),a.zh.dh(t,!0)}),a.Rv.nd(t)}),[4,s]);case 4:return t.sent(),[4,this.ow(o)];case 5:return t.sent(),this.hw(),[4,this.Rv.yd(!1)];case 6:t.sent(),t.label=7;case 7:return[2]}})})},Lu.prototype.hw=function(){var e=this;H(this.Lv,function(t){e.Rv.nd(t)}),this.qv.ku(),this.Lv=[],this.jv=new _t(mt.G)},Lu.prototype.ow=function(d){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h,l,f,p;return v.__generator(this,function(t){switch(t.label){case 0:e=[],n=[],r=0,i=d,t.label=1;case 1:return r<i.length?(o=i[r],s=void 0,(a=this.xv[o])&&0!==a.length?[4,this.zh.dh(o,!0)]:[3,8]):[3,14];case 2:return t.sent(),[4,this.zh.hh(a[0].Yn())];case 3:s=t.sent(),u=0,c=a,t.label=4;case 4:return u<c.length?(h=c[u],y(!!(l=this.Uv.get(h)),"No query view found for "+h),[4,this.Kv(l)]):[3,7];case 5:(f=t.sent()).snapshot&&n.push(f.snapshot),t.label=6;case 6:return u++,[3,4];case 7:return[3,12];case 8:return y(!0===this.isPrimary,"A secondary tab should never have an active target without an active query."),[4,this.zh.Th(o)];case 9:return y(!!(p=t.sent()),"Target for id "+o+" not found"),[4,this.zh.hh(p)];case 10:return s=t.sent(),[4,this.zv(this.cw(p),o,!1)];case 11:t.sent(),t.label=12;case 12:e.push(s),t.label=13;case 13:return r++,[3,1];case 14:return this.Vv.kf(n),[2,e]}})})},Lu.prototype.cw=function(t){return new kn(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)},Lu.prototype.gh=function(){return this.zh.gh()},Lu.prototype.hv=function(r,i,o){return v.__awaiter(this,void 0,void 0,function(){var e,n;return v.__generator(this,function(t){switch(t.label){case 0:if(this.isPrimary)return d("SyncEngine","Ignoring unexpected query state notification."),[2];if(!this.xv[r])return[3,7];switch(i){case"current":case"not-current":return[3,1];case"rejected":return[3,4]}return[3,6];case 1:return[4,this.zh.Eh()];case 2:return e=t.sent(),n=kr.Pi(r,"current"===i),[4,this.Xv(e,n)];case 3:return t.sent(),[3,7];case 4:return[4,this.zh.dh(r,!0)];case 5:return t.sent(),this.Jv(r,o),[3,7];case 6:b("Unexpected target state: "+i),t.label=7;case 7:return[2]}})})},Lu.prototype.cv=function(l,f){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s,a,u,c,h=this;return v.__generator(this,function(t){switch(t.label){case 0:if(!this.isPrimary)return[2];e=0,n=l,t.label=1;case 1:return e<n.length?(c=n[e],y(!this.xv[c],"Trying to add an already active target"),[4,this.zh.Th(c)]):[3,6];case 2:return y(!!(r=t.sent()),"Query data for active target "+c+" not found"),[4,this.zh.hh(r)];case 3:return i=t.sent(),[4,this.zv(this.cw(r),i.targetId,!1)];case 4:t.sent(),this.Rv.listen(i),t.label=5;case 5:return e++,[3,1];case 6:o=function(e){return v.__generator(this,function(t){switch(t.label){case 0:return s.xv[e]?[4,s.zh.dh(e,!1).then(function(){h.Rv.nd(e),h.Jv(e)}).catch(ao)]:[2,"continue"];case 1:return t.sent(),[2]}})},s=this,a=0,u=f,t.label=7;case 7:return a<u.length?(c=u[a],[5,o(c)]):[3,10];case 8:t.sent(),t.label=9;case 9:return a++,[3,7];case 10:return[2]}})})},Lu.prototype.enableNetwork=function(){return this.zh.yh(!0),this.Rv.enableNetwork()},Lu.prototype.disableNetwork=function(){return this.zh.yh(!1),this.Rv.disableNetwork()},Lu.prototype.be=function(t){var e=this.Lv[t];if(e&&e.Ov)return Er().add(e.key);var n=Er(),r=this.xv[t];if(!r)return n;for(var i=0,o=r;i<o.length;i++){var s=o[i],a=this.Uv.get(s);y(!!a,"No query view found for "+s),n=n.Mt(a.view.mv)}return n},Lu),Su=(Pu.prototype.listen=function(t){var e=t.query,n=!1,r=this.fw.get(e);return r||(n=!0,r=new wu,this.fw.set(e,r)),r.listeners.push(t),y(!t.Tv(this.onlineState),"applyOnlineStateChange() shouldn't raise an event for brand-new listeners."),r.aw&&t.dw(r.aw)&&this.vw(),n?this.rd.listen(e).then(function(t){return r.targetId=t}):Promise.resolve(r.targetId)},Pu.prototype.nd=function(o){return v.__awaiter(this,void 0,void 0,function(){var e,n,r,i;return v.__generator(this,function(t){return e=o.query,n=!1,(r=this.fw.get(e))&&0<=(i=r.listeners.indexOf(o))&&(r.listeners.splice(i,1),n=0===r.listeners.length),n?(this.fw.delete(e),[2,this.rd.nd(e)]):[2]})})},Pu.prototype.kf=function(t){for(var e=!1,n=0,r=t;n<r.length;n++){var i=r[n],o=i.query,s=this.fw.get(o);if(s){for(var a=0,u=s.listeners;a<u.length;a++)u[a].dw(i)&&(e=!0);s.aw=i}}e&&this.vw()},Pu.prototype.ew=function(t,e){var n=this.fw.get(t);if(n)for(var r=0,i=n.listeners;r<i.length;r++)i[r].onError(e);this.fw.delete(t)},Pu.prototype.$v=function(i){this.onlineState=i;var o=!1;this.fw.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].Tv(i)&&(o=!0)}),o&&this.vw()},Pu.prototype.ww=function(t){this.lw.add(t),t.next()},Pu.prototype.mw=function(t){this.lw.delete(t)},Pu.prototype.vw=function(){this.lw.forEach(function(t){t.next()})},Pu),Cu=(Ru.prototype.dw=function(t){if(y(0<t.docChanges.length||t.Ti,"We got a new snapshot with no changes?"),!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Dr(t.query,t.docs,t._i,e,t.Ii,t.fromCache,t.Ti,!0)}var o=!1;return this.gw?this.yw(t)&&(this.pw.next(t),o=!0):this._w(t,this.onlineState)&&(this.Iw(t),o=!0),this.bw=t,o},Ru.prototype.onError=function(t){this.pw.error(t)},Ru.prototype.Tv=function(t){this.onlineState=t;var e=!1;return this.bw&&!this.gw&&this._w(this.bw,t)&&(this.Iw(this.bw),e=!0),e},Ru.prototype._w=function(t,e){if(y(!this.gw,"Determining whether to raise first event but already had first event"),!t.fromCache)return!0;var n="Offline"!==e;return this.options.Tw&&n?(y(t.fromCache,"Waiting for sync, but snapshot is not from cache"),!1):!t.docs.J()||"Offline"===e},Ru.prototype.yw=function(t){if(0<t.docChanges.length)return!0;var e=this.bw&&this.bw.hasPendingWrites!==t.hasPendingWrites;return!(!t.Ti&&!e)&&!0===this.options.includeMetadataChanges},Ru.prototype.Iw=function(t){y(!this.gw,"Trying to raise initial events for second time"),t=Dr.Di(t.query,t.docs,t.Ii,t.fromCache),this.gw=!0,this.pw.next(t)},Ru),Au=(xu.prototype.Xc=function(){return lo.jh(this.cacheSizeBytes)},xu),Nu=(ku.prototype.start=function(t){var n=this;this.Dw();var r=new ii,i=new ii,o=!1;return this.credentials.T(function(e){o?n.Qr.$r(function(){return n.bd(e)}):(o=!0,n.Sw(t,i,e).then(function(t){return n.Rw(e,t)}).then(r.resolve,r.reject))}),this.Qr.$r(function(){return r.promise}),i.promise},ku.prototype.enableNetwork=function(){var t=this;return this.Dw(),this.Qr.enqueue(function(){return t.rd.enableNetwork()})},ku.prototype.Sw=function(t,e,n){var r=this;return t instanceof Au?this.Cw(n,t).then(function(t){return e.resolve(),t}).catch(function(t){if(e.reject(t),!r.Aw(t))throw t;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+t),r.Pw()}):(e.resolve(),this.Pw())},ku.prototype.Aw=function(t){return t instanceof N?t.code===A.FAILED_PRECONDITION||t.code===A.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code},ku.prototype.Dw=function(){if(this.Qr.uu)throw new N(A.FAILED_PRECONDITION,"The client has already been terminated.")},ku.prototype.Cw=function(r,i){var t=this,o=Is.Ia(this.Ew),s=new Jr(this.Ew.s,{Te:!0});return Promise.resolve().then(function(){return v.__awaiter(t,void 0,void 0,function(){var e,n;return v.__generator(this,function(t){switch(t.label){case 0:if(i.synchronizeTabs&&!su.cs(this.platform))throw new N(A.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");return e=i.Xc(),this.Fv=i.synchronizeTabs?new su(this.Qr,this.platform,o,this.clientId,r):new vu,[4,Is.Yc({allowTabSynchronization:i.synchronizeTabs,persistenceKey:o,clientId:this.clientId,platform:this.platform,Lc:this.Qr,serializer:s,Xc:e,qc:this.Fv})];case 1:return n=t.sent(),[2,(this.persistence=n).As.Wh]}})})})},ku.prototype.Pw=function(){return this.persistence=Hs.Wa(this.clientId),this.Fv=new vu,Promise.resolve(null)},ku.prototype.Rw=function(c,h){var t=this;return d("FirestoreClient","Initializing. user=",c.uid),this.platform.kw(this.Ew).then(function(u){return v.__awaiter(t,void 0,void 0,function(){var e,n,r,i,o,s,a=this;return v.__generator(this,function(t){switch(t.label){case 0:return e=new xs,this.zh=new no(this.persistence,e,c),[4,this.zh.start()];case 1:return t.sent(),h&&(this.Nw=new fo(h,this.Qr,this.zh)),n=this.platform.Ow(),r=this.platform.Fw(this.Ew.s),i=new Xs(this.Qr,u,this.credentials,r),o=function(t){return a.rd.Tv(t,0)},s=function(t){return a.rd.Tv(t,1)},this.Rv=new Qa(this.zh,i,this.Qr,o,n),this.rd=new Iu(this.zh,this.Rv,this.Fv,c),this.Fv.El=s,this.Rv.rd=this.rd,this.Fv.rd=this.rd,this.Vw=new Su(this.rd),[4,this.Fv.start()];case 2:return t.sent(),[4,this.Rv.start()];case 3:return t.sent(),[4,this.persistence.ra(function(e){return v.__awaiter(a,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return[4,this.rd.yd(e)];case 1:return t.sent(),this.Nw&&(e&&!this.Nw.Co?this.Nw.start():e||this.Nw.stop()),[2]}})})})];case 4:return t.sent(),[4,this.persistence.ua(function(){return v.__awaiter(a,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return[4,this.terminate()];case 1:return t.sent(),[2]}})})})];case 5:return t.sent(),[2]}})})})},ku.prototype.bd=function(t){return this.Qr.du(),d("FirestoreClient","Credential Changed. Current user: "+t.uid),this.rd.bd(t)},ku.prototype.disableNetwork=function(){var t=this;return this.Dw(),this.Qr.enqueue(function(){return t.rd.disableNetwork()})},ku.prototype.terminate=function(){var t=this;return this.Qr.au(function(){return v.__awaiter(t,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.Nw&&this.Nw.stop(),[4,this.Rv.shutdown()];case 1:return t.sent(),[4,this.Fv.shutdown()];case 2:return t.sent(),[4,this.persistence.shutdown()];case 3:return t.sent(),this.credentials.D(),[2]}})})})},ku.prototype.waitForPendingWrites=function(){var t=this;this.Dw();var e=new ii;return this.Qr.$r(function(){return t.rd.nw(e)}),e.promise},ku.prototype.listen=function(t,e,n){var r=this;this.Dw();var i=new Cu(t,e,n);return this.Qr.$r(function(){return r.Vw.listen(i)}),i},ku.prototype.nd=function(t){var e=this;this.Uw||this.Qr.$r(function(){return e.Vw.nd(t)})},ku.prototype.xw=function(t){var e=this;return this.Dw(),this.Qr.enqueue(function(){return e.zh.oh(t)}).then(function(t){if(t instanceof nn)return t;if(t instanceof rn)return null;throw new N(A.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")})},ku.prototype.jw=function(i){var t=this;return this.Dw(),this.Qr.enqueue(function(){return v.__awaiter(t,void 0,void 0,function(){var e,n,r;return v.__generator(this,function(t){switch(t.label){case 0:return[4,this.zh.vh(i,!0)];case 1:return e=t.sent(),n=new yu(i,e.mh),r=n.pv(e.documents),[2,n.es(r,!1).snapshot]}})})})},ku.prototype.write=function(t){var e=this;this.Dw();var n=new ii;return this.Qr.$r(function(){return e.rd.write(t,n)}),n.promise},ku.prototype.s=function(){return this.Ew.s},ku.prototype.ww=function(t){var e=this;this.Dw(),this.Qr.$r(function(){return e.Vw.ww(t),Promise.resolve()})},ku.prototype.mw=function(t){this.Uw||this.Vw.mw(t)},Object.defineProperty(ku.prototype,"Uw",{get:function(){return this.Qr.uu},enumerable:!0,configurable:!0}),ku.prototype.transaction=function(t){var e=this;this.Dw();var n=new ii;return this.Qr.$r(function(){return e.rd.runTransaction(e.Qr,t,n),Promise.resolve()}),n.promise},ku),Ou=(Du.prototype.next=function(t){this.Lw(this.observer.next,t)},Du.prototype.error=function(t){this.Lw(this.observer.error,t)},Du.prototype.qw=function(){this.muted=!0},Du.prototype.Lw=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},Du);function Du(t){this.observer=t,this.muted=!1}function ku(t,e,n,r){this.platform=t,this.Ew=e,this.credentials=n,this.Qr=r,this.clientId=h.u()}function xu(t,e){this.cacheSizeBytes=t,this.synchronizeTabs=e}function Ru(t,e,n){this.query=t,this.pw=e,this.gw=!1,this.bw=null,this.onlineState="Unknown",this.options=n||{}}function Pu(t){this.rd=t,this.fw=new Ei(function(t){return t.canonicalId()}),this.onlineState="Unknown",this.lw=new Set,this.rd.subscribe(this)}function Lu(t,e,n,r){this.zh=t,this.Rv=e,this.Fv=n,this.currentUser=r,this.Vv=null,this.Uv=new Ei(function(t){return t.canonicalId()}),this.xv={},this.jv=new _t(mt.G),this.Lv={},this.qv=new bi,this.Bv={},this.Mv=new Map,this.Qv=Zi.uo(),this.isPrimary=void 0,this.onlineState="Unknown"}function Mu(t,e,n,r){this.Qr=t,this.Rv=e,this.updateFunction=n,this.Kr=r,this.Cv=5,this.vf=new zs(this.Qr,"retry_transaction")}function Fu(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var ju,Uu=lo.Bh,qu=(oc.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.timestampsInSnapshots===t.timestampsInSnapshots&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.forceLongPolling===t.forceLongPolling},oc),Vu=(ic.prototype.settings=function(t){if(z("Firestore.settings",arguments,1),Y("Firestore.settings","object",1,t),q(t,"persistence"))throw new N(A.INVALID_ARGUMENT,'"persistence" is now specified with a separate call to firestore.enablePersistence().');var e=new qu(t);if(this.Gw&&!this.Jw.isEqual(e))throw new N(A.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only call settings() before calling any other methods on a Firestore object.");void 0!==(this.Jw=e).credentials&&(this.Hw=function(t){if(!t)return new O;switch(t.type){case"gapi":var e=t.O;return y(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty),"unexpected gapi interface"),new x(e,t.k||"0");case"provider":return t.O;default:throw new N(A.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(e.credentials))},ic.prototype.enableNetwork=function(){return this.Qw(),this.Gw.enableNetwork()},ic.prototype.disableNetwork=function(){return this.Qw(),this.Gw.disableNetwork()},ic.prototype.enablePersistence=function(t){if(this.Gw)throw new N(A.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only call enablePersistence() before calling any other methods on a Firestore object.");var e=!1;return t&&(void 0!==t.experimentalTabSynchronization&&u("The 'experimentalTabSynchronization' setting has been renamed to 'synchronizeTabs'. In a future release, the setting will be removed and it is recommended that you update your firestore.enablePersistence() call to use 'synchronizeTabs'."),e=V(void 0!==t.synchronizeTabs?t.synchronizeTabs:t.experimentalTabSynchronization,!1)),this.$w(new Au(this.Jw.cacheSizeBytes,e))},ic.prototype.clearPersistence=function(){var t=this,n=Is.Ia(this.Zw()),r=new ii;return this.Mw.su(function(){return v.__awaiter(t,void 0,void 0,function(){var e;return v.__generator(this,function(t){switch(t.label){case 0:if(t.trys.push([0,2,,3]),void 0!==this.Gw&&!this.Gw.Uw)throw new N(A.FAILED_PRECONDITION,"Persistence cannot be cleared after this Firestore instance is initialized.");return[4,Is.clearPersistence(n)];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise},ic.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.INTERNAL.delete()},Object.defineProperty(ic.prototype,"tm",{get:function(){return this.Qw(),this.Gw.Uw},enumerable:!0,configurable:!0}),ic.prototype.waitForPendingWrites=function(){return this.Qw(),this.Gw.waitForPendingWrites()},ic.prototype.onSnapshotsInSync=function(t){if(this.Qw(),Fu(t))return this.nm(t);Y("Firestore.onSnapshotsInSync","function",1,t);var e={next:t};return this.nm(e)},ic.prototype.nm=function(t){var e=this,n=new Ou({next:function(){t.next&&t.next()},error:function(t){throw b("Uncaught Error in onSnapshotsInSync")}});return this.Gw.ww(n),function(){n.qw(),e.Gw.mw(n)}},ic.prototype.Qw=function(){return this.Gw||this.$w(new Eu),this.Gw},ic.prototype.Zw=function(){return new E(this.Ww,this.Kw,this.Jw.host,this.Jw.ssl,this.Jw.forceLongPolling)},ic.prototype.$w=function(t){y(!!this.Jw.host,"FirestoreSettings.host is not set"),y(!this.Gw,"configureClient() called multiple times");var e=this.Zw();return this.Gw=new Nu($r.t(),e,this.Hw,this.Mw),this.Gw.start(t)},ic.prototype.Xw=function(r){return new ja(function(t){if(t instanceof Bu){var e=r,n=t.firestore.Ww;if(!n.isEqual(e))throw new N(A.INVALID_ARGUMENT,"Document reference is for database "+n.projectId+"/"+n.database+" but should be for database "+e.projectId+"/"+e.database);return new Fa(r,t.im)}return t})},ic.zw=function(t){var e=t.options;if(!q(e,"projectId"))throw new N(A.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');var n=e.projectId;if(!n||"string"!=typeof n)throw new N(A.INVALID_ARGUMENT,"projectId must be a string in FirebaseApp.options");return new S(n)},Object.defineProperty(ic.prototype,"app",{get:function(){if(!this.Bw)throw new N(A.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.Bw},enumerable:!0,configurable:!0}),ic.prototype.collection=function(t){return z("Firestore.collection",arguments,1),Y("Firestore.collection","non-empty string",1,t),this.Qw(),new ac(vt.it(t),this)},ic.prototype.doc=function(t){return z("Firestore.doc",arguments,1),Y("Firestore.doc","non-empty string",1,t),this.Qw(),Bu.em(vt.it(t),this)},ic.prototype.collectionGroup=function(t){if(z("Firestore.collectionGroup",arguments,1),Y("Firestore.collectionGroup","non-empty string",1,t),0<=t.indexOf("/"))throw new N(A.INVALID_ARGUMENT,"Invalid collection ID '"+t+"' passed to function Firestore.collectionGroup(). Collection IDs must not contain '/'.");return this.Qw(),new Qu(new kn(vt.et,t),this)},ic.prototype.runTransaction=function(e){var n=this;return z("Firestore.runTransaction",arguments,1),Y("Firestore.runTransaction","function",1,e),this.Qw().transaction(function(t){return e(new Hu(n,t))})},ic.prototype.batch=function(){return this.Qw(),new Wu(this)},Object.defineProperty(ic,"logLevel",{get:function(){switch(p()){case 0:return"debug";case 1:return"error";case 2:return"silent";default:return b("Unknown log level: "+p())}},enumerable:!0,configurable:!0}),ic.setLogLevel=function(t){switch(z("Firestore.setLogLevel",arguments,1),Y("Firestore.setLogLevel","non-empty string",1,t),t){case"debug":i(0);break;case"error":i(1);break;case"silent":i(2);break;default:throw new N(A.INVALID_ARGUMENT,"Invalid log level: "+t)}},ic.prototype.rm=function(){return this.Jw.timestampsInSnapshots},ic),Hu=(rc.prototype.get=function(t){var n=this;z("Transaction.get",arguments,1);var r=fc("Transaction.get",t,this.um);return this.sm.lookup([r.im]).then(function(t){if(!t||1!==t.length)return b("Mismatch in docs returned from document lookup.");var e=t[0];if(e instanceof rn)return new zu(n.um,r.im,null,!1,!1,r.om);if(e instanceof nn)return new zu(n.um,r.im,e,!1,!1,r.om);throw b("BatchGetDocumentsRequest returned unexpected document type: "+e.constructor.name)})},rc.prototype.set=function(t,e,n){Q("Transaction.set",arguments,2,3);var r=fc("Transaction.set",t,this.um);n=cc("Transaction.set",n);var i=pc(r.om,e,"Transaction.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.um.Yw.sl(s,o,n.mergeFields):this.um.Yw.rl(s,o);return this.sm.set(r.im,a),this},rc.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return i="string"==typeof e||e instanceof Js?(K("Transaction.update",arguments,3),r=fc("Transaction.update",t,this.um),this.um.Yw.cl("Transaction.update",e,n,o)):(z("Transaction.update",arguments,2),r=fc("Transaction.update",t,this.um),this.um.Yw.ol("Transaction.update",e)),this.sm.update(r.im,i),this},rc.prototype.delete=function(t){z("Transaction.delete",arguments,1);var e=fc("Transaction.delete",t,this.um);return this.sm.delete(e.im),this},rc),Wu=(nc.prototype.set=function(t,e,n){Q("WriteBatch.set",arguments,2,3),this.am();var r=fc("WriteBatch.set",t,this.um);n=cc("WriteBatch.set",n);var i=pc(r.om,e,"WriteBatch.set"),o=i[0],s=i[1],a=n.merge||n.mergeFields?this.um.Yw.sl(s,o,n.mergeFields):this.um.Yw.rl(s,o);return this.hm=this.hm.concat(a.Hf(r.im,ie.NONE)),this},nc.prototype.update=function(t,e,n){for(var r,i,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];return this.am(),i="string"==typeof e||e instanceof Js?(K("WriteBatch.update",arguments,3),r=fc("WriteBatch.update",t,this.um),this.um.Yw.cl("WriteBatch.update",e,n,o)):(z("WriteBatch.update",arguments,2),r=fc("WriteBatch.update",t,this.um),this.um.Yw.ol("WriteBatch.update",e)),this.hm=this.hm.concat(i.Hf(r.im,ie.exists(!0))),this},nc.prototype.delete=function(t){z("WriteBatch.delete",arguments,1),this.am();var e=fc("WriteBatch.delete",t,this.um);return this.hm=this.hm.concat(new ce(e.im,ie.NONE)),this},nc.prototype.commit=function(){return v.__awaiter(this,void 0,void 0,function(){return v.__generator(this,function(t){return this.am(),this.cm=!0,0<this.hm.length?[2,this.um.Qw().write(this.hm)]:[2]})})},nc.prototype.am=function(){if(this.cm)throw new N(A.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},nc),Bu=(ec.em=function(t,e,n){if(t.length%2!=0)throw new N(A.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.nt()+" has "+t.length);return new ec(new mt(t),e,n)},Object.defineProperty(ec.prototype,"id",{get:function(){return this.im.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(ec.prototype,"parent",{get:function(){return new ac(this.im.path.H(),this.firestore,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(ec.prototype,"path",{get:function(){return this.im.path.nt()},enumerable:!0,configurable:!0}),ec.prototype.collection=function(t){if(z("DocumentReference.collection",arguments,1),Y("DocumentReference.collection","non-empty string",1,t),!t)throw new N(A.INVALID_ARGUMENT,"Must provide a non-empty collection name to collection()");var e=vt.it(t);return new ac(this.im.path.child(e),this.firestore)},ec.prototype.isEqual=function(t){if(!(t instanceof ec))throw ot("isEqual","DocumentReference",1,t);return this.firestore===t.firestore&&this.im.isEqual(t.im)&&this.om===t.om},ec.prototype.set=function(t,e){Q("DocumentReference.set",arguments,1,2),e=cc("DocumentReference.set",e);var n=pc(this.om,t,"DocumentReference.set"),r=n[0],i=n[1],o=e.merge||e.mergeFields?this.firestore.Yw.sl(i,r,e.mergeFields):this.firestore.Yw.rl(i,r);return this.Gw.write(o.Hf(this.im,ie.NONE))},ec.prototype.update=function(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];return n="string"==typeof t||t instanceof Js?(K("DocumentReference.update",arguments,2),this.firestore.Yw.cl("DocumentReference.update",t,e,r)):(z("DocumentReference.update",arguments,1),this.firestore.Yw.ol("DocumentReference.update",t)),this.Gw.write(n.Hf(this.im,ie.exists(!0)))},ec.prototype.delete=function(){return z("DocumentReference.delete",arguments,0),this.Gw.write([new ce(this.im,ie.NONE)])},ec.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Q("DocumentReference.onSnapshot",arguments,1,4);var n,r={includeMetadataChanges:!1},i=0;"object"!=typeof t[i]||Fu(t[i])||(it("DocumentReference.onSnapshot",r=t[i],["includeMetadataChanges"]),$("DocumentReference.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++);var o={includeMetadataChanges:r.includeMetadataChanges};return n=Fu(t[i])?t[i]:(Y("DocumentReference.onSnapshot","function",i,t[i]),X("DocumentReference.onSnapshot","function",i+1,t[i+1]),X("DocumentReference.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.fm(o,n)},ec.prototype.fm=function(t,n){var r=this,e=function(t){console.error("Uncaught Error in onSnapshot:",t)};n.error&&(e=n.error.bind(n));var i=new Ou({next:function(t){if(n.next){y(t.docs.size<=1,"Too many documents returned on a document query");var e=t.docs.get(r.im);n.next(new zu(r.firestore,r.im,e,t.fromCache,t.hasPendingWrites,r.om))}},error:e}),o=this.Gw.listen(kn.jn(this.im.path),i,t);return function(){i.qw(),r.Gw.nd(o)}},ec.prototype.get=function(n){var r=this;return Q("DocumentReference.get",arguments,0,1),lc("DocumentReference.get",n),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.Qw().xw(r.im).then(function(t){e(new zu(r.firestore,r.im,t,!0,t instanceof nn&&t.en,r.om))},t):r.lm(e,t,n)})},ec.prototype.lm=function(e,n,r){var i=this.fm({includeMetadataChanges:!0,Tw:!0},{next:function(t){i(),!t.exists&&t.metadata.fromCache?n(new N(A.UNAVAILABLE,"Failed to get document because the client is offline.")):t.exists&&t.metadata.fromCache&&r&&"server"===r.source?n(new N(A.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):e(t)},error:n})},ec.prototype.withConverter=function(t){return new ec(this.im,this.firestore,t)},ec),Gu=(tc.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},tc),zu=(Zu.prototype.data=function(t){if(Q("DocumentSnapshot.data",arguments,0,1),t=hc("DocumentSnapshot.data",t),this.dm){if(this.om){var e=new Ku(this.um,this.im,this.dm,this.vm,this.wm);return this.om.fromFirestore(e,t)}return this.mm(this.dm.data(),le.mn(t,this.um.rm()))}},Zu.prototype.get=function(t,e){if(Q("DocumentSnapshot.get",arguments,1,2),e=hc("DocumentSnapshot.get",e),this.dm){var n=this.dm.data().field(Wa("DocumentSnapshot.get",t));if(null!==n)return this.pm(n,le.mn(e,this.um.rm()))}},Object.defineProperty(Zu.prototype,"id",{get:function(){return this.im.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(Zu.prototype,"ref",{get:function(){return new Bu(this.im,this.um,this.om)},enumerable:!0,configurable:!0}),Object.defineProperty(Zu.prototype,"exists",{get:function(){return null!==this.dm},enumerable:!0,configurable:!0}),Object.defineProperty(Zu.prototype,"metadata",{get:function(){return new Gu(this.wm,this.vm)},enumerable:!0,configurable:!0}),Zu.prototype.isEqual=function(t){if(!(t instanceof Zu))throw ot("isEqual","DocumentSnapshot",1,t);return this.um===t.um&&this.vm===t.vm&&this.im.isEqual(t.im)&&(null===this.dm?null===t.dm:this.dm.isEqual(t.dm))&&this.om===t.om},Zu.prototype.mm=function(t,n){var r=this,i={};return t.forEach(function(t,e){i[t]=r.pm(e,n)}),i},Zu.prototype.pm=function(t,e){if(t instanceof $e)return this.mm(t,e);if(t instanceof tn)return this.gm(t,e);if(t instanceof Xe){var n=t.value(e),r=this.um.Qw().s();return t.s.isEqual(r)||u("Document "+this.im.path+" contains a document reference within a different database ("+t.s.projectId+"/"+t.s.database+") which is not supported. It will be treated as a reference in the current database ("+r.projectId+"/"+r.database+") instead."),new Bu(n,this.um,this.om)}return t.value(e)},Zu.prototype.gm=function(t,e){var n=this;return t.Ht.map(function(t){return n.pm(t,e)})},Zu),Ku=(ju=zu,v.__extends($u,ju),$u.prototype.data=function(t){var e=ju.prototype.data.call(this,t);return y(void 0!==e,"Document in a QueryDocumentSnapshot should exist"),e},$u),Qu=(Ju.prototype.where=function(t,e,n){var r;z("Query.where",arguments,3),rt("Query.where",3,n),function(t,e,n,r){if(!e.some(function(t){return t===r}))throw new N(A.INVALID_ARGUMENT,"Invalid value "+nt(r)+" provided to function "+t+"() for its "+at(n)+" argument. Acceptable values: "+e.join(", "))}("Query.where",["<","<=","==",">=",">","array-contains","in","array-contains-any"],2,e);var i=Wa("Query.where",t),o=xn.it(e);if(i.ut()){if(o===xn.ARRAY_CONTAINS||o===xn.ARRAY_CONTAINS_ANY)throw new N(A.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o.toString()+"' queries on FieldPath.documentId().");if(o===xn.IN){this.ym(n,o);for(var s=[],a=0,u=n;a<u.length;a++){var c=u[a];s.push(this._m(c))}r=new tn(s)}else r=this._m(n)}else o!==xn.IN&&o!==xn.ARRAY_CONTAINS_ANY||this.ym(n,o),r=this.firestore.Yw.al("Query.where",n,o===xn.IN);var h=Rn.create(i,o,r);return this.Im(h),new Ju(this.bm.Bn(h),this.firestore,this.om)},Ju.prototype.orderBy=function(t,e){var n;if(Q("Query.orderBy",arguments,1,2),X("Query.orderBy","non-empty string",2,e),void 0===e||"asc"===e)n=Un.ASCENDING;else{if("desc"!==e)throw new N(A.INVALID_ARGUMENT,"Function Query.orderBy() has unknown direction '"+e+"', expected 'asc' or 'desc'.");n=Un.DESCENDING}if(null!==this.bm.startAt)throw new N(A.INVALID_ARGUMENT,"Invalid query. You must not call Query.startAt() or Query.startAfter() before calling Query.orderBy().");if(null!==this.bm.endAt)throw new N(A.INVALID_ARGUMENT,"Invalid query. You must not call Query.endAt() or Query.endBefore() before calling Query.orderBy().");var r=Wa("Query.orderBy",t),i=new Vn(r,n);return this.Tm(i),new Ju(this.bm.Qn(i),this.firestore,this.om)},Ju.prototype.limit=function(t){return z("Query.limit",arguments,1),Y("Query.limit","number",1,t),st("Query.limit",1,t),new Ju(this.bm.Gn(t),this.firestore,this.om)},Ju.prototype.limitToLast=function(t){return z("Query.limitToLast",arguments,1),Y("Query.limitToLast","number",1,t),st("Query.limitToLast",1,t),new Ju(this.bm.Wn(t),this.firestore,this.om)},Ju.prototype.startAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];K("Query.startAt",arguments,1);var r=this.Em("Query.startAt",t,e,!0);return new Ju(this.bm.zn(r),this.firestore,this.om)},Ju.prototype.startAfter=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];K("Query.startAfter",arguments,1);var r=this.Em("Query.startAfter",t,e,!1);return new Ju(this.bm.zn(r),this.firestore,this.om)},Ju.prototype.endBefore=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];K("Query.endBefore",arguments,1);var r=this.Em("Query.endBefore",t,e,!0);return new Ju(this.bm.Kn(r),this.firestore,this.om)},Ju.prototype.endAt=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];K("Query.endAt",arguments,1);var r=this.Em("Query.endAt",t,e,!1);return new Ju(this.bm.Kn(r),this.firestore,this.om)},Ju.prototype.isEqual=function(t){if(!(t instanceof Ju))throw ot("isEqual","Query",1,t);return this.firestore===t.firestore&&this.bm.isEqual(t.bm)},Ju.prototype.withConverter=function(t){return new Ju(this.bm,this.firestore,t)},Ju.prototype.Em=function(t,e,n,r){if(rt(t,1,e),e instanceof zu){if(0<n.length)throw new N(A.INVALID_ARGUMENT,"Too many arguments provided to "+t+"().");var i=e;if(!i.exists)throw new N(A.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+t+"().");return this.Dm(t,i.dm,r)}var o=[e].concat(n);return this.Sm(t,o,r)},Ju.prototype.Dm=function(t,e,n){for(var r=[],i=0,o=this.bm.orderBy;i<o.length;i++){var s=o[i];if(s.field.ut())r.push(new Xe(this.firestore.Ww,e.key));else{var a=e.field(s.field);if(a instanceof Qe)throw new N(A.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+s.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){var u=s.field.nt();throw new N(A.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}r.push(a)}}return new qn(r,n)},Ju.prototype.Sm=function(t,e,n){var r=this.bm.On;if(e.length>r.length)throw new N(A.INVALID_ARGUMENT,"Too many arguments provided to "+t+"(). The number of arguments must be less than or equal to the number of Query.orderBy() clauses");for(var i=[],o=0;o<e.length;o++){var s=e[o];if(r[o].field.ut()){if("string"!=typeof s)throw new N(A.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+t+"(), but got a "+typeof s);if(!this.bm.ui()&&-1!==s.indexOf("/"))throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+t+"() must be a plain document ID, but '"+s+"' contains a slash.");var a=this.bm.path.child(vt.it(s));if(!mt.ht(a))throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+t+"() must result in a valid document path, but '"+a+"' is not because it contains an odd number of segments.");var u=new mt(a);i.push(new Xe(this.firestore.Ww,u))}else{var c=this.firestore.Yw.al(t,s);i.push(c)}}return new qn(i,n)},Ju.prototype.onSnapshot=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Q("Query.onSnapshot",arguments,1,4);var n,r={},i=0;return"object"!=typeof t[i]||Fu(t[i])||(it("Query.onSnapshot",r=t[i],["includeMetadataChanges"]),$("Query.onSnapshot","boolean","includeMetadataChanges",r.includeMetadataChanges),i++),n=Fu(t[i])?t[i]:(Y("Query.onSnapshot","function",i,t[i]),X("Query.onSnapshot","function",i+1,t[i+1]),X("Query.onSnapshot","function",i+2,t[i+2]),{next:t[i],error:t[i+1],complete:t[i+2]}),this.Rm(this.bm),this.fm(r,n)},Ju.prototype.fm=function(t,e){var n=this,r=function(t){console.error("Uncaught Error in onSnapshot:",t)};e.error&&(r=e.error.bind(e));var i=new Ou({next:function(t){e.next&&e.next(new Yu(n.firestore,n.bm,t,n.om))},error:r}),o=this.firestore.Qw(),s=o.listen(this.bm,i,t);return function(){i.qw(),o.nd(s)}},Ju.prototype.Rm=function(t){if(t.ei()&&0===t.On.length)throw new N(A.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")},Ju.prototype.get=function(n){var r=this;return Q("Query.get",arguments,0,1),lc("Query.get",n),this.Rm(this.bm),new Promise(function(e,t){n&&"cache"===n.source?r.firestore.Qw().jw(r.bm).then(function(t){e(new Yu(r.firestore,r.bm,t,r.om))},t):r.lm(e,t,n)})},Ju.prototype.lm=function(e,n,r){var i=this.fm({includeMetadataChanges:!0,Tw:!0},{next:function(t){i(),t.metadata.fromCache&&r&&"server"===r.source?n(new N(A.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):e(t)},error:n})},Ju.prototype._m=function(t){if("string"==typeof t){if(""===t)throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!this.bm.ui()&&-1!==t.indexOf("/"))throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+t+"' contains a '/' character.");var e=this.bm.path.child(vt.it(t));if(!mt.ht(e))throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return new Xe(this.firestore.Ww,new mt(e))}if(t instanceof Bu){var n=t;return new Xe(this.firestore.Ww,n.im)}throw new N(A.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+nt(t)+".")},Ju.prototype.ym=function(t,e){if(!Array.isArray(t)||0===t.length)throw new N(A.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new N(A.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.");if(0<=t.indexOf(null))throw new N(A.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'null' in the value array.");if(0<t.filter(function(t){return Number.isNaN(t)}).length)throw new N(A.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters cannot contain 'NaN' in the value array.")},Ju.prototype.Im=function(t){if(t instanceof Rn){var e=[xn.ARRAY_CONTAINS,xn.ARRAY_CONTAINS_ANY],n=[xn.IN,xn.ARRAY_CONTAINS_ANY],r=0<=e.indexOf(t.op),i=0<=n.indexOf(t.op);if(t.Mn()){var o=this.bm.Ln();if(null!==o&&!o.isEqual(t.field))throw new N(A.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+o.toString()+"' and '"+t.field.toString()+"'");var s=this.bm.qn();null!==s&&this.Cm(t.field,s)}else if(i||r){var a=null;if(i&&(a=this.bm.ri(n)),null===a&&r&&(a=this.bm.ri(e)),null!=a)throw a===t.op?new N(A.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+t.op.toString()+"' filter."):new N(A.INVALID_ARGUMENT,"Invalid query. You cannot use '"+t.op.toString()+"' filters with '"+a.toString()+"' filters.")}}},Ju.prototype.Tm=function(t){if(null===this.bm.qn()){var e=this.bm.Ln();null!==e&&this.Cm(e,t.field)}},Ju.prototype.Cm=function(t,e){if(!e.isEqual(t))throw new N(A.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+t.toString()+"' and so you must also use '"+t.toString()+"' as your first Query.orderBy(), but your first Query.orderBy() is on field '"+e.toString()+"' instead.")},Ju),Yu=(Object.defineProperty(Xu.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!0,configurable:!0}),Object.defineProperty(Xu.prototype,"empty",{get:function(){return this.Pm.docs.J()},enumerable:!0,configurable:!0}),Object.defineProperty(Xu.prototype,"size",{get:function(){return this.Pm.docs.size},enumerable:!0,configurable:!0}),Xu.prototype.forEach=function(e,n){var r=this;Q("QuerySnapshot.forEach",arguments,1,2),Y("QuerySnapshot.forEach","function",1,e),this.Pm.docs.forEach(function(t){e.call(n,r.Om(t))})},Object.defineProperty(Xu.prototype,"query",{get:function(){return new Qu(this.Am,this.um,this.om)},enumerable:!0,configurable:!0}),Xu.prototype.docChanges=function(t){t&&(it("QuerySnapshot.docChanges",t,["includeMetadataChanges"]),$("QuerySnapshot.docChanges","boolean","includeMetadataChanges",t.includeMetadataChanges));var e=!(!t||!t.includeMetadataChanges);if(e&&this.Pm.Ei)throw new N(A.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.km&&this.Nm===e||(this.km=function(i,e,o,s){if(o._i.J()){var n,r=0;return o.docChanges.map(function(t){var e=new Ku(i,t.doc.key,t.doc,o.fromCache,o.Ii.has(t.doc.key),s);return y(0===t.type,"Invalid event type for first snapshot"),y(!n||o.query.Xn(n,t.doc)<0,"Got added events in wrong order"),n=t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:r++}})}var a=o._i;return o.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new Ku(i,t.doc.key,t.doc,o.fromCache,o.Ii.has(t.doc.key),s),n=-1,r=-1;return 0!==t.type&&(y(0<=(n=a.indexOf(t.doc.key)),"Index for document not found"),a=a.delete(t.doc.key)),1!==t.type&&(r=(a=a.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return b("Unknown change type: "+t)}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this.um,e,this.Pm,this.om),this.Nm=e),this.km},Xu.prototype.isEqual=function(t){if(!(t instanceof Xu))throw ot("isEqual","QuerySnapshot",1,t);return this.um===t.um&&this.Am.isEqual(t.Am)&&this.Pm.isEqual(t.Pm)&&this.om===t.om},Xu.prototype.Om=function(t){return new Ku(this.um,t.key,t,this.metadata.fromCache,this.Pm.Ii.has(t.key),this.om)},Xu);function Xu(t,e,n,r){this.um=t,this.Am=e,this.Pm=n,this.om=r,this.km=null,this.Nm=null,this.metadata=new Gu(n.hasPendingWrites,n.fromCache)}function Ju(t,e,n){this.bm=t,this.firestore=e,this.om=n}function $u(){return null!==ju&&ju.apply(this,arguments)||this}function Zu(t,e,n,r,i,o){this.um=t,this.im=e,this.dm=n,this.vm=r,this.wm=i,this.om=o}function tc(t,e){this.hasPendingWrites=t,this.fromCache=e}function ec(t,e,n){this.im=t,this.firestore=e,this.om=n,this.Gw=this.firestore.Qw()}function nc(t){this.um=t,this.hm=[],this.cm=!1}function rc(t,e){this.um=t,this.sm=e}function ic(t,e){var n=this;if(this.Bw=null,this.Mw=new ci,this.INTERNAL={delete:function(){return v.__awaiter(n,void 0,void 0,function(){return v.__generator(this,function(t){switch(t.label){case 0:return this.Qw(),[4,this.Gw.terminate()];case 1:return t.sent(),[2]}})})}},"object"==typeof t.options){var r=t;this.Bw=r,this.Ww=ic.zw(r),this.Kw=r.name,this.Hw=new D(e)}else{var i=t;if(!i.projectId)throw new N(A.INVALID_ARGUMENT,"Must provide projectId");this.Ww=new S(i.projectId,i.database),this.Kw="[DEFAULT]",this.Hw=new O}this.Jw=new qu({}),this.Yw=this.Xw(this.Ww)}function oc(t){if(void 0===t.host){if(void 0!==t.ssl)throw new N(A.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else J("settings","non-empty string","host",t.host),this.host=t.host,$("settings","boolean","ssl",t.ssl),this.ssl=V(t.ssl,!0);if(it("settings",t,["host","ssl","credentials","timestampsInSnapshots","cacheSizeBytes","experimentalForceLongPolling"]),$("settings","object","credentials",t.credentials),this.credentials=t.credentials,$("settings","boolean","timestampsInSnapshots",t.timestampsInSnapshots),!0===t.timestampsInSnapshots?u("\n  The timestampsInSnapshots setting now defaults to true and you no\n  longer need to explicitly set it. In a future release, the setting\n  will be removed entirely and so it is recommended that you remove it\n  from your firestore.settings() call now."):!1===t.timestampsInSnapshots&&u("\n  The timestampsInSnapshots setting will soon be removed. YOU MUST UPDATE\n  YOUR CODE.\n\n  To hide this warning, stop using the timestampsInSnapshots setting in your\n  firestore.settings({ ... }) call.\n\n  Once you remove the setting, Timestamps stored in Cloud Firestore will be\n  read back as Firebase Timestamp objects instead of as system Date objects.\n  So you will also need to update code expecting a Date to instead expect a\n  Timestamp. For example:\n\n  // Old:\n  const date = snapshot.get('created_at');\n  // New:\n  const timestamp = snapshot.get('created_at'); const date =\n  timestamp.toDate();\n\n  Please audit all existing usages of Date when you enable the new\n  behavior."),this.timestampsInSnapshots=V(t.timestampsInSnapshots,!0),$("settings","number","cacheSizeBytes",t.cacheSizeBytes),void 0===t.cacheSizeBytes)this.cacheSizeBytes=lo.Qh;else{if(t.cacheSizeBytes!==Uu&&t.cacheSizeBytes<lo.Mh)throw new N(A.INVALID_ARGUMENT,"cacheSizeBytes must be at least "+lo.Mh);this.cacheSizeBytes=t.cacheSizeBytes}$("settings","boolean","experimentalForceLongPolling",t.experimentalForceLongPolling),this.forceLongPolling=void 0!==t.experimentalForceLongPolling&&t.experimentalForceLongPolling}v.__spreadArrays(["length","forEach","map"],"undefined"!=typeof Symbol?[Symbol.iterator]:[]).forEach(function(t){try{Object.defineProperty(Yu.prototype.docChanges,t,{get:function(){return function(){throw new N(A.INVALID_ARGUMENT,'QuerySnapshot.docChanges has been changed from a property into a method, so usages like "querySnapshot.docChanges" should become "querySnapshot.docChanges()"')}()}})}catch(t){}});var sc,ac=(sc=Qu,v.__extends(uc,sc),Object.defineProperty(uc.prototype,"id",{get:function(){return this.bm.path.X()},enumerable:!0,configurable:!0}),Object.defineProperty(uc.prototype,"parent",{get:function(){var t=this.bm.path.H();return t.J()?null:new Bu(new mt(t),this.firestore)},enumerable:!0,configurable:!0}),Object.defineProperty(uc.prototype,"path",{get:function(){return this.bm.path.nt()},enumerable:!0,configurable:!0}),uc.prototype.doc=function(t){if(Q("CollectionReference.doc",arguments,0,1),0===arguments.length&&(t=h.u()),Y("CollectionReference.doc","non-empty string",1,t),""===t)throw new N(A.INVALID_ARGUMENT,"Document path must be a non-empty string");var e=vt.it(t);return Bu.em(this.bm.path.child(e),this.firestore,this.om)},uc.prototype.add=function(t){z("CollectionReference.add",arguments,1),Y("CollectionReference.add","object",1,this.om?this.om.toFirestore(t):t);var e=this.doc();return e.set(t).then(function(){return e})},uc.prototype.withConverter=function(t){return new uc(this.Fm,this.firestore,t)},uc);function uc(t,e,n){var r=sc.call(this,kn.jn(t),e,n)||this;if((r.Fm=t).length%2!=1)throw new N(A.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t.nt()+" has "+t.length);return r}function cc(t,e){if(void 0===e)return{merge:!1};if(it(t,e,["merge","mergeFields"]),$(t,"boolean","merge",e.merge),n=t,r="mergeFields",i="a string or a FieldPath",o=e.mergeFields,s=function(t){return"string"==typeof t||t instanceof Js},void 0!==o&&function(t,e,n,r,i){if(!(r instanceof Array))throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires its "+e+" option to be an array, but it was: "+nt(r));for(var o=0;o<r.length;++o)if(!i(r[o]))throw new N(A.INVALID_ARGUMENT,"Function "+t+"() requires all "+e+" elements to be "+n+", but the value at index "+o+" was: "+nt(r[o]))}(n,r,i,o,s),void 0!==e.mergeFields&&void 0!==e.merge)throw new N(A.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');var n,r,i,o,s;return e}function hc(t,e){return void 0===e?{}:(it(t,e,["serverTimestamps"]),Z(t,0,"serverTimestamps",e.serverTimestamps,["estimate","previous","none"]),e)}function lc(t,e){X(t,"object",1,e),e&&(it(t,e,["source"]),Z(t,0,"source",e.source,["default","server","cache"]))}function fc(t,e,n){if(e instanceof Bu){if(e.firestore!==n)throw new N(A.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}throw ot(t,"DocumentReference",1,e)}function pc(t,e,n){var r;return t?(r=t.toFirestore(e),n="toFirestore() in "+n):r=e,[r,n]}var dc=ei(Vu,"Use firebase.firestore() instead."),vc=ei(Hu,"Use firebase.firestore().runTransaction() instead."),yc=ei(Wu,"Use firebase.firestore().batch() instead."),gc=ei(Bu,"Use firebase.firestore().doc() instead."),mc=ei(zu),_c=ei(Ku),bc=ei(Qu),wc=ei(Yu),Ec=ei(ac,"Use firebase.firestore().collection() instead."),Tc={Firestore:dc,GeoPoint:lt,Timestamp:ft,Blob:si,Transaction:vc,WriteBatch:yc,DocumentReference:gc,DocumentSnapshot:mc,Query:bc,QueryDocumentSnapshot:_c,QuerySnapshot:wc,CollectionReference:Ec,FieldPath:Js,FieldValue:Ta,setLogLevel:Vu.setLogLevel,CACHE_SIZE_UNLIMITED:Uu};var Ic=(Lc.prototype.xl=function(t){},Lc.prototype.shutdown=function(){},Lc),Sc=(Pc.prototype.xl=function(t){this.Lm.push(t)},Pc.prototype.shutdown=function(){window.removeEventListener("online",this.Vm),window.removeEventListener("offline",this.xm)},Pc.prototype.qm=function(){window.addEventListener("online",this.Vm),window.addEventListener("offline",this.xm)},Pc.prototype.Um=function(){d("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Lm;t<e.length;t++)(0,e[t])(0)},Pc.prototype.jm=function(){d("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Lm;t<e.length;t++)(0,e[t])(1)},Pc.cs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},Pc),Cc=(Rc.prototype.Af=function(t){y(!this.Qm,"Called onOpen on stream twice!"),this.Qm=t},Rc.prototype.Ef=function(t){y(!this.Gm,"Called onClose on stream twice!"),this.Gm=t},Rc.prototype.onMessage=function(t){y(!this.Wm,"Called onMessage on stream twice!"),this.Wm=t},Rc.prototype.close=function(){this.Mm()},Rc.prototype.send=function(t){this.Bm(t)},Rc.prototype.zm=function(){y(void 0!==this.Qm,"Cannot call onOpen because no callback was set"),this.Qm()},Rc.prototype.Km=function(t){y(void 0!==this.Gm,"Cannot call onClose because no callback was set"),this.Gm(t)},Rc.prototype.Hm=function(t){y(void 0!==this.Wm,"Cannot call onMessage because no callback was set"),this.Wm(t)},Rc),Ac={BatchGetDocuments:"batchGet",Commit:"commit"},Nc="gl-js/ fire/"+s,Oc=(xc.prototype.Ym=function(t,e){if(e)for(var n in e.g)e.g.hasOwnProperty(n)&&(t[n]=e.g[n]);t["X-Goog-Api-Client"]=Nc},xc.prototype.Bf=function(u,r,i){var c=this,h=this.Xm(u);return new Promise(function(o,s){var a=new f.XhrIo;a.listenOnce(f.EventType.COMPLETE,function(){try{switch(a.getLastErrorCode()){case f.ErrorCode.NO_ERROR:var t=a.getResponseJson();d("Connection","XHR received:",JSON.stringify(t)),o(t);break;case f.ErrorCode.TIMEOUT:d("Connection",'RPC "'+u+'" timed out'),s(new N(A.DEADLINE_EXCEEDED,"Request time out"));break;case f.ErrorCode.HTTP_ERROR:var e=a.getStatus();if(d("Connection",'RPC "'+u+'" failed with status:',e,"response text:",a.getResponseText()),0<e){var n=a.getResponseJson().error;if(n&&n.status&&n.message){var r=(i=n.status.toLowerCase().replace("_","-"),0<=Object.values(A).indexOf(i)?i:A.UNKNOWN);s(new N(r,n.message))}else s(new N(A.UNKNOWN,"Server responded with status "+a.getStatus()))}else d("Connection",'RPC "'+u+'" failed'),s(new N(A.UNAVAILABLE,"Connection failed."));break;default:b('RPC "'+u+'" failed with unanticipated webchannel error '+a.getLastErrorCode()+": "+a.getLastError()+", giving up.")}}finally{d("Connection",'RPC "'+u+'" completed.')}var i});var t=v.__assign({},r);delete t.database;var e=JSON.stringify(t);d("Connection","XHR sending: ",h+" "+e);var n={"Content-Type":"text/plain"};c.Ym(n,i),a.send(h,"POST",e,n,15)})},xc.prototype.Mf=function(t,e,n){return this.Bf(t,e,n)},xc.prototype.Pf=function(t,e){var n=[this.Jm,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=f.createWebChannelTransport(),i={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.s.projectId+"/databases/"+this.s.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling};this.Ym(i.initMessageHeaders,e),l.isMobileCordova()||l.isReactNative()||l.isElectron()||l.isIE()||l.isUWP()||l.isBrowserExtension()||(i.httpHeadersOverwriteParam="$httpHeaders");var o=n.join("");function s(t,e){a.listen(t,function(t){try{e(t)}catch(t){setTimeout(function(){throw t},0)}})}d("Connection","Creating WebChannel: "+o+" "+i);var a=r.createWebChannel(o,i),u=!1,c=!1,h=new Cc({Bm:function(t){c?d("Connection","Not sending because WebChannel is closed:",t):(u||(d("Connection","Opening WebChannel transport."),a.open(),u=!0),d("Connection","WebChannel sending:",t),a.send(t))},Mm:function(){return a.close()}});return s(f.WebChannel.EventType.OPEN,function(){c||d("Connection","WebChannel transport opened.")}),s(f.WebChannel.EventType.CLOSE,function(){c||(c=!0,d("Connection","WebChannel transport closed"),h.Km())}),s(f.WebChannel.EventType.ERROR,function(t){c||(c=!0,d("Connection","WebChannel transport errored:",t),h.Km(new N(A.UNAVAILABLE,"The operation could not be completed")))}),s(f.WebChannel.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];y(!!n,"Got a webchannel message without data.");var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){d("Connection","WebChannel received error:",r);var i=r.status,o=function(){var t=sr[i];if(void 0!==t)return pr(t)}(),s=r.message;void 0===o&&(o=A.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,h.Km(new N(o,s)),a.close()}else d("Connection","WebChannel received:",n),h.Hm(n)}}),setTimeout(function(){h.zm()},0),h},xc.prototype.Xm=function(t){var e=Ac[t];return y(void 0!==e,"Unknown REST mapping for: "+t),this.Jm+"/v1/projects/"+this.s.projectId+"/databases/"+this.s.database+"/documents:"+e},xc),Dc=(Object.defineProperty(kc.prototype,"document",{get:function(){return"undefined"!=typeof document?document:null},enumerable:!0,configurable:!0}),Object.defineProperty(kc.prototype,"window",{get:function(){return"undefined"!=typeof window?window:null},enumerable:!0,configurable:!0}),kc.prototype.kw=function(t){return Promise.resolve(new Oc(t))},kc.prototype.Ow=function(){return new(Sc.cs()?Sc:Ic)},kc.prototype.Fw=function(t){return new Jr(t,{Te:!0})},kc.prototype.i=function(t){return JSON.stringify(t)},kc.prototype.atob=function(t){return atob(t)},kc.prototype.btoa=function(t){return btoa(t)},kc);function kc(){this.xr="undefined"!=typeof atob}function xc(t){this.s=t.s;var e=t.ssl?"https":"http";this.Jm=e+"://"+t.host,this.forceLongPolling=t.forceLongPolling}function Rc(t){this.Bm=t.Bm,this.Mm=t.Mm}function Pc(){var t=this;this.Vm=function(){return t.Um()},this.xm=function(){return t.jm()},this.Lm=[],this.qm()}function Lc(){}function Mc(t){var e;t.INTERNAL.registerComponent(new r.Component("firestore",function(t){var e=t.getProvider("app").getImmediate();return new Vu(e,t.getProvider("auth-internal"))},"PUBLIC").setServiceProps((y((e=Tc)&&"object"==typeof e,"shallowCopy() expects object parameter."),v.__assign({},e)))),t.registerVersion("@firebase/firestore","1.12.2")}$r.Ur(new Dc),Mc(n),Fc.__PRIVATE_registerFirestore=Mc}).call(this,jc(54))},433:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return h}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return v}),n.d(e,"__spreadArrays",function(){return y}),n.d(e,"__await",function(){return g}),n.d(e,"__asyncGenerator",function(){return m}),n.d(e,"__asyncDelegator",function(){return _}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return E}),n.d(e,"__importDefault",function(){return T}),n.d(e,"__classPrivateFieldGet",function(){return I}),n.d(e,"__classPrivateFieldSet",function(){return S});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}function u(n,r){return function(t,e){r(t,e,n)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function l(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),s=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<s.push([r,n,t,e])||a(r,n)})})}function a(t,e){try{(n=o[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,c):h(s[0][2],n)}catch(t){h(s[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(i=!i)?{value:g(r[e](t)),done:"return"===e}:n?n(t):t}:n}}function b(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=u[Symbol.asyncIterator];return e?e.call(u):(u=p(u),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=u[a]&&function(s){return new Promise(function(t,e){var n,r,i,o;s=u[a](s),n=t,r=e,i=s.done,o=s.value,Promise.resolve(o).then(function(t){n({value:t,done:i})},r)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function I(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},434:function(t,hr,lr){"use strict";lr.r(hr),function(t){lr.d(hr,"ErrorCode",function(){return sr}),lr.d(hr,"EventType",function(){return ar}),lr.d(hr,"WebChannel",function(){return ur}),lr.d(hr,"XhrIo",function(){return cr}),lr.d(hr,"createWebChannelTransport",function(){return or});var e,n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},u=u||{},f=n;function a(t){return"string"==typeof t}function s(t){return"number"==typeof t}function r(t,e){t=t.split("."),e=e||f;for(var n=0;n<t.length;n++)if(null==(e=e[t[n]]))return null;return e}function i(){}function o(t){var e=typeof t;if("object"==e){if(!t)return"null";if(t instanceof Array)return"array";if(t instanceof Object)return e;var n=Object.prototype.toString.call(t);if("[object Window]"==n)return"object";if("[object Array]"==n||"number"==typeof t.length&&void 0!==t.splice&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("splice"))return"array";if("[object Function]"==n||void 0!==t.call&&void 0!==t.propertyIsEnumerable&&!t.propertyIsEnumerable("call"))return"function"}else if("function"==e&&void 0===t.call)return"object";return e}function c(t){return"array"==o(t)}function h(t){var e=o(t);return"array"==e||"object"==e&&"number"==typeof t.length}function l(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var p="closure_uid_"+(1e9*Math.random()>>>0),d=0;function v(t,e,n){return t.call.apply(t.bind,arguments)}function y(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function g(t,e,n){return(g=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?v:y).apply(null,arguments)}function m(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}var _=Date.now||function(){return+new Date};function b(t,o){function e(){}e.prototype=o.prototype,t.N=o.prototype,t.prototype=new e,(t.prototype.constructor=t).yb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function w(){this.j=this.j,this.i=this.i}w.prototype.j=!1,w.prototype.la=function(){if(!this.j&&(this.j=!0,this.G(),0))this[p]||(this[p]=++d)},w.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var E=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(a(t))return a(e)&&1==e.length?t.indexOf(e,0):-1;for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},T=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i=a(t)?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function I(t){return Array.prototype.concat.apply([],arguments)}function S(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function C(t){return/^[\s\xa0]*$/.test(t)}var A,N=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function O(t,e){return-1!=t.indexOf(e)}function D(t,e){return t<e?-1:e<t?1:0}t:{var k=f.navigator;if(k){var x=k.userAgent;if(x){A=x;break t}}A=""}function R(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function P(t){var e,n={};for(e in t)n[e]=t[e];return n}var L="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<L.length;o++)n=L[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function F(t){return F[" "](t),t}F[" "]=i;var j,U,q=O(A,"Opera"),V=O(A,"Trident")||O(A,"MSIE"),H=O(A,"Edge"),W=H||V,B=O(A,"Gecko")&&!(O(A.toLowerCase(),"webkit")&&!O(A,"Edge"))&&!(O(A,"Trident")||O(A,"MSIE"))&&!O(A,"Edge"),G=O(A.toLowerCase(),"webkit")&&!O(A,"Edge");function z(){var t=f.document;return t?t.documentMode:void 0}t:{var K="",Q=(U=A,B?/rv:([^\);]+)(\)|;)/.exec(U):H?/Edge\/([\d\.]+)/.exec(U):V?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(U):G?/WebKit\/(\S+)/.exec(U):q?/(?:Version)[ \/]?(\S+)/.exec(U):void 0);if(Q&&(K=Q?Q[1]:""),V){var Y=z();if(null!=Y&&Y>parseFloat(K)){j=String(Y);break t}}j=K}var X,J={};function $(a){return t=a,e=function(){for(var t=0,e=N(String(j)).split("."),n=N(String(a)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=D(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||D(0==o[2].length,0==s[2].length)||D(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=J,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var Z=f.document;X=Z&&V?z()||("CSS1Compat"==Z.compatMode?parseInt(j,10):5):void 0;var tt=!V||9<=Number(X),et=V&&!$("9"),nt=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{f.addEventListener("test",i,e),f.removeEventListener("test",i,e)}catch(t){}return t}();function rt(t,e){this.type=t,this.a=this.target=e,this.Ia=!0}function it(t,e){if(rt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(B){t:{try{F(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=a(t.pointerType)?t.pointerType:ot[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}rt.prototype.b=function(){this.Ia=!1},b(it,rt);var ot={2:"touch",3:"pen",4:"mouse"};it.prototype.b=function(){it.N.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,et)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var st="closure_listenable_"+(1e6*Math.random()|0),at=0;function ut(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.da=i,this.key=++at,this.X=this.Z=!1}function ct(t){t.X=!0,t.listener=null,t.proxy=null,t.src=null,t.da=null}function ht(t){this.src=t,this.a={},this.b=0}function lt(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=E(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ct(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function ft(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.X&&o.listener==e&&o.capture==!!n&&o.da==r)return i}return-1}ht.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=ft(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new ut(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),dt={};function vt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(c(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=Tt(r);return e&&e[st]?e.Aa(n,r,l(i)?!!i.capture:!!i,o):yt(e,n,r,!0,i,o)}(t,e,n,r,i);if(c(e)){for(var o=0;o<e.length;o++)vt(t,e[o],n,r,i);return null}return n=Tt(n),t&&t[st]?t.za(e,n,l(r)?!!r.capture:!!r,i):yt(t,e,n,!1,r,i)}function yt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=l(i)?!!i.capture:!!i;if(s&&!tt)return null;var a,u,c=wt(t);if(c||(t[pt]=c=new ht(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(a=bt,r=u=tt?function(t){return a.call(u.src,u.listener,t)}:function(t){if(!(t=a.call(u.src,u.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)nt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function gt(t){if(!s(t)&&t&&!t.X){var e=t.src;if(e&&e[st])lt(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=wt(e))?(lt(n,t),0==n.b&&(n.src=null,e[pt]=null)):ct(t)}}}function mt(t){return t in dt?dt[t]:dt[t]="on"+t}function _t(t,e){var n=t.listener,r=t.da||t.src;return t.Z&&gt(t),n.call(r,e)}function bt(t,e){return!!t.X||(tt?_t(t,new it(e,this)):_t(t,e=new it(e||r("window.event"),this)))}function wt(t){return(t=t[pt])instanceof ht?t:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function Tt(e){return"function"==o(e)?e:(e[Et]||(e[Et]=function(t){return e.handleEvent(t)}),e[Et])}function It(){w.call(this),this.c=new ht(this),(this.J=this).B=null}function St(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.X&&s.capture==n){var a=s.listener,u=s.da||s.src;s.Z&&lt(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&0!=r.Ia}b(It,w),It.prototype[st]=!0,(e=It.prototype).addEventListener=function(t,e,n,r){vt(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(c(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=l(i)?!!i.capture:!!i,r=Tt(r),e&&e[st]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=ft(s=e.a[n],r,i,o))&&(ct(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&wt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=ft(n,r,i,o)),(r=-1<e?n[e]:null)&&gt(r))}(this,t,e,n,r)},e.dispatchEvent=function(t){var e,n=this.B;if(n)for(e=[];n;n=n.B)e.push(n);n=this.J;var r=t.type||t;if(a(t))t=new rt(t,n);else if(t instanceof rt)t.target=t.target||n;else{var i=t;M(t=new rt(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.a=e[o];i=St(s,r,!0,t)&&i}if(i=St(s=t.a=n,r,!0,t)&&i,i=St(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=St(s=t.a=e[o],r,!1,t)&&i;return i},e.G=function(){if(It.N.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)ct(n[r]);delete e.a[t],e.b--}}this.B=null},e.za=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},e.Aa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Ct=f.JSON.stringify;function At(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Nt(){this.b=this.a=null}At.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var Ot,Dt=new At(function(){return new kt},function(t){t.reset()});function kt(){this.next=this.b=this.a=null}function xt(t){f.setTimeout(function(){throw t},0)}function Rt(t,e){var n;Ot||(n=f.Promise.resolve(void 0),Ot=function(){n.then(Mt)}),Pt||(Ot(),Pt=!0),Lt.add(t,e)}Nt.prototype.add=function(t,e){var n=Dt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},kt.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var Pt=!(kt.prototype.reset=function(){this.next=this.b=this.a=null}),Lt=new Nt;function Mt(){for(var t;r=n=void 0,r=null,(n=Lt).a&&(r=n.a,n.a=n.a.next,n.a||(n.b=null),r.next=null),t=r;){try{t.a.call(t.b)}catch(t){xt(t)}var e=Dt;e.f(t),e.b<100&&(e.b++,t.next=e.a,e.a=t)}var n,r;Pt=!1}function Ft(t,e){It.call(this),this.b=t||1,this.a=e||f,this.f=g(this.gb,this),this.g=_()}function jt(t){t.ba=!1,t.L&&(t.a.clearTimeout(t.L),t.L=null)}function Ut(t,e,n){if("function"==o(t))n&&(t=g(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=g(t.handleEvent,t)}return 2147483647<Number(e)?-1:f.setTimeout(t,e||0)}function qt(t,e,n){w.call(this),this.f=null!=n?g(t,n):t,this.c=e,this.b=g(this.$a,this),this.a=[]}function Vt(t){t.U=Ut(t.b,t.c),t.f.apply(null,t.a)}function Ht(t){w.call(this),this.b=t,this.a={}}b(Ft,It),(e=Ft.prototype).ba=!1,e.L=null,e.gb=function(){if(this.ba){var t=_()-this.g;0<t&&t<.8*this.b?this.L=this.a.setTimeout(this.f,this.b-t):(this.L&&(this.a.clearTimeout(this.L),this.L=null),this.dispatchEvent("tick"),this.ba&&(jt(this),this.start()))}},e.start=function(){this.ba=!0,this.L||(this.L=this.a.setTimeout(this.f,this.b),this.g=_())},e.G=function(){Ft.N.G.call(this),jt(this),delete this.a},b(qt,w),(e=qt.prototype).ea=!1,e.U=null,e.Ta=function(t){this.a=arguments,this.U?this.ea=!0:Vt(this)},e.G=function(){qt.N.G.call(this),this.U&&(f.clearTimeout(this.U),this.U=null,this.ea=!1,this.a=[])},e.$a=function(){this.U=null,this.ea&&(this.ea=!1,Vt(this))},b(Ht,w);var Wt=[];function Bt(t,e,n,r){c(n)||(n&&(Wt[0]=n.toString()),n=Wt);for(var i=0;i<n.length;i++){var o=vt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function Gt(t){R(t.a,function(t,e){this.a.hasOwnProperty(e)&&gt(t)},t),t.a={}}function zt(){}Ht.prototype.G=function(){Ht.N.G.call(this),Gt(this)},Ht.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=new It;function Qt(t){rt.call(this,"serverreachability",t)}function Yt(t){Kt.dispatchEvent(new Qt(Kt,t))}function Xt(t){rt.call(this,"statevent",t)}function Jt(t){Kt.dispatchEvent(new Xt(Kt,t))}function $t(t){rt.call(this,"timingevent",t)}function Zt(t,e){if("function"!=o(t))throw Error("Fn must not be null and must be a function");return f.setTimeout(function(){t()},e)}b(Qt,rt),b(Xt,rt),b($t,rt);var te={NO_ERROR:0,hb:1,ob:2,nb:3,kb:4,mb:5,pb:6,La:7,TIMEOUT:8,sb:9},ee={jb:"complete",wb:"success",Ma:"error",La:"abort",ub:"ready",vb:"readystatechange",TIMEOUT:"timeout",qb:"incrementaldata",tb:"progress",lb:"downloadprogress",xb:"uploadprogress"};function ne(){}function re(t){var e;return(e=t.a)||(e=t.a={}),e}function ie(){}ne.prototype.a=null;var oe,se={OPEN:"a",ib:"b",Ma:"c",rb:"d"};function ae(){rt.call(this,"d")}function ue(){rt.call(this,"c")}function ce(){}function he(t,e,n){this.g=t,this.W=e,this.V=n||1,this.I=new Ht(this),this.O=le,t=W?125:void 0,this.P=new Ft(t),this.h=null,this.b=!1,this.l=this.D=this.f=this.F=this.v=this.R=this.i=null,this.j=[],this.a=null,this.A=0,this.c=this.w=null,this.o=-1,this.m=!1,this.J=0,this.B=null,this.s=this.S=this.H=!1}b(ae,rt),b(ue,rt),b(ce,ne),oe=new ce;var le=45e3,fe={},pe={};function de(t,e,n){t.F=1,t.f=Ue(xe(e)),t.l=n,t.H=!0,ye(t,null)}function ve(t,e,n,r){t.F=1,t.f=Ue(xe(e)),t.l=null,t.H=n,ye(t,r)}function ye(t,e){t.v=_(),_e(t),t.D=xe(t.f),je(t.D,"t",t.V),t.A=0,t.a=t.g.$(t.g.Y()?e:null),0<t.J&&(t.B=new qt(g(t.Ja,t,t.a),t.J)),Bt(t.I,t.a,"readystatechange",t.cb),e=t.h?P(t.h):{},t.l?(t.w||(t.w="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ca(t.D,t.w,t.l,e)):(t.w="GET",t.a.ca(t.D,t.w,null,e)),Yt(1)}function ge(t,e,n){for(var r=!0;!t.m&&t.A<n.length;){var i=me(t,n);if(i==pe){4==e&&(t.c=4,Jt(14),r=!1);break}if(i==fe){t.c=4,Jt(15),r=!1;break}Ie(t,i)}4==e&&0==n.length&&(t.c=1,Jt(16),r=!1),t.b=t.b&&r,r||(Te(t),Ee(t))}function me(t,e){var n=t.A,r=e.indexOf("\n",n);return-1==r?pe:(n=Number(e.substring(n,r)),isNaN(n)?fe:(r+=1)+n>e.length?pe:(e=e.substr(r,n),t.A=r+n,e))}function _e(t){t.R=_()+t.O,be(t,t.O)}function be(t,e){if(null!=t.i)throw Error("WatchDog timer not null");t.i=Zt(g(t.ab,t),e)}function we(t){t.i&&(f.clearTimeout(t.i),t.i=null)}function Ee(t){t.g.Ca()||t.m||t.g.na(t)}function Te(t){we(t);var e=t.B;e&&"function"==typeof e.la&&e.la(),t.B=null,jt(t.P),Gt(t.I),t.a&&(e=t.a,t.a=null,e.abort(),e.la())}function Ie(t,e){try{t.g.Fa(t,e),Yt(4)}catch(t){}}function Se(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(h(t)||a(t))T(t,e,void 0);else{if(t.K&&"function"==typeof t.K)var n=t.K();else if(t.C&&"function"==typeof t.C)n=void 0;else if(h(t)||a(t)){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.C&&"function"==typeof t.C)return t.C();if(a(t))return t.split("");if(h(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ce(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ce)for(n=t.K(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ae(t,e){Oe(t.b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ne(t))}function Ne(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Oe(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Oe(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function Oe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(e=he.prototype).setTimeout=function(t){this.O=t},e.cb=function(t){t=t.target;var e=this.B;e&&3==xn(t)?e.Ta():this.Ja(t)},e.Ja=function(t){try{if(t==this.a)t:{var e=xn(this.a),n=this.a.ya(),r=this.a.T();if(!(e<3||3==e&&!W&&!this.a.aa())){this.m||4!=e||7==n||Yt(8==n||r<=0?3:2),we(this);var i=this.a.T();this.o=i;var o=this.a.aa();if(this.b=200==i){if(this.S&&!this.s){e:{if(this.a){var s=Rn(this.a,"X-HTTP-Initial-Response");if(s&&!C(s)){var a=s;break e}}a=null}if(!a){this.b=!1,this.c=3,Jt(12),Te(this),Ee(this);break t}this.s=!0,Ie(this,a)}this.H?(ge(this,e,o),W&&this.b&&3==e&&(Bt(this.I,this.P,"tick",this.bb),this.P.start())):Ie(this,o),4==e&&Te(this),this.b&&!this.m&&(4==e?this.g.na(this):(this.b=!1,_e(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.c=3,Jt(12)):(this.c=0,Jt(13)),Te(this),Ee(this)}}}catch(t){}},e.bb=function(){if(this.a){var t=xn(this.a),e=this.a.aa();this.A<e.length&&(we(this),ge(this,t,e),this.b&&4!=t&&_e(this))}},e.cancel=function(){this.m=!0,Te(this)},e.ab=function(){this.i=null;var t=_();0<=t-this.R?(2!=this.F&&(Yt(3),Jt(17)),Te(this),this.c=2,Ee(this)):be(this,this.R-t)},(e=Ce.prototype).C=function(){Ne(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},e.K=function(){return Ne(this),this.a.concat()},e.get=function(t,e){return Oe(this.b,t)?this.b[t]:e},e.set=function(t,e){Oe(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},e.forEach=function(t,e){for(var n=this.K(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var De=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ke(t,e){var n;this.b=this.j=this.f="",this.i=null,this.g=this.a="",this.h=!1,t instanceof ke?(this.h=void 0!==e?e:t.h,Re(this,t.f),this.j=t.j,Pe(this,t.b),Le(this,t.i),this.a=t.a,Me(this,Ze(t.c)),this.g=t.g):t&&(n=String(t).match(De))?(this.h=!!e,Re(this,n[1]||"",!0),this.j=qe(n[2]||""),Pe(this,n[3]||"",!0),Le(this,n[4]),this.a=qe(n[5]||"",!0),Me(this,n[6]||"",!0),this.g=qe(n[7]||"")):(this.h=!!e,this.c=new Qe(null,this.h))}function xe(t){return new ke(t)}function Re(t,e,n){t.f=n?qe(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Pe(t,e,n){t.b=n?qe(e,!0):e}function Le(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.i=e}else t.i=null}function Me(t,e,n){var r,i;e instanceof Qe?(t.c=e,r=t.c,(i=t.h)&&!r.f&&(Ye(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(Xe(this,e),$e(this,n,t))},r)),r.f=i):(n||(e=Ve(e,ze)),t.c=new Qe(e,t.h))}function Fe(t,e,n){t.c.set(e,n)}function je(t,e,n){c(n)||(n=[String(n)]),$e(t.c,e,n)}function Ue(t){return Fe(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^_()).toString(36)),t}function qe(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Ve(t,e,n){return a(t)?(t=encodeURI(t).replace(e,He),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function He(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ke.prototype.toString=function(){var t=[],e=this.f;e&&t.push(Ve(e,We,!0),":");var n=this.b;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(Ve(e,We,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.i)&&t.push(":",String(n))),(n=this.a)&&(this.b&&"/"!=n.charAt(0)&&t.push("/"),t.push(Ve(n,"/"==n.charAt(0)?Ge:Be,!0))),(n=this.c.toString())&&t.push("?",n),(n=this.g)&&t.push("#",Ve(n,Ke)),t.join("")},ke.prototype.resolve=function(t){var e=xe(this),n=!!t.f;n?Re(e,t.f):n=!!t.j,n?e.j=t.j:n=!!t.b,n?Pe(e,t.b):n=null!=t.i;var r=t.a;if(n)Le(e,t.i);else if(n=!!t.a){if("/"!=r.charAt(0))if(this.b&&!this.a)r="/"+r;else{var i=e.a.lastIndexOf("/");-1!=i&&(r=e.a.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(O(i,"./")||O(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.a=r:n=""!==t.c.toString(),n?Me(e,Ze(t.c)):n=!!t.g,n&&(e.g=t.g),e};var We=/[#\/\?@]/g,Be=/[#\?:]/g,Ge=/[#\?]/g,ze=/[#\?@]/g,Ke=/#/g;function Qe(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Ye(n){n.a||(n.a=new Ce,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function Xe(t,e){Ye(t),e=tn(t,e),Oe(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Ae(t.a,e))}function Je(t,e){return Ye(t),e=tn(t,e),Oe(t.a.b,e)}function $e(t,e,n){Xe(t,e),0<n.length&&(t.c=null,t.a.set(tn(t,e),S(n)),t.b+=n.length)}function Ze(t){var e=new Qe;return e.c=t.c,t.a&&(e.a=new Ce(t.a),e.b=t.b),e}function tn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function en(t){this.a=t,this.b=this.h=null,this.g=!1,this.i=null,this.c=-1,this.l=this.f=null}function nn(t){var e=t.a.F.a;if(null!=e)Jt(4),e?(Jt(10),Gn(t.a,t,!1)):(Jt(11),Gn(t.a,t,!0));else{t.b=new he(t,void 0,void 0),t.b.h=t.h,e=Xn(e=t.a,e.Y()?t.f:null,t.i),Jt(4),je(e,"TYPE","xmlhttp");var n=t.a.j,r=t.a.I;n&&r&&Fe(e,n,r),ve(t.b,e,!1,t.f)}}function rn(){this.a=this.b=null}function on(){this.a=new Ce}function sn(t){var e=typeof t;return"object"==e&&t||"function"==e?"o"+(t[p]||(t[p]=++d)):e.charAt(0)+t}function an(t,e){this.b=t,this.a=e}function un(t){this.g=t||cn,t=f.PerformanceNavigationTiming?0<(t=f.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(f.ka&&f.ka.Da&&f.ka.Da()&&f.ka.Da().zb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new on),this.b=null,this.c=[]}(e=Qe.prototype).add=function(t,e){Ye(this),this.c=null,t=tn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},e.forEach=function(n,r){Ye(this),this.a.forEach(function(t,e){T(t,function(t){n.call(r,t,e,this)},this)},this)},e.K=function(){Ye(this);for(var t=this.a.C(),e=this.a.K(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},e.C=function(t){Ye(this);var e=[];if(a(t))Je(this,t)&&(e=I(e,this.a.get(tn(this,t))));else{t=this.a.C();for(var n=0;n<t.length;n++)e=I(e,t[n])}return e},e.set=function(t,e){return Ye(this),this.c=null,Je(this,t=tn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},e.get=function(t,e){return t&&0<(t=this.C(t)).length?String(t[0]):e},e.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.K(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.C(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")},b(function(){},function(){}),(e=en.prototype).M=null,e.$=function(t){return this.a.$(t)},e.abort=function(){this.b&&(this.b.cancel(),this.b=null),this.c=-1},e.Ca=function(){return!1},e.Fa=function(t,e){if(this.c=t.o,0==this.M){if(!this.a.o&&(t=t.a)){var n=Rn(t,"X-Client-Wire-Protocol");this.l=n||null,this.a.j&&(t=Rn(t,"X-HTTP-Session-Id"))&&(this.a.I=t)}if(e){try{var r=this.a.ja.a.parse(e)}catch(t){return(e=this.a).m=this.c,void Qn(e,2)}this.f=r[0]}else(e=this.a).m=this.c,Qn(e,2)}else 1==this.M&&(this.g?Jt(6):"11111"==e?(Jt(5),this.g=!0,(!V||10<=Number(X))&&(this.c=200,this.b.cancel(),Jt(11),Gn(this.a,this,!0))):(Jt(7),this.g=!1))},e.na=function(){if(this.c=this.b.o,this.b.b)0==this.M?(this.M=1,nn(this)):1==this.M&&(this.g?(Jt(11),Gn(this.a,this,!0)):(Jt(10),Gn(this.a,this,!1)));else{0==this.M?Jt(8):1==this.M&&Jt(9);var t=this.a;t.m=this.c,Qn(t,2)}},e.Y=function(){return this.a.Y()},e.ma=function(){return this.a.ma()},on.prototype.add=function(t){this.a.set(sn(t),t)},on.prototype.C=function(){return this.a.C()};var cn=10;function hn(t,e){!t.a&&(O(e,"spdy")||O(e,"quic")||O(e,"h2"))&&(t.f=t.g,t.a=new on,t.b&&(dn(t,t.b),t.b=null))}function ln(t){return t.b||t.a&&t.a.a.c>=t.f}function fn(t){return t.b?1:t.a?t.a.a.c:0}function pn(t,e){return t=t.b?t.b==e:!!t.a&&(e=sn(e),Oe(t.a.a.b,e))}function dn(t,e){t.a?t.a.add(e):t.b=e}function vn(t,e){var n;t.b&&t.b==e?t.b=null:((n=t.a)&&(n=sn(e),n=Oe(t.a.a.b,n)),n&&Ae(t.a.a,sn(e)))}function yn(t){if(null!=t.b)return t.c.concat(t.b.j);if(null==t.a||0==t.a.a.c)return S(t.c);var e=t.c;return T(t.a.C(),function(t){e=e.concat(t.j)}),e}function gn(){}function mn(){this.a=new gn}function _n(t,r,e){var i=e||"";try{Se(t,function(t,e){var n=t;l(t)&&(n=Ct(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}function bn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}un.prototype.cancel=function(){var t;this.c=yn(this),this.b?(this.b.cancel(),this.b=null):this.a&&0!=this.a.a.c&&(T(this.a.C(),function(t){t.cancel()}),(t=this.a.a).b={},t.a.length=0,t.c=0)},gn.prototype.stringify=function(t){return f.JSON.stringify(t,void 0)},gn.prototype.parse=function(t){return f.JSON.parse(t,void 0)};var wn=f.JSON.parse;function En(t){It.call(this),this.headers=new Ce,this.H=t||null,this.b=!1,this.s=this.a=null,this.A="",this.h=0,this.f="",this.g=this.w=this.l=this.v=!1,this.o=0,this.m=null,this.I=Tn,this.D=this.F=!1}b(En,It);var Tn="",In=/^https?$/i,Sn=["POST","PUT"];function Cn(t){return"content-type"==t.toLowerCase()}function An(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Nn(t),Dn(t)}function Nn(t){t.v||(t.v=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function On(t){if(t.b&&void 0!==u&&(!t.s[1]||4!=xn(t)||2!=t.T()))if(t.l&&4==xn(t))Ut(t.Ea,0,t);else if(t.dispatchEvent("readystatechange"),4==xn(t)){t.b=!1;try{var e,n=t.T();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.A).match(De)[1]||null;if(!o&&f.self&&f.self.location){var s=f.self.location.protocol;o=s.substr(0,s.length-1)}i=!In.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{t.h=6;try{var a=2<xn(t)?t.a.statusText:""}catch(t){a=""}t.f=a+" ["+t.T()+"]",Nn(t)}}finally{Dn(t)}}}function Dn(t,e){if(t.a){kn(t);var n=t.a,r=t.s[0]?i:null;t.a=null,t.s=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(t){}}}function kn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(f.clearTimeout(t.m),t.m=null)}function xn(t){return t.a?t.a.readyState:0}function Rn(t,e){return t.a?t.a.getResponseHeader(e):null}function Pn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}if(r)return t;var i;if(i="",R(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,a(t)){if(e=encodeURIComponent(String(e)),e+=n=null!=n?"="+encodeURIComponent(String(n)):""){if((n=t.indexOf("#"))<0&&(n=t.length),(r=t.indexOf("?"))<0||n<r){r=n;var o=""}else o=t.substring(r+1,n);n=(t=[t.substr(0,r),o,t.substr(n)])[1],t[1]=e?n?n+"&"+e:e:n,t=t[0]+(t[1]?"?"+t[1]:"")+t[2]}return t}return Fe(t,e,n),t}function Ln(t){this.f=[],this.F=new rn,this.ga=this.pa=this.B=this.ha=this.a=this.I=this.j=this.V=this.g=this.J=this.i=null,this.Qa=this.P=0,this.Oa=!!r("internalChannelParams.failFast",t),this.ia=this.w=this.s=this.l=this.h=this.c=null,this.oa=!0,this.m=this.ra=this.O=-1,this.S=this.v=this.A=0,this.Na=r("internalChannelParams.baseRetryDelayMs",t)||5e3,this.Ra=r("internalChannelParams.retryDelaySeedMs",t)||1e4,this.Pa=r("internalChannelParams.forwardChannelMaxRetries",t)||2,this.qa=r("internalChannelParams.forwardChannelRequestTimeoutMs",t)||2e4,this.Ka=t&&t.Ab||void 0,this.D=void 0,this.R=t&&t.supportsCrossDomainXhr||!1,this.H="",this.b=new un(t&&t.concurrentRequestLimit),this.ja=new mn,this.o=!t||void 0===t.backgroundChannelTest||t.backgroundChannelTest,(this.W=t&&t.fastHandshake||!1)&&!this.o&&(this.o=!0),t&&t.forceLongPolling&&(this.oa=!1),this.fa=void 0}function Mn(t){if(Fn(t),3==t.u){var e=t.P++,n=xe(t.B);Fe(n,"SID",t.H),Fe(n,"RID",e),Fe(n,"TYPE","terminate"),Vn(t,n),(e=new he(t,e,void 0)).F=2,e.f=Ue(xe(n)),n=!1,f.navigator&&f.navigator.sendBeacon&&(n=f.navigator.sendBeacon(e.f.toString(),"")),!n&&f.Image&&((new Image).src=e.f,n=!0),n||(e.a=e.g.$(null),e.a.ca(e.f)),e.v=_(),_e(e)}Yn(t)}function Fn(t){t.w&&(t.w.abort(),t.w=null),t.a&&(t.a.cancel(),t.a=null),t.l&&(f.clearTimeout(t.l),t.l=null),zn(t),t.b.cancel(),t.h&&(s(t.h)&&f.clearTimeout(t.h),t.h=null)}function jn(t,e){t.f.push(new an(t.Qa++,e)),3==t.u&&Un(t)}function Un(t){ln(t.b)||t.h||(t.h=!0,Rt(t.Ha,t),t.A=0)}function qn(t,e){var n;n=e?e.W:t.P++;var r=xe(t.B);Fe(r,"SID",t.H),Fe(r,"RID",n),Fe(r,"AID",t.O),Vn(t,r),t.g&&t.i&&Pn(r,t.g,t.i),n=new he(t,n,t.A+1),null===t.g&&(n.h=t.i),e&&(t.f=e.j.concat(t.f)),e=Hn(t,n,1e3),n.setTimeout(Math.round(.5*t.qa)+Math.round(.5*t.qa*Math.random())),dn(t.b,n),de(n,r,e)}function Vn(t,n){t.c&&Se({},function(t,e){Fe(n,e,t)})}function Hn(t,e,n){n=Math.min(t.f.length,n);var r=t.c?g(t.c.Sa,t.c,t):null;t:for(var i=t.f,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,h=i[u].a;if((c-=o)<0)o=Math.max(0,i[u].b-100),a=!1;else try{_n(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.f.splice(0,n),e.j=t,r}function Wn(t){t.a||t.l||(t.S=1,Rt(t.Ga,t),t.v=0)}function Bn(t){return!(t.a||t.l||3<=t.v)&&(t.S++,t.l=Zt(g(t.Ga,t),Kn(t,t.v)),t.v++,1)}function Gn(t,e,n){var r=e.l;r&&hn(t.b,r),t.ia=t.oa&&n,t.m=e.c,t.B=Xn(t,null,t.ha),Un(t)}function zn(t){null!=t.s&&(f.clearTimeout(t.s),t.s=null)}function Kn(t,e){var n=t.Na+Math.floor(Math.random()*t.Ra);return t.ma()||(n*=2),n*e}function Qn(t,e){if(2==e){var n=null;t.c&&(n=null);var r=g(t.eb,t);n||(n=new ke("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||Re(n,"https"),Ue(n)),function(t,e){var n=new zt;if(f.Image){var r=new Image;r.onload=m(bn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=m(bn,n,r,"TestLoadImage: error",!1,e),r.onabort=m(bn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=m(bn,n,r,"TestLoadImage: timeout",!1,e),f.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Jt(2);t.u=0,t.c&&t.c.ta(e),Yn(t),Fn(t)}function Yn(t){t.u=0,t.m=-1,t.c&&(0==yn(t.b).length&&0==t.f.length||(t.b.c.length=0,S(t.f),t.f.length=0),t.c.sa())}function Xn(t,e,n){var r,i,o,s,a,u,c=(r=n)instanceof ke?xe(r):new ke(r,void 0);if(""!=c.b)e&&Pe(c,e+"."+c.b),Le(c,c.i);else{var h,l=f.location;h=e?e+"."+l.hostname:l.hostname,i=l.protocol,o=h,s=+l.port,a=n,u=new ke(null,void 0),i&&Re(u,i),o&&Pe(u,o),s&&Le(u,s),a&&(u.a=a),c=u}return t.V&&R(t.V,function(t,e){Fe(c,e,t)}),e=t.j,n=t.I,e&&n&&Fe(c,e,n),Fe(c,"VER",t.wa),Vn(t,c),c}function Jn(){}function $n(){if(V&&!(10<=Number(X)))throw Error("Environmental error: no available transport.")}function Zn(t,e){It.call(this),this.a=new Ln(e),this.g=t,this.m=e&&e.fb?e.fb:function(t){for(var e=t,n=1;n<arguments.length;n++){var r,i=arguments[n];if(0==i.lastIndexOf("/",0))e=i;else(r=""==e)||(r=0<=(r=e.length-1)&&e.indexOf("/",r)==r),e+=r?i:"/"+i}return e}(this.g,"test"),this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.i=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.xa&&(t?t["X-WebChannel-Client-Profile"]=e.xa:t={"X-WebChannel-Client-Profile":e.xa}),this.a.J=t,(t=e&&e.httpHeadersOverwriteParam)&&!C(t)&&(this.a.g=t),this.l=e&&e.supportsCrossDomainXhr||!1,this.h=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!C(e)&&(this.a.j=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new nr(this)}function tr(t){ae.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function er(){ue.call(this),this.status=1}function nr(t){this.a=t}(e=En.prototype).ca=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.A+"; newUri="+t);e=e?e.toUpperCase():"GET",this.A=t,this.f="",this.h=0,this.v=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?re(this.H):re(oe),this.a.onreadystatechange=g(this.Ea,this);try{this.w=!0,this.a.open(e,String(t),!0),this.w=!1}catch(t){return void An(this,t)}t=n||"";var i,o=new Ce(this.headers);r&&Se(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Cn,n=t.length,r=a(t)?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:a(t)?t.charAt(e):t[e]}(o.K()),n=f.FormData&&t instanceof f.FormData,0<=E(Sn,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{kn(this),0<this.o&&((this.D=(i=this.a,V&&$(9)&&s(i.timeout)&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=g(this.Ba,this)):this.m=Ut(this.Ba,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){An(this,t)}},e.Ba=function(){void 0!==u&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,this.dispatchEvent("timeout"),this.abort(8))},e.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Dn(this))},e.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),Dn(this,!0)),En.N.G.call(this)},e.Ea=function(){this.j||(this.w||this.l||this.g?On(this):this.Za())},e.Za=function(){On(this)},e.T=function(){try{return 2<xn(this)?this.a.status:-1}catch(t){return-1}},e.aa=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},e.Ua=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),wn(e)}},e.ya=function(){return this.h},e.Xa=function(){return a(this.f)?this.f:String(this.f)},(e=Ln.prototype).wa=8,e.u=1,e.Ca=function(){return 0==this.u},e.Ha=function(t){if(this.h)if(this.h=null,1==this.u){if(!t){this.P=Math.floor(1e5*Math.random()),t=this.P++;var e,n=new he(this,t,void 0),r=this.i;if(this.J&&(r?M(r=P(r),this.J):r=this.J),null===this.g&&(n.h=r),this.W)t:{for(var i=e=0;i<this.f.length;i++){var o=this.f[i];if("__data__"in o.a&&a(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.f.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Hn(this,n,e),Fe(i=xe(this.B),"RID",t),Fe(i,"CVER",22),this.o&&this.j&&Fe(i,"X-HTTP-Session-Id",this.j),Vn(this,i),this.g&&r&&Pn(i,this.g,r),dn(this.b,n),this.W?(Fe(i,"$req",e),Fe(i,"SID","null"),n.S=!0,de(n,i,null)):de(n,i,e),this.u=2}}else 3==this.u&&(t?qn(this,t):0==this.f.length||ln(this.b)||qn(this))},e.Ga=function(){this.l=null,this.a=new he(this,"rpc",this.S),null===this.g&&(this.a.h=this.i),this.a.J=0;var t=xe(this.pa);Fe(t,"RID","rpc"),Fe(t,"SID",this.H),Fe(t,"CI",this.ia?"0":"1"),Fe(t,"AID",this.O),Vn(this,t),Fe(t,"TYPE","xmlhttp"),this.g&&this.i&&Pn(t,this.g,this.i),this.D&&this.a.setTimeout(this.D),ve(this.a,t,!0,this.ga)},e.Fa=function(t,e){if(0!=this.u&&(this.a==t||pn(this.b,t)))if(this.m=t.o,!t.s&&pn(this.b,t)&&3==this.u){try{var n=this.ja.a.parse(e)}catch(t){n=null}if(c(n)&&3==n.length){if(0==(e=n)[0]){t:if(!this.l){if(this.a){if(!(this.a.v+3e3<t.v))break t;zn(this),this.a.cancel(),this.a=null}Bn(this),Jt(18)}}else this.ra=e[1],0<this.ra-this.O&&e[2]<37500&&this.ia&&0==this.v&&!this.s&&(this.s=Zt(g(this.Ya,this),6e3));if(fn(this.b)<=1&&this.fa){try{this.fa()}catch(t){}this.fa=void 0}}else Qn(this,11)}else if(!t.s&&this.a!=t||zn(this),!C(e))for(e=n=this.ja.a.parse(e),n=0;n<e.length;n++){var r=e[n];if(this.O=r[0],r=r[1],2==this.u)if("c"==r[0]){this.H=r[1],this.ga=r[2];var i=r[3];null!=i&&(this.wa=i),null!=(r=r[5])&&s(r)&&0<r&&(this.D=1.5*r),this.o&&(r=t.a)&&((i=Rn(r,"X-Client-Wire-Protocol"))&&hn(this.b,i),this.j&&(r=Rn(r,"X-HTTP-Session-Id")))&&(this.I=r,Fe(this.B,this.j,r)),this.u=3,this.c&&this.c.va(),r=t,this.pa=Xn(this,this.Y()?this.ga:null,this.ha),r.s?(vn(this.b,r),(i=this.D)&&r.setTimeout(i),r.i&&(we(r),_e(r)),this.a=r):Wn(this),0<this.f.length&&Un(this)}else"stop"!=r[0]&&"close"!=r[0]||Qn(this,7);else 3==this.u&&("stop"==r[0]||"close"==r[0]?"stop"==r[0]?Qn(this,7):Mn(this):"noop"!=r[0]&&this.c&&this.c.ua(r),this.v=0)}},e.Ya=function(){null!=this.s&&(this.s=null,this.a.cancel(),this.a=null,Bn(this),Jt(19))},e.na=function(t){var e=null;if(this.a==t){zn(this),this.a=null;var n=2}else{if(!pn(this.b,t))return;e=t.j,vn(this.b,t),n=1}if(this.m=t.o,0!=this.u)if(t.b)1==n?(e=_()-t.v,Kt.dispatchEvent(new $t(Kt,t.l?t.l.length:0,e,this.A)),Un(this)):Wn(this);else{var r=t.c;if(3==r||0==r&&0<this.m||!(1==n&&function(t,e){if(!(fn(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.f=e.j.concat(t.f),1;if(!(1==t.u||2==t.u||t.A>=(t.Oa?0:t.Pa)))return t.h=Zt(g(t.Ha,t,e),Kn(t,t.A)),t.A++,1}}(this,t)||2==n&&Bn(this)))switch(e&&0<e.length&&(t=this.b,t.c=t.c.concat(e)),r){case 1:Qn(this,5);break;case 4:Qn(this,10);break;case 3:Qn(this,6);break;default:Qn(this,2)}}},e.eb=function(t){Jt(t?2:1)},e.$=function(t){if(t&&!this.R)throw Error("Can't create secondary domain capable XhrIo object.");return(t=new En(this.Ka)).F=this.R,t},e.ma=function(){return!!this.c&&!0},e.Y=function(){return this.R},(e=Jn.prototype).va=function(){},e.ua=function(){},e.ta=function(){},e.sa=function(){},e.Sa=function(){},$n.prototype.a=function(t,e){return new Zn(t,e)},b(Zn,It),(e=Zn.prototype).addEventListener=function(t,e,n,r){Zn.N.addEventListener.call(this,t,e,n,r)},e.removeEventListener=function(t,e,n,r){Zn.N.removeEventListener.call(this,t,e,n,r)},e.Va=function(){this.a.c=this.f,this.l&&(this.a.R=!0);var t=this.a,e=this.m,n=this.g,r=this.b||void 0;Jt(0),t.ha=n,t.V=r||{},t.o&&(t.F.b=[],t.F.a=!1),t.w=new en(t),null===t.g&&(t.w.h=t.i),n=e,t.g&&t.i&&(n=Pn(e,t.g,t.i)),(t=t.w).i=n,e=Xn(t.a,null,t.i),Jt(3),null!=(n=t.a.F.b)?(t.f=n[0],t.M=1,nn(t)):(je(e,"MODE","init"),!t.a.o&&t.a.j&&je(e,"X-HTTP-Session-Id",t.a.j),t.b=new he(t,void 0,void 0),t.b.h=t.h,ve(t.b,e,!1,null),t.M=0)},e.close=function(){Mn(this.a)},e.Wa=function(t){if(a(t)){var e={};e.__data__=t,jn(this.a,e)}else this.h?((e={}).__data__=Ct(t),jn(this.a,e)):jn(this.a,t)},e.G=function(){this.a.c=null,delete this.f,Mn(this.a),delete this.a,Zn.N.G.call(this)},b(tr,ae),b(er,ue),b(nr,Jn),nr.prototype.va=function(){this.a.dispatchEvent("a")},nr.prototype.ua=function(t){this.a.dispatchEvent(new tr(t))},nr.prototype.ta=function(t){this.a.dispatchEvent(new er(t))},nr.prototype.sa=function(){this.a.dispatchEvent("b")};var rr=m(function(t,e){function n(){}n.prototype=t.prototype;var r=new n;return t.apply(r,Array.prototype.slice.call(arguments,1)),r},$n);$n.prototype.createWebChannel=$n.prototype.a,Zn.prototype.send=Zn.prototype.Wa,Zn.prototype.open=Zn.prototype.Va,Zn.prototype.close=Zn.prototype.close,te.NO_ERROR=0,te.TIMEOUT=8,te.HTTP_ERROR=6,ee.COMPLETE="complete",(ie.EventType=se).OPEN="a",se.CLOSE="b",se.ERROR="c",se.MESSAGE="d",It.prototype.listen=It.prototype.za,En.prototype.listenOnce=En.prototype.Aa,En.prototype.getLastError=En.prototype.Xa,En.prototype.getLastErrorCode=En.prototype.ya,En.prototype.getStatus=En.prototype.T,En.prototype.getResponseJson=En.prototype.Ua,En.prototype.getResponseText=En.prototype.aa,En.prototype.send=En.prototype.ca;var ir={createWebChannelTransport:rr,ErrorCode:te,EventType:ee,WebChannel:ie,XhrIo:En},or=ir.createWebChannelTransport,sr=ir.ErrorCode,ar=ir.EventType,ur=ir.WebChannel,cr=ir.XhrIo;hr.default=ir}.call(this,lr(38))},435:function(t,e,n){"use strict";var r,i,o=(r=n(16))&&"object"==typeof r&&"default"in r?r.default:r,p=n(436),s=n(74),c={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},d=(i=Error,p.__extends(a,i),a);function a(t,e,n){var r=i.call(this,e)||this;return Object.setPrototypeOf(r,a.prototype),r.code=t,r.details=n,r}function v(t,e,n){var r=function(t){if(200<=t&&t<300)return"ok";switch(t){case 0:return"internal";case 400:return"invalid-argument";case 401:return"unauthenticated";case 403:return"permission-denied";case 404:return"not-found";case 409:return"aborted";case 429:return"resource-exhausted";case 499:return"cancelled";case 500:return"internal";case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline-exceeded"}return"unknown"}(t),i=r,o=void 0;try{var s=e&&e.error;if(s){var a=s.status;if("string"==typeof a){if(!c[a])return new d("internal","internal");r=c[a],i=a}var u=s.message;"string"==typeof u&&(i=u),void 0!==(o=s.details)&&(o=n.decode(o))}}catch(t){}return"ok"===r?null:new d(r,i,o)}var u=(h.prototype.getAuthToken=function(){return p.__awaiter(this,void 0,void 0,function(){var e;return p.__generator(this,function(t){switch(t.label){case 0:if(!this.auth)return[2,void 0];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.auth.getToken()];case 2:return(e=t.sent())?[2,e.accessToken]:[2,void 0];case 3:return t.sent(),[2,void 0];case 4:return[2]}})})},h.prototype.getInstanceIdToken=function(){return p.__awaiter(this,void 0,void 0,function(){return p.__generator(this,function(t){if(!(this.messaging&&"Notification"in self&&"granted"===Notification.permission))return[2,void 0];try{return[2,this.messaging.getToken()]}catch(t){return[2,void 0]}return[2]})})},h.prototype.getContext=function(){return p.__awaiter(this,void 0,void 0,function(){var e,n;return p.__generator(this,function(t){switch(t.label){case 0:return[4,this.getAuthToken()];case 1:return e=t.sent(),[4,this.getInstanceIdToken()];case 2:return n=t.sent(),[2,{authToken:e,instanceIdToken:n}]}})})},h);function h(t,e){var n=this;this.auth=null,this.messaging=null,this.auth=t.getImmediate({optional:!0}),this.messaging=e.getImmediate({optional:!0}),this.auth||t.get().then(function(t){return n.auth=t},function(){}),this.messaging||e.get().then(function(t){return n.messaging=t},function(){})}function l(t,e){var n={};for(var r in t)t.hasOwnProperty(r)&&(n[r]=e(t[r]));return n}var f=(y.prototype.encode=function(t){var e=this;if(null==t)return null;if(t instanceof Number&&(t=t.valueOf()),"number"==typeof t&&isFinite(t))return t;if(!0===t||!1===t)return t;if("[object String]"===Object.prototype.toString.call(t))return t;if(Array.isArray(t))return t.map(function(t){return e.encode(t)});if("function"==typeof t||"object"==typeof t)return l(t,function(t){return e.encode(t)});throw new Error("Data cannot be encoded in JSON: "+t)},y.prototype.decode=function(t){var e=this;if(null==t)return t;if(t["@type"])switch(t["@type"]){case"type.googleapis.com/google.protobuf.Int64Value":case"type.googleapis.com/google.protobuf.UInt64Value":var n=Number(t.value);if(isNaN(n))throw new Error("Data cannot be decoded from JSON: "+t);return n;default:throw new Error("Data cannot be decoded from JSON: "+t)}return Array.isArray(t)?t.map(function(t){return e.decode(t)}):"function"==typeof t||"object"==typeof t?l(t,function(t){return e.decode(t)}):t},y);function y(){}var g=(Object.defineProperty(m.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),m.prototype._url=function(t){var e=this.app_.options.projectId,n=this.region_;return null===this.emulatorOrigin?"https://"+n+"-"+e+".cloudfunctions.net/"+t:this.emulatorOrigin+"/"+e+"/"+n+"/"+t},m.prototype.useFunctionsEmulator=function(t){this.emulatorOrigin=t},m.prototype.httpsCallable=function(e,n){var r=this;return function(t){return r.call(e,t,n||{})}},m.prototype.postJSON=function(r,i,o){return p.__awaiter(this,void 0,void 0,function(){var e,n;return p.__generator(this,function(t){switch(t.label){case 0:o.append("Content-Type","application/json"),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,fetch(r,{method:"POST",body:JSON.stringify(i),headers:o})];case 2:return e=t.sent(),[3,4];case 3:return t.sent(),[2,{status:0,json:null}];case 4:n=null,t.label=5;case 5:return t.trys.push([5,7,,8]),[4,e.json()];case 6:return n=t.sent(),[3,8];case 7:return t.sent(),[3,8];case 8:return[2,{status:e.status,json:n}]}})})},m.prototype.call=function(h,l,f){return p.__awaiter(this,void 0,void 0,function(){var e,r,i,o,s,a,u,c;return p.__generator(this,function(t){switch(t.label){case 0:return e=this._url(h),l=this.serializer.encode(l),r={data:l},i=new Headers,[4,this.contextProvider.getContext()];case 1:return(o=t.sent()).authToken&&i.append("Authorization","Bearer "+o.authToken),o.instanceIdToken&&i.append("Firebase-Instance-ID-Token",o.instanceIdToken),s=f.timeout||7e4,[4,Promise.race([this.postJSON(e,r,i),(n=s,new Promise(function(t,e){setTimeout(function(){e(new d("deadline-exceeded","deadline-exceeded"))},n)})),this.cancelAllRequests])];case 2:if(!(a=t.sent()))throw new d("cancelled","Firebase Functions instance was deleted.");if(u=v(a.status,a.json,this.serializer))throw u;if(!a.json)throw new d("internal","Response is not valid JSON object.");if(void 0===(c=a.json.data)&&(c=a.json.result),void 0===c)throw new d("internal","Response is missing data field.");return[2,{data:this.serializer.decode(c)}]}var n})})},m);function m(t,e,n,r){var i=this;void 0===r&&(r="us-central1"),this.app_=t,this.region_=r,this.serializer=new f,this.emulatorOrigin=null,this.INTERNAL={delete:function(){return i.deleteService()}},this.contextProvider=new u(e,n),this.cancelAllRequests=new Promise(function(t){i.deleteService=function(){return t()}})}function _(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("messaging");return new g(n,r,i,e)}var b;b={Functions:g},o.INTERNAL.registerComponent(new s.Component("functions",_,"PUBLIC").setServiceProps(b).setMultipleInstances(!0)),o.registerVersion("@firebase/functions","0.4.38")},436:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return h}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return v}),n.d(e,"__spreadArrays",function(){return y}),n.d(e,"__await",function(){return g}),n.d(e,"__asyncGenerator",function(){return m}),n.d(e,"__asyncDelegator",function(){return _}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return E}),n.d(e,"__importDefault",function(){return T}),n.d(e,"__classPrivateFieldGet",function(){return I}),n.d(e,"__classPrivateFieldSet",function(){return S});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}function u(n,r){return function(t,e){r(t,e,n)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function l(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),s=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<s.push([r,n,t,e])||a(r,n)})})}function a(t,e){try{(n=o[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,c):h(s[0][2],n)}catch(t){h(s[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(i=!i)?{value:g(r[e](t)),done:"return"===e}:n?n(t):t}:n}}function b(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=u[Symbol.asyncIterator];return e?e.call(u):(u=p(u),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=u[a]&&function(s){return new Promise(function(t,e){var n,r,i,o;s=u[a](s),n=t,r=e,i=s.done,o=s.value,Promise.resolve(o).then(function(t){n({value:t,done:i})},r)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function I(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},437:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(16))&&"object"==typeof r&&"default"in r?r.default:r;n(229);var o,s,a,u,c=n(438),h=n(86),l=n(152),f=n(74),p="0.2.36",d="FB-PERF-TRACE-MEASURE",v="@firebase/performance/config",y="@firebase/performance/configexpire",g="Performance",m=((o={})["trace started"]="Trace {$traceName} was started before.",o["trace stopped"]="Trace {$traceName} is not running.",o["no window"]="Window is not available.",o["no app id"]="App id is not available.",o["no project id"]="Project id is not available.",o["no api key"]="Api key is not available.",o["invalid cc log"]="Attempted to queue invalid cc event",o["FB not default"]="Performance can only start when Firebase app instance is the default one.",o["RC response not ok"]="RC response is not ok",o["invalid attribute name"]="Attribute name {$attributeName} is invalid.",o["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",o["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",o),_=new h.ErrorFactory("performance",g,m),b=(w.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},w.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},w.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},w.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},w.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},w.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},w.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},w.prototype.setupObserver=function(t,i){this.PerformanceObserver&&new this.PerformanceObserver(function(t){for(var e=0,n=t.getEntries();e<n.length;e++){var r=n[e];i(r)}}).observe({entryTypes:[t]})},w.getInstance=function(){return void 0===s&&(s=new w(a)),s},w);function w(t){if(!(this.window=t))throw _.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}var E,T,I,S=(C.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw _.create("no app id");return t},C.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw _.create("no project id");return t},C.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw _.create("no api key");return t},C.getInstance=function(){return void 0===u&&(u=new C),u},C);function C(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}function A(){return E}(I=T=T||{})[I.UNKNOWN=0]="UNKNOWN",I[I.VISIBLE=1]="VISIBLE",I[I.HIDDEN=2]="HIDDEN";var N=["firebase_","google_","ga_"],O=new RegExp("^[a-zA-Z]\\w*$");function D(){switch(b.getInstance().document.visibilityState){case"visible":return T.VISIBLE;case"hidden":return T.HIDDEN;default:return T.UNKNOWN}}var k=new l.Logger(g);k.logLevel=l.LogLevel.INFO;var x="0.0.1",R={loggingEnabled:!0},P="FIREBASE_INSTALLATIONS_AUTH";function L(t){var r,e=function(){var t=b.getInstance().localStorage;if(!t)return;var e=t.getItem(y);if(!e||!function(t){return Number(t)>Date.now()}(e))return;var n=t.getItem(v);if(!n)return;try{return JSON.parse(n)}catch(t){return}}();return e?(F(e),Promise.resolve()):(r=t,function(){var t=S.getInstance().installationsService.getToken();return t.then(function(t){}),t}().then(function(t){var e="https://firebaseremoteconfig.googleapis.com/v1/projects/"+S.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+S.getInstance().getApiKey(),n=new Request(e,{method:"POST",headers:{Authorization:P+" "+t},body:JSON.stringify({app_instance_id:r,app_instance_id_token:t,app_id:S.getInstance().getAppId(),app_version:p,sdk_version:x})});return fetch(n).then(function(t){if(t.ok)return t.json();throw _.create("RC response not ok")})}).catch(function(){k.info(M)})).then(function(t){return F(t)}).then(function(t){return function(t){var e=b.getInstance().localStorage;if(!t||!e)return;e.setItem(v,JSON.stringify(t)),e.setItem(y,String(Date.now()+60*S.getInstance().configTimeToLive*60*1e3))}(t)},function(){})}var M="Could not fetch config, will use default configs";function F(t){if(!t)return t;var e=S.getInstance(),n=t.entries||{};return e.loggingEnabled=void 0!==n.fpr_enabled?"true"===String(n.fpr_enabled):R.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=j(e.tracesSamplingRate),e.logNetworkAfterSampling=j(e.networkRequestsSamplingRate),t}function j(t){return Math.random()<=t}var U,q=1;function V(){return q=2,U=U||function(){var n=b.getInstance().document;return new Promise(function(t){if(n&&"complete"!==n.readyState){var e=function(){"complete"===n.readyState&&(n.removeEventListener("readystatechange",e),t())};n.addEventListener("readystatechange",e)}else t()})}().then(function(){return(t=S.getInstance().installationsService.getId()).then(function(t){E=t}),t;var t}).then(function(t){return L(t)}).then(function(){return H()},function(){return H()})}function H(){q=3}var W,B=1e4,G=5500,z=3,K=z,Q=[],Y=!1;function X(){Y||(!function r(t){setTimeout(function(){if(0!==K){if(!Q.length)return r(B);var t=c.__spreadArrays(Q);Q=[];var e=t.map(function(t){return{source_extension_json_proto3:t.message,event_time_ms:String(t.eventTime)}}),n={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:S.getInstance().logSource,log_event:e};fetch(S.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(n)}).then(function(t){return t.ok||k.info("Call to Firebase backend failed."),t.json()}).then(function(t){var e=Number(t.next_request_wait_millis),n=isNaN(e)?B:Math.max(B,e);K=z,r(n)}).catch(function(){Q=c.__spreadArrays(t,Q),K--,k.info("Tries left: "+K+"."),r(B)})}},t)}(G),Y=!0)}function J(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];!function(t){if(!t.eventTime||!t.message)throw _.create("invalid cc log");Q=c.__spreadArrays(Q,[t])}({message:n.apply(void 0,t),eventTime:Date.now()})}}function $(t,e){(W=W||J(et))(t,e)}function Z(t){var e=S.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&b.getInstance().requiredApisAvailable()&&(t.isAuto&&D()!==T.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===q?tt(t):V().then(function(){return tt(t)},function(){return tt(t)})))}function tt(t){A()&&setTimeout(function(){return $(t,1)},0)}function et(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},i={application_info:nt(),network_request_metric:r},JSON.stringify(i)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=t.counters);var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=n);var r={application_info:nt(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,i}function nt(){return{google_app_id:S.getInstance().getAppId(),app_instance_id:A(),web_app_info:{sdk_version:p,page_url:b.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=b.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:D(),effective_connection_type:function(){var t=b.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var rt=["_fp","_fcp","_fid"];var it=(ot.prototype.start=function(){if(1!==this.state)throw _.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},ot.prototype.stop=function(){if(2!==this.state)throw _.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Z(this)},ot.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=c.__assign({},n.attributes)),n&&n.metrics)for(var r=0,i=Object.keys(n.metrics);r<i.length;r++){var o=i[r];isNaN(Number(n.metrics[o]))||(this.counters[o]=Number(Math.floor(n.metrics[o])))}Z(this)},ot.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},ot.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||100<n.length||!(r&&r.startsWith("_wt_")&&-1<rt.indexOf(n))&&n.startsWith("_"))throw _.create("invalide custom metric name",{customMetricName:t});var n,r;this.counters[t]=e},ot.prototype.getMetric=function(t){return this.counters[t]||0},ot.prototype.putAttribute=function(t,e){var n,r,i=!(0===(n=t).length||40<n.length||N.some(function(t){return n.startsWith(t)})||!n.match(O)),o=0!==(r=e).length&&r.length<=100;if(i&&o)this.customAttributes[t]=e;else{if(!i)throw _.create("invalid attribute name",{attributeName:t});if(!o)throw _.create("invalid attribute value",{attributeValue:e})}},ot.prototype.getAttribute=function(t){return this.customAttributes[t]},ot.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},ot.prototype.getAttributes=function(){return c.__assign({},this.customAttributes)},ot.prototype.setStartTime=function(t){this.startTimeUs=t},ot.prototype.setDuration=function(t){this.durationUs=t},ot.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},ot.createOobTrace=function(t,e,n){var r=b.getInstance().getUrl();if(r){var i=new ot("_wt_"+r,!0),o=Math.floor(1e3*b.getInstance().getTimeOrigin());if(i.setStartTime(o),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),e){var s=e.find(function(t){return"first-paint"===t.name});s&&s.startTime&&i.putMetric("_fp",Math.floor(1e3*s.startTime));var a=e.find(function(t){return"first-contentful-paint"===t.name});a&&a.startTime&&i.putMetric("_fcp",Math.floor(1e3*a.startTime)),n&&i.putMetric("_fid",Math.floor(1e3*n))}Z(i)}},ot.createUserTimingTrace=function(t){Z(new ot(t,!1,t))},ot);function ot(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=b.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||d+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function st(t){var e=t;if(e&&void 0!==e.responseStart){var n,r,i=b.getInstance().getTimeOrigin(),o=Math.floor(1e3*(e.startTime+i)),s=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,a=Math.floor(1e3*(e.responseEnd-e.startTime)),u={url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:o,timeToResponseInitiatedUs:s,timeToResponseCompletedUs:a};n=u,(r=S.getInstance()).instrumentationEnabled&&n.url!==r.logEndPointUrl.split("?")[0]&&r.loggingEnabled&&r.logNetworkAfterSampling&&setTimeout(function(){return $(n,0)},0)}}var at=5e3;function ut(){A()&&(setTimeout(function(){return function(){var t=b.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout(function(){it.createOobTrace(e,n),r=void 0},at);t.onFirstInputDelay(function(t){r&&(clearTimeout(r),it.createOobTrace(e,n,t))})}else it.createOobTrace(e,n)}()},0),setTimeout(function(){return function(){for(var t=b.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){st(r[n])}t.setupObserver("resource",st)}()},0),setTimeout(function(){return function(){for(var t=b.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){ct(r[n])}t.setupObserver("measure",ct)}()},0))}function ct(t){var e=t.name;e.substring(0,d.length)!==d&&it.createUserTimingTrace(e)}var ht=(lt.prototype.trace=function(t){return new it(t)},Object.defineProperty(lt.prototype,"instrumentationEnabled",{get:function(){return S.getInstance().instrumentationEnabled},set:function(t){S.getInstance().instrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(lt.prototype,"dataCollectionEnabled",{get:function(){return S.getInstance().dataCollectionEnabled},set:function(t){S.getInstance().dataCollectionEnabled=t},enumerable:!0,configurable:!0}),lt);function lt(t){this.app=t,b.getInstance().requiredApisAvailable()?(X(),V().then(ut,ut)):k.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}function ft(t){function r(t,e){if("[DEFAULT]"!==t.name)throw _.create("FB not default");if("undefined"==typeof window)throw _.create("no window");return a=window,S.getInstance().firebaseAppInstance=t,S.getInstance().installationsService=e,new ht(t)}t.INTERNAL.registerComponent(new f.Component("performance",function(t){var e=t.getProvider("app").getImmediate(),n=t.getProvider("installations").getImmediate();return r(e,n)},"PUBLIC")),t.registerVersion("@firebase/performance","0.2.36")}ft(i),e.registerPerformance=ft},438:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return h}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return v}),n.d(e,"__spreadArrays",function(){return y}),n.d(e,"__await",function(){return g}),n.d(e,"__asyncGenerator",function(){return m}),n.d(e,"__asyncDelegator",function(){return _}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return E}),n.d(e,"__importDefault",function(){return T}),n.d(e,"__classPrivateFieldGet",function(){return I}),n.d(e,"__classPrivateFieldSet",function(){return S});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}function u(n,r){return function(t,e){r(t,e,n)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function l(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),s=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<s.push([r,n,t,e])||a(r,n)})})}function a(t,e){try{(n=o[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,c):h(s[0][2],n)}catch(t){h(s[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(i=!i)?{value:g(r[e](t)),done:"return"===e}:n?n(t):t}:n}}function b(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=u[Symbol.asyncIterator];return e?e.call(u):(u=p(u),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=u[a]&&function(s){return new Promise(function(t,e){var n,r,i,o;s=u[a](s),n=t,r=e,i=s.done,o=s.value,Promise.resolve(o).then(function(t){n({value:t,done:i})},r)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function I(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},439:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,i=(r=n(16))&&"object"==typeof r&&"default"in r?r.default:r;n(229);var o,E=n(440),f=n(86),y=n(152),s=n(74),g=(a.prototype.isCachedDataFresh=function(t,e){if(!e)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;var n=Date.now()-e,r=n<=t;return this.logger.debug("Config fetch cache check. Cache age millis: "+n+". Cache max age millis (minimumFetchIntervalMillis setting): "+t+". Is cache hit: "+r+"."),r},a.prototype.fetch=function(s){return E.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o;return E.__generator(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.storage.getLastSuccessfulFetchTimestampMillis(),this.storage.getLastSuccessfulFetchResponse()])];case 1:return e=t.sent(),n=e[0],(r=e[1])&&this.isCachedDataFresh(s.cacheMaxAgeMillis,n)?[2,r]:(s.eTag=r&&r.eTag,[4,this.client.fetch(s)]);case 2:return i=t.sent(),o=[this.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())],200===i.status&&o.push(this.storage.setLastSuccessfulFetchResponse(i)),[4,Promise.all(o)];case 3:return t.sent(),[2,i]}})})},a);function a(t,e,n,r){this.client=t,this.storage=e,this.storageCache=n,this.logger=r}var u=((o={})["registration-window"]="Undefined window object. This SDK only supports usage in a browser environment.",o["registration-project-id"]="Undefined project identifier. Check Firebase app initialization.",o["registration-api-key"]="Undefined API key. Check Firebase app initialization.",o["registration-app-id"]="Undefined app identifier. Check Firebase app initialization.",o["storage-open"]="Error thrown when opening storage. Original error: {$originalErrorMessage}.",o["storage-get"]="Error thrown when reading from storage. Original error: {$originalErrorMessage}.",o["storage-set"]="Error thrown when writing to storage. Original error: {$originalErrorMessage}.",o["storage-delete"]="Error thrown when deleting from storage. Original error: {$originalErrorMessage}.",o["fetch-client-network"]="Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.",o["fetch-timeout"]='The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',o["fetch-throttle"]='The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',o["fetch-client-parse"]="Fetch client could not parse response. Original error: {$originalErrorMessage}.",o["fetch-status"]="Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.",o),T=new f.ErrorFactory("remoteconfig","Remote Config",u);var m=(c.prototype.fetch=function(w){return E.__awaiter(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,h,l,f,p,d,v,y,g,m,_,b;return E.__generator(this,function(t){switch(t.label){case 0:return[4,Promise.all([this.firebaseInstallations.getId(),this.firebaseInstallations.getToken()])];case 1:n=t.sent(),r=n[0],i=n[1],o=window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com",s=o+"/v1/projects/"+this.projectId+"/namespaces/"+this.namespace+":fetch?key="+this.apiKey,a={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":w.eTag||"*"},u={sdk_version:this.sdkVersion,app_instance_id:r,app_instance_id_token:i,app_id:this.appId,language_code:(void 0===e&&(e=navigator),e.languages&&e.languages[0]||e.language)},c={method:"POST",headers:a,body:JSON.stringify(u)},h=fetch(s,c),l=new Promise(function(t,e){w.signal.addEventListener(function(){var t=new Error("The operation was aborted.");t.name="AbortError",e(t)})}),t.label=2;case 2:return t.trys.push([2,5,,6]),[4,Promise.race([h,l])];case 3:return t.sent(),[4,h];case 4:return f=t.sent(),[3,6];case 5:throw p=t.sent(),d="fetch-client-network","AbortError"===p.name&&(d="fetch-timeout"),T.create(d,{originalErrorMessage:p.message});case 6:if(v=f.status,y=f.headers.get("ETag")||void 0,200!==f.status)return[3,11];_=void 0,t.label=7;case 7:return t.trys.push([7,9,,10]),[4,f.json()];case 8:return _=t.sent(),[3,10];case 9:throw b=t.sent(),T.create("fetch-client-parse",{originalErrorMessage:b.message});case 10:g=_.entries,m=_.state,t.label=11;case 11:if("INSTANCE_STATE_UNSPECIFIED"===m?v=500:"NO_CHANGE"===m?v=304:"NO_TEMPLATE"!==m&&"EMPTY_CONFIG"!==m||(g={}),304!==v&&200!==v)throw T.create("fetch-status",{httpStatus:v});return[2,{status:v,eTag:y,config:g}]}var e})})},c);function c(t,e,n,r,i,o){this.firebaseInstallations=t,this.sdkVersion=e,this.namespace=n,this.projectId=r,this.apiKey=i,this.appId=o}var h=(l.prototype.addEventListener=function(t){this.listeners.push(t)},l.prototype.abort=function(){this.listeners.forEach(function(t){return t()})},l);function l(){this.listeners=[]}var p=["1","true","t","yes","y","on"],d=(v.prototype.asString=function(){return this._value},v.prototype.asBoolean=function(){return"static"!==this._source&&0<=p.indexOf(this._value.toLowerCase())},v.prototype.asNumber=function(){if("static"===this._source)return 0;var t=Number(this._value);return isNaN(t)&&(t=0),t},v.prototype.getSource=function(){return this._source},v);function v(t,e){void 0===e&&(e=""),this._source=t,this._value=e}var _=(b.prototype.setLogLevel=function(t){switch(t){case"debug":this._logger.logLevel=y.LogLevel.DEBUG;break;case"silent":this._logger.logLevel=y.LogLevel.SILENT;break;default:this._logger.logLevel=y.LogLevel.ERROR}},Object.defineProperty(b.prototype,"fetchTimeMillis",{get:function(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1},enumerable:!0,configurable:!0}),Object.defineProperty(b.prototype,"lastFetchStatus",{get:function(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"},enumerable:!0,configurable:!0}),b.prototype.activate=function(){return E.__awaiter(this,void 0,void 0,function(){var e,n,r;return E.__generator(this,function(t){switch(t.label){case 0:return[4,Promise.all([this._storage.getLastSuccessfulFetchResponse(),this._storage.getActiveConfigEtag()])];case 1:return e=t.sent(),n=e[0],r=e[1],n&&n.config&&n.eTag&&n.eTag!==r?[4,Promise.all([this._storageCache.setActiveConfig(n.config),this._storage.setActiveConfigEtag(n.eTag)])]:[2,!1];case 2:return t.sent(),[2,!0]}})})},b.prototype.ensureInitialized=function(){var t=this;return this._initializePromise||(this._initializePromise=this._storageCache.loadFromStorage().then(function(){t._isInitializationComplete=!0})),this._initializePromise},b.prototype.fetch=function(){return E.__awaiter(this,void 0,void 0,function(){var r,i,o,s=this;return E.__generator(this,function(t){switch(t.label){case 0:r=new h,setTimeout(function(){return E.__awaiter(s,void 0,void 0,function(){return E.__generator(this,function(t){return r.abort(),[2]})})},this.settings.fetchTimeoutMillis),t.label=1;case 1:return t.trys.push([1,4,,6]),[4,this._client.fetch({cacheMaxAgeMillis:this.settings.minimumFetchIntervalMillis,signal:r})];case 2:return t.sent(),[4,this._storageCache.setLastFetchStatus("success")];case 3:return t.sent(),[3,6];case 4:return i=t.sent(),n="fetch-throttle",o=(e=i)instanceof f.FirebaseError&&-1!==e.code.indexOf(n)?"throttle":"failure",[4,this._storageCache.setLastFetchStatus(o)];case 5:throw t.sent(),i;case 6:return[2]}var e,n})})},b.prototype.fetchAndActivate=function(){return E.__awaiter(this,void 0,void 0,function(){return E.__generator(this,function(t){switch(t.label){case 0:return[4,this.fetch()];case 1:return t.sent(),[2,this.activate()]}})})},b.prototype.getAll=function(){var n=this;return function(t,e){return void 0===t&&(t={}),void 0===e&&(e={}),Object.keys(E.__assign(E.__assign({},t),e))}(this._storageCache.getActiveConfig(),this.defaultConfig).reduce(function(t,e){return t[e]=n.getValue(e),t},{})},b.prototype.getBoolean=function(t){return this.getValue(t).asBoolean()},b.prototype.getNumber=function(t){return this.getValue(t).asNumber()},b.prototype.getString=function(t){return this.getValue(t).asString()},b.prototype.getValue=function(t){this._isInitializationComplete||this._logger.debug('A value was requested for key "'+t+'" before SDK initialization completed. Await on ensureInitialized if the intent was to get a previously activated value.');var e=this._storageCache.getActiveConfig();return e&&void 0!==e[t]?new d("remote",e[t]):this.defaultConfig&&void 0!==this.defaultConfig[t]?new d("default",String(this.defaultConfig[t])):(this._logger.debug('Returning static value for key "'+t+'". Define a default or remote value if this is unintentional.'),new d("static"))},b);function b(t,e,n,r,i){this.app=t,this._client=e,this._storageCache=n,this._storage=r,this._logger=i,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}function w(t,e){var n=t.target.error||void 0;return T.create(e,{originalErrorMessage:n&&n.message})}var I="app_namespace_store",S="firebase_remote_config",C=1;var A=(N.prototype.getLastFetchStatus=function(){return this.get("last_fetch_status")},N.prototype.setLastFetchStatus=function(t){return this.set("last_fetch_status",t)},N.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.get("last_successful_fetch_timestamp_millis")},N.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.set("last_successful_fetch_timestamp_millis",t)},N.prototype.getLastSuccessfulFetchResponse=function(){return this.get("last_successful_fetch_response")},N.prototype.setLastSuccessfulFetchResponse=function(t){return this.set("last_successful_fetch_response",t)},N.prototype.getActiveConfig=function(){return this.get("active_config")},N.prototype.setActiveConfig=function(t){return this.set("active_config",t)},N.prototype.getActiveConfigEtag=function(){return this.get("active_config_etag")},N.prototype.setActiveConfigEtag=function(t){return this.set("active_config_etag",t)},N.prototype.getThrottleMetadata=function(){return this.get("throttle_metadata")},N.prototype.setThrottleMetadata=function(t){return this.set("throttle_metadata",t)},N.prototype.deleteThrottleMetadata=function(){return this.delete("throttle_metadata")},N.prototype.get=function(a){return E.__awaiter(this,void 0,void 0,function(){var o,s=this;return E.__generator(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(n,e){var t=o.transaction([I],"readonly").objectStore(I),r=s.createCompositeKey(a);try{var i=t.get(r);i.onerror=function(t){e(w(t,"storage-get"))},i.onsuccess=function(t){var e=t.target.result;n(e?e.value:void 0)}}catch(t){e(T.create("storage-get",{originalErrorMessage:t&&t.message}))}})]}})})},N.prototype.set=function(a,u){return E.__awaiter(this,void 0,void 0,function(){var o,s=this;return E.__generator(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([I],"readwrite").objectStore(I),r=s.createCompositeKey(a);try{var i=n.put({compositeKey:r,value:u});i.onerror=function(t){e(w(t,"storage-set"))},i.onsuccess=function(){t()}}catch(t){e(T.create("storage-set",{originalErrorMessage:t&&t.message}))}})]}})})},N.prototype.delete=function(a){return E.__awaiter(this,void 0,void 0,function(){var o,s=this;return E.__generator(this,function(t){switch(t.label){case 0:return[4,this.openDbPromise];case 1:return o=t.sent(),[2,new Promise(function(t,e){var n=o.transaction([I],"readwrite").objectStore(I),r=s.createCompositeKey(a);try{var i=n.delete(r);i.onerror=function(t){e(w(t,"storage-delete"))},i.onsuccess=function(){t()}}catch(t){e(T.create("storage-delete",{originalErrorMessage:t&&t.message}))}})]}})})},N.prototype.createCompositeKey=function(t){return[this.appId,this.appName,this.namespace,t].join()},N);function N(t,e,n,r){void 0===r&&(r=new Promise(function(e,n){var t=indexedDB.open(S,C);t.onerror=function(t){n(w(t,"storage-open"))},t.onsuccess=function(t){e(t.target.result)},t.onupgradeneeded=function(t){var e=t.target.result;switch(t.oldVersion){case 0:e.createObjectStore(I,{keyPath:"compositeKey"})}}})),this.appId=t,this.appName=e,this.namespace=n,this.openDbPromise=r}var O=(D.prototype.getLastFetchStatus=function(){return this.lastFetchStatus},D.prototype.getLastSuccessfulFetchTimestampMillis=function(){return this.lastSuccessfulFetchTimestampMillis},D.prototype.getActiveConfig=function(){return this.activeConfig},D.prototype.loadFromStorage=function(){return E.__awaiter(this,void 0,void 0,function(){var e,n,r,i,o,s;return E.__generator(this,function(t){switch(t.label){case 0:return e=this.storage.getLastFetchStatus(),n=this.storage.getLastSuccessfulFetchTimestampMillis(),r=this.storage.getActiveConfig(),[4,e];case 1:return(i=t.sent())&&(this.lastFetchStatus=i),[4,n];case 2:return(o=t.sent())&&(this.lastSuccessfulFetchTimestampMillis=o),[4,r];case 3:return(s=t.sent())&&(this.activeConfig=s),[2]}})})},D.prototype.setLastFetchStatus=function(t){return this.lastFetchStatus=t,this.storage.setLastFetchStatus(t)},D.prototype.setLastSuccessfulFetchTimestampMillis=function(t){return this.lastSuccessfulFetchTimestampMillis=t,this.storage.setLastSuccessfulFetchTimestampMillis(t)},D.prototype.setActiveConfig=function(t){return this.activeConfig=t,this.storage.setActiveConfig(t)},D);function D(t){this.storage=t}var k=(x.prototype.fetch=function(n){return E.__awaiter(this,void 0,void 0,function(){var e;return E.__generator(this,function(t){switch(t.label){case 0:return[4,this.storage.getThrottleMetadata()];case 1:return e=t.sent()||{backoffCount:0,throttleEndTimeMillis:Date.now()},[2,this.attemptFetch(n,e)]}})})},x.prototype.attemptFetch=function(c,t){var h=t.throttleEndTimeMillis,l=t.backoffCount;return E.__awaiter(this,void 0,void 0,function(){var s,a,u;return E.__generator(this,function(t){switch(t.label){case 0:return[4,(i=c.signal,o=h,new Promise(function(t,e){var n=Math.max(o-Date.now(),0),r=setTimeout(t,n);i.addEventListener(function(){clearTimeout(r),e(T.create("fetch-throttle",{throttleEndTimeMillis:o}))})}))];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this.client.fetch(c)];case 3:return s=t.sent(),[4,this.storage.deleteThrottleMetadata()];case 4:return t.sent(),[2,s];case 5:if(!function(t){if(t instanceof f.FirebaseError){var e=Number(t.httpStatus);return 429===e||500===e||503===e||504===e}}(a=t.sent()))throw a;return u={throttleEndTimeMillis:Date.now()+(e=l,n=1e3*Math.pow(2,e),r=Math.round(.5*n*(Math.random()-.5)*2),Math.min(144e5,n+r)),backoffCount:l+1},[4,this.storage.setThrottleMetadata(u)];case 6:return t.sent(),[2,this.attemptFetch(c,u)];case 7:return[2]}var e,n,r,i,o})})},x);function x(t,e){this.client=t,this.storage=e}var R="@firebase/remote-config";function P(v){v.INTERNAL.registerComponent(new s.Component("remoteConfig",function(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("installations").getImmediate();if("undefined"==typeof window)throw T.create("registration-window");var i=n.options,o=i.projectId,s=i.apiKey,a=i.appId;if(!o)throw T.create("registration-project-id");if(!s)throw T.create("registration-api-key");if(!a)throw T.create("registration-app-id");e=e||"firebase";var u=new A(a,n.name,e),c=new O(u),h=new y.Logger(R);h.logLevel=y.LogLevel.ERROR;var l=new m(r,v.SDK_VERSION,e,o,s,a),f=new k(l,u),p=new g(f,u,c,h),d=new _(n,p,c,u,h);return d.ensureInitialized(),d},"PUBLIC").setMultipleInstances(!0)),v.registerVersion(R,"0.1.17")}P(i),e.registerRemoteConfig=P},440:function(t,e,n){"use strict";n.r(e),n.d(e,"__extends",function(){return i}),n.d(e,"__assign",function(){return o}),n.d(e,"__rest",function(){return s}),n.d(e,"__decorate",function(){return a}),n.d(e,"__param",function(){return u}),n.d(e,"__metadata",function(){return c}),n.d(e,"__awaiter",function(){return h}),n.d(e,"__generator",function(){return l}),n.d(e,"__exportStar",function(){return f}),n.d(e,"__values",function(){return p}),n.d(e,"__read",function(){return d}),n.d(e,"__spread",function(){return v}),n.d(e,"__spreadArrays",function(){return y}),n.d(e,"__await",function(){return g}),n.d(e,"__asyncGenerator",function(){return m}),n.d(e,"__asyncDelegator",function(){return _}),n.d(e,"__asyncValues",function(){return b}),n.d(e,"__makeTemplateObject",function(){return w}),n.d(e,"__importStar",function(){return E}),n.d(e,"__importDefault",function(){return T}),n.d(e,"__classPrivateFieldGet",function(){return I}),n.d(e,"__classPrivateFieldSet",function(){return S});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]])}return n}function a(t,e,n,r){var i,o=arguments.length,s=o<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(t,e,n,r);else for(var a=t.length-1;0<=a;a--)(i=t[a])&&(s=(o<3?i(s):3<o?i(e,n,s):i(e,n))||s);return 3<o&&s&&Object.defineProperty(e,n,s),s}function u(n,r){return function(t,e){r(t,e,n)}}function c(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)}function h(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function l(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function f(t,e){for(var n in t)e.hasOwnProperty(n)||(e[n]=t[n])}function p(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function d(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||0<e--)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function v(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(d(arguments[e]));return t}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}function g(t){return this instanceof g?(this.v=t,this):new g(t)}function m(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,o=n.apply(t,e||[]),s=[];return i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i;function r(r){o[r]&&(i[r]=function(n){return new Promise(function(t,e){1<s.push([r,n,t,e])||a(r,n)})})}function a(t,e){try{(n=o[t](e)).value instanceof g?Promise.resolve(n.value.v).then(u,c):h(s[0][2],n)}catch(t){h(s[0][3],t)}var n}function u(t){a("next",t)}function c(t){a("throw",t)}function h(t,e){t(e),s.shift(),s.length&&a(s[0][0],s[0][1])}}function _(r){var t,i;return t={},e("next"),e("throw",function(t){throw t}),e("return"),t[Symbol.iterator]=function(){return this},t;function e(e,n){t[e]=r[e]?function(t){return(i=!i)?{value:g(r[e](t)),done:"return"===e}:n?n(t):t}:n}}function b(u){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,e=u[Symbol.asyncIterator];return e?e.call(u):(u=p(u),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(a){t[a]=u[a]&&function(s){return new Promise(function(t,e){var n,r,i,o;s=u[a](s),n=t,r=e,i=s.done,o=s.value,Promise.resolve(o).then(function(t){n({value:t,done:i})},r)})}}}function w(t,e){return Object.defineProperty?Object.defineProperty(t,"raw",{value:e}):t.raw=e,t}function E(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function T(t){return t&&t.__esModule?t:{default:t}}function I(t,e){if(!e.has(t))throw new TypeError("attempted to get private field on non-instance");return e.get(t)}function S(t,e,n){if(!e.has(t))throw new TypeError("attempted to set private field on non-instance");return e.set(t,n),n}},465:function(t,e,n){"use strict";n.r(e);var r=n(16),p=n.n(r);function i(t,s,a,u){return new(a=a||Promise)(function(n,e){function r(t){try{o(u.next(t))}catch(t){e(t)}}function i(t){try{o(u.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(r,i)}o((u=u.apply(t,s||[])).next())})}function a(n,r){var i,o,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;a;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,o=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=r.call(n,a)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function y(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var o=n(74);n.d(e,"registerStorage",function(){return ge});var f="firebasestorage.googleapis.com",l="storageBucket",g=(s.prototype.codeProp=function(){return this.code},s.prototype.codeEquals=function(t){return u(t)===this.codeProp()},s.prototype.serverResponseProp=function(){return this.serverResponse_},s.prototype.setServerResponseProp=function(t){this.serverResponse_=t},Object.defineProperty(s.prototype,"name",{get:function(){return this.name_},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"code",{get:function(){return this.code_},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"message",{get:function(){return this.message_},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"serverResponse",{get:function(){return this.serverResponse_},enumerable:!0,configurable:!0}),s);function s(t,e){this.code_=u(t),this.message_="Firebase Storage: "+e,this.serverResponse_=null,this.name_="FirebaseError"}var m={UNKNOWN:"unknown",OBJECT_NOT_FOUND:"object-not-found",BUCKET_NOT_FOUND:"bucket-not-found",PROJECT_NOT_FOUND:"project-not-found",QUOTA_EXCEEDED:"quota-exceeded",UNAUTHENTICATED:"unauthenticated",UNAUTHORIZED:"unauthorized",RETRY_LIMIT_EXCEEDED:"retry-limit-exceeded",INVALID_CHECKSUM:"invalid-checksum",CANCELED:"canceled",INVALID_EVENT_NAME:"invalid-event-name",INVALID_URL:"invalid-url",INVALID_DEFAULT_BUCKET:"invalid-default-bucket",NO_DEFAULT_BUCKET:"no-default-bucket",CANNOT_SLICE_BLOB:"cannot-slice-blob",SERVER_FILE_WRONG_SIZE:"server-file-wrong-size",NO_DOWNLOAD_URL:"no-download-url",INVALID_ARGUMENT:"invalid-argument",INVALID_ARGUMENT_COUNT:"invalid-argument-count",APP_DELETED:"app-deleted",INVALID_ROOT_OPERATION:"invalid-root-operation",INVALID_FORMAT:"invalid-format",INTERNAL_ERROR:"internal-error"};function u(t){return"storage/"+t}function _(){return new g(m.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function b(){return new g(m.CANCELED,"User canceled the upload/download.")}function w(){return new g(m.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function d(t,e,n){return new g(m.INVALID_ARGUMENT,"Invalid argument in `"+e+"` at index "+t+": "+n)}function E(){return new g(m.APP_DELETED,"The Firebase app was deleted.")}function c(t,e){return new g(m.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function h(t){throw new g(m.INTERNAL_ERROR,"Internal error: "+t)}var v={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};function T(t){switch(t){case v.RAW:case v.BASE64:case v.BASE64URL:case v.DATA_URL:return;default:throw"Expected one of the event types: ["+v.RAW+", "+v.BASE64+", "+v.BASE64URL+", "+v.DATA_URL+"]."}}var I=function(t,e){this.data=t,this.contentType=e||null};function S(t,e){switch(t){case v.RAW:return new I(C(e));case v.BASE64:case v.BASE64URL:return new I(A(t,e));case v.DATA_URL:return new I((n=new N(e)).base64?A(v.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw c(v.DATA_URL,"Malformed data URL.")}return C(e)}(n.rest),new N(e).contentType)}var n;throw _()}function C(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|63&r);else if(55296==(64512&r))if(n<t.length-1&&56320==(64512&t.charCodeAt(n+1)))r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r);else e.push(239,191,189);else 56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function A(e,t){switch(e){case v.BASE64:var n=-1!==t.indexOf("-"),r=-1!==t.indexOf("_");if(n||r)throw c(e,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case v.BASE64URL:var i=-1!==t.indexOf("+"),o=-1!==t.indexOf("/");if(i||o)throw c(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(t)}catch(t){throw c(e,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var N=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw c(v.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)};var O,D,k={STATE_CHANGED:"state_changed"},x="running",R="pausing",P="paused",L="success",M="canceling",F="canceled",j="error",U={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function q(t){switch(t){case x:case R:case M:return U.RUNNING;case P:return U.PAUSED;case L:return U.SUCCESS;case F:return U.CANCELED;case j:default:return U.ERROR}}function V(t){return null!=t}function H(t){return void 0!==t}function W(t){return"function"==typeof t}function B(t){return"object"==typeof t}function G(t){return"string"==typeof t||t instanceof String}function z(t){return"number"==typeof t||t instanceof Number}function K(t){return Q()&&t instanceof Blob}function Q(){return"undefined"!=typeof Blob}(D=O=O||{})[D.NO_ERROR=0]="NO_ERROR",D[D.NETWORK_ERROR=1]="NETWORK_ERROR",D[D.ABORT=2]="ABORT";var Y=(X.prototype.send=function(t,e,n,r){if(this.sent_)throw h("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),V(r))for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return V(n)?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},X.prototype.getErrorCode=function(){if(!this.sent_)throw h("cannot .getErrorCode() before sending");return this.errorCode_},X.prototype.getStatus=function(){if(!this.sent_)throw h("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},X.prototype.getResponseText=function(){if(!this.sent_)throw h("cannot .getResponseText() before sending");return this.xhr_.responseText},X.prototype.abort=function(){this.xhr_.abort()},X.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},X.prototype.addUploadProgressListener=function(t){V(this.xhr_.upload)&&this.xhr_.upload.addEventListener("progress",t)},X.prototype.removeUploadProgressListener=function(t){V(this.xhr_.upload)&&this.xhr_.upload.removeEventListener("progress",t)},X);function X(){var e=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=O.NO_ERROR,this.sendPromise_=new Promise(function(t){e.xhr_.addEventListener("abort",function(){e.errorCode_=O.ABORT,t(e)}),e.xhr_.addEventListener("error",function(){e.errorCode_=O.NETWORK_ERROR,t(e)}),e.xhr_.addEventListener("load",function(){t(e)})})}var J=($.prototype.createXhrIo=function(){return new Y},$);function $(){}function Z(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n="undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0;if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(Q())return new Blob(t);throw Error("This browser doesn't seem to support creating Blobs")}var tt=(et.prototype.size=function(){return this.size_},et.prototype.type=function(){return this.type_},et.prototype.slice=function(t,e){if(K(this.data_)){var n=this.data_,r=(o=t,s=e,(i=n).webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new et(r)}var i,o,s;return new et(new Uint8Array(this.data_.buffer,t,e-t),!0)},et.getBlob=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(Q()){var n=t.map(function(t){return t instanceof et?t.data_:t});return new et(Z.apply(null,n))}var r=t.map(function(t){return G(t)?S(v.RAW,t).data:t.data_}),i=0;r.forEach(function(t){i+=t.byteLength});var o=new Uint8Array(i),s=0;return r.forEach(function(t){for(var e=0;e<t.length;e++)o[s++]=t[e]}),new et(o,!0)},et.prototype.uploadData=function(){return this.data_},et);function et(t,e){var n=0,r="";K(t)?(n=(this.data_=t).size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}var nt=(Object.defineProperty(rt.prototype,"path",{get:function(){return this.path_},enumerable:!0,configurable:!0}),Object.defineProperty(rt.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!0,configurable:!0}),rt.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},rt.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},rt.makeFromBucketSpec=function(e){var t,n;try{t=rt.makeFromUrl(e)}catch(t){return new rt(e,"")}if(""===t.path)return t;throw n=e,new g(m.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")},rt.makeFromUrl=function(t){for(var e,n=null,r="([A-Za-z0-9.\\-_]+)",i=new RegExp("^gs://"+r+"(/(.*))?$","i"),o=f.replace(/[.]/g,"\\."),s=[{regex:i,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+o+"/v[A-Za-z0-9_]+/b/"+r+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:function(t){t.path_=decodeURIComponent(t.path)}}],a=0;a<s.length;a++){var u=s[a],c=u.regex.exec(t);if(c){var h=c[u.indices.bucket],l=c[u.indices.path];n=new rt(h,l=l||""),u.postModify(n);break}}if(null==n)throw e=t,new g(m.INVALID_URL,"Invalid URL '"+e+"'.");return n},rt);function rt(t,e){this.bucket=t,this.path_=e}function it(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return B(n=e)&&!Array.isArray(n)?e:null}function ot(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function st(t){return"https://"+f+"/v0"+t}function at(t){var e=encodeURIComponent,n="?";for(var r in t){if(t.hasOwnProperty(r))n=n+(e(r)+"="+e(t[r]))+"&"}return n=n.slice(0,-1)}function ut(t,e){return e}var ct=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||ut},ht=null;function lt(){if(ht)return ht;var t=[];t.push(new ct("bucket")),t.push(new ct("generation")),t.push(new ct("metageneration")),t.push(new ct("name","fullPath",!0));var e=new ct("name");e.xform=function(t,e){return!G(n=e)||n.length<2?n:ot(n);var n},t.push(e);var n=new ct("size");return n.xform=function(t,e){return V(e)?Number(e):e},t.push(n),t.push(new ct("timeCreated")),t.push(new ct("updated")),t.push(new ct("md5Hash",null,!0)),t.push(new ct("cacheControl",null,!0)),t.push(new ct("contentDisposition",null,!0)),t.push(new ct("contentEncoding",null,!0)),t.push(new ct("contentLanguage",null,!0)),t.push(new ct("contentType",null,!0)),t.push(new ct("metadata","customMetadata",!0)),ht=t}function ft(r,i){Object.defineProperty(r,"ref",{get:function(){var t=r.bucket,e=r.fullPath,n=new nt(t,e);return i.makeStorageReference(n)}})}function pt(t,e,n){var r=it(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return ft(r,t),r}(t,r,n)}function dt(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}function vt(t){if(!B(t)||!t)throw"Expected Metadata object.";for(var e in t)if(t.hasOwnProperty(e)){var n=t[e];if("customMetadata"===e){if(!B(n))throw"Expected object for 'customMetadata' mapping."}else if(B(r=n)&&null!==r)throw"Mapping for '"+e+"' cannot be an object."}var r}var yt="maxResults",gt=1e3,mt="pageToken",_t="prefixes",bt="items";function wt(t,e){var n={prefixes:[],items:[],nextPageToken:e.nextPageToken},r=t.bucket();if(null===r)throw new g(m.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+l+"' property when initializing the app?");if(e[_t])for(var i=0,o=e[_t];i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t.makeStorageReference(new nt(r,s));n.prefixes.push(a)}if(e[bt])for(var u=0,c=e[bt];u<c.length;u++){var h=c[u];a=t.makeStorageReference(new nt(r,h.name));n.items.push(a)}return n}function Et(t){if(!B(t)||!t)throw"Expected ListOptions object.";for(var e in t)if(e===yt){if(!z(n=t[yt])||!Number.isInteger(n)||t[yt]<=0)throw"Expected maxResults to be a positive number.";if(1e3<t[yt])throw"Expected maxResults to be less than or equal to "+gt+"."}else{if(e!==mt)throw"Unknown option: "+e;if(t[mt]&&!G(t[mt]))throw"Expected pageToken to be string."}var n}var Tt=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function It(t){if(!t)throw _()}function St(r,i){return function(t,e){var n=pt(r,e,i);return It(null!==n),n}}function Ct(o){return function(t,e){var n,r,i=(n=o,null===(r=it(e))?null:wt(n,r));return It(null!==i),i}}function At(r,i){return function(t,e){var n=pt(r,e,i);return It(null!==n),function(r,t){var e=it(t);if(null===e)return null;if(!G(e.downloadTokens))return null;var n=e.downloadTokens;if(0===n.length)return null;var i=encodeURIComponent;return n.split(",").map(function(t){var e=r.bucket,n=r.fullPath;return st("/b/"+i(e)+"/o/"+i(n))+at({alt:"media",token:t})})[0]}(n,e)}}function Nt(o){return function(t,e){var n,r,i;return(n=401===t.getStatus()?new g(m.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again."):402===t.getStatus()?(i=o.bucket,new g(m.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===t.getStatus()?(r=o.path,new g(m.UNAUTHORIZED,"User does not have permission to access '"+r+"'.")):e).setServerResponseProp(e.serverResponseProp()),n}}function Ot(i){var o=Nt(i);return function(t,e){var n,r=o(t,e);return 404===t.getStatus()&&(n=i.path,r=new g(m.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")),r.setServerResponseProp(e.serverResponseProp()),r}}function Dt(t,e,n){var r=st(e.fullServerUrl()),i=t.maxOperationRetryTime(),o=new Tt(r,"GET",St(t,n),i);return o.errorHandler=Ot(e),o}function kt(t,e,n){var r,i,o=Object.assign({},n);return o.fullPath=t.path,o.size=e.size(),o.contentType||(o.contentType=(i=e,(r=null)&&r.contentType||i&&i.type()||"application/octet-stream")),o}function xt(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};var a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=kt(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+dt(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=tt.getBlob(c,r,h);if(null===l)throw w();var f={name:u.fullPath},p=st(o),d=t.maxUploadRetryTime(),v=new Tt(p,"POST",St(t,n),d);return v.urlParams=f,v.headers=s,v.body=l.uploadData(),v.errorHandler=Nt(e),v}var Rt=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function Pt(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){It(!1)}return It(!!n&&-1!==(e||["active"]).indexOf(n)),n}function Lt(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=kt(e,r,i),a={name:s.fullPath},u=st(o),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=dt(s,n),l=t.maxUploadRetryTime();var f=new Tt(u,"POST",function(t){var e;Pt(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){It(!1)}return It(G(e)),e},l);return f.urlParams=a,f.headers=c,f.body=h,f.errorHandler=Nt(e),f}function Mt(t,e,n,i){var r=t.maxUploadRetryTime(),o=new Tt(n,"POST",function(t){var e=Pt(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){It(!1)}n||It(!1);var r=Number(n);return It(!isNaN(r)),new Rt(r,i.size(),"final"===e)},r);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Nt(e),o}function Ft(t,s,e,a,n,u,r,i){var c=new Rt(0,0);if(r?(c.current=r.current,c.total=r.total):(c.current=0,c.total=a.size()),a.size()!==c.total)throw new g(m.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.");var o=c.total-c.current,h=o;0<n&&(h=Math.min(h,n));var l=c.current,f=l+h,p={"X-Goog-Upload-Command":h===o?"upload, finalize":"upload","X-Goog-Upload-Offset":c.current},d=a.slice(l,f);if(null===d)throw w();var v=s.maxUploadRetryTime(),y=new Tt(e,"POST",function(t,e){var n,r=Pt(t,["active","final"]),i=c.current+h,o=a.size();return n="final"===r?St(s,u)(t,e):null,new Rt(i,o,"final"===r,n)},v);return y.headers=p,y.body=d.uploadData(),y.progressCallback=i||null,y.errorHandler=Nt(t),y}var jt=function(t,e,n){if(W(t)||V(e)||V(n))this.next=t,this.error=e||null,this.complete=n||null;else{var r=t;this.next=r.next||null,this.error=r.error||null,this.complete=r.complete||null}},Ut=function(t,e,n,r,i,o){this.bytesTransferred=t,this.totalBytes=e,this.state=n,this.metadata=r,this.task=i,this.ref=o};function qt(e,t,n){for(var r=t.length,i=t.length,o=0;o<t.length;o++)if(t[o].optional){r=o;break}var s,a,u,c,h,l;if(!(r<=n.length&&n.length<=i))throw s=r,a=i,u=e,c=n.length,l=s===a?1===(h=s)?"argument":"arguments":(h="between "+s+" and "+a,"arguments"),new g(m.INVALID_ARGUMENT_COUNT,"Invalid argument count in `"+u+"`: Expected "+h+" "+l+", received "+c+".");for(o=0;o<n.length;o++)try{t[o].validator(n[o])}catch(t){throw t instanceof Error?d(o,e,t.message):d(o,e,t)}}var Vt=function(e,t){var n=this;this.validator=function(t){n.optional&&!H(t)||e(t)},this.optional=!!t};function Ht(t,e){function n(t){if(!G(t))throw"Expected string."}var r,i,o;return r=t?(i=n,o=t,function(t){i(t),o(t)}):n,new Vt(r,e)}function Wt(){return new Vt(function(t){if(!(t instanceof Uint8Array||t instanceof ArrayBuffer||Q()&&t instanceof Blob))throw"Expected Blob or File."})}function Bt(t){return new Vt(vt,t)}function Gt(){return new Vt(function(t){if(!(z(t)&&0<=t))throw"Expected a number 0 or greater."})}function zt(e,t){return new Vt(function(t){if(!(null===t||V(t)&&t instanceof Object))throw"Expected an Object.";null!=e&&e(t)},t)}function Kt(t){return new Vt(function(t){if(!(null===t||W(t)))throw"Expected a Function."},t)}function Qt(n){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve().then(function(){return n.apply(void 0,t)})}}var Yt=(Xt.prototype.makeProgressCallback_=function(){var e=this,n=this.transferred_;return function(t){return e.updateProgress_(n+t)}},Xt.prototype.shouldDoResumable_=function(t){return 262144<t.size()},Xt.prototype.start_=function(){this.state_===x&&null===this.request_&&(this.resumable_?null===this.uploadUrl_?this.createResumable_():this.needToFetchStatus_?this.fetchStatus_():this.needToFetchMetadata_?this.fetchMetadata_():this.continueUpload_():this.oneShotUpload_())},Xt.prototype.resolveToken_=function(e){var n=this;this.authWrapper_.getAuthToken().then(function(t){switch(n.state_){case x:e(t);break;case M:n.transition_(F);break;case R:n.transition_(P)}})},Xt.prototype.createResumable_=function(){var r=this;this.resolveToken_(function(t){var e=Lt(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.uploadUrl_=t,r.needToFetchStatus_=!1,r.completeTransitions_()},r.errorHandler_)})},Xt.prototype.fetchStatus_=function(){var r=this,i=this.uploadUrl_;this.resolveToken_(function(t){var e=Mt(r.authWrapper_,r.location_,i,r.blob_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){t=t,r.request_=null,r.updateProgress_(t.current),r.needToFetchStatus_=!1,t.finalized&&(r.needToFetchMetadata_=!0),r.completeTransitions_()},r.errorHandler_)})},Xt.prototype.continueUpload_=function(){var r=this,i=262144*this.chunkMultiplier_,o=new Rt(this.transferred_,this.blob_.size()),s=this.uploadUrl_;this.resolveToken_(function(t){var e;try{e=Ft(r.location_,r.authWrapper_,s,r.blob_,i,r.mappings_,o,r.makeProgressCallback_())}catch(t){return r.error_=t,void r.transition_(j)}var n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.increaseMultiplier_(),r.request_=null,r.updateProgress_(t.current),t.finalized?(r.metadata_=t.metadata,r.transition_(L)):r.completeTransitions_()},r.errorHandler_)})},Xt.prototype.increaseMultiplier_=function(){262144*this.chunkMultiplier_<33554432&&(this.chunkMultiplier_*=2)},Xt.prototype.fetchMetadata_=function(){var r=this;this.resolveToken_(function(t){var e=Dt(r.authWrapper_,r.location_,r.mappings_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.transition_(L)},r.metadataErrorHandler_)})},Xt.prototype.oneShotUpload_=function(){var r=this;this.resolveToken_(function(t){var e=xt(r.authWrapper_,r.location_,r.mappings_,r.blob_,r.metadata_),n=r.authWrapper_.makeRequest(e,t);(r.request_=n).getPromise().then(function(t){r.request_=null,r.metadata_=t,r.updateProgress_(r.blob_.size()),r.transition_(L)},r.errorHandler_)})},Xt.prototype.updateProgress_=function(t){var e=this.transferred_;this.transferred_=t,this.transferred_!==e&&this.notifyObservers_()},Xt.prototype.transition_=function(t){if(this.state_!==t)switch(t){case M:case R:this.state_=t,null!==this.request_&&this.request_.cancel();break;case x:var e=this.state_===P;this.state_=t,e&&(this.notifyObservers_(),this.start_());break;case P:this.state_=t,this.notifyObservers_();break;case F:this.error_=b(),this.state_=t,this.notifyObservers_();break;case j:case L:this.state_=t,this.notifyObservers_()}},Xt.prototype.completeTransitions_=function(){switch(this.state_){case R:this.transition_(P);break;case M:this.transition_(F);break;case x:this.start_()}},Object.defineProperty(Xt.prototype,"snapshot",{get:function(){var t=q(this.state_);return new Ut(this.transferred_,this.blob_.size(),t,this.metadata_,this,this.ref_)},enumerable:!0,configurable:!0}),Xt.prototype.on=function(t,e,n,o){var r="Expected a function or an Object with one of `next`, `error`, `complete` properties.",i=Kt(!0).validator,s=zt(null,!0).validator;function a(t){try{return void i(t)}catch(t){}try{if(s(t),!(H(t.next)||H(t.error)||H(t.complete)))throw"";return}catch(t){throw r}}qt("on",[Ht(function(){if(t!==k.STATE_CHANGED)throw"Expected one of the event types: ["+k.STATE_CHANGED+"]."}),zt(a,!0),Kt(!0),Kt(!0)],arguments);var u=this;function c(i){return function(t,e,n){null!==i&&qt("on",i,arguments);var r=new jt(t,e,o);return u.addObserver_(r),function(){u.removeObserver_(r)}}}var h=[zt(function(t){if(null===t)throw r;a(t)}),Kt(!0),Kt(!0)];return H(e)||H(n)||H(o)?c(null)(e,n,o):c(h)},Xt.prototype.then=function(t,e){return this.promise_.then(t,e)},Xt.prototype.catch=function(t){return this.then(null,t)},Xt.prototype.addObserver_=function(t){this.observers_.push(t),this.notifyObserver_(t)},Xt.prototype.removeObserver_=function(t){var e=this.observers_.indexOf(t);-1!==e&&this.observers_.splice(e,1)},Xt.prototype.notifyObservers_=function(){var e=this;this.finishPromise_(),this.observers_.slice().forEach(function(t){e.notifyObserver_(t)})},Xt.prototype.finishPromise_=function(){if(null!==this.resolve_){var t=!0;switch(q(this.state_)){case U.SUCCESS:Qt(this.resolve_.bind(null,this.snapshot))();break;case U.CANCELED:case U.ERROR:Qt(this.reject_.bind(null,this.error_))();break;default:t=!1}t&&(this.resolve_=null,this.reject_=null)}},Xt.prototype.notifyObserver_=function(t){switch(q(this.state_)){case U.RUNNING:case U.PAUSED:t.next&&Qt(t.next.bind(t,this.snapshot))();break;case U.SUCCESS:t.complete&&Qt(t.complete.bind(t))();break;case U.CANCELED:case U.ERROR:t.error&&Qt(t.error.bind(t,this.error_))();break;default:t.error&&Qt(t.error.bind(t,this.error_))()}},Xt.prototype.resume=function(){qt("resume",[],arguments);var t=this.state_===P||this.state_===R;return t&&this.transition_(x),t},Xt.prototype.pause=function(){qt("pause",[],arguments);var t=this.state_===x;return t&&this.transition_(R),t},Xt.prototype.cancel=function(){qt("cancel",[],arguments);var t=this.state_===x||this.state_===R;return t&&this.transition_(M),t},Xt);function Xt(t,e,n,r,i,o){var s=this;void 0===o&&(o=null),this.transferred_=0,this.needToFetchStatus_=!1,this.needToFetchMetadata_=!1,this.observers_=[],this.error_=null,this.uploadUrl_=null,this.request_=null,this.chunkMultiplier_=1,this.resolve_=null,this.reject_=null,this.ref_=t,this.authWrapper_=e,this.location_=n,this.blob_=i,this.metadata_=o,this.mappings_=r,this.resumable_=this.shouldDoResumable_(this.blob_),this.state_=x,this.errorHandler_=function(t){s.request_=null,s.chunkMultiplier_=1,t.codeEquals(m.CANCELED)?(s.needToFetchStatus_=!0,s.completeTransitions_()):(s.error_=t,s.transition_(j))},this.metadataErrorHandler_=function(t){s.request_=null,t.codeEquals(m.CANCELED)?s.completeTransitions_():(s.error_=t,s.transition_(j))},this.promise_=new Promise(function(t,e){s.resolve_=t,s.reject_=e,s.start_()}),this.promise_.then(null,function(){})}var Jt=($t.prototype.toString=function(){return qt("toString",[],arguments),"gs://"+this.location.bucket+"/"+this.location.path},$t.prototype.newRef=function(t,e){return new $t(t,e)},$t.prototype.mappings=function(){return lt()},$t.prototype.child=function(t){qt("child",[Ht()],arguments);var e,n,r=(e=this.location.path,n=t.split("/").filter(function(t){return 0<t.length}).join("/"),0===e.length?n:e+"/"+n),i=new nt(this.location.bucket,r);return this.newRef(this.authWrapper,i)},Object.defineProperty($t.prototype,"parent",{get:function(){var t=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this.location.path);if(null===t)return null;var e=new nt(this.location.bucket,t);return this.newRef(this.authWrapper,e)},enumerable:!0,configurable:!0}),Object.defineProperty($t.prototype,"root",{get:function(){var t=new nt(this.location.bucket,"");return this.newRef(this.authWrapper,t)},enumerable:!0,configurable:!0}),Object.defineProperty($t.prototype,"bucket",{get:function(){return this.location.bucket},enumerable:!0,configurable:!0}),Object.defineProperty($t.prototype,"fullPath",{get:function(){return this.location.path},enumerable:!0,configurable:!0}),Object.defineProperty($t.prototype,"name",{get:function(){return ot(this.location.path)},enumerable:!0,configurable:!0}),Object.defineProperty($t.prototype,"storage",{get:function(){return this.authWrapper.service()},enumerable:!0,configurable:!0}),$t.prototype.put=function(t,e){return void 0===e&&(e=null),qt("put",[Wt(),Bt(!0)],arguments),this.throwIfRoot_("put"),new Yt(this,this.authWrapper,this.location,this.mappings(),new tt(t),e)},$t.prototype.putString=function(t,e,n){void 0===e&&(e=v.RAW),qt("putString",[Ht(),Ht(T,!0),Bt(!0)],arguments),this.throwIfRoot_("putString");var r=S(e,t),i=Object.assign({},n);return!V(i.contentType)&&V(r.contentType)&&(i.contentType=r.contentType),new Yt(this,this.authWrapper,this.location,this.mappings(),new tt(r.data,!0),i)},$t.prototype.delete=function(){var a=this;return qt("delete",[],arguments),this.throwIfRoot_("delete"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s=(e=a.authWrapper,n=a.location,r=st(n.fullServerUrl()),i=e.maxOperationRetryTime(),(o=new Tt(r,"DELETE",function(t,e){},i)).successCodes=[200,204],o.errorHandler=Ot(n),o);return a.authWrapper.makeRequest(s,t).getPromise()})},$t.prototype.listAll=function(){qt("listAll",[],arguments);var t={prefixes:[],items:[]};return this.listAllHelper(t).then(function(){return t})},$t.prototype.listAllHelper=function(o,s){return i(this,void 0,void 0,function(){var e,n,r,i;return a(this,function(t){switch(t.label){case 0:return e={pageToken:s},[4,this.list(e)];case 1:return n=t.sent(),(r=o.prefixes).push.apply(r,n.prefixes),(i=o.items).push.apply(i,n.items),null==n.nextPageToken?[3,3]:[4,this.listAllHelper(o,n.nextPageToken)];case 2:t.sent(),t.label=3;case 3:return[2]}})})},$t.prototype.list=function(r){qt("list",[new Vt(Et,!0)],arguments);var i=this;return this.authWrapper.getAuthToken().then(function(t){var e=r||{},n=function(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&0<n.length&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=st(e.bucketOnlyServerUrl()),a=t.maxOperationRetryTime(),u=new Tt(s,"GET",Ct(t),a);return u.urlParams=o,u.errorHandler=Nt(e),u}(i.authWrapper,i.location,"/",e.pageToken,e.maxResults);return i.authWrapper.makeRequest(n,t).getPromise()})},$t.prototype.getMetadata=function(){var n=this;return qt("getMetadata",[],arguments),this.throwIfRoot_("getMetadata"),this.authWrapper.getAuthToken().then(function(t){var e=Dt(n.authWrapper,n.location,n.mappings());return n.authWrapper.makeRequest(e,t).getPromise()})},$t.prototype.updateMetadata=function(h){var l=this;return qt("updateMetadata",[Bt()],arguments),this.throwIfRoot_("updateMetadata"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s,a,u,c=(e=l.authWrapper,n=l.location,r=h,i=l.mappings(),o=st(n.fullServerUrl()),s=dt(r,i),a=e.maxOperationRetryTime(),(u=new Tt(o,"PATCH",St(e,i),a)).headers={"Content-Type":"application/json; charset=utf-8"},u.body=s,u.errorHandler=Ot(n),u);return l.authWrapper.makeRequest(c,t).getPromise()})},$t.prototype.getDownloadURL=function(){var u=this;return qt("getDownloadURL",[],arguments),this.throwIfRoot_("getDownloadURL"),this.authWrapper.getAuthToken().then(function(t){var e,n,r,i,o,s,a=(e=u.authWrapper,n=u.location,r=u.mappings(),i=st(n.fullServerUrl()),o=e.maxOperationRetryTime(),(s=new Tt(i,"GET",At(e,r),o)).errorHandler=Ot(n),s);return u.authWrapper.makeRequest(a,t).getPromise().then(function(t){if(null===t)throw new g(m.NO_DOWNLOAD_URL,"The given file does not have any download URLs.");return t})})},$t.prototype.throwIfRoot_=function(t){if(""===this.location.path)throw e=t,new g(m.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').");var e},$t);function $t(t,e){this.authWrapper=t,this.location=e instanceof nt?e:nt.makeFromUrl(e)}var Zt=(te.prototype.getPromise=function(){return this.promise_},te.prototype.cancel=function(t){},te);function te(t){this.promise_=Promise.reject(t)}var ee=(ne.prototype.addRequest=function(t){var e=this,n=this.id;this.id++,this.map.set(n,t),t.getPromise().then(function(){return e.map.delete(n)},function(){return e.map.delete(n)})},ne.prototype.clear=function(){this.map.forEach(function(t){t&&t.cancel(!0)}),this.map.clear()},ne);function ne(){this.map=new Map,this.id=-9007199254740991}var re=(ie.extractBucket_=function(t){var e=t[l]||null;return null==e?null:nt.makeFromBucketSpec(e).bucket},ie.prototype.getAuthToken=function(){var t=this.authProvider_.getImmediate({optional:!0});return t?t.getToken().then(function(t){return null!==t?t.accessToken:null},function(){return null}):Promise.resolve(null)},ie.prototype.bucket=function(){if(this.deleted_)throw E();return this.bucket_},ie.prototype.service=function(){return this.service_},ie.prototype.makeStorageReference=function(t){return this.storageRefMaker_(this,t)},ie.prototype.makeRequest=function(t,e){if(this.deleted_)return new Zt(E());var n=this.requestMaker_(t,this.appId_,e,this.pool_);return this.requestMap_.addRequest(n),n},ie.prototype.deleteApp=function(){this.deleted_=!0,this.app_=null,this.requestMap_.clear()},ie.prototype.maxUploadRetryTime=function(){return this.maxUploadRetryTime_},ie.prototype.setMaxUploadRetryTime=function(t){this.maxUploadRetryTime_=t},ie.prototype.maxOperationRetryTime=function(){return this.maxOperationRetryTime_},ie.prototype.setMaxOperationRetryTime=function(t){this.maxOperationRetryTime_=t},ie);function ie(t,e,n,r,i,o){var s;if(this.bucket_=null,this.appId_=null,this.deleted_=!1,this.app_=t,null!==this.app_){var a=this.app_.options;V(a)&&(this.bucket_=ie.extractBucket_(a),this.appId_=null!==(s=a.appId)&&void 0!==s?s:null)}this.authProvider_=e,this.storageRefMaker_=n,this.requestMaker_=r,this.pool_=o,this.service_=i,this.maxOperationRetryTime_=12e4,this.maxUploadRetryTime_=6e5,this.requestMap_=new ee}var oe=(se.prototype.start_=function(){var e,n,t,r,i,o,s,a,u,c=this;function h(t,e){var n,r=c.resolve_,i=c.reject_,o=e.xhr;if(e.wasSuccessCode)try{var s=c.callback_(o,o.getResponseText());H(s)?r(s):r()}catch(t){i(t)}else null!==o?((n=_()).setServerResponseProp(o.getResponseText()),c.errorCallback_?i(c.errorCallback_(o,n)):i(n)):e.canceled?i(n=(c.appDelete_?E:b)()):i(n=new g(m.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again."))}function l(){return 2===s}function f(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];a||(a=!0,n.apply(null,t))}function p(t){i=setTimeout(function(){i=null,e(d,l())},t)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];a||(t||l()||o?f.call.apply(f,y([null,t],e)):(r<64&&(r*=2),p(1===s?(s=2,0):1e3*(r+Math.random()))))}function v(t){u||(u=!0,a||(null!==i?(t||(s=2),clearTimeout(i),p(0)):t||(s=1)))}this.canceled_?h(0,new ae(!1,null,!0)):this.backoffId_=(e=function(o,t){if(t)o(!1,new ae(!1,null,!0));else{var e=c.pool_.createXhrIo();c.pendingXhr_=e,null!==c.progressCallback_&&e.addUploadProgressListener(s),e.send(c.url_,c.method_,c.body_,c.headers_).then(function(t){null!==c.progressCallback_&&t.removeUploadProgressListener(s),c.pendingXhr_=null;var e=(t=t).getErrorCode()===O.NO_ERROR,n=t.getStatus();if(e&&!c.isRetryStatusCode_(n)){var r=-1!==c.successCodes_.indexOf(n);o(!0,new ae(r,t))}else{var i=t.getErrorCode()===O.ABORT;o(!1,new ae(!1,null,i))}})}function s(t){var e=t.loaded,n=t.lengthComputable?t.total:-1;null!==c.progressCallback_&&c.progressCallback_(e,n)}},n=h,t=this.timeout_,i=null,u=a=o=!(r=1),p(s=0),setTimeout(function(){v(o=!0)},t),v)},se.prototype.getPromise=function(){return this.promise_},se.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingXhr_&&this.pendingXhr_.abort()},se.prototype.isRetryStatusCode_=function(t){var e=500<=t&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},se);function se(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingXhr_=null,this.backoffId_=null,this.resolve_=null,this.reject_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise(function(t,e){l.resolve_=t,l.reject_=e,l.start_()})}var ae=function(t,e,n){this.wasSuccessCode=t,this.xhr=e,this.canceled=!!n};function ue(t,e,n,r){var i,o,s,a,u,c,h=at(t.urlParams),l=t.url+h,f=Object.assign({},t.headers);return i=f,(o=e)&&(i["X-Firebase-GMPID"]=o),s=f,null!==(a=n)&&0<a.length&&(s.Authorization="Firebase "+a),u=f,c=void 0!==p.a?p.a.SDK_VERSION:"AppManager",u["X-Firebase-Storage-Version"]="webjs/"+c,new oe(l,t.method,f,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,r)}var ce=(he.prototype.ref=function(t){if(qt("ref",[Ht(function(t){if("string"!=typeof t)throw"Path is not a string.";if(/^[A-Za-z]+:\/\//.test(t))throw"Expected child path but got a URL, use refFromURL instead."},!0)],arguments),null==this.bucket_)throw new Error("No Storage Bucket defined in Firebase Options.");var e=new Jt(this.authWrapper_,this.bucket_);return null!=t?e.child(t):e},he.prototype.refFromURL=function(t){return qt("refFromURL",[Ht(function(t){if("string"!=typeof t)throw"Path is not a string.";if(!/^[A-Za-z]+:\/\//.test(t))throw"Expected full URL but got a child path, use ref instead.";try{nt.makeFromUrl(t)}catch(t){throw"Expected valid full URL but got an invalid one."}},!1)],arguments),new Jt(this.authWrapper_,t)},Object.defineProperty(he.prototype,"maxUploadRetryTime",{get:function(){return this.authWrapper_.maxUploadRetryTime()},enumerable:!0,configurable:!0}),he.prototype.setMaxUploadRetryTime=function(t){qt("setMaxUploadRetryTime",[Gt()],arguments),this.authWrapper_.setMaxUploadRetryTime(t)},he.prototype.setMaxOperationRetryTime=function(t){qt("setMaxOperationRetryTime",[Gt()],arguments),this.authWrapper_.setMaxOperationRetryTime(t)},Object.defineProperty(he.prototype,"app",{get:function(){return this.app_},enumerable:!0,configurable:!0}),Object.defineProperty(he.prototype,"INTERNAL",{get:function(){return this.internals_},enumerable:!0,configurable:!0}),he);function he(t,e,n,r){if(this.bucket_=null,this.authWrapper_=new re(t,e,function(t,e){return new Jt(t,e)},ue,this,n),this.app_=t,null!=r)this.bucket_=nt.makeFromBucketSpec(r);else{var i=this.authWrapper_.bucket();null!=i&&(this.bucket_=new nt(i,""))}this.internals_=new le(this)}var le=(fe.prototype.delete=function(){return this.service_.authWrapper_.deleteApp(),Promise.resolve()},fe);function fe(t){this.service_=t}var pe="@firebase/storage",de="0.3.30",ve="storage";function ye(t,e){var n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal");return new ce(n,r,new J,e)}function ge(t){var e={TaskState:U,TaskEvent:k,StringFormat:v,Storage:ce,Reference:Jt};t.INTERNAL.registerComponent(new o.Component(ve,ye,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),t.registerVersion(pe,de)}ge(p.a)},467:function(t,e,n){n(0),n(387),t.exports=n(425)},54:function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var u,c=[],h=!1,l=-1;function f(){h&&u&&(h=!1,u.length?c=u.concat(c):l=-1,c.length&&p())}function p(){if(!h){var t=a(f);h=!0;for(var e=c.length;e;){for(u=c,c=[];++l<e;)u&&u[l].run();l=-1,e=c.length}u=null,h=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];c.push(new d(t,e)),1!==c.length||h||a(p)},d.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},74:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var h=n(428),i=n(86),r=(o.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},o.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},o.prototype.setServiceProps=function(t){return this.serviceProps=t,this},o);function o(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var l="[DEFAULT]",s=(a.prototype.get=function(t){void 0===t&&(t=l);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.Deferred;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService(e);r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},a.prototype.getImmediate=function(t){var e=h.__assign({identifier:l,optional:!1},t),n=e.identifier,r=e.optional,i=this.normalizeInstanceIdentifier(n);try{var o=this.getOrInitializeService(i);if(o)return o;if(r)return null;throw Error("Service "+this.name+" is not available")}catch(t){if(r)return null;throw t}},a.prototype.getComponent=function(){return this.component},a.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if("EAGER"===(this.component=t).instantiationMode)try{this.getOrInitializeService(l)}catch(t){}try{for(var r=h.__values(this.instancesDeferred.entries()),i=r.next();!i.done;i=r.next()){var o=h.__read(i.value,2),s=o[0],a=o[1],u=this.normalizeInstanceIdentifier(s);try{var c=this.getOrInitializeService(u);a.resolve(c)}catch(t){}}}catch(t){e={error:t}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}},a.prototype.clearInstance=function(t){void 0===t&&(t=l),this.instancesDeferred.delete(t),this.instances.delete(t)},a.prototype.delete=function(){return h.__awaiter(this,void 0,void 0,function(){var e;return h.__generator(this,function(t){switch(t.label){case 0:return e=Array.from(this.instances.values()),[4,Promise.all(e.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))];case 1:return t.sent(),[2]}})})},a.prototype.isComponentSet=function(){return null!=this.component},a.prototype.getOrInitializeService=function(t){var e,n=this.instances.get(t);return!n&&this.component&&(n=this.component.instanceFactory(this.container,(e=t)===l?void 0:e),this.instances.set(t,n)),n||null},a.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:l:t},a);function a(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}var u=(c.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},c.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},c.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new s(t,this);return this.providers.set(t,e),e},c.prototype.getProviders=function(){return Array.from(this.providers.values())},c);function c(t){this.name=t,this.providers=new Map}e.Component=r,e.ComponentContainer=u,e.Provider=s},86:function(t,C,A){"use strict";(function(t){Object.defineProperty(C,"__esModule",{value:!0});function s(t,e){if(!t)throw i(e)}function n(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128):e[n++]=i>>12|224,e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e}function a(t){try{return o.decodeString(t,!0)}catch(t){console.error("base64Decode failed: ",t)}return null}var e=A(427),r={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},i=function(t){return new Error("Firebase Database ("+r.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,p=63&c;u||(p=64,s||(f=64)),r.push(n[h],n[l],n[f],n[p])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(n(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(191<i&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&(t[n]=u(t[n],e[n]));return t}var c=(h.prototype.wrapCallback=function(n){var r=this;return function(t,e){t?r.reject(t):r.resolve(e),"function"==typeof n&&(r.promise.catch(function(){}),1===n.length?n(t):n(t,e))}},h);function h(){var n=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})}function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var f,p=(f=Error,e.__extends(d,f),d);function d(t,e){var n=f.call(this,e)||this;return n.code=t,n.name="FirebaseError",Object.setPrototypeOf(n,d.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,v.prototype.create),n}var v=(y.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r,i=e[0]||{},o=this.service+"/"+t,s=this.errors[t],a=s?(r=i,s.replace(g,function(t,e){var n=r[e];return null!=n?n.toString():"<"+e+"?>"})):"Error",u=this.serviceName+": "+a+" ("+o+").",c=new p(o,u),h=0,l=Object.keys(i);h<l.length;h++){var f=l[h];"_"!==f.slice(-1)&&(f in c&&console.warn('Overwriting FirebaseError base field "'+f+'" can cause unexpected behavior.'),c[f]=i[f])}return c},y);function y(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var g=/\{\$([^}]+)}/g;function m(t){return JSON.parse(t)}function _(t){var e={},n={},r={},i="";try{var o=t.split(".");e=m(a(o[0])||""),n=m(a(o[1])||""),i=o[2],r=n.d||{},delete n.d}catch(t){}return{header:e,claims:n,data:r,signature:i}}var b=(w.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},w.prototype.compress_=function(t,e){e=e||0;var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)s=r<40?r<20?(o=h^u&(c^h),1518500249):(o=u^c^h,1859775393):r<60?(o=u&c|h&(u|c),2400959708):(o=u^c^h,3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},w.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},w.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;56<=n;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;0<=i;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t},w);function w(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}var E=(T.prototype.next=function(e){this.forEachObserver(function(t){t.next(e)})},T.prototype.error=function(e){this.forEachObserver(function(t){t.error(e)}),this.close(e)},T.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},T.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"==typeof t&&null!==t)for(var n=0,r=e;n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return 1}}(t,["next","error","complete"])?t:{next:t,error:e,complete:n}).next&&(r.next=I),void 0===r.error&&(r.error=I),void 0===r.complete&&(r.complete=I);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},T.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},T.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},T.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}})},T.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},T);function T(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}function I(){}function S(t,e,n){var r="";switch(e){case 1:r=n?"first":"First";break;case 2:r=n?"second":"Second";break;case 3:r=n?"third":"Third";break;case 4:r=n?"fourth":"Fourth";break;default:throw new Error("errorPrefix called with argumentNumber > 4.  Need to update it?")}var i=t+" failed: ";return i+=r+" argument "}C.CONSTANTS=r,C.Deferred=c,C.ErrorFactory=v,C.FirebaseError=p,C.Sha1=b,C.assert=s,C.assertionError=i,C.async=function(n,r){return function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];Promise.resolve(!0).then(function(){n.apply(void 0,t)}).catch(function(t){r&&r(t)})}},C.base64=o,C.base64Decode=a,C.base64Encode=function(t){var e=n(t);return o.encodeByteArray(e,!0)},C.contains=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},C.createSubscribe=function(t,e){var n=new E(t,e);return n.subscribe.bind(n)},C.decode=_,C.deepCopy=function(t){return u(void 0,t)},C.deepExtend=u,C.errorPrefix=S,C.getUA=l,C.isAdmin=function(t){var e=_(t).claims;return"object"==typeof e&&!0===e.admin},C.isBrowser=function(){return"object"==typeof self&&self.self===self},C.isBrowserExtension=function(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id},C.isElectron=function(){return 0<=l().indexOf("Electron/")},C.isEmpty=function(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0},C.isIE=function(){var t=l();return 0<=t.indexOf("MSIE ")||0<=t.indexOf("Trident/")},C.isMobileCordova=function(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())},C.isNode=function(){try{return"[object process]"===Object.prototype.toString.call(t.process)}catch(t){return!1}},C.isNodeSdk=function(){return!0===r.NODE_CLIENT||!0===r.NODE_ADMIN},C.isReactNative=function(){return"object"==typeof navigator&&"ReactNative"===navigator.product},C.isUWP=function(){return 0<=l().indexOf("MSAppHost/")},C.isValidFormat=function(t){var e=_(t).claims;return!!e&&"object"==typeof e&&e.hasOwnProperty("iat")},C.isValidTimestamp=function(t){var e=_(t).claims,n=Math.floor((new Date).getTime()/1e3),r=0,i=0;return"object"==typeof e&&(e.hasOwnProperty("nbf")?r=e.nbf:e.hasOwnProperty("iat")&&(r=e.iat),i=e.hasOwnProperty("exp")?e.exp:r+86400),!!n&&!!r&&!!i&&r<=n&&n<=i},C.issuedAtTime=function(t){var e=_(t).claims;return"object"==typeof e&&e.hasOwnProperty("iat")?e.iat:null},C.jsonEval=m,C.map=function(t,e,n){var r={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r},C.querystring=function(t){for(var n=[],e=function(e,t){Array.isArray(t)?t.forEach(function(t){n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))}):n.push(encodeURIComponent(e)+"="+encodeURIComponent(t))},r=0,i=Object.entries(t);r<i.length;r++){var o=i[r];e(o[0],o[1])}return n.length?"&"+n.join("&"):""},C.querystringDecode=function(t){var n={};return t.replace(/^\?/,"").split("&").forEach(function(t){if(t){var e=t.split("=");n[e[0]]=e[1]}}),n},C.safeGet=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)?t[e]:void 0},C.stringLength=function(t){for(var e=0,n=0;n<t.length;n++){var r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:55296<=r&&r<=56319?(e+=4,n++):e+=3}return e},C.stringToByteArray=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);if(55296<=i&&i<=56319){var o=i-55296;s(++r<t.length,"Surrogate pair missing trail surrogate."),i=65536+(o<<10)+(t.charCodeAt(r)-56320)}i<128?e[n++]=i:(i<2048?e[n++]=i>>6|192:(i<65536?e[n++]=i>>12|224:(e[n++]=i>>18|240,e[n++]=i>>12&63|128),e[n++]=i>>6&63|128),e[n++]=63&i|128)}return e},C.stringify=function(t){return JSON.stringify(t)},C.validateArgCount=function(t,e,n,r){var i;if(r<e?i="at least "+e:n<r&&(i=0===n?"none":"no more than "+n),i)throw new Error(t+" failed: Was called with "+r+(1===r?" argument.":" arguments.")+" Expects "+i+".")},C.validateCallback=function(t,e,n,r){if((!r||n)&&"function"!=typeof n)throw new Error(S(t,e,r)+"must be a valid function.")},C.validateContextObject=function(t,e,n,r){if((!r||n)&&("object"!=typeof n||null===n))throw new Error(S(t,e,r)+"must be a valid context object.")},C.validateNamespace=function(t,e,n,r){if((!r||n)&&"string"!=typeof n)throw new Error(S(t,e,r)+"must be a valid firebase namespace.")}}).call(this,A(38))}}]);